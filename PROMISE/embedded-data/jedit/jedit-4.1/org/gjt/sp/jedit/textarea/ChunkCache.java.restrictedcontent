ChunkCache
lineToChunkList
seg
Segment
tokens
Token
styles
SyntaxStyle
fontRenderContext
FontRenderContext
e
TabExpander
wrapMargin
float
out
java
util
List
if
wrapMargin
wrapMargin
float
x
float
endX
boolean
seenNonWhiteSpace
boolean
addedNonWhiteSpace
boolean
lastWasSpace
float
firstNonWhiteSpace
Chunk
first
Chunk
current
Chunk
end
int
tokenListOffset
while
id
END
block
int
flushIndex
tokenListOffset
for
forControl
int
i
tokenListOffset
i
tokenListOffset
length
i
block
char
ch
array
offset
i
if
ch
ch
wrapMargin
block
if
i
flushIndex
block
Chunk
newChunk
Chunk
id
seg
flushIndex
i
styles
fontRenderContext
if
current
next
newChunk
current
newChunk
x
width
lastWasSpace
seenNonWhiteSpace
if
end
lastWasSpace
addedNonWhiteSpace
wrapMargin
x
wrapMargin
block
if
first
add
first
first
Chunk
firstNonWhiteSpace
offset
next
next
next
x
x
firstNonWhiteSpace
endX
if
first
first
current
if
ch
block
Chunk
newChunk
Chunk
id
seg
i
i
styles
fontRenderContext
if
first
first
current
newChunk
block
next
newChunk
current
newChunk
x
width
if
ch
block
Chunk
newChunk
Chunk
id
seg
i
i
styles
fontRenderContext
if
first
first
current
newChunk
block
next
newChunk
current
newChunk
float
newX
nextTabStop
x
i
tokenListOffset
width
newX
x
x
newX
length
if
first
first
current
end
current
endX
x
if
flushIndex
i
flushIndex
i
lastWasSpace
addedNonWhiteSpace
seenNonWhiteSpace
if
seenNonWhiteSpace
firstNonWhiteSpace
x
if
i
tokenListOffset
length
block
if
flushIndex
i
block
Chunk
newChunk
Chunk
id
seg
flushIndex
i
styles
fontRenderContext
if
current
next
newChunk
current
newChunk
x
width
seenNonWhiteSpace
lastWasSpace
if
i
count
wrapMargin
x
wrapMargin
addedNonWhiteSpace
end
block
if
first
add
first
first
Chunk
firstNonWhiteSpace
offset
next
next
next
x
x
firstNonWhiteSpace
endX
if
first
first
current
addedNonWhiteSpace
seenNonWhiteSpace
tokenListOffset
length
tokens
next
if
first
add
first
paintChunkList
float
chunks
Chunk
gfx
Graphics2D
x
float
y
float
background
Color
glyphVector
boolean
FontMetrics
forBackground
getFontMetrics
float
_x
Chunk
first
chunks
Font
lastFont
Color
lastColor
while
chunks
block
if
inaccessable
block
Font
font
getFont
Color
bgColor
getBackgroundColor
if
bgColor
block
float
x2
_x
width
Graphics2D
xorGfx
Graphics2D
create
setXORMode
background
setColor
bgColor
fill
Rectangle2D
Float
x
_x
y
getAscent
x2
_x
getHeight
dispose
if
str
block
setFont
font
setColor
getForegroundColor
if
glyphVector
drawGlyphVector
text
x
_x
y
drawString
str
x
_x
y
_x
width
chunks
next
return
_x
offsetToX
float
chunks
Chunk
offset
int
if
chunks
offset
offset
block
throw
ArrayIndexOutOfBoundsException
offset
offset
float
x
while
chunks
block
if
inaccessable
offset
offset
length
block
if
text
break
block
return
x
positions
offset
offset
x
width
chunks
next
return
x
xToOffset
int
chunks
Chunk
x
float
round
boolean
float
_x
while
chunks
block
if
inaccessable
x
_x
width
block
if
text
block
if
round
_x
width
x
x
_x
return
offset
length
return
offset
block
float
xInChunk
x
_x
for
forControl
int
i
i
length
i
block
float
glyphX
positions
i
float
nextX
i
length
width
positions
i
if
nextX
xInChunk
block
if
round
nextX
xInChunk
xInChunk
glyphX
return
offset
i
return
offset
i
_x
width
chunks
next
return
Chunk
boolean
inaccessable
float
width
SyntaxStyle
style
int
offset
int
length
String
str
GlyphVector
text
float
positions
Chunk
next
Chunk
width
float
offset
int
inaccessable
width
width
offset
offset
Chunk
tokenType
int
seg
Segment
offset
int
end
int
styles
SyntaxStyle
fontRenderContext
FontRenderContext
style
styles
tokenType
if
offset
end
block
length
end
offset
str
String
array
offset
offset
length
text
getFont
createGlyphVector
fontRenderContext
str
width
float
getLogicalBounds
getWidth
positions
getGlyphPositions
length
offset
offset
ChunkCache
textArea
JEditTextArea
textArea
textArea
out
ArrayList
getMaxHorizontalScrollWidth
int
int
max
for
forControl
int
i
i
length
i
block
LineInfo
info
lineInfo
i
if
chunksValid
width
max
max
width
return
max
getScreenLineOfOffset
int
line
int
offset
int
if
line
getFirstPhysicalLine
block
return
if
line
getLastPhysicalLine
block
return
if
softWrap
block
return
physicalToVirtual
line
getFirstLine
block
int
screenLine
if
line
lastScreenLineP
block
LineInfo
last
lineInfo
lastScreenLine
if
offset
offset
offset
offset
length
block
updateChunksUpTo
lastScreenLine
return
lastScreenLine
screenLine
for
forControl
int
i
i
length
i
block
updateChunksUpTo
i
LineInfo
info
getLineInfo
i
if
physicalLine
line
block
if
i
screenLine
screenLine
i
break
if
physicalLine
line
block
if
offset
offset
offset
offset
length
block
screenLine
i
break
if
screenLine
return
block
lastScreenLineP
line
lastScreenLine
screenLine
return
screenLine
recalculateVisibleLines
lineInfo
LineInfo
getVisibleLines
for
forControl
int
i
i
length
i
lineInfo
i
LineInfo
lastScreenLine
lastScreenLineP
setFirstLine
firstLine
int
if
softWrap
abs
firstLine
firstLine
length
block
for
forControl
int
i
i
length
i
block
lineInfo
i
chunksValid
if
firstLine
firstLine
block
arraycopy
lineInfo
firstLine
firstLine
lineInfo
length
firstLine
firstLine
for
forControl
int
i
length
firstLine
firstLine
i
length
i
block
lineInfo
i
LineInfo
if
firstLine
firstLine
block
arraycopy
lineInfo
lineInfo
firstLine
firstLine
length
firstLine
firstLine
for
forControl
int
i
i
firstLine
firstLine
i
block
lineInfo
i
LineInfo
lastScreenLine
lastScreenLineP
firstLine
firstLine
invalidateAll
for
forControl
int
i
i
length
i
block
lineInfo
i
chunksValid
lastScreenLine
lastScreenLineP
invalidateChunksFrom
screenLine
int
for
forControl
int
i
screenLine
i
length
i
block
lineInfo
i
chunksValid
lastScreenLine
lastScreenLineP
invalidateChunksFromPhys
physicalLine
int
for
forControl
int
i
i
length
i
block
if
lineInfo
i
physicalLine
physicalLine
block
invalidateChunksFrom
i
break
lineToChunkList
physicalLine
int
out
ArrayList
TextAreaPainter
painter
getPainter
Buffer
buffer
getBuffer
getLineText
physicalLine
lineSegment
lineToChunkList
lineSegment
markTokens
getFirstToken
physicalLine
getStyles
getFontRenderContext
painter
softWrap
wrapMargin
out
updateChunksUpTo
lastScreenLine
int
if
softWrap
return
if
lineInfo
lastScreenLine
chunksValid
return
int
firstScreenLine
for
forControl
int
i
lastScreenLine
i
i
block
if
lineInfo
i
chunksValid
block
firstScreenLine
i
break
int
physicalLine
if
firstScreenLine
block
physicalLine
getFirstPhysicalLine
block
int
prevPhysLine
lineInfo
firstScreenLine
physicalLine
if
prevPhysLine
physicalLine
block
physicalLine
getFoldVisibilityManager
getNextVisibleLine
prevPhysLine
clear
int
offset
int
length
for
forControl
int
i
firstScreenLine
i
lastScreenLine
i
block
LineInfo
info
lineInfo
i
Chunk
chunks
if
size
block
if
physicalLine
i
firstScreenLine
block
physicalLine
getFoldVisibilityManager
getNextVisibleLine
physicalLine
if
physicalLine
block
chunks
chunksValid
physicalLine
continue
lineToChunkList
physicalLine
out
firstSubregion
if
size
block
chunks
offset
length
block
chunks
Chunk
get
remove
offset
if
size
length
Chunk
get
offset
length
getLineLength
physicalLine
offset
block
firstSubregion
chunks
Chunk
get
remove
offset
offset
if
size
length
Chunk
get
offset
length
getLineLength
physicalLine
offset
boolean
lastSubregion
size
if
i
lastScreenLine
lastScreenLine
length
block
if
physicalLine
physicalLine
lastSubregion
lastSubregion
block
lastScreenLine
needFullRepaint
if
size
lastScreenLine
physicalLine
physicalLine
lastSubregion
lastSubregion
offset
offset
length
length
chunks
chunks
chunksValid
getLineInfo
LineInfo
screenLine
int
LineInfo
info
lineInfo
screenLine
if
softWrap
block
if
chunksValid
log
ERROR
screenLine
return
info
block
if
chunksValid
block
int
virtLine
screenLine
firstLine
if
virtLine
getVirtualLineCount
block
chunks
chunksValid
physicalLine
block
physicalLine
getFoldVisibilityManager
virtualToPhysical
virtLine
clear
lineToChunkList
physicalLine
out
firstSubregion
lastSubregion
offset
length
getLineLength
physicalLine
chunks
size
Chunk
get
chunksValid
return
info
getLineInfosForPhysicalLine
LineInfo
physicalLine
int
clear
lineToChunkList
physicalLine
out
if
size
add
LineInfo
returnValue
LineInfo
size
for
forControl
int
i
i
size
i
block
Chunk
chunks
Chunk
get
i
LineInfo
info
LineInfo
physicalLine
physicalLine
if
i
block
firstSubregion
offset
offset
offset
if
i
size
block
lastSubregion
length
getLineLength
physicalLine
offset
block
length
Chunk
get
i
offset
chunksValid
chunks
chunks
returnValue
i
info
return
returnValue
needFullRepaint
boolean
boolean
retVal
needFullRepaint
needFullRepaint
return
retVal
getLineInfoBackwardsCompatibility
LineInfo
physicalLineIndex
int
LineInfo
info
LineInfo
clear
Buffer
buffer
getBuffer
getLineText
physicalLineIndex
lineSegment
TextAreaPainter
painter
getPainter
lineToChunkList
lineSegment
markTokens
getFirstToken
physicalLineIndex
getStyles
getFontRenderContext
painter
out
if
size
chunks
chunks
Chunk
get
physicalLine
physicalLineIndex
chunksValid
return
info
JEditTextArea
textArea
int
firstLine
LineInfo
lineInfo
ArrayList
out
int
lastScreenLineP
int
lastScreenLine
boolean
needFullRepaint
LineInfo
int
physicalLine
int
offset
int
length
boolean
firstSubregion
boolean
lastSubregion
boolean
chunksValid
Chunk
chunks
int
width
