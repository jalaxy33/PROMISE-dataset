Reflect
invokeObjectMethod
Object
object
Object
methodName
String
args
Object
interpreter
Interpreter
callstack
CallStack
callerInfo
SimpleNode
if
object
This
isExposedThisMethod
methodName
return
This
object
try
BshClassManager
bcm
interpreter
getClassManager
Class
clas
getClass
Method
method
resolveExpectedJavaMethod
bcm
clas
object
methodName
args
return
invokeMethod
method
object
args
catchClause
e
throw
toEvalError
callerInfo
callstack
invokeStaticMethod
Object
bcm
BshClassManager
clas
Class
methodName
String
args
Object
debug
Method
method
resolveExpectedJavaMethod
bcm
clas
methodName
args
return
invokeMethod
method
args
invokeMethod
Object
method
Method
object
Object
args
Object
if
args
args
Object
logInvokeMethod
method
args
Object
tmpArgs
Object
length
Class
types
getParameterTypes
try
for
forControl
int
i
i
length
i
tmpArgs
i
castObject
args
i
types
i
ASSIGNMENT
catchClause
e
throw
InterpreterError
e
tmpArgs
unwrap
tmpArgs
logInvokeMethod
method
tmpArgs
try
Object
returnValue
invoke
object
tmpArgs
if
returnValue
returnValue
NULL
Class
returnType
getReturnType
return
wrap
returnValue
returnType
catchClause
e
throw
ReflectError
methodString
getName
getParameterTypes
getDeclaringClass
e
getIndex
Object
array
Object
index
int
if
DEBUG
debug
array
index
try
Object
val
get
array
index
return
wrap
val
getClass
getComponentType
catchClause
e1
throw
UtilTargetError
e1
catchClause
e
throw
ReflectError
e
setIndex
array
Object
index
int
val
Object
try
val
unwrap
val
set
array
index
val
catchClause
e2
throw
UtilTargetError
e2
catchClause
e1
throw
UtilTargetError
ArrayStoreException
toString
catchClause
e
throw
ReflectError
e
getStaticFieldValue
Object
clas
Class
fieldName
String
return
getFieldValue
clas
fieldName
getObjectFieldValue
Object
object
Object
fieldName
String
if
object
This
return
This
object
block
try
return
getFieldValue
getClass
object
fieldName
catchClause
e
if
hasObjectPropertyGetter
getClass
fieldName
return
getObjectProperty
object
fieldName
throw
e
getLHSStaticField
LHS
clas
Class
fieldName
String
Field
f
resolveExpectedJavaField
clas
fieldName
return
LHS
f
getLHSObjectField
LHS
object
Object
fieldName
String
if
object
This
block
boolean
recurse
return
LHS
This
object
fieldName
recurse
try
Field
f
resolveExpectedJavaField
getClass
fieldName
return
LHS
object
f
catchClause
e
if
hasObjectPropertySetter
getClass
fieldName
return
LHS
object
fieldName
throw
e
getFieldValue
Object
clas
Class
object
Object
fieldName
String
staticOnly
boolean
try
Field
f
resolveExpectedJavaField
clas
fieldName
staticOnly
Object
value
get
object
Class
returnType
getType
return
wrap
value
returnType
catchClause
e
throw
ReflectError
fieldName
catchClause
e
throw
ReflectError
fieldName
resolveJavaField
Field
clas
Class
fieldName
String
staticOnly
boolean
try
return
resolveExpectedJavaField
clas
fieldName
staticOnly
catchClause
e
return
resolveExpectedJavaField
Field
clas
Class
fieldName
String
staticOnly
boolean
Field
field
try
if
haveAccessibility
field
findAccessibleField
clas
fieldName
field
getField
fieldName
catchClause
e
throw
ReflectError
fieldName
catchClause
e
throw
UtilTargetError
clas
e
if
staticOnly
isStatic
getModifiers
throw
UtilEvalError
fieldName
getName
return
field
findAccessibleField
Field
clas
Class
fieldName
String
Field
field
try
field
getField
fieldName
RMSetAccessible
field
return
field
catchClause
e
while
clas
block
try
field
getDeclaredField
fieldName
RMSetAccessible
field
return
field
catchClause
e
clas
getSuperclass
throw
NoSuchFieldException
fieldName
resolveExpectedJavaMethod
Method
bcm
BshClassManager
clas
Class
object
Object
name
String
args
Object
staticOnly
boolean
if
object
NULL
throw
UtilTargetError
NullPointerException
name
Class
types
getTypes
args
Method
method
resolveJavaMethod
bcm
clas
name
types
staticOnly
if
method
throw
ReflectError
staticOnly
methodString
name
types
getName
return
method
resolveJavaMethod
Method
bcm
BshClassManager
clas
Class
name
String
types
Class
staticOnly
boolean
if
clas
throw
InterpreterError
Method
method
if
bcm
debug
method
getResolvedMethod
clas
name
types
staticOnly
if
method
block
boolean
publicOnly
haveAccessibility
try
method
findOverloadedMethod
clas
name
types
publicOnly
catchClause
e
throw
UtilTargetError
clas
e
checkFoundStaticMethod
method
staticOnly
clas
if
method
publicOnly
block
try
RMSetAccessible
method
catchClause
e
if
method
bcm
cacheResolvedMethod
clas
types
method
return
method
findOverloadedMethod
Method
baseClass
Class
methodName
String
types
Class
publicOnly
boolean
if
DEBUG
debug
methodString
methodName
types
getName
Method
methods
getCandidateMethods
baseClass
methodName
length
publicOnly
if
DEBUG
debug
methodName
Method
method
findMostSpecificMethod
types
methods
return
method
getCandidateMethods
Method
baseClass
Class
methodName
String
numArgs
int
publicOnly
boolean
Vector
candidates
gatherMethodsRecursive
baseClass
methodName
numArgs
publicOnly
Method
ma
Method
size
copyInto
ma
return
ma
gatherMethodsRecursive
Vector
baseClass
Class
methodName
String
numArgs
int
publicOnly
boolean
candidates
Vector
if
candidates
candidates
Vector
if
publicOnly
block
if
isPublic
baseClass
addCandidates
getMethods
methodName
numArgs
publicOnly
candidates
addCandidates
getDeclaredMethods
methodName
numArgs
publicOnly
candidates
Class
intfs
getInterfaces
for
forControl
int
i
i
length
i
gatherMethodsRecursive
intfs
i
methodName
numArgs
publicOnly
candidates
Class
superclass
getSuperclass
if
superclass
gatherMethodsRecursive
superclass
methodName
numArgs
publicOnly
candidates
return
candidates
addCandidates
Vector
methods
Method
methodName
String
numArgs
int
publicOnly
boolean
candidates
Vector
for
forControl
int
i
i
length
i
block
Method
m
methods
i
if
getName
equals
methodName
getParameterTypes
length
numArgs
publicOnly
isPublic
m
add
m
return
candidates
constructObject
Object
clas
Class
args
Object
if
isInterface
throw
ReflectError
clas
Object
obj
Class
types
getTypes
args
Constructor
con
Constructor
constructors
haveAccessibility
getDeclaredConstructors
getConstructors
if
DEBUG
debug
clas
con
findMostSpecificConstructor
types
constructors
if
con
throw
cantFindConstructor
clas
types
if
isPublic
con
try
RMSetAccessible
con
catchClause
e
args
unwrap
args
try
obj
newInstance
args
catchClause
e
throw
ReflectError
clas
catchClause
e
throw
ReflectError
catchClause
e
throw
ReflectError
if
obj
throw
ReflectError
return
obj
findMostSpecificConstructor
Constructor
idealMatch
Class
constructors
Constructor
int
match
findMostSpecificConstructorIndex
idealMatch
constructors
return
match
constructors
match
findMostSpecificConstructorIndex
int
idealMatch
Class
constructors
Constructor
Class
candidates
Class
length
for
forControl
int
i
i
length
i
candidates
i
constructors
i
getParameterTypes
return
findMostSpecificSignature
idealMatch
candidates
findMostSpecificMethod
Method
idealMatch
Class
methods
Method
Class
candidateSigs
Class
length
for
forControl
int
i
i
length
i
candidateSigs
i
methods
i
getParameterTypes
int
match
findMostSpecificSignature
idealMatch
candidateSigs
return
match
methods
match
findMostSpecificSignature
int
idealMatch
Class
candidates
Class
for
forControl
int
round
FIRST_ROUND_ASSIGNABLE
round
LAST_ROUND_ASSIGNABLE
round
block
Class
bestMatch
int
bestMatchIndex
for
forControl
int
i
i
length
i
block
Class
targetMatch
candidates
i
if
isSignatureAssignable
idealMatch
targetMatch
round
bestMatch
isSignatureAssignable
targetMatch
bestMatch
JAVA_BASE_ASSIGNABLE
block
bestMatch
targetMatch
bestMatchIndex
i
if
bestMatch
return
bestMatchIndex
return
accessorName
String
getorset
String
propName
String
return
getorset
valueOf
toUpperCase
charAt
substring
hasObjectPropertyGetter
boolean
clas
Class
propName
String
String
getterName
accessorName
propName
try
getMethod
getterName
Class
return
catchClause
e
getterName
accessorName
propName
try
Method
m
getMethod
getterName
Class
return
getReturnType
TYPE
catchClause
e
return
hasObjectPropertySetter
boolean
clas
Class
propName
String
String
setterName
accessorName
propName
Method
methods
getMethods
for
forControl
int
i
i
length
i
if
methods
i
getName
equals
setterName
return
return
getObjectProperty
Object
obj
Object
propName
String
Object
args
Object
debug
Method
method
Exception
e1
e2
try
String
accessorName
accessorName
propName
method
resolveExpectedJavaMethod
getClass
obj
accessorName
args
catchClause
e
e1
e
if
method
try
String
accessorName
accessorName
propName
method
resolveExpectedJavaMethod
getClass
obj
accessorName
args
if
getReturnType
TYPE
method
catchClause
e
e2
e
if
method
throw
ReflectError
e1
e2
e2
try
return
invokeMethod
method
obj
args
catchClause
e
throw
UtilEvalError
getTargetException
setObjectProperty
obj
Object
propName
String
value
Object
String
accessorName
accessorName
propName
Object
args
Object
value
debug
try
Method
method
resolveExpectedJavaMethod
getClass
obj
accessorName
args
invokeMethod
method
obj
args
catchClause
e
throw
UtilEvalError
getTargetException
normalizeClassName
String
type
Class
if
isArray
return
getName
StringBuilder
className
StringBuilder
try
append
getArrayBaseType
getName
type
for
forControl
int
i
i
getArrayDimensions
type
i
append
catchClause
e
return
toString
getArrayDimensions
int
arrayClass
Class
if
isArray
return
return
getName
lastIndexOf
getArrayBaseType
Class
arrayClass
Class
if
isArray
throw
ReflectError
return
getComponentType
invokeCompiledCommand
Object
commandClass
Class
args
Object
interpreter
Interpreter
callstack
CallStack
Object
invokeArgs
Object
length
invokeArgs
interpreter
invokeArgs
callstack
arraycopy
args
invokeArgs
length
BshClassManager
bcm
getClassManager
try
return
invokeStaticMethod
bcm
commandClass
invokeArgs
catchClause
e
throw
UtilEvalError
getTargetException
catchClause
e
throw
UtilEvalError
e
logInvokeMethod
msg
String
method
Method
args
Object
if
DEBUG
block
debug
msg
method
for
forControl
int
i
i
length
i
debug
i
args
i
args
i
getClass
checkFoundStaticMethod
method
Method
staticOnly
boolean
clas
Class
if
method
staticOnly
isStatic
method
throw
UtilEvalError
methodString
getName
getParameterTypes
getName
cantFindConstructor
ReflectError
clas
Class
types
Class
if
length
return
ReflectError
clas
return
ReflectError
methodString
getName
types
getName
isPublic
boolean
c
Class
return
isPublic
getModifiers
isPublic
boolean
m
Method
return
isPublic
getModifiers
isPublic
boolean
c
Constructor
return
isPublic
getModifiers
isStatic
boolean
m
Method
return
isStatic
getModifiers
