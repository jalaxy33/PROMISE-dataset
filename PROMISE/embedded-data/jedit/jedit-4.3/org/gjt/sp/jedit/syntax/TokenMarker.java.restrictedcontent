TokenMarker
TokenMarker
addRuleSet
rules
ParserRuleSet
put
getSetName
rules
if
getSetName
equals
mainRuleSet
rules
getMainRuleSet
ParserRuleSet
return
mainRuleSet
getRuleSet
ParserRuleSet
setName
String
return
get
setName
getRuleSets
ParserRuleSet
return
values
toArray
ParserRuleSet
size
markTokens
LineContext
prevContext
LineContext
tokenHandler
TokenHandler
line
Segment
tokenHandler
tokenHandler
line
line
lastOffset
offset
lineLength
count
offset
context
LineContext
if
prevContext
block
rules
getMainRuleSet
escapeRule
getEscapeRule
block
parent
parent
setInRule
inRule
rules
rules
spanEndSubst
spanEndSubst
keywords
getKeywords
seenWhitespaceEnd
whitespaceEnd
offset
int
terminateChar
getTerminateChar
boolean
terminated
for
forControl
pos
offset
pos
lineLength
pos
block
if
terminateChar
pos
offset
terminateChar
terminated
block
terminated
context
LineContext
getStandardRuleSet
getDefault
context
keywords
getKeywords
if
escapeRule
handleRule
escapeRule
block
continue
if
parent
inRule
checkDelegateEnd
inRule
block
seenWhitespaceEnd
continue
Character
ch
valueOf
array
pos
List
ParserRule
rules
getRules
ch
for
ParserRule
rule
rules
block
if
handleRule
rule
block
seenWhitespaceEnd
continue
if
isWhitespace
ch
block
if
seenWhitespaceEnd
whitespaceEnd
pos
if
inRule
handleRule
inRule
handleNoWordBreak
markKeyword
if
lastOffset
pos
block
handleToken
line
getDefault
lastOffset
offset
pos
lastOffset
context
handleToken
line
getDefault
pos
offset
context
lastOffset
pos
block
if
keywords
getRuleCount
block
String
noWordSep
getNoWordSep
if
isLetterOrDigit
ch
indexOf
ch
block
if
inRule
handleRule
inRule
handleNoWordBreak
markKeyword
handleToken
line
getDefault
lastOffset
offset
context
lastOffset
pos
seenWhitespaceEnd
pos
lineLength
if
inRule
handleRule
inRule
handleNoWordBreak
markKeyword
while
parent
block
ParserRule
rule
inRule
if
rule
action
NO_LINE_BREAK
NO_LINE_BREAK
terminated
block
context
parent
keywords
getKeywords
setInRule
break
handleToken
line
END
pos
offset
context
context
intern
setLineContext
context
tokenHandler
line
return
context
Map
String
ParserRuleSet
ruleSets
Hashtable
String
ParserRuleSet
ParserRuleSet
mainRuleSet
TokenHandler
tokenHandler
Segment
line
LineContext
context
KeywordMap
keywords
Segment
pattern
Segment
int
lastOffset
int
lineLength
int
pos
int
whitespaceEnd
boolean
seenWhitespaceEnd
checkDelegateEnd
boolean
rule
ParserRule
if
end
return
LineContext
tempContext
context
context
parent
keywords
getKeywords
boolean
handled
handleRule
rule
context
tempContext
keywords
getKeywords
if
handled
block
if
inRule
handleRule
inRule
markKeyword
context
LineContext
clone
handleToken
line
matchToken
inRule
inRule
context
pos
offset
count
context
keywords
getKeywords
setInRule
lastOffset
pos
count
pos
count
return
return
handleRule
boolean
checkRule
ParserRule
end
boolean
if
end
block
if
upHashChars
block
if
upHashChar
pos
length
length
checkHashString
checkRule
block
return
block
if
binarySearch
upHashChars
toUpperCase
array
pos
block
return
int
offset
action
MARK_PREVIOUS
lastOffset
pos
int
posMatch
end
endPosMatch
startPosMatch
if
posMatch
AT_LINE_START
AT_LINE_START
block
if
offset
offset
block
return
if
posMatch
AT_WHITESPACE_END
AT_WHITESPACE_END
block
if
offset
whitespaceEnd
block
return
if
posMatch
AT_WORD_START
AT_WORD_START
block
if
offset
lastOffset
block
return
int
matchedChars
CharSequence
charSeq
Matcher
match
if
end
action
MARK_FOLLOWING
block
if
action
REGEXP
end
block
if
end
block
if
spanEndSubst
array
spanEndSubst
array
end
array
start
offset
count
length
matchedChars
count
if
regionMatches
getIgnoreCase
line
pos
array
block
return
block
charSeq
SegmentCharSequence
line
pos
offset
count
pos
offset
match
matcher
charSeq
if
lookingAt
block
return
if
start
block
throw
InternalError
block
matchedChars
end
if
matchedChars
matchedChars
if
action
IS_ESCAPE
IS_ESCAPE
block
pos
count
if
end
block
if
inRule
handleRule
inRule
markKeyword
action
MARK_PREVIOUS
MARK_PREVIOUS
switch
action
MAJOR_ACTIONS
case
SEQ
spanEndSubst
if
action
REGEXP
block
handleTokenWithSpaces
tokenHandler
token
pos
offset
matchedChars
context
block
handleToken
line
token
pos
offset
matchedChars
context
if
delegate
block
context
LineContext
delegate
parent
keywords
getKeywords
break
case
SPAN
EOL_SPAN
setInRule
checkRule
byte
tokenType
matchToken
checkRule
inRule
context
if
action
REGEXP
block
handleTokenWithSpaces
tokenHandler
tokenType
pos
offset
matchedChars
context
block
handleToken
line
tokenType
pos
offset
matchedChars
context
char
spanEndSubst
if
charSeq
end
block
spanEndSubst
substitute
match
end
spanEndSubst
spanEndSubst
context
LineContext
delegate
context
keywords
getKeywords
break
case
MARK_FOLLOWING
handleToken
line
matchToken
checkRule
checkRule
context
pos
offset
count
context
spanEndSubst
setInRule
checkRule
break
case
MARK_PREVIOUS
spanEndSubst
if
pos
lastOffset
block
handleToken
line
token
lastOffset
offset
pos
lastOffset
context
handleToken
line
matchToken
checkRule
checkRule
context
pos
offset
count
context
break
case
throw
InternalError
pos
matchedChars
lastOffset
pos
if
action
MARK_FOLLOWING
block
if
pos
lastOffset
block
handleToken
line
token
lastOffset
offset
pos
lastOffset
context
lastOffset
pos
setInRule
return
handleNoWordBreak
if
parent
block
ParserRule
rule
inRule
if
rule
action
NO_WORD_BREAK
block
if
pos
lastOffset
block
handleToken
line
token
lastOffset
offset
pos
lastOffset
context
lastOffset
pos
context
parent
keywords
getKeywords
setInRule
handleTokenWithSpaces
tokenHandler
TokenHandler
tokenType
byte
start
int
len
int
context
LineContext
int
last
start
int
end
start
len
for
forControl
int
i
start
i
end
i
block
if
isWhitespace
array
i
offset
block
if
last
i
block
handleToken
line
tokenType
last
i
last
context
handleToken
line
tokenType
i
context
last
i
if
last
end
block
handleToken
line
tokenType
last
end
last
context
markKeyword
addRemaining
boolean
int
len
pos
lastOffset
if
len
return
if
getHighlightDigits
block
boolean
digit
boolean
mixed
for
forControl
int
i
lastOffset
i
pos
i
block
char
ch
array
i
if
isDigit
ch
digit
mixed
if
mixed
block
Pattern
digitRE
getDigitRegexp
if
digit
block
if
digitRE
block
digit
block
int
oldCount
count
int
oldOffset
offset
offset
lastOffset
count
len
CharSequence
seq
SegmentCharSequence
line
digit
matcher
matches
seq
offset
oldOffset
count
oldCount
if
digit
block
handleToken
line
DIGIT
lastOffset
offset
len
context
lastOffset
pos
return
if
keywords
block
byte
id
lookup
line
lastOffset
len
if
id
NULL
block
handleToken
line
id
lastOffset
offset
len
context
lastOffset
pos
return
if
addRemaining
block
handleToken
line
getDefault
lastOffset
offset
len
context
lastOffset
pos
substitute
char
match
Matcher
end
char
StringBuilder
buf
StringBuilder
for
forControl
int
i
i
length
i
block
char
ch
end
i
if
ch
ch
block
if
i
length
append
ch
block
char
digit
end
i
if
isDigit
digit
append
ch
if
ch
block
append
group
digit
i
block
String
s
group
digit
if
length
block
char
b
getComplementaryBracket
charAt
if
b
b
charAt
append
b
append
ch
i
append
ch
char
returnValue
char
length
getChars
length
returnValue
return
returnValue
matchToken
byte
rule
ParserRule
base
ParserRule
ctx
LineContext
switch
matchType
case
MATCH_TYPE_RULE
return
token
case
MATCH_TYPE_CONTEXT
return
getDefault
case
return
matchType
checkHashString
boolean
rule
ParserRule
for
forControl
int
i
i
length
i
block
if
toUpperCase
array
pos
i
charAt
i
block
return
return
LineContext
Map
LineContext
LineContext
intern
HashMap
LineContext
LineContext
LineContext
parent
ParserRule
inRule
ParserRuleSet
rules
char
spanEndSubst
ParserRule
escapeRule
LineContext
rs
ParserRuleSet
lc
LineContext
rules
rs
parent
lc
LineContext
clone
if
getModeName
escapeRule
getEscapeRule
escapeRule
escapeRule
LineContext
intern
LineContext
LineContext
obj
get
if
obj
block
put
return
return
obj
hashCode
int
if
inRule
return
hashCode
if
rules
return
hashCode
return
equals
boolean
obj
Object
if
obj
LineContext
block
LineContext
lc
LineContext
obj
return
inRule
inRule
rules
rules
objectsEqual
parent
parent
charArraysEqual
spanEndSubst
spanEndSubst
return
clone
Object
LineContext
lc
LineContext
inRule
inRule
rules
rules
parent
parent
LineContext
clone
spanEndSubst
spanEndSubst
escapeRule
escapeRule
return
lc
charArraysEqual
boolean
c1
char
c2
char
if
c1
return
c2
if
c2
return
if
length
length
return
for
forControl
int
i
i
length
i
block
if
c1
i
c2
i
return
return
setInRule
rule
ParserRule
inRule
rule
if
rule
escapeRule
escapeRule
escapeRule
if
rules
getModeName
escapeRule
getEscapeRule
if
parent
escapeRule
escapeRule
escapeRule
