JARClassLoader
JARClassLoader
JARClassLoader
path
String
zipFile
ZipFile
path
Enumeration
entires
entries
while
hasMoreElements
block
ZipEntry
entry
ZipEntry
nextElement
String
name
getName
String
lname
toLowerCase
if
equals
block
loadActions
path
BufferedReader
InputStreamReader
getInputStream
entry
if
endsWith
loadProps
getInputStream
entry
if
endsWith
addElement
name
jar
EditPlugin
JAR
path
addPluginJAR
jar
loadClass
Class
clazz
String
resolveIt
boolean
return
loadClass
clazz
resolveIt
getResourceAsStream
InputStream
name
String
if
zipFile
return
try
ZipEntry
entry
getEntry
name
if
entry
return
getSystemResourceAsStream
name
return
getInputStream
entry
catchClause
io
log
ERROR
io
return
getResource
URL
name
String
if
zipFile
return
ZipEntry
entry
getEntry
name
if
entry
return
getSystemResource
name
try
return
URL
getResourceAsPath
name
catchClause
mu
log
ERROR
mu
return
getResourceAsPath
String
name
String
if
zipFile
return
if
startsWith
name
name
return
getFileName
getPath
name
closeZipFile
if
zipFile
return
try
close
catchClause
io
log
ERROR
io
zipFile
getZipFile
ZipFile
return
zipFile
startAllPlugins
for
forControl
int
i
i
size
i
block
String
name
String
elementAt
i
name
fileToClass
name
try
loadPluginClass
name
catchClause
t
log
ERROR
name
log
ERROR
t
addPlugin
EditPlugin
Broken
name
String
args
name
toString
error
args
EditPlugin
JAR
jar
Vector
pluginClasses
Vector
ZipFile
zipFile
loadPluginClass
name
String
EditPlugin
plugins
getPlugins
for
forControl
int
i
i
length
i
block
if
plugins
i
getClass
getName
equals
name
block
String
args
name
error
args
return
if
checkDependencies
name
block
addPlugin
EditPlugin
Broken
name
return
Class
clazz
loadClass
name
int
modifiers
getModifiers
if
isInterface
modifiers
isAbstract
modifiers
isAssignableFrom
clazz
EditPlugin
block
String
version
getProperty
name
if
version
block
log
WARNING
name
version
version
version
log
NOTICE
name
version
addPlugin
EditPlugin
newInstance
checkDependencies
boolean
name
String
int
i
String
dep
while
dep
getProperty
name
i
block
int
index
indexOf
if
index
block
log
ERROR
name
dep
return
String
what
substring
index
String
arg
substring
index
if
equals
block
if
getProperty
compareTo
arg
block
String
args
name
arg
getProperty
error
args
return
if
equals
block
if
getBuild
compareTo
arg
block
String
needs
buildToVersion
arg
String
args
name
needs
getVersion
error
args
return
if
equals
block
int
index2
indexOf
if
index2
block
log
ERROR
name
dep
return
String
plugin
substring
index2
String
needVersion
substring
index2
String
currVersion
getProperty
plugin
if
currVersion
block
String
args
name
needVersion
plugin
error
args
return
if
compareVersions
currVersion
needVersion
block
String
args
name
needVersion
plugin
currVersion
error
args
return
if
getPlugin
plugin
EditPlugin
Broken
block
String
args
name
plugin
error
args
return
if
equals
block
try
loadClass
arg
catchClause
e
String
args
name
arg
error
args
return
block
log
ERROR
name
dep
return
return
findOtherClass
Class
clazz
String
resolveIt
boolean
EditPlugin
JAR
jars
getPluginJARs
for
forControl
int
i
i
length
i
block
JARClassLoader
loader
jars
i
getClassLoader
Class
cls
loadClass
clazz
resolveIt
if
cls
return
cls
ClassLoader
loader
getClass
getClassLoader
if
loader
return
loadClass
clazz
return
findSystemClass
clazz
loadClass
Class
clazz
String
resolveIt
boolean
doDepencies
boolean
Class
cls
findLoadedClass
clazz
if
cls
block
if
resolveIt
resolveClass
cls
return
cls
if
zipFile
block
if
doDepencies
return
findOtherClass
clazz
resolveIt
return
String
name
classToFile
clazz
try
ZipEntry
entry
getEntry
name
if
entry
block
if
doDepencies
return
findOtherClass
clazz
resolveIt
return
InputStream
in
getInputStream
entry
int
len
int
getSize
byte
data
byte
len
int
success
int
offset
while
success
len
block
len
success
offset
success
success
read
data
offset
len
if
success
block
log
ERROR
clazz
getName
throw
ClassNotFoundException
clazz
cls
defineClass
clazz
data
length
if
resolveIt
resolveClass
cls
return
cls
catchClause
io
log
ERROR
io
throw
ClassNotFoundException
clazz
ClassLoader
