DefaultConnectionPool
Driver
m_Driver
boolean
DEBUG
String
m_driver
String
String
m_url
String
int
m_PoolMinSize
Properties
m_ConnectionProtocol
Properties
Vector
m_pool
Vector
boolean
m_IsActive
DefaultConnectionPool
isEnabled
boolean
return
m_IsActive
setDriver
d
String
m_driver
d
setURL
url
String
m_url
url
freeUnused
for
forControl
int
x
x
size
x
block
PooledConnection
pcon
PooledConnection
elementAt
x
if
inUse
block
if
DEBUG
block
println
x
close
hasActiveConnections
boolean
return
size
setPassword
p
String
put
p
setUser
u
String
put
u
setProtocol
p
Properties
Enumeration
e
keys
while
hasMoreElements
block
String
key
String
nextElement
put
key
getProperty
key
setMinConnections
n
int
m_PoolMinSize
n
testConnection
boolean
try
if
DEBUG
block
println
Connection
conn
getConnection
if
DEBUG
block
DatabaseMetaData
dma
getMetaData
println
getURL
println
getDriverName
println
getDriverVersion
println
if
conn
return
releaseConnection
conn
if
DEBUG
block
println
return
catchClause
e
if
DEBUG
block
println
printStackTrace
return
getConnection
Connection
PooledConnection
pcon
if
size
m_PoolMinSize
block
initializePool
for
forControl
int
x
x
size
x
block
pcon
PooledConnection
elementAt
x
if
inUse
block
setInUse
return
getConnection
Connection
con
createConnection
pcon
PooledConnection
con
setInUse
addElement
pcon
return
getConnection
releaseConnection
con
Connection
for
forControl
int
x
x
size
x
block
PooledConnection
pcon
PooledConnection
elementAt
x
if
getConnection
con
block
if
DEBUG
block
println
x
if
isEnabled
block
close
removeElementAt
x
if
DEBUG
block
println
block
setInUse
break
releaseConnectionOnError
con
Connection
for
forControl
int
x
x
size
x
block
PooledConnection
pcon
PooledConnection
elementAt
x
if
getConnection
con
block
if
DEBUG
block
println
x
close
removeElementAt
x
if
DEBUG
block
println
break
createConnection
Connection
Connection
con
con
connect
m_url
m_ConnectionProtocol
return
con
initializePool
if
m_driver
block
throw
IllegalArgumentException
createMessage
ER_NO_DRIVER_NAME_SPECIFIED
if
m_url
block
throw
IllegalArgumentException
createMessage
ER_NO_URL_SPECIFIED
if
m_PoolMinSize
block
throw
IllegalArgumentException
createMessage
ER_POOLSIZE_LESS_THAN_ONE
try
Class
cls
try
Method
m
getMethod
Thread
ClassLoader
classLoader
ClassLoader
invoke
currentThread
cls
loadClass
m_driver
catchClause
e
cls
forName
m_driver
if
cls
cls
forName
m_driver
m_Driver
Driver
newInstance
registerDriver
m_Driver
catchClause
e
throw
IllegalArgumentException
createMessage
ER_INVALID_DRIVER_NAME
catchClause
e
throw
IllegalArgumentException
createMessage
ER_INVALID_DRIVER_NAME
if
m_IsActive
return
do
size
m_PoolMinSize
block
Connection
con
createConnection
if
con
block
PooledConnection
pcon
PooledConnection
con
addConnection
pcon
if
DEBUG
println
addConnection
value
PooledConnection
addElement
value
finalize
if
DEBUG
block
println
for
forControl
int
x
x
size
x
block
if
DEBUG
block
println
x
PooledConnection
pcon
PooledConnection
elementAt
x
if
inUse
block
close
block
if
DEBUG
block
println
try
sleep
close
catchClause
ie
if
DEBUG
println
getMessage
if
DEBUG
block
println
finalize
setPoolEnabled
flag
boolean
m_IsActive
flag
if
flag
freeUnused
ConnectionPool
