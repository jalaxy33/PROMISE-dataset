Compiler
Compiler
errorHandler
ErrorListener
locator
SourceLocator
m_errorHandler
errorHandler
m_locator
locator
Compiler
m_errorHandler
m_locator
compile
Expression
opPos
int
int
op
m_opMap
opPos
Expression
expr
switch
op
case
OP_XPATH
expr
compile
opPos
break
case
OP_OR
expr
or
opPos
break
case
OP_AND
expr
and
opPos
break
case
OP_NOTEQUALS
expr
notequals
opPos
break
case
OP_EQUALS
expr
equals
opPos
break
case
OP_LTE
expr
lte
opPos
break
case
OP_LT
expr
lt
opPos
break
case
OP_GTE
expr
gte
opPos
break
case
OP_GT
expr
gt
opPos
break
case
OP_PLUS
expr
plus
opPos
break
case
OP_MINUS
expr
minus
opPos
break
case
OP_MULT
expr
mult
opPos
break
case
OP_DIV
expr
div
opPos
break
case
OP_MOD
expr
mod
opPos
break
case
OP_NEG
expr
neg
opPos
break
case
OP_STRING
expr
string
opPos
break
case
OP_BOOL
expr
bool
opPos
break
case
OP_NUMBER
expr
number
opPos
break
case
OP_UNION
expr
union
opPos
break
case
OP_LITERAL
expr
literal
opPos
break
case
OP_VARIABLE
expr
variable
opPos
break
case
OP_GROUP
expr
group
opPos
break
case
OP_NUMBERLIT
expr
numberlit
opPos
break
case
OP_ARGUMENT
expr
arg
opPos
break
case
OP_EXTFUNCTION
expr
compileExtension
opPos
break
case
OP_FUNCTION
expr
compileFunction
opPos
break
case
OP_LOCATIONPATH
expr
locationPath
opPos
break
case
OP_PREDICATE
expr
break
case
OP_MATCHPATTERN
expr
matchPattern
opPos
break
case
OP_LOCATIONPATHPATTERN
expr
locationPathPattern
opPos
break
case
OP_QUO
error
ER_UNKNOWN_OPCODE
Object
break
case
error
ER_UNKNOWN_OPCODE
Object
toString
m_opMap
opPos
return
expr
compileOperation
Expression
operation
Operation
opPos
int
int
leftPos
getFirstChildPos
opPos
int
rightPos
getNextOpPos
leftPos
setLeftRight
compile
leftPos
compile
rightPos
return
operation
compileUnary
Expression
unary
UnaryOperation
opPos
int
int
rightPos
getFirstChildPos
opPos
setRight
compile
rightPos
return
unary
or
Expression
opPos
int
return
compileOperation
Or
opPos
and
Expression
opPos
int
return
compileOperation
And
opPos
notequals
Expression
opPos
int
return
compileOperation
NotEquals
opPos
equals
Expression
opPos
int
return
compileOperation
Equals
opPos
lte
Expression
opPos
int
return
compileOperation
Lte
opPos
lt
Expression
opPos
int
return
compileOperation
Lt
opPos
gte
Expression
opPos
int
return
compileOperation
Gte
opPos
gt
Expression
opPos
int
return
compileOperation
Gt
opPos
plus
Expression
opPos
int
return
compileOperation
Plus
opPos
minus
Expression
opPos
int
return
compileOperation
Minus
opPos
mult
Expression
opPos
int
return
compileOperation
Mult
opPos
div
Expression
opPos
int
return
compileOperation
Div
opPos
mod
Expression
opPos
int
return
compileOperation
Mod
opPos
neg
Expression
opPos
int
return
compileUnary
Neg
opPos
string
Expression
opPos
int
return
compileUnary
org
apache
xpath
operations
String
opPos
bool
Expression
opPos
int
return
compileUnary
org
apache
xpath
operations
Bool
opPos
number
Expression
opPos
int
return
compileUnary
org
apache
xpath
operations
Number
opPos
literal
Expression
opPos
int
opPos
getFirstChildPos
opPos
return
XString
m_tokenQueue
m_opMap
opPos
numberlit
Expression
opPos
int
opPos
getFirstChildPos
opPos
return
XNumber
m_tokenQueue
m_opMap
opPos
variable
Expression
opPos
int
Variable
var
Variable
opPos
getFirstChildPos
opPos
int
nsPos
m_opMap
opPos
java
lang
String
namespace
EMPTY
nsPos
java
lang
String
m_tokenQueue
nsPos
java
lang
String
localname
java
lang
String
m_tokenQueue
m_opMap
opPos
QName
qname
QName
namespace
localname
setQName
qname
return
var
group
Expression
opPos
int
return
compile
opPos
arg
Expression
opPos
int
return
compile
opPos
union
Expression
opPos
int
locPathDepth
try
return
createUnionIterator
opPos
locPathDepth
int
locPathDepth
getLocationPathDepth
int
return
locPathDepth
locationPath
Expression
opPos
int
locPathDepth
try
DTMIterator
iter
newDTMIterator
opPos
locPathDepth
return
Expression
iter
locPathDepth
predicate
Expression
opPos
int
return
compile
opPos
matchPattern
Expression
opPos
int
locPathDepth
try
int
nextOpPos
opPos
int
i
for
forControl
i
m_opMap
nextOpPos
OP_LOCATIONPATHPATTERN
i
block
nextOpPos
getNextOpPos
nextOpPos
if
i
return
compile
opPos
UnionPattern
up
UnionPattern
StepPattern
patterns
StepPattern
i
for
forControl
i
m_opMap
opPos
OP_LOCATIONPATHPATTERN
i
block
nextOpPos
getNextOpPos
opPos
patterns
i
StepPattern
compile
opPos
opPos
nextOpPos
setPatterns
patterns
return
up
locPathDepth
locationPathPattern
Expression
opPos
int
opPos
getFirstChildPos
opPos
return
stepPattern
opPos
getWhatToShow
int
opPos
int
int
axesType
getOp
opPos
int
testType
getOp
opPos
switch
testType
case
NODETYPE_COMMENT
return
SHOW_COMMENT
case
NODETYPE_TEXT
return
SHOW_TEXT
SHOW_CDATA_SECTION
case
NODETYPE_PI
return
SHOW_PROCESSING_INSTRUCTION
case
NODETYPE_NODE
switch
axesType
case
FROM_NAMESPACE
return
SHOW_NAMESPACE
case
FROM_ATTRIBUTES
MATCH_ATTRIBUTE
return
SHOW_ATTRIBUTE
case
FROM_SELF
FROM_ANCESTORS_OR_SELF
FROM_DESCENDANTS_OR_SELF
return
SHOW_ALL
case
if
getOp
OP_MATCHPATTERN
return
SHOW_ATTRIBUTE
SHOW_DOCUMENT
SHOW_DOCUMENT_FRAGMENT
return
SHOW_ATTRIBUTE
case
NODETYPE_ROOT
return
SHOW_DOCUMENT
SHOW_DOCUMENT_FRAGMENT
case
NODETYPE_FUNCTEST
return
SHOW_BYFUNCTION
case
NODENAME
switch
axesType
case
FROM_NAMESPACE
return
SHOW_NAMESPACE
case
FROM_ATTRIBUTES
MATCH_ATTRIBUTE
return
SHOW_ATTRIBUTE
case
MATCH_ANY_ANCESTOR
MATCH_IMMEDIATE_ANCESTOR
return
SHOW_ELEMENT
case
return
SHOW_ELEMENT
case
return
SHOW_ALL
boolean
DEBUG
stepPattern
StepPattern
opPos
int
stepCount
int
ancestorPattern
StepPattern
int
startOpPos
opPos
int
stepType
getOpMap
opPos
if
ENDOP
stepType
block
return
boolean
addMagicSelf
int
endStep
getNextOpPos
opPos
StepPattern
pattern
int
argLen
switch
stepType
case
OP_FUNCTION
if
DEBUG
println
m_currentPattern
addMagicSelf
argLen
m_opMap
opPos
MAPINDEX_LENGTH
pattern
FunctionPattern
compileFunction
opPos
PARENT
CHILD
break
case
FROM_ROOT
if
DEBUG
println
m_currentPattern
addMagicSelf
argLen
getArgLengthOfStep
opPos
opPos
getFirstChildPosOfStep
opPos
pattern
StepPattern
SHOW_DOCUMENT
SHOW_DOCUMENT_FRAGMENT
PARENT
CHILD
break
case
MATCH_ATTRIBUTE
if
DEBUG
println
getStepLocalName
startOpPos
m_currentPattern
argLen
getArgLengthOfStep
opPos
opPos
getFirstChildPosOfStep
opPos
pattern
StepPattern
SHOW_ATTRIBUTE
getStepNS
startOpPos
getStepLocalName
startOpPos
PARENT
ATTRIBUTE
break
case
MATCH_ANY_ANCESTOR
if
DEBUG
println
getStepLocalName
startOpPos
m_currentPattern
argLen
getArgLengthOfStep
opPos
opPos
getFirstChildPosOfStep
opPos
int
what
getWhatToShow
startOpPos
if
what
addMagicSelf
pattern
StepPattern
getWhatToShow
startOpPos
getStepNS
startOpPos
getStepLocalName
startOpPos
ANCESTOR
CHILD
break
case
MATCH_IMMEDIATE_ANCESTOR
if
DEBUG
println
getStepLocalName
startOpPos
m_currentPattern
argLen
getArgLengthOfStep
opPos
opPos
getFirstChildPosOfStep
opPos
pattern
StepPattern
getWhatToShow
startOpPos
getStepNS
startOpPos
getStepLocalName
startOpPos
PARENT
CHILD
break
case
error
ER_UNKNOWN_MATCH_OPERATION
return
setPredicates
getCompiledPredicates
opPos
argLen
if
ancestorPattern
block
block
setRelativePathPattern
ancestorPattern
StepPattern
relativePathPattern
stepPattern
endStep
stepCount
pattern
return
relativePathPattern
relativePathPattern
pattern
getCompiledPredicates
Expression
opPos
int
int
count
countPredicates
opPos
if
count
block
Expression
predicates
Expression
count
compilePredicates
opPos
predicates
return
predicates
return
countPredicates
int
opPos
int
int
count
while
OP_PREDICATE
getOp
opPos
block
count
opPos
getNextOpPos
opPos
return
count
compilePredicates
opPos
int
predicates
Expression
for
forControl
int
i
OP_PREDICATE
getOp
opPos
i
block
predicates
i
predicate
opPos
opPos
getNextOpPos
opPos
compileFunction
Expression
opPos
int
int
endFunc
opPos
m_opMap
opPos
opPos
getFirstChildPos
opPos
int
funcID
m_opMap
opPos
opPos
if
funcID
block
Function
func
getFunction
funcID
postCompileStep
try
int
i
for
forControl
int
p
opPos
p
endFunc
p
getNextOpPos
p
i
block
setArg
compile
p
i
checkNumberArgs
i
catchClause
wnae
java
lang
String
name
m_functions
funcID
getName
fatalError
TransformerException
createXPATHMessage
ER_ONLY_ALLOWS
Object
name
getMessage
m_locator
return
func
block
error
ER_FUNCTION_TOKEN_NOT_FOUND
return
compileExtension
Expression
opPos
int
int
endExtFunc
opPos
m_opMap
opPos
opPos
getFirstChildPos
opPos
java
lang
String
ns
java
lang
String
m_tokenQueue
m_opMap
opPos
opPos
java
lang
String
funcName
java
lang
String
m_tokenQueue
m_opMap
opPos
opPos
Function
extension
FuncExtFunction
ns
funcName
valueOf
opPos
valueOf
hashCode
valueOf
currentTimeMillis
try
int
i
while
opPos
endExtFunc
block
int
nextOpPos
getNextOpPos
opPos
setArg
compile
opPos
i
opPos
nextOpPos
i
catchClause
wnae
return
extension
warn
msg
int
args
Object
java
lang
String
fmsg
createXPATHWarning
msg
args
if
m_errorHandler
block
warning
TransformerException
fmsg
m_locator
block
println
fmsg
getSystemId
getLineNumber
getColumnNumber
assertion
b
boolean
msg
java
lang
String
if
b
block
java
lang
String
fMsg
createXPATHMessage
ER_INCORRECT_PROGRAMMER_ASSERTION
Object
msg
throw
RuntimeException
fMsg
error
msg
int
args
Object
java
lang
String
fmsg
createXPATHMessage
msg
args
if
m_errorHandler
block
fatalError
TransformerException
fmsg
m_locator
block
throw
TransformerException
fmsg
SAXSourceLocator
m_locator
PrefixResolver
m_currentPrefixResolver
getNamespaceContext
PrefixResolver
return
m_currentPrefixResolver
setNamespaceContext
pr
PrefixResolver
m_currentPrefixResolver
pr
ErrorListener
m_errorHandler
SourceLocator
m_locator
OpMap
