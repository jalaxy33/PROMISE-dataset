DOM2DTM
boolean
JJK_DEBUG
boolean
JJK_NEWCODE
String
NAMESPACE_DECL_NS
Node
m_pos
int
m_last_parent
int
m_last_kid
NULL
Node
m_root
boolean
m_processedFirstElement
boolean
m_nodesAreProcessed
Vector
m_nodes
Vector
DOM2DTM
mgr
DTMManager
domSource
DOMSource
dtmIdentity
int
whiteSpaceFilter
DTMWSFilter
xstringfactory
XMLStringFactory
doIndexing
boolean
mgr
domSource
dtmIdentity
whiteSpaceFilter
xstringfactory
doIndexing
m_pos
m_root
getNode
m_last_parent
m_last_kid
NULL
m_last_kid
addNode
m_root
m_last_parent
m_last_kid
NULL
if
ELEMENT_NODE
getNodeType
block
NamedNodeMap
attrs
getAttributes
int
attrsize
attrs
getLength
if
attrsize
block
int
attrIndex
NULL
for
forControl
int
i
i
attrsize
i
block
attrIndex
addNode
item
i
attrIndex
NULL
setElementAt
NULL
attrIndex
setElementAt
NULL
attrIndex
m_nodesAreProcessed
addNode
int
node
Node
parentIndex
int
previousSibling
int
forceNodeType
int
int
nodeIndex
size
if
size
nodeIndex
IDENT_DTM_NODE_BITS
block
try
if
m_mgr
throw
ClassCastException
DTMManagerDefault
mgrD
DTMManagerDefault
m_mgr
int
id
getFirstFreeDTMID
addDTM
id
nodeIndex
addElement
id
IDENT_DTM_NODE_BITS
catchClause
e
error
createMessage
ER_NO_DTMIDS_AVAIL
m_size
int
type
if
NULL
forceNodeType
type
getNodeType
type
forceNodeType
if
ATTRIBUTE_NODE
type
block
String
name
getNodeName
if
startsWith
equals
block
type
NAMESPACE_NODE
addElement
node
setElementAt
NOTPROCESSED
nodeIndex
setElementAt
NOTPROCESSED
nodeIndex
setElementAt
previousSibling
nodeIndex
setElementAt
parentIndex
nodeIndex
if
NULL
parentIndex
type
ATTRIBUTE_NODE
type
NAMESPACE_NODE
block
if
NOTPROCESSED
elementAt
parentIndex
setElementAt
nodeIndex
parentIndex
String
nsURI
getNamespaceURI
String
localName
type
PROCESSING_INSTRUCTION_NODE
getNodeName
getLocalName
if
type
ELEMENT_NODE
type
ATTRIBUTE_NODE
localName
localName
getNodeName
ExpandedNameTable
exnt
m_expandedNameTable
if
getLocalName
type
ELEMENT_NODE
type
ATTRIBUTE_NODE
block
int
expandedNameID
localName
getExpandedTypeID
nsURI
localName
type
getExpandedTypeID
type
setElementAt
expandedNameID
nodeIndex
indexNode
expandedNameID
nodeIndex
if
NULL
previousSibling
setElementAt
nodeIndex
previousSibling
if
type
NAMESPACE_NODE
declareNamespaceInContext
parentIndex
nodeIndex
return
nodeIndex
getNumberOfNodes
int
return
size
nextNode
boolean
if
m_nodesAreProcessed
return
Node
pos
m_pos
Node
next
int
nexttype
NULL
do
ENTITY_REFERENCE_NODE
nexttype
block
if
hasChildNodes
block
next
getFirstChild
if
next
DOCUMENT_TYPE_NODE
getNodeType
next
getNextSibling
if
ENTITY_REFERENCE_NODE
getNodeType
block
m_last_parent
m_last_kid
m_last_kid
NULL
if
m_wsfilter
block
short
wsv
getShouldStripSpace
makeNodeHandle
m_last_parent
boolean
shouldStrip
INHERIT
wsv
getShouldStripWhitespace
STRIP
wsv
pushShouldStripWhitespace
shouldStrip
block
if
m_last_kid
NULL
block
if
elementAt
m_last_kid
NOTPROCESSED
setElementAt
NULL
m_last_kid
while
m_last_parent
NULL
block
next
getNextSibling
if
next
DOCUMENT_TYPE_NODE
getNodeType
next
getNextSibling
if
next
break
pos
getParentNode
if
pos
block
if
JJK_DEBUG
block
println
for
forControl
if
pos
ENTITY_REFERENCE_NODE
getNodeType
block
if
JJK_DEBUG
println
block
popShouldStripWhitespace
if
m_last_kid
NULL
setElementAt
NULL
m_last_parent
setElementAt
NULL
m_last_kid
m_last_parent
elementAt
m_last_kid
m_last_parent
if
m_last_parent
NULL
next
if
next
nexttype
getNodeType
if
ENTITY_REFERENCE_NODE
nexttype
pos
next
if
next
block
setElementAt
NULL
m_nodesAreProcessed
m_pos
if
JJK_DEBUG
block
println
for
forControl
int
i
i
size
i
println
i
elementAt
i
elementAt
i
return
boolean
suppressNode
Node
lastTextNode
nexttype
getNodeType
if
TEXT_NODE
nexttype
CDATA_SECTION_NODE
nexttype
block
suppressNode
m_wsfilter
getShouldStripWhitespace
Node
n
next
while
n
block
lastTextNode
n
if
TEXT_NODE
getNodeType
nexttype
TEXT_NODE
suppressNode
isWhiteSpace
getNodeValue
n
logicalNextDOMTextNode
n
if
PROCESSING_INSTRUCTION_NODE
nexttype
block
suppressNode
getNodeName
if
suppressNode
block
int
nextindex
addNode
next
m_last_parent
m_last_kid
nexttype
m_last_kid
nextindex
if
ELEMENT_NODE
nexttype
block
int
attrIndex
NULL
NamedNodeMap
attrs
getAttributes
int
attrsize
attrs
getLength
if
attrsize
block
for
forControl
int
i
i
attrsize
i
block
attrIndex
addNode
item
i
nextindex
attrIndex
NULL
setElementAt
NULL
attrIndex
if
m_processedFirstElement
equals
item
getNodeName
i
m_processedFirstElement
if
m_processedFirstElement
block
attrIndex
addNode
DOM2DTMdefaultNamespaceDeclarationNode
Element
next
NAMESPACE_DECL_NS
makeNodeHandle
attrIndex
NULL
nextindex
attrIndex
nextindex
attrIndex
NULL
setElementAt
NULL
attrIndex
m_processedFirstElement
if
attrIndex
NULL
setElementAt
NULL
attrIndex
if
TEXT_NODE
nexttype
CDATA_SECTION_NODE
nexttype
block
next
lastTextNode
m_pos
next
return
getNode
Node
nodeHandle
int
int
identity
makeNodeIdentity
nodeHandle
return
Node
elementAt
identity
lookupNode
Node
nodeIdentity
int
return
Node
elementAt
nodeIdentity
getNextNodeIdentity
int
identity
int
identity
if
identity
size
block
if
nextNode
identity
NULL
return
identity
getHandleFromNode
int
node
Node
if
node
block
int
len
size
boolean
isMore
int
i
do
isMore
i
len
block
for
forControl
i
len
i
block
if
elementAt
i
node
return
makeNodeHandle
i
isMore
nextNode
len
size
return
NULL
getHandleOfNode
int
node
Node
if
node
block
if
m_root
node
getNodeType
DOCUMENT_NODE
m_root
getOwnerDocument
getNodeType
DOCUMENT_NODE
getOwnerDocument
getOwnerDocument
block
for
forControl
Node
cursor
node
cursor
cursor
getNodeType
ATTRIBUTE_NODE
getParentNode
org
w3c
dom
Attr
cursor
block
if
cursor
m_root
return
getHandleFromNode
node
return
NULL
getAttributeNode
int
nodeHandle
int
namespaceURI
String
name
String
if
namespaceURI
namespaceURI
int
type
getNodeType
nodeHandle
if
ELEMENT_NODE
type
block
int
identity
makeNodeIdentity
nodeHandle
while
NULL
identity
getNextNodeIdentity
identity
block
type
_type
identity
if
type
ATTRIBUTE_NODE
type
NAMESPACE_NODE
block
Node
node
lookupNode
identity
String
nodeuri
getNamespaceURI
if
nodeuri
nodeuri
String
nodelocalname
getLocalName
if
equals
namespaceURI
equals
nodelocalname
return
makeNodeHandle
identity
block
break
return
NULL
getStringValue
XMLString
nodeHandle
int
int
type
getNodeType
nodeHandle
Node
node
getNode
nodeHandle
if
ELEMENT_NODE
type
DOCUMENT_NODE
type
DOCUMENT_FRAGMENT_NODE
type
block
FastStringBuffer
buf
get
String
s
try
getNodeData
node
buf
s
length
toString
free
buf
return
newstr
s
if
TEXT_NODE
type
CDATA_SECTION_NODE
type
block
FastStringBuffer
buf
get
while
node
block
append
getNodeValue
node
logicalNextDOMTextNode
node
String
s
length
toString
free
buf
return
newstr
s
return
newstr
getNodeValue
getNodeData
node
Node
buf
FastStringBuffer
switch
getNodeType
case
DOCUMENT_FRAGMENT_NODE
DOCUMENT_NODE
ELEMENT_NODE
block
for
forControl
Node
child
getFirstChild
child
child
getNextSibling
block
getNodeData
child
buf
break
case
TEXT_NODE
CDATA_SECTION_NODE
ATTRIBUTE_NODE
append
getNodeValue
break
case
PROCESSING_INSTRUCTION_NODE
break
case
break
getNodeName
String
nodeHandle
int
Node
node
getNode
nodeHandle
return
getNodeName
getNodeNameX
String
nodeHandle
int
String
name
short
type
getNodeType
nodeHandle
switch
type
case
NAMESPACE_NODE
block
Node
node
getNode
nodeHandle
name
getNodeName
if
startsWith
block
name
getLocalPart
name
if
equals
block
name
break
case
ATTRIBUTE_NODE
ELEMENT_NODE
ENTITY_REFERENCE_NODE
PROCESSING_INSTRUCTION_NODE
block
Node
node
getNode
nodeHandle
name
getNodeName
break
case
name
return
name
getLocalName
String
nodeHandle
int
if
JJK_NEWCODE
block
int
id
makeNodeIdentity
nodeHandle
if
NULL
id
return
Node
newnode
Node
elementAt
id
String
newname
getLocalName
if
newname
block
String
qname
getNodeName
if
getNodeName
charAt
block
newname
block
int
index
indexOf
newname
index
qname
substring
index
return
newname
block
String
name
short
type
getNodeType
nodeHandle
switch
type
case
ATTRIBUTE_NODE
ELEMENT_NODE
ENTITY_REFERENCE_NODE
NAMESPACE_NODE
PROCESSING_INSTRUCTION_NODE
block
Node
node
getNode
nodeHandle
name
getLocalName
if
name
block
String
qname
getNodeName
int
index
indexOf
name
index
qname
substring
index
break
case
name
return
name
getPrefix
String
nodeHandle
int
String
prefix
short
type
getNodeType
nodeHandle
switch
type
case
NAMESPACE_NODE
block
Node
node
getNode
nodeHandle
String
qname
getNodeName
int
index
indexOf
prefix
index
substring
index
break
case
ATTRIBUTE_NODE
ELEMENT_NODE
block
Node
node
getNode
nodeHandle
String
qname
getNodeName
int
index
indexOf
prefix
index
substring
index
break
case
prefix
return
prefix
getNamespaceURI
String
nodeHandle
int
if
JJK_NEWCODE
block
int
id
makeNodeIdentity
nodeHandle
if
id
NULL
return
Node
node
Node
elementAt
id
return
getNamespaceURI
block
String
nsuri
short
type
getNodeType
nodeHandle
switch
type
case
ATTRIBUTE_NODE
ELEMENT_NODE
ENTITY_REFERENCE_NODE
NAMESPACE_NODE
PROCESSING_INSTRUCTION_NODE
block
Node
node
getNode
nodeHandle
nsuri
getNamespaceURI
break
case
nsuri
return
nsuri
logicalNextDOMTextNode
Node
n
Node
Node
p
getNextSibling
if
p
block
for
forControl
n
getParentNode
n
ENTITY_REFERENCE_NODE
getNodeType
n
getParentNode
block
p
getNextSibling
if
p
break
n
p
while
n
ENTITY_REFERENCE_NODE
getNodeType
block
if
hasChildNodes
n
getFirstChild
n
getNextSibling
if
n
block
int
ntype
getNodeType
if
TEXT_NODE
ntype
CDATA_SECTION_NODE
ntype
n
return
n
getNodeValue
String
nodeHandle
int
int
type
_exptype
makeNodeIdentity
nodeHandle
type
NULL
type
getNodeType
nodeHandle
NULL
if
TEXT_NODE
type
CDATA_SECTION_NODE
type
return
getNode
getNodeValue
nodeHandle
Node
node
getNode
nodeHandle
Node
n
logicalNextDOMTextNode
node
if
n
return
getNodeValue
FastStringBuffer
buf
get
append
getNodeValue
while
n
block
append
getNodeValue
n
logicalNextDOMTextNode
n
String
s
length
toString
free
buf
return
s
getDocumentTypeDeclarationSystemIdentifier
String
Document
doc
if
getNodeType
DOCUMENT_NODE
doc
Document
m_root
doc
getOwnerDocument
if
doc
block
DocumentType
dtd
getDoctype
if
dtd
block
return
getSystemId
return
getDocumentTypeDeclarationPublicIdentifier
String
Document
doc
if
getNodeType
DOCUMENT_NODE
doc
Document
m_root
doc
getOwnerDocument
if
doc
block
DocumentType
dtd
getDoctype
if
dtd
block
return
getPublicId
return
getElementById
int
elementId
String
Document
doc
getNodeType
DOCUMENT_NODE
Document
m_root
getOwnerDocument
if
doc
block
Node
elem
getElementById
elementId
if
elem
block
int
elemHandle
getHandleFromNode
elem
if
NULL
elemHandle
block
int
identity
size
while
NULL
identity
getNextNodeIdentity
identity
block
Node
node
getNode
identity
if
node
elem
block
elemHandle
getHandleFromNode
elem
break
return
elemHandle
return
NULL
getUnparsedEntityURI
String
name
String
String
url
Document
doc
getNodeType
DOCUMENT_NODE
Document
m_root
getOwnerDocument
if
doc
block
DocumentType
doctype
getDoctype
if
doctype
block
NamedNodeMap
entities
getEntities
if
entities
return
url
Entity
entity
Entity
getNamedItem
name
if
entity
return
url
String
notationName
getNotationName
if
notationName
block
url
getSystemId
if
url
block
url
getPublicId
block
return
url
isAttributeSpecified
boolean
attributeHandle
int
int
type
getNodeType
attributeHandle
if
ATTRIBUTE_NODE
type
block
Attr
attr
Attr
getNode
attributeHandle
return
getSpecified
return
setIncrementalSAXSource
source
IncrementalSAXSource
getContentHandler
org
xml
sax
ContentHandler
return
getLexicalHandler
org
xml
sax
ext
LexicalHandler
return
getEntityResolver
org
xml
sax
EntityResolver
return
getDTDHandler
org
xml
sax
DTDHandler
return
getErrorHandler
org
xml
sax
ErrorHandler
return
getDeclHandler
org
xml
sax
ext
DeclHandler
return
needsTwoThreads
boolean
return
isSpace
boolean
ch
char
return
isWhiteSpace
ch
dispatchCharactersEvents
nodeHandle
int
ch
org
xml
sax
ContentHandler
normalize
boolean
if
normalize
block
XMLString
str
getStringValue
nodeHandle
str
fixWhiteSpace
dispatchCharactersEvents
ch
block
int
type
getNodeType
nodeHandle
Node
node
getNode
nodeHandle
dispatchNodeData
node
ch
if
TEXT_NODE
type
CDATA_SECTION_NODE
type
block
while
node
logicalNextDOMTextNode
node
block
dispatchNodeData
node
ch
dispatchNodeData
node
Node
ch
org
xml
sax
ContentHandler
depth
int
switch
getNodeType
case
DOCUMENT_FRAGMENT_NODE
DOCUMENT_NODE
ELEMENT_NODE
block
for
forControl
Node
child
getFirstChild
child
child
getNextSibling
block
dispatchNodeData
child
ch
depth
break
case
PROCESSING_INSTRUCTION_NODE
COMMENT_NODE
if
depth
break
case
TEXT_NODE
CDATA_SECTION_NODE
ATTRIBUTE_NODE
String
str
getNodeValue
if
ch
CharacterNodeHandler
block
CharacterNodeHandler
ch
block
characters
toCharArray
length
break
case
break
TreeWalker
m_walker
TreeWalker
dispatchToEvents
nodeHandle
int
ch
org
xml
sax
ContentHandler
TreeWalker
treeWalker
m_walker
ContentHandler
prevCH
getContentHandler
if
prevCH
block
treeWalker
TreeWalker
setContentHandler
ch
try
Node
node
getNode
nodeHandle
traverse
node
setContentHandler
CharacterNodeHandler
characters
node
Node
setProperty
property
String
value
Object
getSourceLocatorFor
SourceLocator
node
int
return
DTMDefaultBaseIterators
