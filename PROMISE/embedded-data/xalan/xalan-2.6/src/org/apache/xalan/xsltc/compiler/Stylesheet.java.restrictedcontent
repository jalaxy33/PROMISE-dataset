Stylesheet
String
_version
QName
_name
String
_systemId
Stylesheet
_parentStylesheet
Vector
_globals
Vector
Boolean
_hasLocalParams
String
_className
Vector
_templates
Vector
Vector
_allValidTemplates
int
_nextModeSerial
Hashtable
_modes
Hashtable
Mode
_defaultMode
Hashtable
_extensions
Hashtable
Stylesheet
_importedFrom
Stylesheet
_includedFrom
Vector
_includedStylesheets
int
_importPrecedence
Hashtable
_keys
Hashtable
SourceLoader
_loader
boolean
_numberFormattingUsed
boolean
_simplified
boolean
_multiDocument
boolean
_callsNodeset
boolean
_hasIdCall
boolean
_templateInlining
Output
_lastOutputElement
Properties
_outputProperties
int
_outputMethod
UNKNOWN_OUTPUT
int
UNKNOWN_OUTPUT
int
XML_OUTPUT
int
HTML_OUTPUT
int
TEXT_OUTPUT
getOutputMethod
int
return
_outputMethod
checkOutputMethod
if
_lastOutputElement
block
String
method
getOutputMethod
if
method
block
if
equals
_outputMethod
XML_OUTPUT
if
equals
_outputMethod
HTML_OUTPUT
if
equals
_outputMethod
TEXT_OUTPUT
getTemplateInlining
boolean
return
_templateInlining
setTemplateInlining
flag
boolean
_templateInlining
flag
isSimplified
boolean
return
_simplified
setSimplified
_simplified
setHasIdCall
flag
boolean
_hasIdCall
flag
setOutputProperty
key
String
value
String
if
_outputProperties
block
_outputProperties
Properties
setProperty
key
value
setOutputProperties
props
Properties
_outputProperties
props
getOutputProperties
Properties
return
_outputProperties
getLastOutputElement
Output
return
_lastOutputElement
setMultiDocument
flag
boolean
_multiDocument
flag
isMultiDocument
boolean
return
_multiDocument
setCallsNodeset
flag
boolean
if
flag
setMultiDocument
flag
_callsNodeset
flag
callsNodeset
boolean
return
_callsNodeset
numberFormattingUsed
_numberFormattingUsed
Stylesheet
parent
getParentStylesheet
if
parent
numberFormattingUsed
setImportPrecedence
precedence
int
_importPrecedence
precedence
Enumeration
elements
elements
while
hasMoreElements
block
SyntaxTreeNode
child
SyntaxTreeNode
nextElement
if
child
Include
block
Stylesheet
included
Include
child
if
included
_includedFrom
block
setImportPrecedence
precedence
if
_importedFrom
block
if
getImportPrecedence
precedence
block
Parser
parser
getParser
int
nextPrecedence
getNextImportPrecedence
setImportPrecedence
nextPrecedence
if
_includedFrom
block
if
getImportPrecedence
precedence
setImportPrecedence
precedence
getImportPrecedence
int
return
_importPrecedence
checkForLoop
boolean
systemId
String
if
_systemId
equals
systemId
block
return
if
_parentStylesheet
return
checkForLoop
systemId
return
setParser
parser
Parser
setParser
parser
_name
makeStylesheetName
setParentStylesheet
parent
Stylesheet
_parentStylesheet
parent
getParentStylesheet
Stylesheet
return
_parentStylesheet
setImportingStylesheet
parent
Stylesheet
_importedFrom
parent
addIncludedStylesheet
setIncludingStylesheet
parent
Stylesheet
_includedFrom
parent
addIncludedStylesheet
addIncludedStylesheet
child
Stylesheet
if
_includedStylesheets
block
_includedStylesheets
Vector
addElement
child
setSystemId
systemId
String
if
systemId
block
_systemId
getAbsoluteURI
systemId
getSystemId
String
return
_systemId
setSourceLoader
loader
SourceLoader
_loader
loader
getSourceLoader
SourceLoader
return
_loader
makeStylesheetName
QName
prefix
String
return
getParser
getQName
prefix
getXSLTC
nextStylesheetSerial
hasGlobals
boolean
return
size
hasLocalParams
boolean
if
_hasLocalParams
block
Vector
templates
getAllValidTemplates
int
n
size
for
forControl
int
i
i
n
i
block
Template
template
Template
elementAt
i
if
hasParams
block
_hasLocalParams
Boolean
return
_hasLocalParams
Boolean
return
block
return
booleanValue
addPrefixMapping
prefix
String
uri
String
if
equals
EMPTYSTRING
equals
XHTML_URI
return
addPrefixMapping
prefix
uri
extensionURI
prefixes
String
stable
SymbolTable
if
prefixes
block
StringTokenizer
tokens
StringTokenizer
prefixes
while
hasMoreTokens
block
String
prefix
nextToken
String
uri
lookupNamespace
prefix
if
uri
block
put
uri
prefix
isExtension
boolean
uri
String
return
get
uri
excludeExtensionPrefixes
parser
Parser
SymbolTable
stable
getSymbolTable
String
excludePrefixes
getAttribute
String
extensionPrefixes
getAttribute
excludeURI
XSLT_URI
excludeNamespaces
excludePrefixes
excludeNamespaces
extensionPrefixes
extensionURI
extensionPrefixes
stable
parseContents
parser
Parser
SymbolTable
stable
getSymbolTable
addPrefixMapping
Stylesheet
sheet
addStylesheet
_name
if
sheet
block
ErrorMsg
err
ErrorMsg
MULTIPLE_STYLESHEET_ERR
reportError
ERROR
err
if
_simplified
block
excludeURI
XSLT_URI
Template
template
Template
parseSimplified
parser
block
parseOwnChildren
parser
parseOwnChildren
parser
Parser
Vector
contents
getContents
int
count
size
for
forControl
int
i
i
count
i
block
SyntaxTreeNode
child
SyntaxTreeNode
elementAt
i
if
child
VariableBase
child
NamespaceAlias
block
getSymbolTable
setCurrentNode
child
parseContents
parser
for
forControl
int
i
i
count
i
block
SyntaxTreeNode
child
SyntaxTreeNode
elementAt
i
if
child
VariableBase
child
NamespaceAlias
block
getSymbolTable
setCurrentNode
child
parseContents
parser
if
_templateInlining
child
Template
block
Template
template
Template
child
String
name
getPosition
setName
getQName
name
processModes
if
_defaultMode
_defaultMode
Mode
EMPTYSTRING
processPatterns
_keys
Enumeration
modes
elements
while
hasMoreElements
block
Mode
mode
Mode
nextElement
processPatterns
_keys
compileModes
classGen
ClassGenerator
compileApplyTemplates
classGen
Enumeration
modes
elements
while
hasMoreElements
block
Mode
mode
Mode
nextElement
compileApplyTemplates
classGen
getMode
Mode
modeName
QName
if
modeName
block
if
_defaultMode
block
_defaultMode
Mode
EMPTYSTRING
return
_defaultMode
block
Mode
mode
Mode
get
modeName
if
mode
block
String
suffix
toString
_nextModeSerial
put
modeName
mode
Mode
modeName
suffix
return
mode
typeCheck
Type
stable
SymbolTable
int
count
size
for
forControl
int
i
i
count
i
block
VariableBase
var
VariableBase
elementAt
i
typeCheck
stable
return
typeCheckContents
stable
translate
classGen
ClassGenerator
methodGen
MethodGenerator
translate
addDOMField
classGen
ClassGenerator
FieldGen
fgen
FieldGen
ACC_PUBLIC
getJCRefType
DOM_INTF_SIG
DOM_FIELD
getConstantPool
addField
getField
addStaticField
classGen
ClassGenerator
type
String
name
String
FieldGen
fgen
FieldGen
ACC_PROTECTED
ACC_STATIC
getJCRefType
type
name
getConstantPool
addField
getField
translate
_className
getXSLTC
getClassName
ClassGenerator
classGen
ClassGenerator
_className
TRANSLET_CLASS
EMPTYSTRING
ACC_PUBLIC
ACC_SUPER
addDOMField
classGen
compileTransform
classGen
Enumeration
elements
elements
while
hasMoreElements
block
Object
element
nextElement
if
element
Template
block
Template
template
Template
element
getMode
addTemplate
template
getModeName
if
element
AttributeSet
block
AttributeSet
element
if
element
Output
block
Output
output
Output
element
if
enabled
_lastOutputElement
output
block
checkOutputMethod
processModes
compileModes
classGen
compileStaticInitializer
classGen
compileConstructor
classGen
_lastOutputElement
if
getParser
errorsFound
block
getXSLTC
dumpClass
getJavaClass
compileStaticInitializer
classGen
ClassGenerator
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
InstructionList
MethodGenerator
staticConst
MethodGenerator
ACC_PUBLIC
ACC_STATIC
VOID
_className
il
cpg
addStaticField
classGen
STRING_SIG
STATIC_NAMES_ARRAY_FIELD
addStaticField
classGen
STRING_SIG
STATIC_URIS_ARRAY_FIELD
addStaticField
classGen
STATIC_TYPES_ARRAY_FIELD
addStaticField
classGen
STRING_SIG
STATIC_NAMESPACE_ARRAY_FIELD
int
charDataFieldCount
getXSLTC
getCharacterDataCount
for
forControl
int
i
i
charDataFieldCount
i
block
addStaticField
classGen
STATIC_CHAR_DATA_FIELD_SIG
STATIC_CHAR_DATA_FIELD
i
Vector
namesIndex
getXSLTC
getNamesIndex
int
size
size
String
namesArray
String
size
String
urisArray
String
size
int
typesArray
int
size
int
index
for
forControl
int
i
i
size
i
block
String
encodedName
String
elementAt
i
if
index
lastIndexOf
block
urisArray
i
substring
index
index
index
if
charAt
index
block
typesArray
i
ATTRIBUTE_NODE
index
if
charAt
index
block
typesArray
i
NAMESPACE_NODE
index
block
typesArray
i
ELEMENT_NODE
if
index
block
namesArray
i
encodedName
block
namesArray
i
substring
index
append
PUSH
cpg
size
append
ANEWARRAY
addClass
STRING
for
forControl
int
i
i
size
i
block
String
name
namesArray
i
append
DUP
append
PUSH
cpg
i
append
PUSH
cpg
name
append
AASTORE
append
PUTSTATIC
addFieldref
_className
STATIC_NAMES_ARRAY_FIELD
NAMES_INDEX_SIG
append
PUSH
cpg
size
append
ANEWARRAY
addClass
STRING
for
forControl
int
i
i
size
i
block
String
uri
urisArray
i
append
DUP
append
PUSH
cpg
i
append
PUSH
cpg
uri
append
AASTORE
append
PUTSTATIC
addFieldref
_className
STATIC_URIS_ARRAY_FIELD
URIS_INDEX_SIG
append
PUSH
cpg
size
append
NEWARRAY
INT
for
forControl
int
i
i
size
i
block
int
nodeType
typesArray
i
append
DUP
append
PUSH
cpg
i
append
PUSH
cpg
nodeType
append
IASTORE
append
PUTSTATIC
addFieldref
_className
STATIC_TYPES_ARRAY_FIELD
TYPES_INDEX_SIG
Vector
namespaces
getXSLTC
getNamespaceIndex
append
PUSH
cpg
size
append
ANEWARRAY
addClass
STRING
for
forControl
int
i
i
size
i
block
String
ns
String
elementAt
i
append
DUP
append
PUSH
cpg
i
append
PUSH
cpg
ns
append
AASTORE
append
PUTSTATIC
addFieldref
_className
STATIC_NAMESPACE_ARRAY_FIELD
NAMESPACE_INDEX_SIG
int
charDataCount
getXSLTC
getCharacterDataCount
int
toCharArray
addMethodref
STRING
for
forControl
int
i
i
charDataCount
i
block
append
PUSH
cpg
getXSLTC
getCharacterData
i
append
INVOKEVIRTUAL
toCharArray
append
PUTSTATIC
addFieldref
_className
STATIC_CHAR_DATA_FIELD
i
STATIC_CHAR_DATA_FIELD_SIG
append
RETURN
stripAttributes
setMaxLocals
setMaxStack
addMethod
getMethod
compileConstructor
classGen
ClassGenerator
output
Output
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
InstructionList
MethodGenerator
constructor
MethodGenerator
ACC_PUBLIC
VOID
_className
il
cpg
append
loadTranslet
append
INVOKESPECIAL
addMethodref
TRANSLET_CLASS
append
loadTranslet
append
GETSTATIC
addFieldref
_className
STATIC_NAMES_ARRAY_FIELD
NAMES_INDEX_SIG
append
PUTFIELD
addFieldref
TRANSLET_CLASS
NAMES_INDEX
NAMES_INDEX_SIG
append
loadTranslet
append
GETSTATIC
addFieldref
_className
STATIC_URIS_ARRAY_FIELD
URIS_INDEX_SIG
append
PUTFIELD
addFieldref
TRANSLET_CLASS
URIS_INDEX
URIS_INDEX_SIG
append
loadTranslet
append
GETSTATIC
addFieldref
_className
STATIC_TYPES_ARRAY_FIELD
TYPES_INDEX_SIG
append
PUTFIELD
addFieldref
TRANSLET_CLASS
TYPES_INDEX
TYPES_INDEX_SIG
append
loadTranslet
append
GETSTATIC
addFieldref
_className
STATIC_NAMESPACE_ARRAY_FIELD
NAMESPACE_INDEX_SIG
append
PUTFIELD
addFieldref
TRANSLET_CLASS
NAMESPACE_INDEX
NAMESPACE_INDEX_SIG
append
loadTranslet
append
PUSH
cpg
CURRENT_TRANSLET_VERSION
append
PUTFIELD
addFieldref
TRANSLET_CLASS
TRANSLET_VERSION_INDEX
TRANSLET_VERSION_INDEX_SIG
if
_hasIdCall
block
append
loadTranslet
append
PUSH
cpg
TRUE
append
PUTFIELD
addFieldref
TRANSLET_CLASS
HASIDCALL_INDEX
HASIDCALL_INDEX_SIG
if
output
block
translate
classGen
constructor
if
_numberFormattingUsed
translateDefaultDFS
classGen
constructor
append
RETURN
stripAttributes
setMaxLocals
setMaxStack
addMethod
getMethod
compileTopLevel
String
classGen
ClassGenerator
elements
Enumeration
ConstantPoolGen
cpg
getConstantPool
org
apache
bcel
generic
Type
argTypes
getJCRefType
DOM_INTF_SIG
getJCRefType
NODE_ITERATOR_SIG
getJCRefType
TRANSLET_OUTPUT_SIG
String
argNames
DOCUMENT_PNAME
ITERATOR_PNAME
TRANSLET_OUTPUT_PNAME
InstructionList
il
InstructionList
MethodGenerator
toplevel
MethodGenerator
ACC_PUBLIC
VOID
argTypes
argNames
_className
il
getConstantPool
addException
LocalVariableGen
current
addLocalVariable
INT
getEnd
int
setFilter
addInterfaceMethodref
DOM_INTF
append
PUSH
cpg
ROOT_NODE
append
ISTORE
getIndex
_globals
resolveReferences
_globals
int
count
size
for
forControl
int
i
i
count
i
block
VariableBase
var
VariableBase
elementAt
i
translate
classGen
toplevel
Vector
whitespaceRules
Vector
while
hasMoreElements
block
Object
element
nextElement
if
element
DecimalFormatting
block
DecimalFormatting
element
if
element
Whitespace
block
addAll
Whitespace
element
if
size
block
translateRules
whitespaceRules
classGen
if
containsMethod
STRIP_SPACE
STRIP_SPACE_PARAMS
block
append
loadDOM
append
loadTranslet
append
INVOKEINTERFACE
setFilter
append
RETURN
stripAttributes
setMaxLocals
setMaxStack
removeNOPs
addMethod
getMethod
return
DOM_INTF_SIG
NODE_ITERATOR_SIG
TRANSLET_OUTPUT_SIG
resolveReferences
Vector
input
Vector
for
forControl
int
i
i
size
i
block
VariableBase
var
VariableBase
elementAt
i
Vector
dep
getDependencies
int
depSize
dep
size
for
forControl
int
j
j
depSize
j
block
VariableBase
depVar
VariableBase
elementAt
j
if
contains
depVar
block
addElement
depVar
Vector
result
Vector
while
size
block
boolean
changed
for
forControl
int
i
i
size
block
VariableBase
var
VariableBase
elementAt
i
Vector
dep
getDependencies
if
dep
containsAll
dep
block
addElement
var
remove
i
changed
block
i
if
changed
block
ErrorMsg
err
ErrorMsg
CIRCULAR_VARIABLE_ERR
toString
getParser
reportError
ERROR
err
return
result
return
result
compileBuildKeys
String
classGen
ClassGenerator
ConstantPoolGen
cpg
getConstantPool
org
apache
bcel
generic
Type
argTypes
getJCRefType
DOM_INTF_SIG
getJCRefType
NODE_ITERATOR_SIG
getJCRefType
TRANSLET_OUTPUT_SIG
INT
String
argNames
DOCUMENT_PNAME
ITERATOR_PNAME
TRANSLET_OUTPUT_PNAME
InstructionList
il
InstructionList
MethodGenerator
buildKeys
MethodGenerator
ACC_PUBLIC
VOID
argTypes
argNames
_className
il
getConstantPool
addException
Enumeration
elements
elements
while
hasMoreElements
block
Object
element
nextElement
if
element
Key
block
Key
key
Key
element
translate
classGen
buildKeys
put
getName
key
append
RETURN
stripAttributes
setMaxLocals
setMaxStack
removeNOPs
addMethod
getMethod
return
DOM_INTF_SIG
NODE_ITERATOR_SIG
TRANSLET_OUTPUT_SIG
compileTransform
classGen
ClassGenerator
ConstantPoolGen
cpg
getConstantPool
org
apache
bcel
generic
Type
argTypes
org
apache
bcel
generic
Type
argTypes
getJCRefType
DOM_INTF_SIG
argTypes
getJCRefType
NODE_ITERATOR_SIG
argTypes
getJCRefType
TRANSLET_OUTPUT_SIG
String
argNames
String
argNames
DOCUMENT_PNAME
argNames
ITERATOR_PNAME
argNames
TRANSLET_OUTPUT_PNAME
InstructionList
il
InstructionList
MethodGenerator
transf
MethodGenerator
ACC_PUBLIC
VOID
argTypes
argNames
_className
il
getConstantPool
addException
LocalVariableGen
current
addLocalVariable
INT
getEnd
String
applyTemplatesSig
getApplyTemplatesSig
int
applyTemplates
addMethodref
getClassName
applyTemplatesSig
int
domField
addFieldref
getClassName
DOM_FIELD
DOM_INTF_SIG
append
loadTranslet
if
isMultiDocument
block
append
NEW
addClass
MULTI_DOM_CLASS
append
DUP
append
loadTranslet
append
loadDOM
append
INVOKEVIRTUAL
addMethodref
TRANSLET_CLASS
DOM_INTF_SIG
DOM_ADAPTER_SIG
if
isMultiDocument
block
int
init
addMethodref
MULTI_DOM_CLASS
DOM_INTF_SIG
append
INVOKESPECIAL
init
append
PUTFIELD
domField
append
PUSH
cpg
ROOT_NODE
append
ISTORE
getIndex
append
loadTranslet
append
loadHandler
int
index
addMethodref
TRANSLET_CLASS
OUTPUT_HANDLER_SIG
append
INVOKEVIRTUAL
index
String
keySig
compileBuildKeys
classGen
int
keyIdx
addMethodref
getClassName
keySig
append
loadTranslet
append
loadTranslet
append
GETFIELD
domField
append
loadIterator
append
loadHandler
append
PUSH
cpg
ROOT_NODE
append
INVOKEVIRTUAL
keyIdx
Enumeration
toplevel
elements
if
size
hasMoreElements
block
String
topLevelSig
compileTopLevel
classGen
toplevel
int
topLevelIdx
addMethodref
getClassName
topLevelSig
append
loadTranslet
append
loadTranslet
append
GETFIELD
domField
append
loadIterator
append
loadHandler
append
INVOKEVIRTUAL
topLevelIdx
append
loadHandler
append
startDocument
append
loadTranslet
append
loadTranslet
append
GETFIELD
domField
append
loadIterator
append
loadHandler
append
INVOKEVIRTUAL
applyTemplates
append
loadHandler
append
endDocument
append
RETURN
stripAttributes
setMaxLocals
setMaxStack
removeNOPs
addMethod
getMethod
peepHoleOptimization
methodGen
MethodGenerator
String
pattern
InstructionList
il
getInstructionList
InstructionFinder
find
InstructionFinder
il
for
forControl
Iterator
iter
search
pattern
hasNext
block
InstructionHandle
match
InstructionHandle
next
try
delete
match
match
catchClause
e
addParam
int
param
Param
addElement
param
return
size
addVariable
int
global
Variable
addElement
global
return
size
display
indent
int
indent
indent
println
displayContents
indent
IndentIncrement
getNamespace
String
prefix
String
return
lookupNamespace
prefix
getClassName
String
return
_className
getTemplates
Vector
return
_templates
getAllValidTemplates
Vector
if
_includedStylesheets
block
return
_templates
if
_allValidTemplates
block
Vector
templates
Vector
int
size
size
for
forControl
int
i
i
size
i
block
Stylesheet
included
Stylesheet
elementAt
i
addAll
getAllValidTemplates
addAll
_templates
if
_parentStylesheet
block
return
templates
_allValidTemplates
templates
return
_allValidTemplates
addTemplate
template
Template
addElement
template
SyntaxTreeNode
