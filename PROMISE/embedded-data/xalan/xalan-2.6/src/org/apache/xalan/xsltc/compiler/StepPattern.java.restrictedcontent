StepPattern
int
NO_CONTEXT
int
SIMPLE_CONTEXT
int
GENERAL_CONTEXT
int
_axis
int
_nodeType
Vector
_predicates
Step
_step
boolean
_isEpsilon
int
_contextCase
double
_priority
MAX_VALUE
StepPattern
axis
int
nodeType
int
predicates
Vector
_axis
axis
_nodeType
nodeType
_predicates
predicates
setParser
parser
Parser
setParser
parser
if
_predicates
block
int
n
size
for
forControl
int
i
i
n
i
block
Predicate
exp
Predicate
elementAt
i
setParser
parser
setParent
getNodeType
int
return
_nodeType
setPriority
priority
double
_priority
priority
getKernelPattern
StepPattern
return
isWildcard
boolean
return
_isEpsilon
hasPredicates
setPredicates
StepPattern
predicates
Vector
_predicates
predicates
return
hasPredicates
boolean
return
_predicates
size
getDefaultPriority
double
if
_priority
MAX_VALUE
block
return
_priority
if
hasPredicates
block
return
block
switch
_nodeType
case
return
case
return
case
return
_nodeType
GTYPE
getAxis
int
return
_axis
reduceKernelPattern
_isEpsilon
toString
String
StringBuffer
buffer
StringBuffer
append
append
append
_isEpsilon
toString
_nodeType
toString
_nodeType
names
_axis
if
_predicates
append
append
toString
return
append
toString
analyzeCases
int
boolean
noContext
int
n
size
for
forControl
int
i
i
n
noContext
i
block
Predicate
pred
Predicate
elementAt
i
if
isNthPositionFilter
hasPositionCall
hasLastCall
block
noContext
if
noContext
block
return
NO_CONTEXT
if
n
block
return
SIMPLE_CONTEXT
return
GENERAL_CONTEXT
getNextFieldName
String
return
getXSLTC
nextStepPatternSerial
typeCheck
Type
stable
SymbolTable
if
hasPredicates
block
int
n
size
for
forControl
int
i
i
n
i
block
Predicate
pred
Predicate
elementAt
i
typeCheck
stable
_contextCase
analyzeCases
Step
step
if
_contextCase
SIMPLE_CONTEXT
block
Predicate
pred
Predicate
elementAt
if
isNthPositionFilter
block
_contextCase
GENERAL_CONTEXT
step
Step
_axis
_nodeType
_predicates
block
step
Step
_axis
_nodeType
if
_contextCase
GENERAL_CONTEXT
block
int
len
size
for
forControl
int
i
i
len
i
block
Predicate
elementAt
i
step
Step
_axis
_nodeType
_predicates
if
step
block
setParser
getParser
typeCheck
stable
_step
step
return
_axis
CHILD
Element
Attribute
translateKernel
classGen
ClassGenerator
methodGen
MethodGenerator
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
getInstructionList
if
_nodeType
ELEMENT_NODE
block
int
check
addInterfaceMethodref
DOM_INTF
append
loadDOM
append
SWAP
append
INVOKEINTERFACE
check
BranchHandle
icmp
append
IFNE
add
append
GOTO_W
setTarget
append
NOP
if
_nodeType
ATTRIBUTE_NODE
block
int
check
addInterfaceMethodref
DOM_INTF
append
loadDOM
append
SWAP
append
INVOKEINTERFACE
check
BranchHandle
icmp
append
IFNE
add
append
GOTO_W
setTarget
append
NOP
block
int
getEType
addInterfaceMethodref
DOM_INTF
append
loadDOM
append
SWAP
append
INVOKEINTERFACE
getEType
append
PUSH
cpg
_nodeType
BranchHandle
icmp
append
IF_ICMPEQ
add
append
GOTO_W
setTarget
append
NOP
translateNoContext
classGen
ClassGenerator
methodGen
MethodGenerator
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
getInstructionList
append
loadCurrentNode
append
SWAP
append
storeCurrentNode
if
_isEpsilon
block
append
loadCurrentNode
translateKernel
classGen
methodGen
int
n
size
for
forControl
int
i
i
n
i
block
Predicate
pred
Predicate
elementAt
i
Expression
exp
getExpr
translateDesynthesized
classGen
methodGen
append
_trueList
append
_falseList
InstructionHandle
restore
restore
append
storeCurrentNode
backPatchTrueList
restore
BranchHandle
skipFalse
append
GOTO
restore
append
storeCurrentNode
backPatchFalseList
restore
add
append
GOTO
setTarget
append
NOP
translateSimpleContext
classGen
ClassGenerator
methodGen
MethodGenerator
int
index
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
getInstructionList
LocalVariableGen
match
match
addLocalVariable
getJCRefType
NODE_SIG
getEnd
append
ISTORE
getIndex
if
_isEpsilon
block
append
ILOAD
getIndex
translateKernel
classGen
methodGen
append
loadCurrentNode
append
loadIterator
index
addMethodref
MATCHING_ITERATOR
NODE_ITERATOR_SIG
append
NEW
addClass
MATCHING_ITERATOR
append
DUP
append
ILOAD
getIndex
translate
classGen
methodGen
append
INVOKESPECIAL
index
append
loadDOM
append
ILOAD
getIndex
index
addInterfaceMethodref
DOM_INTF
GET_PARENT
GET_PARENT_SIG
append
INVOKEINTERFACE
index
append
setStartNode
append
storeIterator
append
ILOAD
getIndex
append
storeCurrentNode
Predicate
pred
Predicate
elementAt
Expression
exp
getExpr
translateDesynthesized
classGen
methodGen
InstructionHandle
restore
append
storeIterator
append
storeCurrentNode
backPatchTrueList
restore
BranchHandle
skipFalse
append
GOTO
restore
append
storeIterator
append
storeCurrentNode
backPatchFalseList
restore
add
append
GOTO
setTarget
append
NOP
translateGeneralContext
classGen
ClassGenerator
methodGen
MethodGenerator
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
getInstructionList
int
iteratorIndex
BranchHandle
ifBlock
LocalVariableGen
iter
node
node2
String
iteratorName
getNextFieldName
node
addLocalVariable
getJCRefType
NODE_SIG
getEnd
append
ISTORE
getIndex
iter
addLocalVariable
getJCRefType
NODE_ITERATOR_SIG
getEnd
if
isExternal
block
Field
iterator
Field
ACC_PRIVATE
addUtf8
iteratorName
addUtf8
NODE_ITERATOR_SIG
getConstantPool
addField
iterator
iteratorIndex
addFieldref
getClassName
iteratorName
NODE_ITERATOR_SIG
append
loadTranslet
append
GETFIELD
iteratorIndex
append
DUP
append
ASTORE
getIndex
ifBlock
append
IFNONNULL
append
loadTranslet
translate
classGen
methodGen
append
ASTORE
getIndex
if
isExternal
block
append
ALOAD
getIndex
append
PUTFIELD
iteratorIndex
setTarget
append
NOP
append
loadDOM
append
ILOAD
getIndex
int
index
addInterfaceMethodref
DOM_INTF
GET_PARENT
GET_PARENT_SIG
append
INVOKEINTERFACE
index
append
ALOAD
getIndex
append
SWAP
append
setStartNode
BranchHandle
skipNext
InstructionHandle
begin
next
node2
addLocalVariable
getJCRefType
NODE_SIG
getEnd
skipNext
append
GOTO
next
append
ALOAD
getIndex
begin
append
nextNode
append
DUP
append
ISTORE
getIndex
add
append
IFLT
append
ILOAD
getIndex
append
ILOAD
getIndex
append
IF_ICMPLT
next
append
ILOAD
getIndex
append
ILOAD
getIndex
add
append
IF_ICMPNE
setTarget
begin
translate
classGen
ClassGenerator
methodGen
MethodGenerator
ConstantPoolGen
cpg
getConstantPool
InstructionList
il
getInstructionList
if
hasPredicates
block
switch
_contextCase
case
translateNoContext
classGen
methodGen
break
case
translateSimpleContext
classGen
methodGen
break
case
translateGeneralContext
classGen
methodGen
break
if
isWildcard
block
append
POP
block
translateKernel
classGen
methodGen
RelativePathPattern
