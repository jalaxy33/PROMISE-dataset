StepPattern
int
m_axis
StepPattern
whatToShow
int
namespace
String
name
String
axis
int
axisForPredicate
int
whatToShow
namespace
name
m_axis
axis
StepPattern
whatToShow
int
axis
int
axisForPredicate
int
whatToShow
m_axis
axis
String
m_targetString
calcTargetString
int
whatToShow
getWhatToShow
switch
whatToShow
case
SHOW_COMMENT
m_targetString
PSEUDONAME_COMMENT
break
case
SHOW_TEXT
SHOW_CDATA_SECTION
SHOW_TEXT
SHOW_CDATA_SECTION
m_targetString
PSEUDONAME_TEXT
break
case
SHOW_ALL
m_targetString
PSEUDONAME_ANY
break
case
SHOW_DOCUMENT
SHOW_DOCUMENT
SHOW_DOCUMENT_FRAGMENT
m_targetString
PSEUDONAME_ROOT
break
case
SHOW_ELEMENT
if
WILD
m_name
m_targetString
PSEUDONAME_ANY
m_targetString
m_name
break
case
m_targetString
PSEUDONAME_ANY
break
getTargetString
String
return
m_targetString
StepPattern
m_relativePathPattern
fixupVariables
vars
java
util
Vector
globalsSize
int
fixupVariables
vars
globalsSize
if
m_predicates
block
for
forControl
int
i
i
length
i
block
m_predicates
i
fixupVariables
vars
globalsSize
if
m_relativePathPattern
block
fixupVariables
vars
globalsSize
setRelativePathPattern
expr
StepPattern
m_relativePathPattern
expr
exprSetParent
calcScore
getRelativePathPattern
StepPattern
return
m_relativePathPattern
getPredicates
Expression
return
m_predicates
Expression
m_predicates
canTraverseOutsideSubtree
boolean
int
n
getPredicateCount
for
forControl
int
i
i
n
i
block
if
getPredicate
canTraverseOutsideSubtree
i
return
return
getPredicate
Expression
i
int
return
m_predicates
i
getPredicateCount
int
return
m_predicates
length
setPredicates
predicates
Expression
m_predicates
predicates
if
predicates
block
for
forControl
int
i
i
length
i
block
predicates
i
exprSetParent
calcScore
calcScore
if
getPredicateCount
m_relativePathPattern
block
m_score
SCORE_OTHER
calcScore
if
m_targetString
calcTargetString
execute
XObject
xctxt
XPathContext
currentNode
int
DTM
dtm
getDTM
currentNode
if
dtm
block
int
expType
getExpandedTypeID
currentNode
return
execute
xctxt
currentNode
dtm
expType
return
SCORE_NONE
execute
XObject
xctxt
XPathContext
return
execute
xctxt
getCurrentNode
execute
XObject
xctxt
XPathContext
currentNode
int
dtm
DTM
expType
int
if
m_whatToShow
SHOW_BYFUNCTION
block
if
m_relativePathPattern
block
return
execute
xctxt
return
SCORE_NONE
XObject
score
score
execute
xctxt
currentNode
dtm
expType
if
score
SCORE_NONE
return
SCORE_NONE
if
getPredicateCount
block
if
executePredicates
xctxt
dtm
currentNode
return
SCORE_NONE
if
m_relativePathPattern
return
executeRelativePathPattern
xctxt
dtm
currentNode
return
score
checkProximityPosition
boolean
xctxt
XPathContext
predPos
int
dtm
DTM
context
int
pos
int
try
DTMAxisTraverser
traverser
getAxisTraverser
PRECEDINGSIBLING
for
forControl
int
child
first
context
NULL
child
child
next
context
child
block
try
pushCurrentNode
child
if
SCORE_NONE
execute
xctxt
child
block
boolean
pass
try
pushSubContextList
for
forControl
int
i
i
predPos
i
block
pushPredicatePos
i
try
XObject
pred
m_predicates
i
execute
xctxt
try
if
CLASS_NUMBER
getType
block
throw
Error
if
boolWithSideEffects
block
pass
break
detach
popPredicatePos
popSubContextList
if
pass
pos
if
pos
return
popCurrentNode
catchClause
se
throw
java
lang
RuntimeException
getMessage
return
pos
getProximityPosition
int
xctxt
XPathContext
predPos
int
findLast
boolean
int
pos
int
context
getCurrentNode
DTM
dtm
getDTM
context
int
parent
getParent
context
try
DTMAxisTraverser
traverser
getAxisTraverser
CHILD
for
forControl
int
child
first
parent
NULL
child
child
next
parent
child
block
try
pushCurrentNode
child
if
SCORE_NONE
execute
xctxt
child
block
boolean
pass
try
pushSubContextList
for
forControl
int
i
i
predPos
i
block
pushPredicatePos
i
try
XObject
pred
m_predicates
i
execute
xctxt
try
if
CLASS_NUMBER
getType
block
if
pos
int
numWithSideEffects
block
pass
break
if
boolWithSideEffects
block
pass
break
detach
popPredicatePos
popSubContextList
if
pass
pos
if
findLast
child
context
block
return
pos
popCurrentNode
catchClause
se
throw
java
lang
RuntimeException
getMessage
return
pos
getProximityPosition
int
xctxt
XPathContext
return
getProximityPosition
xctxt
getPredicatePos
getLastPos
int
xctxt
XPathContext
return
getProximityPosition
xctxt
getPredicatePos
executeRelativePathPattern
XObject
xctxt
XPathContext
dtm
DTM
currentNode
int
XObject
score
SCORE_NONE
int
context
currentNode
DTMAxisTraverser
traverser
traverser
getAxisTraverser
m_axis
for
forControl
int
relative
first
context
NULL
relative
relative
next
context
relative
block
try
pushCurrentNode
relative
score
execute
xctxt
if
score
SCORE_NONE
break
popCurrentNode
return
score
executePredicates
boolean
xctxt
XPathContext
dtm
DTM
currentNode
int
boolean
result
boolean
positionAlreadySeen
int
n
getPredicateCount
try
pushSubContextList
for
forControl
int
i
i
n
i
block
pushPredicatePos
i
try
XObject
pred
m_predicates
i
execute
xctxt
try
if
CLASS_NUMBER
getType
block
int
pos
int
num
if
positionAlreadySeen
block
result
pos
break
block
positionAlreadySeen
if
checkProximityPosition
xctxt
i
dtm
currentNode
pos
block
result
break
if
boolWithSideEffects
block
result
break
detach
popPredicatePos
popSubContextList
return
result
toString
String
StringBuffer
buf
StringBuffer
for
forControl
StepPattern
pat
pat
pat
m_relativePathPattern
block
if
pat
append
append
names
m_axis
append
if
m_whatToShow
block
append
if
SHOW_BYFUNCTION
m_whatToShow
block
append
if
SHOW_ALL
m_whatToShow
block
append
if
SHOW_TEXT
m_whatToShow
block
append
if
SHOW_PROCESSING_INSTRUCTION
m_whatToShow
block
append
if
m_name
block
append
m_name
append
if
SHOW_COMMENT
m_whatToShow
block
append
if
m_name
block
if
SHOW_ATTRIBUTE
m_whatToShow
block
append
if
m_namespace
block
append
append
m_namespace
append
append
m_name
if
SHOW_ATTRIBUTE
m_whatToShow
block
append
if
SHOW_DOCUMENT
SHOW_DOCUMENT_FRAGMENT
m_whatToShow
block
append
block
append
toHexString
m_whatToShow
if
m_predicates
block
for
forControl
int
i
i
length
i
block
append
append
m_predicates
i
append
return
toString
boolean
DEBUG_MATCHES
getMatchScore
double
xctxt
XPathContext
context
int
pushCurrentNode
context
pushCurrentExpressionNode
context
try
XObject
score
execute
xctxt
return
num
popCurrentNode
popCurrentExpressionNode
setAxis
axis
int
m_axis
axis
getAxis
int
return
m_axis
PredOwner
int
m_index
PredOwner
index
int
m_index
index
getExpression
Expression
return
m_predicates
m_index
setExpression
exp
Expression
exprSetParent
m_predicates
m_index
exp
ExpressionOwner
callVisitors
owner
ExpressionOwner
visitor
XPathVisitor
if
visitMatchPattern
owner
block
callSubtreeVisitors
visitor
callSubtreeVisitors
visitor
XPathVisitor
if
m_predicates
block
int
n
length
for
forControl
int
i
i
n
i
block
ExpressionOwner
predOwner
PredOwner
i
if
visitPredicate
predOwner
m_predicates
i
block
m_predicates
i
callVisitors
predOwner
visitor
if
m_relativePathPattern
block
callVisitors
visitor
getExpression
Expression
return
m_relativePathPattern
setExpression
exp
Expression
exprSetParent
m_relativePathPattern
StepPattern
exp
deepEquals
boolean
expr
Expression
if
deepEquals
expr
return
StepPattern
sp
StepPattern
expr
if
m_predicates
block
int
n
length
if
m_predicates
length
n
return
for
forControl
int
i
i
n
i
block
if
m_predicates
i
deepEquals
m_predicates
i
return
if
m_predicates
return
if
m_relativePathPattern
block
if
deepEquals
m_relativePathPattern
return
if
m_relativePathPattern
return
return
NodeTest
SubContextList
ExpressionOwner
