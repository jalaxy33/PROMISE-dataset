FTP
int
SEND_FILES
int
GET_FILES
int
DEL_FILES
int
LIST_FILES
int
MK_DIR
int
CHMOD
int
RM_DIR
int
CODE_521
int
DEFAULT_FTP_PORT
String
remotedir
String
server
String
userid
String
password
File
listing
boolean
binary
boolean
passive
boolean
verbose
boolean
newerOnly
long
timeDiffMillis
boolean
timeDiffAuto
int
action
SEND_FILES
Vector
filesets
Vector
Vector
dirCache
Vector
int
transferred
String
remoteFileSep
int
port
DEFAULT_FTP_PORT
boolean
skipFailedTransfers
int
skipped
boolean
ignoreNoncriticalErrors
boolean
preserveLastModified
String
chmod
String
umask
FileUtils
fileUtils
newFileUtils
String
ACTION_STRS
String
COMPLETED_ACTION_STRS
String
ACTION_TARGET_STRS
FTPDirectoryScanner
FTPClient
ftp
String
rootPath
boolean
remoteSystemCaseSensitive
boolean
remoteSensitivityChecked
FTPDirectoryScanner
ftp
FTPClient
ftp
ftp
setFollowSymlinks
scan
if
includes
block
includes
String
includes
if
excludes
block
excludes
String
filesIncluded
Vector
filesNotIncluded
Vector
filesExcluded
Vector
dirsIncluded
Vector
dirsNotIncluded
Vector
dirsExcluded
Vector
try
String
cwd
printWorkingDirectory
checkIncludePatterns
clearCaches
changeWorkingDirectory
cwd
catchClause
e
throw
BuildException
e
checkIncludePatterns
Hashtable
newroots
Hashtable
for
forControl
int
icounter
icounter
length
icounter
block
String
newpattern
rtrimWildcardTokens
includes
icounter
put
newpattern
includes
icounter
if
remotedir
block
try
remotedir
printWorkingDirectory
catchClause
e
throw
BuildException
getLocation
AntFTPFile
baseFTPFile
AntFTPRootFile
ftp
remotedir
rootPath
getAbsolutePath
if
containsKey
block
scandir
rootPath
block
Enumeration
enum2
keys
while
hasMoreElements
block
String
currentelement
String
nextElement
String
originalpattern
String
get
currentelement
AntFTPFile
myfile
AntFTPFile
baseFTPFile
currentelement
boolean
isOK
boolean
traversesSymlinks
String
path
if
exists
block
if
remoteSensitivityChecked
remoteSystemCaseSensitive
isFollowSymlinks
block
path
getFastRelativePath
block
try
path
getRelativePath
traversesSymlinks
isTraverseSymlinks
catchClause
be
throw
BuildException
be
getLocation
catchClause
be
isOK
block
isOK
if
isOK
block
currentelement
replace
charAt
separatorChar
if
isFollowSymlinks
traversesSymlinks
block
continue
if
isDirectory
block
if
isIncluded
currentelement
length
block
accountForIncludedDir
currentelement
myfile
block
if
length
block
if
charAt
length
separatorChar
block
currentelement
currentelement
separatorChar
scandir
getAbsolutePath
currentelement
block
if
isCaseSensitive
equals
currentelement
block
accountForIncludedFile
currentelement
if
isCaseSensitive
equalsIgnoreCase
currentelement
block
accountForIncludedFile
currentelement
scandir
dir
String
vpath
String
fast
boolean
if
fast
hasBeenScanned
vpath
block
return
try
if
changeWorkingDirectory
dir
block
return
String
completePath
if
equals
block
completePath
rootPath
remoteFileSep
replace
separatorChar
charAt
block
completePath
rootPath
FTPFile
newfiles
listFiles
completePath
if
newfiles
block
changeToParentDirectory
return
for
forControl
int
i
i
length
i
block
FTPFile
file
newfiles
i
if
getName
equals
getName
equals
block
if
isFunctioningAsDirectory
ftp
dir
file
block
String
name
vpath
getName
boolean
slowScanAllowed
if
isFollowSymlinks
isSymbolicLink
block
addElement
name
slowScanAllowed
if
isIncluded
name
block
accountForIncludedDir
name
AntFTPFile
ftp
file
completePath
fast
block
addElement
name
if
fast
couldHoldIncluded
name
block
scandir
getName
name
separator
fast
if
fast
slowScanAllowed
block
scandir
getName
name
separator
fast
block
String
name
vpath
getName
if
isFollowSymlinks
isSymbolicLink
block
addElement
name
if
isFunctioningAsFile
ftp
dir
file
block
accountForIncludedFile
name
changeToParentDirectory
catchClause
e
throw
BuildException
e
accountForIncludedFile
name
String
if
contains
name
contains
name
block
if
isIncluded
name
block
if
isExcluded
name
block
addElement
name
block
addElement
name
block
addElement
name
accountForIncludedDir
name
String
file
AntFTPFile
fast
boolean
if
contains
name
contains
name
block
if
isExcluded
name
block
if
fast
block
if
isSymbolicLink
block
try
getClient
changeWorkingDirectory
curpwd
catchClause
ioe
throw
BuildException
scandir
getLink
name
separator
fast
block
try
getClient
changeWorkingDirectory
curpwd
catchClause
ioe
throw
BuildException
scandir
getName
name
separator
fast
addElement
name
block
addElement
name
if
fast
couldHoldIncluded
name
block
try
getClient
changeWorkingDirectory
curpwd
catchClause
ioe
throw
BuildException
scandir
getName
name
separator
fast
Map
fileListMap
HashMap
Set
scannedDirs
HashSet
hasBeenScanned
boolean
vpath
String
return
add
vpath
clearCaches
clear
clear
listFiles
FTPFile
directory
String
changedir
boolean
String
currentPath
directory
if
changedir
block
try
boolean
result
changeWorkingDirectory
directory
if
result
block
return
currentPath
printWorkingDirectory
catchClause
ioe
throw
BuildException
ioe
getLocation
if
containsKey
currentPath
block
getProject
log
MSG_DEBUG
return
FTPFile
get
currentPath
FTPFile
result
try
result
listFiles
catchClause
ioe
throw
BuildException
ioe
getLocation
put
currentPath
result
if
remoteSensitivityChecked
block
checkRemoteSensitivity
result
directory
return
result
listFiles
FTPFile
directory
String
return
listFiles
directory
checkRemoteSensitivity
array
FTPFile
directory
String
if
array
block
return
boolean
candidateFound
String
target
for
forControl
int
icounter
icounter
length
icounter
block
if
array
icounter
isDirectory
block
if
array
icounter
getName
equals
array
icounter
getName
equals
block
candidateFound
target
fiddleName
array
icounter
getName
getProject
log
target
array
icounter
getName
MSG_DEBUG
for
forControl
int
pcounter
pcounter
length
pcounter
block
if
array
pcounter
getName
equals
target
pcounter
icounter
block
candidateFound
if
candidateFound
block
break
if
candidateFound
block
try
getProject
log
target
MSG_DEBUG
remoteSystemCaseSensitive
changeWorkingDirectory
target
catchClause
ioe
remoteSystemCaseSensitive
try
changeWorkingDirectory
directory
catchClause
ioe
throw
BuildException
ioe
getLocation
getProject
log
remoteSystemCaseSensitive
MSG_VERBOSE
remoteSensitivityChecked
fiddleName
String
origin
String
StringBuffer
result
StringBuffer
for
forControl
int
icounter
icounter
length
icounter
block
if
isLowerCase
charAt
icounter
block
append
toUpperCase
charAt
icounter
if
isUpperCase
charAt
icounter
block
append
toLowerCase
charAt
icounter
block
append
charAt
icounter
return
toString
AntFTPFile
FTPClient
client
String
curpwd
FTPFile
ftpFile
AntFTPFile
parent
boolean
relativePathCalculated
boolean
traversesSymlinks
String
relativePath
AntFTPFile
client
FTPClient
ftpFile
FTPFile
curpwd
String
client
client
ftpFile
ftpFile
curpwd
curpwd
AntFTPFile
parent
AntFTPFile
path
String
parent
parent
client
client
Vector
pathElements
tokenizePath
path
try
boolean
result
client
changeWorkingDirectory
getAbsolutePath
if
result
block
return
curpwd
getAbsolutePath
catchClause
ioe
throw
BuildException
curpwd
for
forControl
int
fcount
fcount
size
fcount
block
String
currentPathElement
String
elementAt
fcount
try
boolean
result
client
changeWorkingDirectory
currentPathElement
if
result
isCaseSensitive
remoteSystemCaseSensitive
remoteSensitivityChecked
block
currentPathElement
findPathElementCaseUnsensitive
curpwd
currentPathElement
if
currentPathElement
block
return
if
result
block
return
curpwd
curpwd
remoteFileSep
currentPathElement
catchClause
ioe
throw
BuildException
String
elementAt
fcount
curpwd
String
lastpathelement
String
elementAt
size
FTPFile
theFiles
listFiles
curpwd
ftpFile
getFile
theFiles
lastpathelement
findPathElementCaseUnsensitive
String
parentPath
String
soughtPathElement
String
FTPFile
theFiles
listFiles
parentPath
if
theFiles
block
return
for
forControl
int
icounter
icounter
length
icounter
block
if
theFiles
icounter
getName
equalsIgnoreCase
soughtPathElement
block
return
theFiles
icounter
getName
return
exists
boolean
return
ftpFile
getLink
String
return
getLink
getName
String
return
getName
getAbsolutePath
String
return
curpwd
remoteFileSep
getName
getFastRelativePath
String
String
absPath
getAbsolutePath
if
indexOf
rootPath
remoteFileSep
block
return
substring
length
length
return
getRelativePath
String
if
relativePathCalculated
block
if
parent
block
traversesSymlinks
isTraverseSymlinks
relativePath
getRelativePath
getAbsolutePath
getRelativePath
block
relativePath
getRelativePath
rootPath
relativePathCalculated
return
relativePath
getRelativePath
String
currentPath
String
currentRelativePath
String
Vector
pathElements
tokenizePath
getAbsolutePath
remoteFileSep
Vector
pathElements2
tokenizePath
currentPath
remoteFileSep
String
relPath
currentRelativePath
for
forControl
int
pcount
size
pcount
size
pcount
block
String
currentElement
String
elementAt
pcount
FTPFile
theFiles
listFiles
currentPath
FTPFile
theFile
if
theFiles
block
theFile
getFile
theFiles
currentElement
if
theFile
block
throw
BuildException
currentElement
currentPath
block
traversesSymlinks
traversesSymlinks
isSymbolicLink
if
equals
block
relPath
relPath
remoteFileSep
relPath
relPath
getName
currentPath
currentPath
remoteFileSep
getName
return
relPath
getFile
FTPFile
theFiles
FTPFile
lastpathelement
String
if
theFiles
block
return
for
forControl
int
fcount
fcount
length
fcount
block
if
theFiles
fcount
getName
equals
lastpathelement
block
return
theFiles
fcount
if
isCaseSensitive
theFiles
fcount
getName
equalsIgnoreCase
lastpathelement
block
return
theFiles
fcount
return
isDirectory
boolean
return
isDirectory
isSymbolicLink
boolean
return
isSymbolicLink
getClient
FTPClient
return
client
setCurpwd
curpwd
String
curpwd
curpwd
getCurpwd
String
return
curpwd
isTraverseSymlinks
boolean
if
relativePathCalculated
block
String
relpath
getRelativePath
return
traversesSymlinks
AntFTPRootFile
String
remotedir
AntFTPRootFile
aclient
FTPClient
remotedir
String
aclient
remotedir
remotedir
remotedir
try
getClient
changeWorkingDirectory
remotedir
setCurpwd
getClient
printWorkingDirectory
catchClause
ioe
throw
BuildException
ioe
getLocation
getAbsolutePath
String
return
getCurpwd
getRelativePath
String
return
AntFTPFile
DirectoryScanner
isFunctioningAsDirectory
boolean
ftp
FTPClient
dir
String
file
FTPFile
boolean
result
String
currentWorkingDir
if
isDirectory
block
return
if
isFile
block
return
try
currentWorkingDir
printWorkingDirectory
catchClause
ioe
getProject
log
dir
MSG_DEBUG
if
currentWorkingDir
block
try
result
changeWorkingDirectory
getLink
catchClause
ioe
getProject
log
getLink
MSG_DEBUG
if
result
block
boolean
comeback
try
comeback
changeWorkingDirectory
currentWorkingDir
catchClause
ioe
getProject
log
dir
MSG_ERR
if
comeback
block
throw
BuildException
dir
return
result
isFunctioningAsFile
boolean
ftp
FTPClient
dir
String
file
FTPFile
if
isDirectory
block
return
if
isFile
block
return
return
isFunctioningAsDirectory
ftp
dir
file
setRemotedir
dir
String
remotedir
dir
setServer
server
String
server
server
setPort
port
int
port
port
setUserid
userid
String
userid
userid
setPassword
password
String
password
password
setBinary
binary
boolean
binary
binary
setPassive
passive
boolean
passive
passive
setVerbose
verbose
boolean
verbose
verbose
setNewer
newer
boolean
newerOnly
newer
setTimeDiffMillis
timeDiffMillis
long
timeDiffMillis
timeDiffMillis
setTimeDiffAuto
timeDiffAuto
boolean
timeDiffAuto
timeDiffAuto
setPreserveLastModified
preserveLastModified
boolean
preserveLastModified
preserveLastModified
setDepends
depends
boolean
newerOnly
depends
setSeparator
separator
String
remoteFileSep
separator
setChmod
theMode
String
chmod
theMode
setUmask
theUmask
String
umask
theUmask
addFileset
set
FileSet
addElement
set
setAction
action
String
log
Action
a
Action
setValue
action
action
getAction
setAction
action
Action
action
getAction
setListing
listing
File
listing
listing
setSkipFailedTransfers
skipFailedTransfers
boolean
skipFailedTransfers
skipFailedTransfers
setIgnoreNoncriticalErrors
ignoreNoncriticalErrors
boolean
ignoreNoncriticalErrors
ignoreNoncriticalErrors
checkConfiguration
if
server
block
throw
BuildException
if
userid
block
throw
BuildException
if
password
block
throw
BuildException
if
action
LIST_FILES
listing
block
throw
BuildException
if
action
MK_DIR
remotedir
block
throw
BuildException
if
action
CHMOD
chmod
block
throw
BuildException
transferFiles
int
ftp
FTPClient
fs
FileSet
DirectoryScanner
ds
if
action
SEND_FILES
block
ds
getDirectoryScanner
getProject
block
if
getSelectors
length
getProject
block
getProject
log
MSG_WARN
ds
FTPDirectoryScanner
ftp
setupDirectoryScanner
ds
getProject
setFollowSymlinks
isFollowSymlinks
scan
String
dsfiles
if
action
RM_DIR
block
dsfiles
getIncludedDirectories
block
dsfiles
getIncludedFiles
String
dir
if
getBasedir
action
SEND_FILES
action
GET_FILES
block
throw
BuildException
block
if
action
SEND_FILES
action
GET_FILES
block
dir
getBasedir
getAbsolutePath
BufferedWriter
bw
try
if
action
LIST_FILES
block
File
pd
getParentFile
listing
if
exists
block
mkdirs
bw
BufferedWriter
FileWriter
listing
if
action
RM_DIR
block
for
forControl
int
i
length
i
i
block
rmDir
ftp
dsfiles
i
block
for
forControl
int
i
i
length
i
block
switch
action
case
sendFile
ftp
dir
dsfiles
i
break
case
getFile
ftp
dir
dsfiles
i
break
case
delFile
ftp
dsfiles
i
break
case
listFile
ftp
bw
dsfiles
i
break
case
doSiteCommand
ftp
chmod
resolveFile
dsfiles
i
transferred
break
case
throw
BuildException
action
if
bw
block
close
return
length
transferFiles
ftp
FTPClient
transferred
skipped
if
size
block
throw
BuildException
block
for
forControl
int
i
i
size
i
block
FileSet
fs
FileSet
elementAt
i
if
fs
block
transferFiles
ftp
fs
log
transferred
ACTION_TARGET_STRS
action
COMPLETED_ACTION_STRS
action
if
skipped
block
log
skipped
ACTION_TARGET_STRS
action
COMPLETED_ACTION_STRS
action
resolveFile
String
file
String
return
replace
getProperty
charAt
charAt
createParents
ftp
FTPClient
filename
String
File
dir
File
filename
if
contains
dir
block
return
Vector
parents
Vector
String
dirname
while
dirname
getParent
block
File
checkDir
File
dirname
if
contains
checkDir
block
break
dir
checkDir
addElement
dir
int
i
size
if
i
block
String
cwd
printWorkingDirectory
String
parent
getParent
if
parent
block
if
changeWorkingDirectory
resolveFile
parent
block
throw
BuildException
getReplyString
while
i
block
dir
File
elementAt
i
if
changeWorkingDirectory
getName
block
log
resolveFile
getPath
MSG_VERBOSE
if
makeDirectory
getName
block
handleMkDirFailure
ftp
if
changeWorkingDirectory
getName
block
throw
BuildException
getReplyString
addElement
dir
changeWorkingDirectory
cwd
getTimeDiff
long
ftp
FTPClient
long
returnValue
File
tempFile
findFileName
ftp
try
createNewFile
tempFile
long
localTimeStamp
lastModified
BufferedInputStream
instream
BufferedInputStream
FileInputStream
tempFile
storeFile
getName
instream
close
boolean
success
isPositiveCompletion
getReplyCode
if
success
block
FTPFile
ftpFiles
listFiles
getName
if
length
block
long
remoteTimeStamp
ftpFiles
getTimestamp
getTime
getTime
returnValue
remoteTimeStamp
localTimeStamp
deleteFile
ftpFiles
getName
Delete
mydelete
Delete
getProject
createTask
setFile
getCanonicalFile
execute
catchClause
e
throw
BuildException
e
getLocation
return
returnValue
findFileName
File
ftp
FTPClient
FTPFile
theFiles
int
maxIterations
for
forControl
int
counter
counter
maxIterations
counter
block
File
localFile
createTempFile
toString
counter
String
fileName
getName
boolean
found
try
if
counter
block
theFiles
listFiles
for
forControl
int
counter2
counter2
length
counter2
block
if
theFiles
counter2
getName
equals
fileName
block
found
break
catchClause
ioe
throw
BuildException
ioe
getLocation
if
found
block
deleteOnExit
return
localFile
return
isUpToDate
boolean
ftp
FTPClient
localFile
File
remoteFile
String
log
remoteFile
MSG_VERBOSE
FTPFile
files
listFiles
remoteFile
if
files
length
block
if
action
SEND_FILES
block
log
remoteFile
MSG_VERBOSE
return
block
throw
BuildException
getReplyString
long
remoteTimestamp
files
getTimestamp
getTime
getTime
long
localTimestamp
lastModified
if
action
SEND_FILES
block
return
remoteTimestamp
timeDiffMillis
localTimestamp
block
return
localTimestamp
remoteTimestamp
timeDiffMillis
doSiteCommand
ftp
FTPClient
theCMD
String
boolean
rc
String
myReply
log
theCMD
MSG_VERBOSE
rc
sendSiteCommand
theCMD
if
rc
block
log
theCMD
MSG_WARN
block
myReply
getReplyStrings
for
forControl
int
x
x
length
x
block
if
myReply
x
indexOf
block
log
myReply
x
MSG_WARN
sendFile
ftp
FTPClient
dir
String
filename
String
InputStream
instream
try
File
file
getProject
resolveFile
getPath
File
dir
filename
if
newerOnly
isUpToDate
ftp
file
resolveFile
filename
block
return
if
verbose
block
log
getAbsolutePath
instream
BufferedInputStream
FileInputStream
file
createParents
ftp
filename
storeFile
resolveFile
filename
instream
boolean
success
isPositiveCompletion
getReplyCode
if
success
block
String
s
getReplyString
if
skipFailedTransfers
block
log
s
MSG_WARN
skipped
block
throw
BuildException
s
block
if
chmod
block
doSiteCommand
ftp
chmod
resolveFile
filename
log
getAbsolutePath
server
MSG_VERBOSE
transferred
if
instream
block
try
close
catchClause
ex
delFile
ftp
FTPClient
filename
String
if
verbose
block
log
filename
if
deleteFile
resolveFile
filename
block
String
s
getReplyString
if
skipFailedTransfers
block
log
s
MSG_WARN
skipped
block
throw
BuildException
s
block
log
filename
server
MSG_VERBOSE
transferred
rmDir
ftp
FTPClient
dirname
String
if
verbose
block
log
dirname
if
removeDirectory
resolveFile
dirname
block
String
s
getReplyString
if
skipFailedTransfers
block
log
s
MSG_WARN
skipped
block
throw
BuildException
s
block
log
dirname
server
MSG_VERBOSE
transferred
getFile
ftp
FTPClient
dir
String
filename
String
OutputStream
outstream
try
File
file
getProject
resolveFile
getPath
File
dir
filename
if
newerOnly
isUpToDate
ftp
file
resolveFile
filename
block
return
if
verbose
block
log
filename
getAbsolutePath
File
pdir
getParentFile
file
if
exists
block
mkdirs
outstream
BufferedOutputStream
FileOutputStream
file
retrieveFile
resolveFile
filename
outstream
if
isPositiveCompletion
getReplyCode
block
String
s
getReplyString
if
skipFailedTransfers
block
log
s
MSG_WARN
skipped
block
throw
BuildException
s
block
log
getAbsolutePath
server
MSG_VERBOSE
transferred
if
preserveLastModified
block
close
outstream
FTPFile
remote
listFiles
resolveFile
filename
if
length
block
setFileLastModified
file
remote
getTimestamp
getTime
getTime
if
outstream
block
try
close
catchClause
ex
listFile
ftp
FTPClient
bw
BufferedWriter
filename
String
if
verbose
block
log
filename
FTPFile
ftpfile
listFiles
resolveFile
filename
write
toString
newLine
transferred
makeRemoteDir
ftp
FTPClient
dir
String
String
workingDirectory
printWorkingDirectory
if
verbose
block
log
dir
if
indexOf
block
changeWorkingDirectory
String
subdir
String
StringTokenizer
st
StringTokenizer
dir
while
hasMoreTokens
block
subdir
nextToken
log
subdir
MSG_DEBUG
if
changeWorkingDirectory
subdir
block
if
makeDirectory
subdir
block
int
rc
getReplyCode
if
ignoreNoncriticalErrors
rc
CODE_550
rc
CODE_553
rc
CODE_521
block
throw
BuildException
getReplyString
if
verbose
block
log
block
if
verbose
block
log
changeWorkingDirectory
subdir
if
workingDirectory
block
changeWorkingDirectory
workingDirectory
handleMkDirFailure
ftp
FTPClient
int
rc
getReplyCode
if
ignoreNoncriticalErrors
rc
CODE_550
rc
CODE_553
rc
CODE_521
block
throw
BuildException
getReplyString
execute
checkConfiguration
FTPClient
ftp
try
log
server
MSG_VERBOSE
ftp
FTPClient
connect
server
port
if
isPositiveCompletion
getReplyCode
block
throw
BuildException
getReplyString
log
MSG_VERBOSE
log
MSG_VERBOSE
if
login
userid
password
block
throw
BuildException
log
MSG_VERBOSE
if
binary
block
setFileType
IMAGE_FILE_TYPE
if
isPositiveCompletion
getReplyCode
block
throw
BuildException
getReplyString
block
setFileType
ASCII_FILE_TYPE
if
isPositiveCompletion
getReplyCode
block
throw
BuildException
getReplyString
if
passive
block
log
MSG_VERBOSE
enterLocalPassiveMode
if
isPositiveCompletion
getReplyCode
block
throw
BuildException
getReplyString
if
umask
block
doSiteCommand
ftp
umask
if
action
MK_DIR
block
makeRemoteDir
ftp
remotedir
block
if
remotedir
block
log
MSG_VERBOSE
changeWorkingDirectory
remotedir
if
isPositiveCompletion
getReplyCode
block
throw
BuildException
getReplyString
if
newerOnly
timeDiffAuto
block
timeDiffMillis
getTimeDiff
ftp
log
ACTION_STRS
action
ACTION_TARGET_STRS
action
transferFiles
ftp
catchClause
ex
throw
BuildException
ex
if
ftp
isConnected
block
try
log
MSG_VERBOSE
logout
disconnect
catchClause
ex
Action
String
VALID_ACTIONS
getValues
String
return
VALID_ACTIONS
getAction
int
String
actionL
getValue
toLowerCase
US
if
equals
equals
block
return
SEND_FILES
if
equals
equals
block
return
GET_FILES
if
equals
equals
block
return
DEL_FILES
if
equals
block
return
LIST_FILES
if
equals
block
return
CHMOD
if
equals
block
return
MK_DIR
if
equals
block
return
RM_DIR
return
SEND_FILES
EnumeratedAttribute
Task
