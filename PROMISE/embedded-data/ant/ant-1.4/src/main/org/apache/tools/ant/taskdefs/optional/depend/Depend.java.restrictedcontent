Depend
ClassFileInfo
File
absoluteFile
String
relativeName
String
className
Path
srcPath
Path
destPath
File
cache
Hashtable
affectedClassMap
Hashtable
classFileInfoMap
Hashtable
classpathDependencies
Hashtable
outOfDateClasses
boolean
closure
boolean
dump
Path
dependClasspath
String
CACHE_FILE_NAME
String
CLASSNAME_PREPEND
setClasspath
classpath
Path
if
dependClasspath
block
dependClasspath
classpath
block
append
classpath
getClasspath
Path
return
dependClasspath
createClasspath
Path
if
dependClasspath
block
dependClasspath
Path
project
return
createPath
setClasspathRef
r
Reference
createClasspath
setRefid
r
readCachedDependencies
Hashtable
Hashtable
dependencyMap
Hashtable
if
cache
block
File
depFile
File
cache
CACHE_FILE_NAME
BufferedReader
in
if
exists
block
try
in
BufferedReader
FileReader
depFile
String
line
Vector
dependencyList
String
className
int
prependLength
length
while
line
readLine
block
if
startsWith
CLASSNAME_PREPEND
block
dependencyList
Vector
className
substring
prependLength
put
className
dependencyList
block
addElement
line
if
in
block
close
return
dependencyMap
writeCachedDependencies
dependencyMap
Hashtable
if
cache
block
PrintWriter
pw
try
mkdirs
File
depFile
File
cache
CACHE_FILE_NAME
pw
PrintWriter
FileWriter
depFile
for
forControl
Enumeration
deps
keys
hasMoreElements
block
String
className
String
nextElement
println
CLASSNAME_PREPEND
className
Vector
dependencyList
Vector
get
className
int
size
size
for
forControl
int
x
x
size
x
block
println
elementAt
x
if
pw
block
close
determineDependencies
affectedClassMap
Hashtable
classFileInfoMap
Hashtable
boolean
cacheDirty
Hashtable
dependencyMap
File
depCacheFile
boolean
depCacheFileExists
long
depCacheFileLastModified
MAX_VALUE
if
cache
block
dependencyMap
readCachedDependencies
depCacheFile
File
cache
CACHE_FILE_NAME
depCacheFileExists
exists
depCacheFileLastModified
lastModified
for
forControl
Enumeration
e
getClassFiles
elements
destPath
hasMoreElements
block
ClassFileInfo
info
ClassFileInfo
nextElement
log
className
MSG_DEBUG
put
className
info
Vector
dependencyList
if
cache
block
if
depCacheFileExists
depCacheFileLastModified
lastModified
block
dependencyList
Vector
get
className
if
dependencyList
block
FileInputStream
inFileStream
try
inFileStream
FileInputStream
absoluteFile
ClassFile
classFile
ClassFile
read
inFileStream
dependencyList
getClassRefs
if
dependencyList
block
cacheDirty
put
className
dependencyList
if
inFileStream
block
close
for
forControl
Enumeration
depEnum
elements
hasMoreElements
block
String
dependentClass
String
nextElement
Hashtable
affectedClasses
Hashtable
get
dependentClass
if
affectedClasses
block
affectedClasses
Hashtable
put
dependentClass
affectedClasses
put
className
info
classpathDependencies
if
dependClasspath
block
classpathDependencies
Hashtable
AntClassLoader
loader
AntClassLoader
getProject
dependClasspath
Hashtable
classpathFileCache
Hashtable
Object
nullFileMarker
Object
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
className
String
nextElement
Vector
dependencyList
Vector
get
className
Hashtable
dependencies
Hashtable
put
className
dependencies
for
forControl
Enumeration
e2
elements
hasMoreElements
block
String
dependency
String
nextElement
Object
classpathFileObject
get
dependency
if
classpathFileObject
block
classpathFileObject
nullFileMarker
if
startsWith
startsWith
block
URL
classURL
getResource
replace
if
classURL
block
if
getProtocol
equals
block
String
jarFilePath
getFile
if
startsWith
block
int
classMarker
indexOf
jarFilePath
substring
classMarker
classpathFileObject
File
jarFilePath
if
getProtocol
equals
block
String
classFilePath
getFile
classpathFileObject
File
classFilePath
log
className
classpathFileObject
dependency
MSG_DEBUG
put
dependency
classpathFileObject
if
classpathFileObject
classpathFileObject
nullFileMarker
block
File
jarFile
File
classpathFileObject
put
jarFile
jarFile
if
cache
cacheDirty
block
writeCachedDependencies
dependencyMap
deleteAllAffectedFiles
int
int
count
for
forControl
Enumeration
e
elements
hasMoreElements
block
String
className
String
nextElement
count
deleteAffectedFiles
className
ClassFileInfo
classInfo
ClassFileInfo
get
className
if
classInfo
exists
block
delete
count
return
count
deleteAffectedFiles
int
className
String
int
count
Hashtable
affectedClasses
Hashtable
get
className
if
affectedClasses
block
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
affectedClassName
String
nextElement
ClassFileInfo
affectedClassInfo
ClassFileInfo
get
affectedClassName
if
exists
block
log
getPath
className
MSG_VERBOSE
delete
count
if
closure
block
count
deleteAffectedFiles
affectedClassName
block
if
indexOf
block
String
topLevelClassName
substring
indexOf
log
topLevelClassName
MSG_VERBOSE
ClassFileInfo
topLevelClassInfo
ClassFileInfo
get
topLevelClassName
if
topLevelClassInfo
exists
block
log
getPath
MSG_VERBOSE
delete
count
if
closure
block
count
deleteAffectedFiles
topLevelClassName
return
count
execute
try
long
start
currentTimeMillis
String
srcPathList
list
if
length
block
throw
BuildException
location
if
destPath
block
destPath
srcPath
if
cache
exists
isDirectory
block
throw
BuildException
if
cache
exists
block
mkdirs
determineDependencies
if
dump
block
log
size
MSG_DEBUG
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
className
String
nextElement
log
className
MSG_DEBUG
Hashtable
affectedClasses
Hashtable
get
className
for
forControl
Enumeration
e2
keys
hasMoreElements
block
String
affectedClass
String
nextElement
ClassFileInfo
info
ClassFileInfo
get
affectedClass
log
affectedClass
getPath
MSG_DEBUG
if
classpathDependencies
block
log
MSG_DEBUG
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
className
String
nextElement
log
className
MSG_DEBUG
Hashtable
dependencies
Hashtable
get
className
for
forControl
Enumeration
e2
elements
hasMoreElements
block
File
classpathFile
File
nextElement
log
getPath
MSG_DEBUG
outOfDateClasses
Hashtable
for
forControl
int
i
i
length
i
block
File
srcDir
File
resolveFile
srcPathList
i
if
exists
block
DirectoryScanner
ds
getDirectoryScanner
srcDir
String
files
getIncludedFiles
scanDir
srcDir
files
if
classpathDependencies
block
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
className
String
nextElement
if
containsKey
className
block
ClassFileInfo
info
ClassFileInfo
get
className
Hashtable
dependencies
Hashtable
get
className
for
forControl
Enumeration
e2
elements
hasMoreElements
block
File
classpathFile
File
nextElement
if
lastModified
lastModified
block
log
className
classpathFile
MSG_DEBUG
put
className
className
break
int
count
deleteAllAffectedFiles
long
duration
currentTimeMillis
start
log
count
duration
catchClause
e
throw
BuildException
e
scanDir
srcDir
File
files
String
long
now
currentTimeMillis
for
forControl
int
i
i
length
i
block
File
srcFile
File
srcDir
files
i
if
files
i
endsWith
block
String
filePath
getPath
String
className
substring
getPath
length
length
length
className
convertSlashName
className
ClassFileInfo
info
ClassFileInfo
get
className
if
info
block
put
className
className
block
if
lastModified
lastModified
block
put
className
className
getClassFiles
Vector
classLocations
Path
String
classLocationsList
list
Vector
classFileList
Vector
for
forControl
int
i
i
length
i
block
File
dir
File
classLocationsList
i
if
isDirectory
block
addClassFiles
classFileList
dir
dir
return
classFileList
addClassFiles
classFileList
Vector
dir
File
root
File
String
filesInDir
list
if
filesInDir
block
int
length
length
for
forControl
int
i
i
length
i
block
File
file
File
dir
filesInDir
i
if
isDirectory
block
addClassFiles
classFileList
file
root
if
getName
endsWith
block
ClassFileInfo
info
ClassFileInfo
absoluteFile
file
relativeName
getPath
substring
getPath
length
getPath
length
className
convertSlashName
relativeName
addElement
info
setSrcdir
srcPath
Path
srcPath
srcPath
setDestDir
destPath
Path
destPath
destPath
setCache
cache
File
cache
cache
setClosure
closure
boolean
closure
closure
setDump
dump
boolean
dump
dump
MatchingTask
