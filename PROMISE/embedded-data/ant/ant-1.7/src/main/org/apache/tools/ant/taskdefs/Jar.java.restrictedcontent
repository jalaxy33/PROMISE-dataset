Jar
String
INDEX_NAME
String
MANIFEST_NAME
List
serviceList
ArrayList
Manifest
configuredManifest
Manifest
savedConfiguredManifest
Manifest
filesetManifest
Manifest
originalManifest
FilesetManifestConfig
filesetManifestConfig
boolean
mergeManifestsMain
Manifest
manifest
String
manifestEncoding
File
manifestFile
boolean
index
boolean
createEmpty
Vector
rootEntries
Path
indexJars
ZipExtraField
JAR_MARKER
ZipExtraField
getInstance
String
emptyBehavior
Jar
archiveType
emptyBehavior
setEncoding
rootEntries
Vector
setWhenempty
we
WhenEmpty
log
MSG_WARN
setWhenmanifestonly
we
WhenEmpty
emptyBehavior
getValue
setJarfile
jarFile
File
setDestFile
jarFile
setIndex
flag
boolean
index
flag
setManifestEncoding
manifestEncoding
String
manifestEncoding
manifestEncoding
addConfiguredManifest
newManifest
Manifest
if
configuredManifest
block
configuredManifest
newManifest
block
merge
newManifest
savedConfiguredManifest
configuredManifest
setManifest
manifestFile
File
if
exists
block
throw
BuildException
manifestFile
getLocation
manifestFile
manifestFile
getManifest
Manifest
manifestFile
File
Manifest
newManifest
FileInputStream
fis
InputStreamReader
isr
try
fis
FileInputStream
manifestFile
if
manifestEncoding
block
isr
InputStreamReader
fis
block
isr
InputStreamReader
fis
manifestEncoding
newManifest
getManifest
isr
catchClause
e
throw
BuildException
getMessage
e
catchClause
e
throw
BuildException
manifestFile
getMessage
e
if
isr
block
try
close
catchClause
e
return
newManifest
getManifestFromJar
Manifest
jarFile
File
ZipFile
zf
try
zf
ZipFile
jarFile
Enumeration
e
entries
while
hasMoreElements
block
ZipEntry
ze
ZipEntry
nextElement
if
getName
equalsIgnoreCase
MANIFEST_NAME
block
InputStreamReader
isr
InputStreamReader
getInputStream
ze
return
getManifest
isr
return
if
zf
block
try
close
catchClause
e
getManifest
Manifest
r
Reader
Manifest
newManifest
try
newManifest
Manifest
r
catchClause
e
log
getMessage
MSG_ERR
throw
BuildException
manifestFile
e
getLocation
catchClause
e
throw
BuildException
getMessage
e
return
newManifest
setFilesetmanifest
config
FilesetManifestConfig
filesetManifestConfig
config
mergeManifestsMain
equals
getValue
if
filesetManifestConfig
getValue
equals
block
doubleFilePass
addMetainf
fs
ZipFileSet
setPrefix
addFileset
fs
addConfiguredIndexJars
p
Path
if
indexJars
block
indexJars
Path
getProject
append
p
addConfiguredService
service
Service
check
add
service
writeServices
zOut
ZipOutputStream
Iterator
serviceIterator
Service
service
serviceIterator
iterator
while
hasNext
block
service
Service
next
zipFile
getAsStream
zOut
getType
currentTimeMillis
DEFAULT_FILE_MODE
initZipOutputStream
zOut
ZipOutputStream
if
skipWriting
block
Manifest
jarManifest
createManifest
writeManifest
zOut
jarManifest
writeServices
zOut
createManifest
Manifest
try
Manifest
finalManifest
getDefaultManifest
if
manifest
block
if
manifestFile
block
manifest
getManifest
manifestFile
if
isInUpdateMode
block
merge
originalManifest
merge
filesetManifest
merge
configuredManifest
merge
manifest
mergeManifestsMain
return
finalManifest
catchClause
e
log
getMessage
MSG_ERR
throw
BuildException
e
getLocation
writeManifest
zOut
ZipOutputStream
manifest
Manifest
for
forControl
Enumeration
e
getWarnings
hasMoreElements
block
log
String
nextElement
MSG_WARN
zipDir
zOut
DEFAULT_DIR_MODE
JAR_MARKER
ByteArrayOutputStream
baos
ByteArrayOutputStream
OutputStreamWriter
osw
OutputStreamWriter
baos
JAR_ENCODING
PrintWriter
writer
PrintWriter
osw
write
writer
flush
ByteArrayInputStream
bais
ByteArrayInputStream
toByteArray
zipFile
bais
zOut
MANIFEST_NAME
currentTimeMillis
DEFAULT_FILE_MODE
initZipOutputStream
zOut
finalizeZipOutputStream
zOut
ZipOutputStream
if
index
block
createIndexList
zOut
createIndexList
zOut
ZipOutputStream
ByteArrayOutputStream
baos
ByteArrayOutputStream
PrintWriter
writer
PrintWriter
OutputStreamWriter
baos
println
println
println
getName
writeIndexLikeList
ArrayList
keySet
rootEntries
writer
println
if
indexJars
block
Manifest
mf
createManifest
Manifest
Attribute
classpath
getMainSection
getAttribute
ATTRIBUTE_CLASSPATH
String
cpEntries
if
classpath
getValue
block
StringTokenizer
tok
StringTokenizer
getValue
cpEntries
String
countTokens
int
c
while
hasMoreTokens
block
cpEntries
c
nextToken
String
indexJarEntries
list
for
forControl
int
i
i
length
i
block
String
name
findJarName
indexJarEntries
i
cpEntries
if
name
block
ArrayList
dirs
ArrayList
ArrayList
files
ArrayList
grabFilesAndDirs
indexJarEntries
i
dirs
files
if
size
size
block
println
name
writeIndexLikeList
dirs
files
writer
println
flush
ByteArrayInputStream
bais
ByteArrayInputStream
toByteArray
zipFile
bais
zOut
INDEX_NAME
currentTimeMillis
DEFAULT_FILE_MODE
zipFile
is
InputStream
zOut
ZipOutputStream
vPath
String
lastModified
long
fromArchive
File
mode
int
if
equalsIgnoreCase
vPath
block
if
doubleFilePass
doubleFilePass
skipWriting
block
filesetManifest
fromArchive
is
if
equalsIgnoreCase
vPath
index
block
log
archiveType
MSG_WARN
block
if
index
indexOf
block
addElement
vPath
zipFile
is
zOut
vPath
lastModified
fromArchive
mode
filesetManifest
file
File
is
InputStream
if
manifestFile
equals
file
block
log
file
MSG_VERBOSE
try
if
is
block
InputStreamReader
isr
if
manifestEncoding
block
isr
InputStreamReader
is
block
isr
InputStreamReader
is
manifestEncoding
manifest
getManifest
isr
block
manifest
getManifest
file
catchClause
e
throw
BuildException
getMessage
e
if
filesetManifestConfig
getValue
equals
block
log
file
MSG_VERBOSE
try
Manifest
newManifest
if
is
block
InputStreamReader
isr
if
manifestEncoding
block
isr
InputStreamReader
is
block
isr
InputStreamReader
is
manifestEncoding
newManifest
getManifest
isr
block
newManifest
getManifest
file
if
filesetManifest
block
filesetManifest
newManifest
block
merge
newManifest
catchClause
e
throw
BuildException
getMessage
e
catchClause
e
log
file
getMessage
MSG_ERR
throw
BuildException
e
getLocation
block
getResourcesToAdd
ArchiveState
rcs
ResourceCollection
zipFile
File
needsUpdate
boolean
if
exists
block
try
originalManifest
getManifestFromJar
zipFile
if
originalManifest
block
log
MSG_VERBOSE
needsUpdate
block
Manifest
mf
createManifest
if
equals
originalManifest
block
log
MSG_VERBOSE
needsUpdate
catchClause
t
log
toString
getMessage
MSG_WARN
needsUpdate
block
needsUpdate
createEmpty
needsUpdate
return
getResourcesToAdd
rcs
zipFile
needsUpdate
createEmptyZip
boolean
zipFile
File
if
createEmpty
block
return
if
equals
block
log
archiveType
zipFile
MSG_WARN
return
if
equals
block
throw
BuildException
archiveType
zipFile
getLocation
ZipOutputStream
zOut
try
log
getDestFile
getAbsolutePath
zOut
ZipOutputStream
FileOutputStream
getDestFile
setEncoding
getEncoding
if
isCompress
block
setMethod
DEFLATED
block
setMethod
STORED
initZipOutputStream
zOut
finalizeZipOutputStream
zOut
catchClause
ioe
throw
BuildException
getMessage
ioe
getLocation
try
if
zOut
block
close
catchClause
ex
createEmpty
return
cleanUp
cleanUp
if
doubleFilePass
doubleFilePass
skipWriting
block
manifest
configuredManifest
savedConfiguredManifest
filesetManifest
originalManifest
removeAllElements
reset
reset
emptyBehavior
configuredManifest
filesetManifestConfig
mergeManifestsMain
manifestFile
index
FilesetManifestConfig
getValues
String
return
String
EnumeratedAttribute
writeIndexLikeList
dirs
List
files
List
writer
PrintWriter
sort
dirs
sort
files
Iterator
iter
iterator
while
hasNext
block
String
dir
String
next
dir
replace
if
startsWith
block
dir
substring
while
startsWith
block
dir
substring
int
pos
lastIndexOf
if
pos
block
dir
substring
pos
if
startsWith
block
continue
println
dir
iter
iterator
while
hasNext
block
println
next
findJarName
String
fileName
String
classpath
String
if
classpath
block
return
getName
File
fileName
fileName
replace
separatorChar
TreeMap
matches
TreeMap
Comparator
compare
int
o1
Object
o2
Object
if
o1
String
o2
String
block
return
String
o2
String
o1
return
for
forControl
int
i
i
length
i
block
if
endsWith
classpath
i
block
put
classpath
i
classpath
i
block
int
slash
classpath
i
indexOf
String
candidate
classpath
i
while
slash
block
candidate
substring
slash
if
endsWith
candidate
block
put
candidate
classpath
i
break
slash
indexOf
return
size
String
get
firstKey
grabFilesAndDirs
file
String
dirs
List
files
List
org
apache
tools
zip
ZipFile
zf
try
zf
org
apache
tools
zip
ZipFile
file
Enumeration
entries
getEntries
HashSet
dirSet
HashSet
while
hasMoreElements
block
org
apache
tools
zip
ZipEntry
ze
org
apache
tools
zip
ZipEntry
nextElement
String
name
getName
if
startsWith
block
if
isDirectory
block
add
name
if
indexOf
block
add
name
block
add
substring
lastIndexOf
addAll
dirSet
if
zf
block
close
Zip
