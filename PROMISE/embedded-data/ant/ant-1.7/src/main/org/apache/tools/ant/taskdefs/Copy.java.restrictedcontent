Copy
File
NULL_FILE_PLACEHOLDER
File
String
LINE_SEPARATOR
getProperty
File
file
File
destFile
File
destDir
Vector
rcs
Vector
boolean
enableMultipleMappings
boolean
filtering
boolean
preserveLastModified
boolean
forceOverwrite
boolean
flatten
int
verbosity
MSG_VERBOSE
boolean
includeEmpty
boolean
failonerror
Hashtable
fileCopyMap
Hashtable
Hashtable
dirCopyMap
Hashtable
Hashtable
completeDirMap
Hashtable
Mapper
mapperElement
FileUtils
fileUtils
Vector
filterChains
Vector
Vector
filterSets
Vector
String
inputEncoding
String
outputEncoding
long
granularity
Copy
fileUtils
getFileUtils
granularity
getFileTimestampGranularity
getFileUtils
FileUtils
return
fileUtils
setFile
file
File
file
file
setTofile
destFile
File
destFile
destFile
setTodir
destDir
File
destDir
destDir
createFilterChain
FilterChain
FilterChain
filterChain
FilterChain
addElement
filterChain
return
filterChain
createFilterSet
FilterSet
FilterSet
filterSet
FilterSet
addElement
filterSet
return
filterSet
setPreserveLastModified
preserve
String
setPreserveLastModified
toBoolean
preserve
setPreserveLastModified
preserve
boolean
preserveLastModified
preserve
getPreserveLastModified
boolean
return
preserveLastModified
getFilterSets
Vector
return
filterSets
getFilterChains
Vector
return
filterChains
setFiltering
filtering
boolean
filtering
filtering
setOverwrite
overwrite
boolean
forceOverwrite
overwrite
setFlatten
flatten
boolean
flatten
flatten
setVerbose
verbose
boolean
verbosity
verbose
MSG_INFO
MSG_VERBOSE
setIncludeEmptyDirs
includeEmpty
boolean
includeEmpty
includeEmpty
setEnableMultipleMappings
enableMultipleMappings
boolean
enableMultipleMappings
enableMultipleMappings
isEnableMultipleMapping
boolean
return
enableMultipleMappings
setFailOnError
failonerror
boolean
failonerror
failonerror
addFileset
set
FileSet
add
set
add
res
ResourceCollection
add
res
createMapper
Mapper
if
mapperElement
block
throw
BuildException
getLocation
mapperElement
Mapper
getProject
return
mapperElement
add
fileNameMapper
FileNameMapper
createMapper
add
fileNameMapper
setEncoding
encoding
String
inputEncoding
encoding
if
outputEncoding
block
outputEncoding
encoding
getEncoding
String
return
inputEncoding
setOutputEncoding
encoding
String
outputEncoding
encoding
getOutputEncoding
String
return
outputEncoding
setGranularity
granularity
long
granularity
granularity
execute
File
savedFile
file
File
savedDestFile
destFile
File
savedDestDir
destDir
ResourceCollection
savedRc
if
file
destFile
size
block
savedRc
ResourceCollection
elementAt
validateAttributes
try
if
file
block
if
exists
block
if
destFile
block
destFile
File
destDir
getName
if
forceOverwrite
exists
lastModified
granularity
lastModified
block
put
getAbsolutePath
String
getAbsolutePath
block
log
file
destFile
MSG_VERBOSE
block
String
message
getAbsolutePath
if
failonerror
block
log
message
MSG_ERR
block
throw
BuildException
message
HashMap
filesByBasedir
HashMap
HashMap
dirsByBasedir
HashMap
HashSet
baseDirs
HashSet
ArrayList
nonFileResources
ArrayList
for
forControl
int
i
i
size
i
block
ResourceCollection
rc
ResourceCollection
elementAt
i
if
rc
FileSet
isFilesystemOnly
block
FileSet
fs
FileSet
rc
DirectoryScanner
ds
try
ds
getDirectoryScanner
getProject
catchClause
e
if
failonerror
getMessage
endsWith
e
block
throw
e
block
log
getMessage
e
MSG_ERR
continue
File
fromDir
getDir
getProject
String
srcFiles
getIncludedFiles
String
srcDirs
getIncludedDirectories
if
flatten
mapperElement
isEverythingIncluded
hasPatterns
block
put
fromDir
destDir
add
fromDir
srcFiles
filesByBasedir
add
fromDir
srcDirs
dirsByBasedir
add
fromDir
block
if
isFilesystemOnly
supportsNonFileResources
block
throw
BuildException
Iterator
resources
iterator
while
hasNext
block
Resource
r
Resource
next
if
isExists
block
continue
File
baseDir
NULL_FILE_PLACEHOLDER
String
name
getName
if
r
FileResource
block
FileResource
fr
FileResource
r
baseDir
getKeyFile
getBaseDir
if
getBaseDir
block
name
getFile
getAbsolutePath
if
isDirectory
r
FileResource
block
add
baseDir
name
isDirectory
dirsByBasedir
filesByBasedir
add
baseDir
block
add
r
Iterator
iter
iterator
while
hasNext
block
File
f
File
next
List
files
List
get
f
List
dirs
List
get
f
String
srcFiles
String
if
files
block
srcFiles
String
toArray
srcFiles
String
srcDirs
String
if
dirs
block
srcDirs
String
toArray
srcDirs
scan
f
NULL_FILE_PLACEHOLDER
f
destDir
srcFiles
srcDirs
try
doFileOperations
catchClause
e
if
failonerror
block
log
getMessage
e
MSG_ERR
block
throw
e
if
size
block
Resource
nonFiles
Resource
toArray
Resource
size
Map
map
scan
nonFiles
destDir
try
doResourceOperations
map
catchClause
e
if
failonerror
block
log
getMessage
e
MSG_ERR
block
throw
e
file
savedFile
destFile
savedDestFile
destDir
savedDestDir
if
savedRc
block
insertElementAt
savedRc
clear
clear
clear
validateAttributes
if
file
size
block
throw
BuildException
if
destFile
destDir
block
throw
BuildException
if
destFile
destDir
block
throw
BuildException
if
file
isDirectory
block
throw
BuildException
if
destFile
size
block
if
size
block
throw
BuildException
block
ResourceCollection
rc
ResourceCollection
elementAt
if
isFilesystemOnly
block
throw
BuildException
if
size
block
throw
BuildException
if
size
block
FileResource
r
FileResource
iterator
next
if
file
block
file
getFile
removeElementAt
block
throw
BuildException
block
throw
BuildException
if
destFile
block
destDir
getParentFile
scan
fromDir
File
toDir
File
files
String
dirs
String
FileNameMapper
mapper
getMapper
buildMap
fromDir
toDir
files
mapper
fileCopyMap
if
includeEmpty
block
buildMap
fromDir
toDir
dirs
mapper
dirCopyMap
scan
Map
fromResources
Resource
toDir
File
return
buildMap
fromResources
toDir
getMapper
buildMap
fromDir
File
toDir
File
names
String
mapper
FileNameMapper
map
Hashtable
String
toCopy
if
forceOverwrite
block
Vector
v
Vector
for
forControl
int
i
i
length
i
block
if
mapFileName
names
i
block
addElement
names
i
toCopy
String
size
copyInto
toCopy
block
SourceFileScanner
ds
SourceFileScanner
toCopy
restrict
names
fromDir
toDir
mapper
granularity
for
forControl
int
i
i
length
i
block
File
src
File
fromDir
toCopy
i
String
mappedFiles
mapFileName
toCopy
i
if
enableMultipleMappings
block
put
getAbsolutePath
String
getAbsolutePath
File
toDir
mappedFiles
block
for
forControl
int
k
k
length
k
block
mappedFiles
k
getAbsolutePath
File
toDir
mappedFiles
k
put
getAbsolutePath
mappedFiles
buildMap
Map
fromResources
Resource
toDir
File
mapper
FileNameMapper
HashMap
map
HashMap
Resource
toCopy
if
forceOverwrite
block
Vector
v
Vector
for
forControl
int
i
i
length
i
block
if
mapFileName
fromResources
i
getName
block
addElement
fromResources
i
toCopy
Resource
size
copyInto
toCopy
block
toCopy
selectOutOfDateSources
fromResources
mapper
ResourceFactory
getResource
Resource
name
String
return
FileResource
toDir
name
granularity
for
forControl
int
i
i
length
i
block
String
mappedFiles
mapFileName
toCopy
i
getName
if
enableMultipleMappings
block
put
toCopy
i
String
getAbsolutePath
File
toDir
mappedFiles
block
for
forControl
int
k
k
length
k
block
mappedFiles
k
getAbsolutePath
File
toDir
mappedFiles
k
put
toCopy
i
mappedFiles
return
map
doFileOperations
if
size
block
log
size
size
getAbsolutePath
Enumeration
e
keys
while
hasMoreElements
block
String
fromFile
String
nextElement
String
toFiles
String
get
fromFile
for
forControl
int
i
i
length
i
block
String
toFile
toFiles
i
if
equals
toFile
block
log
fromFile
verbosity
continue
try
log
fromFile
toFile
verbosity
FilterSetCollection
executionFilters
FilterSetCollection
if
filtering
block
addFilterSet
getProject
getGlobalFilterSet
for
forControl
Enumeration
filterEnum
elements
hasMoreElements
block
addFilterSet
FilterSet
nextElement
copyFile
fromFile
toFile
executionFilters
filterChains
forceOverwrite
preserveLastModified
inputEncoding
outputEncoding
getProject
catchClause
ioe
String
msg
fromFile
toFile
getDueTo
ioe
File
targetFile
File
toFile
if
exists
delete
block
msg
toFile
if
failonerror
block
throw
BuildException
msg
ioe
getLocation
log
msg
MSG_ERR
if
includeEmpty
block
Enumeration
e
elements
int
createCount
while
hasMoreElements
block
String
dirs
String
nextElement
for
forControl
int
i
i
length
i
block
File
d
File
dirs
i
if
exists
block
if
mkdirs
block
log
getAbsolutePath
MSG_ERR
block
createCount
if
createCount
block
log
size
size
createCount
createCount
getAbsolutePath
doResourceOperations
map
Map
if
size
block
log
size
size
getAbsolutePath
Iterator
iter
keySet
iterator
while
hasNext
block
Resource
fromResource
Resource
next
String
toFiles
String
get
fromResource
for
forControl
int
i
i
length
i
block
String
toFile
toFiles
i
try
log
fromResource
toFile
verbosity
FilterSetCollection
executionFilters
FilterSetCollection
if
filtering
block
addFilterSet
getProject
getGlobalFilterSet
for
forControl
Enumeration
filterEnum
elements
hasMoreElements
block
addFilterSet
FilterSet
nextElement
copyResource
fromResource
FileResource
destDir
toFile
executionFilters
filterChains
forceOverwrite
preserveLastModified
inputEncoding
outputEncoding
getProject
catchClause
ioe
String
msg
fromResource
toFile
getDueTo
ioe
File
targetFile
File
toFile
if
exists
delete
block
msg
toFile
if
failonerror
block
throw
BuildException
msg
ioe
getLocation
log
msg
MSG_ERR
supportsNonFileResources
boolean
return
getClass
equals
Copy
add
baseDir
File
names
String
m
Map
if
names
block
baseDir
getKeyFile
baseDir
List
l
List
get
baseDir
if
l
block
l
ArrayList
length
put
baseDir
l
addAll
asList
names
add
baseDir
File
name
String
m
Map
if
name
block
add
baseDir
String
name
m
getKeyFile
File
f
File
return
f
NULL_FILE_PLACEHOLDER
f
getMapper
FileNameMapper
FileNameMapper
mapper
if
mapperElement
block
mapper
getImplementation
if
flatten
block
mapper
FlatFileNameMapper
block
mapper
IdentityMapper
return
mapper
getMessage
String
ex
Exception
return
getMessage
toString
getMessage
getDueTo
String
ex
Exception
boolean
baseIOException
getClass
IOException
StringBuffer
message
StringBuffer
if
baseIOException
getMessage
block
append
getClass
getName
if
getMessage
block
if
baseIOException
block
append
append
getMessage
if
getClass
getName
indexOf
block
append
LINE_SEPARATOR
append
append
LINE_SEPARATOR
append
append
inputEncoding
getDefaultEncoding
inputEncoding
append
LINE_SEPARATOR
return
toString
Task
