TarBuffer
int
DEFAULT_RCDSIZE
int
DEFAULT_BLKSIZE
DEFAULT_RCDSIZE
InputStream
inStream
OutputStream
outStream
byte
blockBuffer
int
currBlkIdx
int
currRecIdx
int
blockSize
int
recordSize
int
recsPerBlock
boolean
debug
TarBuffer
inStream
InputStream
inStream
DEFAULT_BLKSIZE
TarBuffer
inStream
InputStream
blockSize
int
inStream
blockSize
DEFAULT_RCDSIZE
TarBuffer
inStream
InputStream
blockSize
int
recordSize
int
inStream
inStream
outStream
initialize
blockSize
recordSize
TarBuffer
outStream
OutputStream
outStream
DEFAULT_BLKSIZE
TarBuffer
outStream
OutputStream
blockSize
int
outStream
blockSize
DEFAULT_RCDSIZE
TarBuffer
outStream
OutputStream
blockSize
int
recordSize
int
inStream
outStream
outStream
initialize
blockSize
recordSize
initialize
blockSize
int
recordSize
int
debug
blockSize
blockSize
recordSize
recordSize
recsPerBlock
blockSize
recordSize
blockBuffer
byte
blockSize
if
inStream
block
currBlkIdx
currRecIdx
recsPerBlock
block
currBlkIdx
currRecIdx
getBlockSize
int
return
blockSize
getRecordSize
int
return
recordSize
setDebug
debug
boolean
debug
debug
isEOFRecord
boolean
record
byte
for
forControl
int
i
sz
getRecordSize
i
sz
i
block
if
record
i
block
return
return
skipRecord
if
debug
block
println
currRecIdx
currBlkIdx
if
inStream
block
throw
IOException
if
currRecIdx
recsPerBlock
block
if
readBlock
block
return
currRecIdx
readRecord
byte
if
debug
block
println
currRecIdx
currBlkIdx
if
inStream
block
throw
IOException
if
currRecIdx
recsPerBlock
block
if
readBlock
block
return
byte
result
byte
recordSize
arraycopy
blockBuffer
currRecIdx
recordSize
result
recordSize
currRecIdx
return
result
readBlock
boolean
if
debug
block
println
currBlkIdx
if
inStream
block
throw
IOException
currRecIdx
int
offset
int
bytesNeeded
blockSize
while
bytesNeeded
block
long
numBytes
inStream
read
blockBuffer
offset
bytesNeeded
if
numBytes
block
if
offset
block
return
fill
blockBuffer
offset
offset
bytesNeeded
byte
break
offset
numBytes
bytesNeeded
numBytes
if
numBytes
blockSize
block
if
debug
block
println
numBytes
blockSize
currBlkIdx
return
getCurrentBlockNum
int
return
currBlkIdx
getCurrentRecordNum
int
return
currRecIdx
writeRecord
record
byte
if
debug
block
println
currRecIdx
currBlkIdx
if
outStream
block
throw
IOException
if
length
recordSize
block
throw
IOException
length
recordSize
if
currRecIdx
recsPerBlock
block
writeBlock
arraycopy
record
blockBuffer
currRecIdx
recordSize
recordSize
currRecIdx
writeRecord
buf
byte
offset
int
if
debug
block
println
currRecIdx
currBlkIdx
if
outStream
block
throw
IOException
if
offset
recordSize
length
block
throw
IOException
length
offset
recordSize
if
currRecIdx
recsPerBlock
block
writeBlock
arraycopy
buf
offset
blockBuffer
currRecIdx
recordSize
recordSize
currRecIdx
writeBlock
if
debug
block
println
currBlkIdx
if
outStream
block
throw
IOException
outStream
write
blockBuffer
blockSize
outStream
flush
currRecIdx
currBlkIdx
flushBlock
if
debug
block
println
if
outStream
block
throw
IOException
if
currRecIdx
block
writeBlock
close
if
debug
block
println
if
outStream
block
flushBlock
if
outStream
out
outStream
err
block
outStream
close
outStream
if
inStream
block
if
inStream
in
block
inStream
close
inStream
