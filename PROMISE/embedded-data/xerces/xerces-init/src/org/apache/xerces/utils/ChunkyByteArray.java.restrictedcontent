ChunkyByteArray
ChunkyByteArray
is
InputStream
fInputStream
is
fill
read
int
if
fData
return
fInputStream
read
int
b
int
fData
if
fOffset
fLength
block
fData
if
fLength
CHUNK_SIZE
fInputStream
return
b
read
int
buffer
byte
offset
int
length
int
int
bytesLeft
fLength
fOffset
if
bytesLeft
return
fInputStream
read
buffer
offset
length
if
length
return
byte
chunk
fData
if
length
bytesLeft
block
length
bytesLeft
if
fLength
CHUNK_SIZE
fInputStream
if
buffer
block
fOffset
length
return
length
int
stop
offset
length
do
offset
stop
block
buffer
offset
chunk
fOffset
return
length
rewind
fOffset
byteAt
byte
offset
int
int
chunk
offset
CHUNK_SHIFT
int
index
offset
CHUNK_MASK
try
return
fData
chunk
index
catchClause
ex
if
index
block
fill
return
fData
chunk
index
return
atEOF
boolean
offset
int
return
offset
fLength
fill
int
bufnum
fLength
CHUNK_SHIFT
byte
data
byte
CHUNK_SIZE
fData
bufnum
data
int
offset
int
capacity
CHUNK_SIZE
int
result
do
capacity
block
result
read
data
offset
capacity
if
result
block
data
offset
byte
close
fInputStream
break
if
result
block
fLength
result
offset
result
capacity
result
int
CHUNK_SHIFT
int
CHUNK_SIZE
CHUNK_SHIFT
int
CHUNK_MASK
CHUNK_SIZE
int
INITIAL_CHUNK_COUNT
CHUNK_SHIFT
InputStream
fInputStream
byte
fData
byte
INITIAL_CHUNK_COUNT
int
fLength
int
fOffset
InputStream
