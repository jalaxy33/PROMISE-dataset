FactoryFinder
boolean
debug
debugPrintln
msg
String
if
debug
block
println
msg
findClassLoader
ClassLoader
Method
m
try
m
getMethod
Thread
catchClause
e
debugPrintln
return
getClassLoader
FactoryFinder
try
return
ClassLoader
invoke
currentThread
catchClause
e
throw
ConfigurationError
e
catchClause
e
throw
ConfigurationError
e
newInstance
Object
className
String
classLoader
ClassLoader
try
Class
spiClass
if
classLoader
block
spiClass
forName
className
block
spiClass
loadClass
className
return
newInstance
catchClause
x
throw
ConfigurationError
className
x
catchClause
x
throw
ConfigurationError
className
x
x
find
Object
factoryId
String
fallbackClassName
String
debugPrintln
ClassLoader
classLoader
findClassLoader
try
String
systemProp
getProperty
factoryId
if
systemProp
block
debugPrintln
systemProp
return
newInstance
systemProp
classLoader
catchClause
se
try
String
javah
getProperty
String
configFile
javah
separator
separator
File
f
File
configFile
if
exists
block
Properties
props
Properties
load
FileInputStream
f
String
factoryClassName
getProperty
factoryId
debugPrintln
factoryClassName
return
newInstance
factoryClassName
classLoader
catchClause
ex
if
debug
printStackTrace
String
serviceId
factoryId
try
InputStream
is
if
classLoader
block
is
getSystemResourceAsStream
serviceId
block
is
getResourceAsStream
serviceId
if
is
block
debugPrintln
serviceId
BufferedReader
rd
try
rd
BufferedReader
InputStreamReader
is
catchClause
e
rd
BufferedReader
InputStreamReader
is
String
factoryClassName
readLine
close
if
factoryClassName
equals
factoryClassName
block
debugPrintln
factoryClassName
return
newInstance
factoryClassName
classLoader
catchClause
ex
if
debug
printStackTrace
if
fallbackClassName
block
throw
ConfigurationError
factoryId
debugPrintln
fallbackClassName
return
newInstance
fallbackClassName
classLoader
ConfigurationError
Exception
exception
ConfigurationError
msg
String
x
Exception
msg
exception
x
getException
Exception
return
exception
Error
