VsftpRepository
int
LS_DATE_INDEX4
int
LS_DATE_INDEX3
int
LS_DATE_INDEX2
int
LS_DATE_INDEX1
int
LS_SIZE_INDEX
int
LS_PARTS_NUMBER
int
DISCONNECT_COMMAND_TIMEOUT
int
REUSE_CONNECTION_SLEEP_TIME
int
READER_ALIVE_SLEEP_TIME
int
MAX_READER_ALIVE_ATTEMPT
int
ERROR_SLEEP_TIME
int
PROMPT_SLEEP_TIME
int
MAX_READ_PROMPT_ATTEMPT
int
GET_JOIN_MAX_TIME
int
DEFAULT_REUSE_CONNECTION_TIME
int
DEFAULT_READ_TIMEOUT
String
PROMPT
SimpleDateFormat
FORMAT
SimpleDateFormat
US
String
host
String
username
String
authentication
Reader
in
Reader
err
PrintWriter
out
StringBuffer
errors
StringBuffer
long
readTimeout
DEFAULT_READ_TIMEOUT
long
reuseConnection
DEFAULT_REUSE_CONNECTION_TIME
long
lastCommand
boolean
inCommand
Process
process
Thread
connectionCleaner
Thread
errorsReader
long
errorsLastUpdateTime
Ivy
ivy
getResource
Resource
source
String
initIvy
return
VsftpResource
source
initIvy
ivy
getContext
getIvy
getInitResource
Resource
source
String
try
return
lslToResource
source
sendCommand
source
catchClause
ex
cleanup
ex
throw
ex
cleanup
get
source
String
destination
File
initIvy
try
fireTransferInitiated
getResource
source
REQUEST_GET
File
destDir
getParentFile
if
destDir
block
sendCommand
getAbsolutePath
if
exists
block
delete
int
index
lastIndexOf
String
srcName
index
source
substring
index
File
to
destDir
checkAbsolute
srcName
File
destDir
srcName
IOException
ex
IOException
Thread
get
IvyThread
run
initContext
try
sendCommand
source
getExpectedDownloadMessage
source
to
catchClause
e
ex
e
start
long
prevLength
long
lastUpdate
currentTimeMillis
long
timeout
readTimeout
while
isAlive
block
checkInterrupted
long
length
exists
length
if
length
prevLength
block
fireTransferProgress
length
prevLength
lastUpdate
currentTimeMillis
prevLength
length
block
if
currentTimeMillis
lastUpdate
timeout
block
verbose
timeout
interrupt
if
exists
block
delete
throw
IOException
source
getHost
try
join
GET_JOIN_MAX_TIME
catchClause
e
if
exists
block
delete
return
if
ex
block
if
exists
block
delete
throw
ex
renameTo
destination
fireTransferCompleted
length
catchClause
ex
fireTransferError
ex
cleanup
ex
throw
ex
cleanup
list
List
parent
String
initIvy
try
if
endsWith
block
parent
parent
String
response
sendCommand
parent
if
startsWith
block
return
String
lines
split
List
ret
ArrayList
length
for
forControl
int
i
i
length
i
block
while
lines
i
endsWith
lines
i
endsWith
block
lines
i
lines
i
substring
lines
i
length
if
lines
i
trim
length
block
add
parent
lines
i
substring
lines
i
lastIndexOf
return
ret
catchClause
ex
cleanup
ex
throw
ex
cleanup
put
source
File
destination
String
overwrite
boolean
initIvy
try
if
getResource
exists
destination
block
if
overwrite
block
sendCommand
destination
getExpectedRemoveMessage
destination
block
return
int
index
lastIndexOf
String
destDir
if
index
block
destDir
substring
index
mkdirs
destDir
sendCommand
destDir
String
to
destDir
destDir
getName
getName
sendCommand
getAbsolutePath
getExpectedUploadMessage
source
to
sendCommand
to
destination
catchClause
ex
cleanup
ex
throw
ex
cleanup
mkdirs
destDir
String
if
dirExists
destDir
block
return
if
endsWith
block
destDir
substring
length
int
index
lastIndexOf
if
index
block
mkdirs
substring
index
sendCommand
destDir
dirExists
boolean
dir
String
return
sendCommand
startsWith
dir
sendCommand
String
command
String
return
sendCommand
command
readTimeout
sendCommand
command
String
expectedResponse
Pattern
sendCommand
command
expectedResponse
readTimeout
sendCommand
command
String
expectedResponse
Pattern
timeout
long
String
response
sendCommand
command
timeout
if
matcher
matches
response
block
debug
debug
expectedResponse
debug
response
throw
IOException
response
sendCommand
String
command
String
sendErrorAsResponse
boolean
return
sendCommand
command
sendErrorAsResponse
readTimeout
sendCommand
String
command
String
sendErrorAsResponse
boolean
single
boolean
return
sendCommand
command
sendErrorAsResponse
single
readTimeout
sendCommand
String
command
String
sendErrorAsResponse
boolean
timeout
long
return
sendCommand
command
sendErrorAsResponse
timeout
sendCommand
String
command
String
sendErrorAsResponse
boolean
single
boolean
timeout
long
single
checkInterrupted
inCommand
errorsLastUpdateTime
synchronized
if
single
in
block
ensureConnectionOpened
debug
command
getHost
updateLastCommandTime
println
command
flush
block
sendSingleCommand
command
try
return
readResponse
sendErrorAsResponse
timeout
inCommand
if
single
block
closeConnection
readResponse
String
sendErrorAsResponse
boolean
return
readResponse
sendErrorAsResponse
readTimeout
readResponse
String
sendErrorAsResponse
boolean
timeout
long
StringBuffer
response
StringBuffer
IOException
exc
IOException
boolean
done
boolean
Runnable
r
Runnable
run
synchronized
try
int
c
boolean
getPrompt
for
forControl
int
attempts
getPrompt
attempts
MAX_READ_PROMPT_ATTEMPT
attempts
block
while
c
read
block
attempts
append
char
c
if
length
length
substring
equals
PROMPT
length
length
length
block
setLength
length
length
getPrompt
break
if
getPrompt
block
try
sleep
PROMPT_SLEEP_TIME
catchClause
e
break
if
getPrompt
block
if
errorsLastUpdateTime
block
errorsLastUpdateTime
lastCommand
while
currentTimeMillis
errorsLastUpdateTime
PROMPT_SLEEP_TIME
block
try
sleep
ERROR_SLEEP_TIME
catchClause
e
break
if
length
block
if
sendErrorAsResponse
block
append
errors
setLength
block
throw
IOException
chomp
toString
errors
chomp
response
done
catchClause
e
exc
e
notify
Thread
reader
if
timeout
block
run
block
reader
IvyThread
r
start
try
wait
timeout
catchClause
e
updateLastCommandTime
if
exc
block
throw
exc
if
done
block
if
reader
isAlive
block
interrupt
for
forControl
int
i
i
MAX_READER_ALIVE_ATTEMPT
isAlive
i
block
try
sleep
READER_ALIVE_SLEEP_TIME
catchClause
e
break
if
isAlive
block
stop
throw
IOException
getHost
block
if
equals
response
block
info
getHost
closeConnection
throw
IOException
getHost
debug
response
getHost
return
toString
sendSingleCommand
command
String
exec
getSingleCommand
command
ensureConnectionOpened
if
in
block
verbose
getUsername
getHost
String
connectionCommand
getConnectionCommand
exec
connectionCommand
try
readResponse
if
reuseConnection
block
connectionCleaner
IvyThread
run
initContext
try
long
sleep
REUSE_CONNECTION_SLEEP_TIME
while
in
sleep
block
sleep
sleep
sleep
reuseConnection
currentTimeMillis
lastCommand
if
inCommand
block
sleep
sleep
reuseConnection
sleep
catchClause
e
disconnect
start
if
ivy
block
getEventManager
addIvyListener
IvyListener
progress
event
IvyEvent
disconnect
getSource
removeIvyListener
NAME
catchClause
ex
closeConnection
throw
IOException
getUsername
getHost
getAuthentication
getMessage
verbose
getHost
updateLastCommandTime
lastCommand
currentTimeMillis
exec
command
String
debug
command
process
getRuntime
exec
command
in
InputStreamReader
getInputStream
err
InputStreamReader
getErrorStream
out
PrintWriter
getOutputStream
errorsReader
IvyThread
run
initContext
int
c
try
while
err
c
read
block
append
char
c
errorsLastUpdateTime
currentTimeMillis
catchClause
e
start
checkInterrupted
if
ivy
block
checkInterrupted
cleanup
ex
Exception
if
getMessage
equals
getHost
block
closeConnection
block
disconnect
cleanup
if
reuseConnection
block
disconnect
disconnect
if
in
block
verbose
getHost
try
sendCommand
DISCONNECT_COMMAND_TIMEOUT
catchClause
e
closeConnection
verbose
getHost
closeConnection
if
connectionCleaner
block
interrupt
if
errorsReader
block
interrupt
try
destroy
catchClause
ex
try
close
catchClause
e
try
close
catchClause
e
try
close
catchClause
e
connectionCleaner
errorsReader
process
in
out
err
debug
getHost
lslToResource
Resource
file
String
responseLine
String
if
responseLine
startsWith
block
return
BasicResource
file
block
String
parts
split
if
length
LS_PARTS_NUMBER
block
debug
responseLine
return
BasicResource
file
block
try
long
contentLength
parseLong
parts
LS_SIZE_INDEX
String
date
parts
LS_DATE_INDEX1
parts
LS_DATE_INDEX2
parts
LS_DATE_INDEX3
parts
LS_DATE_INDEX4
return
BasicResource
file
contentLength
parse
getTime
date
catchClause
ex
warn
responseLine
ex
return
BasicResource
file
getSingleCommand
String
command
String
return
authentication
username
host
command
getConnectionCommand
String
return
authentication
username
host
getExpectedDownloadMessage
Pattern
source
String
to
File
return
compile
getName
getExpectedRemoveMessage
Pattern
destination
String
return
compile
getExpectedUploadMessage
Pattern
source
File
to
String
return
compile
getName
getAuthentication
String
return
authentication
setAuthentication
authentication
String
authentication
authentication
getHost
String
return
host
setHost
host
String
host
host
getUsername
String
return
username
setUsername
username
String
username
username
chomp
StringBuffer
str
StringBuffer
if
str
length
block
return
str
while
equals
substring
length
equals
substring
length
block
setLength
length
return
str
toString
String
return
getName
getUsername
getHost
getAuthentication
setReuseConnection
time
long
reuseConnection
time
getReadTimeout
long
return
readTimeout
setReadTimeout
readTimeout
long
readTimeout
readTimeout
AbstractRepository
