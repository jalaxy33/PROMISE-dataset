Scp
Session
session
FileInfo
String
filename
long
length
long
lastModified
setFilename
filename
String
filename
filename
getFilename
String
return
filename
setLength
length
long
length
length
getLength
long
return
length
setLastModified
lastModified
long
lastModified
lastModified
getLastModified
long
return
lastModified
Scp
session
Session
if
session
throw
IllegalArgumentException
session
session
readResponse
is
InputStream
int
c
read
if
c
return
if
c
throw
RemoteScpException
if
c
c
throw
RemoteScpException
if
c
throw
RemoteScpException
String
err
receiveLine
is
throw
RemoteScpException
err
receiveLine
String
is
InputStream
StringBuffer
sb
StringBuffer
while
block
if
length
throw
RemoteScpException
int
c
read
if
c
throw
RemoteScpException
if
c
break
append
char
c
return
toString
parseCLine
line
String
fileInfo
FileInfo
long
len
if
length
throw
RemoteScpException
if
charAt
charAt
throw
RemoteScpException
int
length_name_sep
indexOf
if
length_name_sep
throw
RemoteScpException
String
length_substring
substring
length_name_sep
String
name_substring
substring
length_name_sep
if
length
length
throw
RemoteScpException
if
length
length
length
throw
RemoteScpException
try
len
parseLong
length_substring
catchClause
e
throw
RemoteScpException
if
len
throw
RemoteScpException
setLength
len
setFilename
name_substring
parseTLine
line
String
fileInfo
FileInfo
long
modtime
long
first_msec
long
atime
long
second_msec
if
length
throw
RemoteScpException
int
first_msec_begin
indexOf
if
first_msec_begin
first_msec_begin
length
throw
RemoteScpException
int
atime_begin
indexOf
first_msec_begin
if
atime_begin
atime_begin
length
throw
RemoteScpException
int
second_msec_begin
indexOf
atime_begin
if
second_msec_begin
second_msec_begin
length
throw
RemoteScpException
try
modtime
parseLong
substring
first_msec_begin
first_msec
parseLong
substring
first_msec_begin
atime_begin
atime
parseLong
substring
atime_begin
second_msec_begin
second_msec
parseLong
substring
second_msec_begin
catchClause
e
throw
RemoteScpException
if
modtime
first_msec
atime
second_msec
throw
RemoteScpException
setLastModified
modtime
sendBytes
channel
Channel
data
byte
fileName
String
mode
String
OutputStream
os
getOutputStream
InputStream
is
BufferedInputStream
getInputStream
try
if
isConnected
start
connect
catchClause
e1
throw
IOException
initCause
e1
IOException
readResponse
is
String
cline
mode
length
fileName
write
getBytes
flush
readResponse
is
write
data
length
write
flush
readResponse
is
write
getBytes
flush
sendFile
channel
Channel
localFile
String
remoteName
String
mode
String
byte
buffer
byte
OutputStream
os
BufferedOutputStream
getOutputStream
InputStream
is
BufferedInputStream
getInputStream
try
if
isConnected
start
connect
catchClause
e1
throw
IOException
initCause
e1
IOException
readResponse
is
File
f
File
localFile
long
remain
length
String
cline
mode
remain
remoteName
write
getBytes
flush
readResponse
is
FileInputStream
fis
try
fis
FileInputStream
f
while
remain
block
int
trans
if
remain
length
trans
length
trans
int
remain
if
read
buffer
trans
trans
throw
IOException
localFile
write
buffer
trans
remain
trans
close
catchClause
e
if
fis
block
close
throw
e
write
flush
readResponse
is
write
getBytes
flush
receiveStream
FileInfo
channel
Channel
file
String
targetStream
OutputStream
byte
buffer
byte
OutputStream
os
getOutputStream
InputStream
is
getInputStream
try
if
isConnected
start
connect
catchClause
e1
throw
IOException
initCause
e1
IOException
write
flush
FileInfo
fileInfo
FileInfo
while
block
int
c
read
if
c
throw
RemoteScpException
String
line
receiveLine
is
if
c
block
parseTLine
line
fileInfo
write
flush
continue
if
c
c
throw
RemoteScpException
line
if
c
block
parseCLine
line
fileInfo
break
throw
RemoteScpException
char
c
line
if
targetStream
block
write
flush
try
long
remain
getLength
while
remain
block
int
trans
if
remain
length
trans
length
trans
int
remain
int
this_time_received
read
buffer
trans
if
this_time_received
block
throw
IOException
write
buffer
this_time_received
remain
this_time_received
close
catchClause
e
if
targetStream
close
throw
e
readResponse
is
write
flush
return
fileInfo
put
localFile
String
remoteTargetDirectory
String
remoteName
String
put
localFile
remoteTargetDirectory
remoteName
put
data
byte
remoteFileName
String
remoteTargetDirectory
String
put
data
remoteFileName
remoteTargetDirectory
put
data
byte
remoteFileName
String
remoteTargetDirectory
String
mode
String
ChannelExec
channel
if
remoteFileName
mode
throw
IllegalArgumentException
if
length
throw
IllegalArgumentException
for
forControl
int
i
i
length
i
if
isDigit
charAt
i
throw
IllegalArgumentException
String
cmd
if
remoteTargetDirectory
length
block
cmd
cmd
remoteTargetDirectory
try
channel
getExecChannel
setCommand
cmd
sendBytes
channel
data
remoteFileName
mode
catchClause
e
if
channel
disconnect
throw
IOException
initCause
e
IOException
getMessage
getExecChannel
ChannelExec
ChannelExec
channel
channel
ChannelExec
openChannel
return
channel
put
localFile
String
remoteTargetDir
String
remoteTargetName
String
mode
String
ChannelExec
channel
if
localFile
remoteTargetName
mode
throw
IllegalArgumentException
if
length
throw
IllegalArgumentException
for
forControl
int
i
i
length
i
if
isDigit
charAt
i
throw
IllegalArgumentException
String
cmd
if
remoteTargetDir
length
block
cmd
cmd
remoteTargetDir
try
channel
getExecChannel
setCommand
cmd
sendFile
channel
localFile
remoteTargetName
mode
disconnect
catchClause
e
if
channel
disconnect
throw
IOException
initCause
e
IOException
getMessage
get
remoteFile
String
localTarget
String
File
f
File
localTarget
FileOutputStream
fop
FileOutputStream
f
get
remoteFile
fop
get
remoteFile
String
localTarget
OutputStream
ChannelExec
channel
if
remoteFile
localTarget
throw
IllegalArgumentException
String
cmd
remoteFile
try
channel
getExecChannel
setCommand
cmd
receiveStream
channel
remoteFile
localTarget
disconnect
catchClause
e
if
channel
disconnect
throw
IOException
initCause
e
IOException
getMessage
getFileinfo
FileInfo
remoteFile
String
ChannelExec
channel
FileInfo
fileInfo
if
remoteFile
throw
IllegalArgumentException
String
cmd
remoteFile
try
channel
getExecChannel
setCommand
cmd
fileInfo
receiveStream
channel
remoteFile
disconnect
catchClause
e
throw
IOException
initCause
e
IOException
getMessage
if
channel
disconnect
return
fileInfo
