ThrottleMediatorTest
String
REMOTE_ADDR
String
POLICY
String
NEW_POLICY
ThrottleMediatorTest
getName
ThrottleMediatorTest
createLightweightSynapseMessageContext
MessageContext
payload
String
org
apache
axis2
context
MessageContext
mc
org
apache
axis2
context
MessageContext
SynapseConfiguration
config
SynapseConfiguration
SynapseEnvironment
env
Axis2SynapseEnvironment
config
MessageContext
synMc
Axis2MessageContext
mc
config
env
SOAPEnvelope
envelope
getSOAP11Factory
getDefaultEnvelope
OMDocument
omDoc
getSOAP11Factory
createOMDocument
addChild
envelope
getBody
addChild
createOMBuilder
getDocumentElement
StringReader
payload
setEnvelope
envelope
return
synMc
testMediate
OMXMLParserWrapper
builder
createOMBuilder
StringReader
POLICY
ThrottleTestMediator
throttleMediator
ThrottleTestMediator
setPolicyKey
MessageContext
synCtx
createLightweightSynapseMessageContext
setProperty
REMOTE_ADDR
SynapseConfiguration
synCfg
SynapseConfiguration
Entry
prop
Entry
setKey
setType
INLINE_XML
setValue
getDocumentElement
addEntry
prop
setConfiguration
synCfg
for
forControl
int
i
i
i
block
try
mediate
synCtx
sleep
catchClause
e
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
testMediateWithInLineXML
OMXMLParserWrapper
builder
createOMBuilder
StringReader
POLICY
ThrottleTestMediator
throttleMediator
ThrottleTestMediator
setInLinePolicy
getDocumentElement
MessageContext
synCtx
createLightweightSynapseMessageContext
setProperty
REMOTE_ADDR
SynapseConfiguration
synCfg
SynapseConfiguration
setConfiguration
synCfg
for
forControl
int
i
i
i
block
try
mediate
synCtx
sleep
catchClause
e
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
ThrottleTestMediator
String
policyKey
Throttle
throttle
OMElement
inLinePolicy
mediate
boolean
synCtx
MessageContext
init
synCtx
try
return
canAccess
synCtx
catchClause
e
throw
SynapseException
getMessage
canAccess
boolean
synContext
MessageContext
if
throttle
block
throw
ThrottleException
String
remoteIP
String
getProperty
REMOTE_ADDR
if
remoteIP
block
throw
ThrottleException
block
ThrottleContext
throttleContext
getThrottleContext
IP_BASED_THROTTLE_KEY
if
throttleContext
block
throw
ThrottleException
AccessRateController
accessController
try
accessController
AccessRateController
boolean
canAccess
canAccess
isAccessAllowed
throttleContext
remoteIP
IP_BASE
if
canAccess
block
throw
SynapseException
remoteIP
return
canAccess
catchClause
e
return
init
synContext
MessageContext
boolean
reCreate
OMElement
policyOmElement
if
policyKey
block
Entry
entry
getConfiguration
getEntryDefinition
policyKey
if
entry
block
return
Object
entryValue
getValue
if
entryValue
OMElement
block
return
if
isCached
isExpired
block
reCreate
policyOmElement
OMElement
entryValue
if
inLinePolicy
block
policyOmElement
inLinePolicy
if
policyOmElement
block
return
if
reCreate
block
if
throttle
block
createThrottleMetaData
policyOmElement
block
createThrottleMetaData
policyOmElement
createThrottleMetaData
policyOmElement
OMElement
try
throttle
createMediatorThrottle
policyOmElement
catchClause
e
throw
SynapseException
getMessage
getType
String
return
getPolicyKey
String
return
policyKey
setPolicyKey
policyKey
String
policyKey
policyKey
getInLinePolicy
OMElement
return
inLinePolicy
setInLinePolicy
inLinePolicy
OMElement
inLinePolicy
inLinePolicy
AbstractMediator
TestCase
