VFSTransportListener
String
TRANSPORT_NAME
String
DELETE
String
MOVE
FileSystemManager
fsManager
boolean
globalFileLockingFlag
WorkerPool
workerPool
int
STATE_STOPPED
int
STATE_RUNNING
int
removeTaskState
STATE_STOPPED
doInit
doInit
try
StandardFileSystemManager
fsm
StandardFileSystemManager
setConfiguration
getClass
getClassLoader
getResource
init
workerPool
SuperMemberReference
fsManager
fsm
Parameter
lockFlagParam
getTransportInDescription
getParameter
TRANSPORT_FILE_LOCKING
if
lockFlagParam
block
String
strLockingFlag
getValue
toString
if
equals
strLockingFlag
block
globalFileLockingFlag
catchClause
e
handleException
getMessage
e
poll
entry
PollTableEntry
scanFileOrDirectory
entry
getFileURI
scanFileOrDirectory
entry
PollTableEntry
fileURI
String
FileObject
fileObject
if
isDebugEnabled
block
debug
maskURLPassword
fileURI
boolean
wasError
int
retryCount
int
maxRetryCount
getMaxRetryCount
long
reconnectionTimeout
getReconnectTimeout
while
wasError
block
try
retryCount
fileObject
resolveFile
fileURI
if
fileObject
block
error
throw
FileSystemException
wasError
catchClause
e
if
retryCount
maxRetryCount
block
processFailure
maskURLPassword
fileURI
e
entry
return
block
warn
maskURLPassword
fileURI
retryCount
getMessage
reconnectionTimeout
if
wasError
block
try
sleep
reconnectionTimeout
catchClause
e2
error
e2
try
if
exists
isReadable
block
setLastPollState
NONE
FileObject
children
try
children
getChildren
catchClause
ignore
if
children
length
block
boolean
isFailedRecord
if
getMoveAfterMoveFailure
block
isFailedRecord
isFailedRecord
fileObject
entry
if
getType
FILE
isFailedRecord
block
if
isFileLockingEnabled
isFileLockingEnabled
acquireLock
fsManager
fileObject
block
try
processFile
entry
fileObject
setLastPollState
SUCCSESSFUL
incrementMessagesReceived
catchClause
e
logException
maskURLPassword
getName
getURI
e
setLastPollState
FAILED
incrementFaultsReceiving
try
moveOrDeleteAfterProcessing
entry
fileObject
catchClause
axisFault
logException
getURL
toString
axisFault
setLastPollState
FAILED
String
timeStamp
getSystemTime
getFailedRecordTimestampFormat
addFailedRecord
entry
fileObject
timeStamp
if
isFileLockingEnabled
block
releaseLock
fsManager
fileObject
if
isDebugEnabled
block
debug
toString
toString
if
isDebugEnabled
block
debug
maskURLPassword
getName
getURI
if
isFailedRecord
block
if
isFileLockingEnabled
block
releaseLock
fsManager
fileObject
if
resolveFile
getURL
toString
removeTaskState
STATE_STOPPED
getMoveAfterMoveFailure
block
execute
FileRemoveTask
entry
fileObject
if
isDebugEnabled
block
debug
getURL
block
int
failCount
int
successCount
if
isDebugEnabled
block
debug
getFileNamePattern
for
FileObject
child
children
block
boolean
isFailedRecord
if
getMoveAfterMoveFailure
block
isFailedRecord
isFailedRecord
child
entry
if
getFileNamePattern
getName
getBaseName
matches
getFileNamePattern
block
if
isDebugEnabled
block
debug
getName
getBaseName
if
isFileLockingEnabled
isFileLockingEnabled
acquireLock
fsManager
child
isFailedRecord
block
try
if
isDebugEnabled
block
debug
child
processFile
entry
child
successCount
setLastPollState
SUCCSESSFUL
incrementMessagesReceived
catchClause
e
logException
maskURLPassword
getName
getURI
e
failCount
setLastPollState
FAILED
incrementFaultsReceiving
try
moveOrDeleteAfterProcessing
entry
child
catchClause
axisFault
logException
getURL
toString
axisFault
failCount
setLastPollState
FAILED
String
timeStamp
getSystemTime
getFailedRecordTimestampFormat
addFailedRecord
entry
child
timeStamp
if
isFileLockingEnabled
block
releaseLock
fsManager
child
if
getFileNamePattern
getName
getBaseName
matches
getFileNamePattern
block
if
isDebugEnabled
block
debug
getName
getBaseName
if
isFailedRecord
block
if
isFileLockingEnabled
block
releaseLock
fsManager
child
releaseLock
fsManager
fileObject
if
resolveFile
getURL
toString
removeTaskState
STATE_STOPPED
getMoveAfterMoveFailure
block
execute
FileRemoveTask
entry
child
if
isDebugEnabled
block
debug
getURL
if
failCount
successCount
block
setLastPollState
SUCCSESSFUL
if
successCount
failCount
block
setLastPollState
FAILED
block
setLastPollState
WITH_ERRORS
long
now
currentTimeMillis
setLastPollTime
now
setNextPollTime
now
getPollInterval
if
isDebugEnabled
block
debug
maskURLPassword
fileURI
exists
isReadable
onPollCompletion
entry
catchClause
e
processFailure
maskURLPassword
fileURI
e
entry
moveOrDeleteAfterProcessing
entry
PollTableEntry
fileObject
FileObject
String
moveToDirectoryURI
try
switch
getLastPollState
case
SUCCSESSFUL
if
getActionAfterProcess
MOVE
block
moveToDirectoryURI
getMoveAfterProcess
break
case
FAILED
if
getActionAfterFailure
MOVE
block
moveToDirectoryURI
getMoveAfterFailure
break
case
return
if
moveToDirectoryURI
block
FileObject
moveToDirectory
resolveFile
moveToDirectoryURI
String
prefix
if
getMoveTimestampFormat
block
prefix
getMoveTimestampFormat
format
Date
block
prefix
FileObject
dest
resolveFile
prefix
getName
getBaseName
if
isDebugEnabled
block
debug
maskURLPassword
getName
getURI
try
moveTo
dest
catchClause
e
handleException
fileObject
moveToDirectoryURI
e
block
try
if
isDebugEnabled
block
debug
fileObject
close
if
delete
block
String
msg
fileObject
error
msg
throw
AxisFault
msg
catchClause
e
error
fileObject
e
catchClause
e
error
moveToDirectoryURI
e
processFile
entry
PollTableEntry
file
FileObject
try
FileContent
content
getContent
String
fileName
getName
getBaseName
String
filePath
getName
getPath
incrementBytesReceived
getSize
Map
String
Object
transportHeaders
HashMap
String
Object
put
FILE_PATH
filePath
put
FILE_NAME
fileName
try
put
FILE_LENGTH
getSize
put
LAST_MODIFIED
getLastModifiedTime
catchClause
ignore
MessageContext
msgContext
createMessageContext
String
contentType
getContentType
if
isBlank
contentType
block
if
getName
getExtension
toLowerCase
endsWith
block
contentType
if
getName
getExtension
toLowerCase
endsWith
block
contentType
block
String
charSetEnc
try
if
contentType
block
charSetEnc
getParameter
ContentType
contentType
catchClause
ex
setProperty
CHARACTER_SET_ENCODING
charSetEnc
if
contentType
block
if
getContentType
block
contentType
getContentType
if
getProperty
content
CONTENT_TYPE
block
contentType
getProperty
content
CONTENT_TYPE
removeProperty
CLIENT_API_NON_BLOCKING
String
replyFileURI
getReplyFileURI
if
replyFileURI
block
setProperty
OUT_TRANSPORT_INFO
VFSOutTransportInfo
replyFileURI
isFileLockingEnabled
Builder
builder
if
contentType
block
debug
builder
SOAPBuilder
block
int
index
indexOf
String
type
index
substring
index
contentType
builder
getBuilderFromSelector
type
msgContext
if
builder
block
if
isDebugEnabled
block
debug
type
builder
SOAPBuilder
InputStream
in
ManagedDataSource
dataSource
if
builder
DataSourceMessageBuilder
isStreaming
block
in
dataSource
create
FileObjectDataSource
file
contentType
block
in
AutoCloseInputStream
getInputStream
dataSource
try
OMElement
documentElement
if
in
block
documentElement
processDocument
in
contentType
msgContext
block
documentElement
DataSourceMessageBuilder
builder
setEnvelope
createSOAPEnvelope
documentElement
handleIncomingMessage
msgContext
transportHeaders
contentType
if
dataSource
block
destroy
if
isDebugEnabled
block
debug
file
contentType
catchClause
e
handleException
file
e
try
close
catchClause
ignored
createEndpoint
PollTableEntry
return
PollTableEntry
globalFileLockingFlag
addFailedRecord
pollTableEntry
PollTableEntry
failedObject
FileObject
timeString
String
try
String
record
getName
getBaseName
FAILED_RECORD_DELIMITER
timeString
String
recordFile
getFailedRecordFileDestination
getFailedRecordFileName
File
failedRecordFile
File
recordFile
if
exists
block
writeStringToFile
failedRecordFile
record
if
isDebugEnabled
block
debug
record
recordFile
block
List
String
content
readLines
failedRecordFile
if
contains
record
block
add
record
writeLines
failedRecordFile
content
catchClause
e
fatal
e
isFailedRecord
boolean
fileObject
FileObject
entry
PollTableEntry
String
failedFile
getFailedRecordFileDestination
getFailedRecordFileName
File
file
File
failedFile
if
exists
block
try
List
list
readLines
file
for
Object
aList
list
block
String
str
String
aList
StringTokenizer
st
StringTokenizer
str
FAILED_RECORD_DELIMITER
String
fileName
nextToken
if
fileName
equals
getName
getBaseName
block
return
catchClause
e
fatal
failedFile
e
return
FileRemoveTask
FileObject
failedFileObject
PollTableEntry
pollTableEntry
FileRemoveTask
pollTableEntry
PollTableEntry
fileObject
FileObject
pollTableEntry
pollTableEntry
failedFileObject
fileObject
run
if
isDebugEnabled
block
debug
currentThread
getName
boolean
isDeletionSucceed
int
nextRetryDuration
getNextRetryDuration
int
count
while
isDeletionSucceed
block
try
reTryFailedMove
pollTableEntry
failedFileObject
isDeletionSucceed
removeTaskState
STATE_STOPPED
catchClause
axisFault
removeTaskState
STATE_RUNNING
try
error
count
getURL
toString
nextRetryDuration
catchClause
e
error
failedFileObject
try
sleep
nextRetryDuration
catchClause
ignore
reTryFailedMove
entry
PollTableEntry
fileObject
FileObject
try
String
moveToDirectoryURI
getMoveAfterMoveFailure
FileObject
moveToDirectory
resolveFile
moveToDirectoryURI
if
exists
block
createFolder
String
prefix
if
getMoveTimestampFormat
block
prefix
getMoveTimestampFormat
format
Date
block
prefix
FileObject
dest
resolveFile
prefix
getName
getBaseName
if
isDebugEnabled
block
debug
maskURLPassword
getName
getURI
try
moveTo
dest
catchClause
e
handleException
fileObject
moveToDirectoryURI
e
catchClause
e
handleException
fileObject
e
catchClause
e
handleException
e
Runnable
AbstractPollingTransportListener
PollTableEntry
ManagementSupport
