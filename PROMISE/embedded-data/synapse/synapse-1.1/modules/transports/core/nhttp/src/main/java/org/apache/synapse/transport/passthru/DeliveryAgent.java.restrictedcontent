DeliveryAgent
Log
log
getLog
DeliveryAgent
Map
String
Queue
MessageContext
waitingMessages
ConcurrentHashMap
String
Queue
MessageContext
TargetConnections
targetConnections
TargetConfiguration
targetConfiguration
TargetErrorHandler
targetErrorHandler
Lock
lock
ReentrantLock
DeliveryAgent
targetConfiguration
TargetConfiguration
targetConnections
TargetConnections
targetConfiguration
targetConfiguration
targetConnections
targetConnections
targetErrorHandler
TargetErrorHandler
targetConfiguration
submit
msgContext
MessageContext
host
String
port
int
String
key
host
port
Queue
MessageContext
queue
lock
try
queue
get
key
if
queue
block
queue
ConcurrentLinkedQueue
MessageContext
put
key
queue
if
size
MAX_VALUE
block
MessageContext
msgCtx
poll
handleError
msgCtx
CONNECTION_TIMEOUT
REQUEST_READY
add
msgContext
unlock
NHttpClientConnection
conn
getConnection
host
port
if
conn
block
resetInput
resetOutput
MessageContext
messageContext
poll
if
messageContext
block
tryNextMessage
messageContext
conn
errorConnecting
host
String
port
int
errorCode
int
message
String
String
key
host
port
Queue
MessageContext
queue
get
key
if
queue
block
MessageContext
msgCtx
poll
if
msgCtx
block
String
errorMessage
if
message
block
errorMessage
message
handleError
msgCtx
errorCode
errorMessage
REQUEST_READY
synchronized
msgCtx
setProperty
WAIT_BUILDER_IN_STREAM_COMPLETE
TRUE
notifyAll
block
throw
IllegalStateException
key
connected
host
String
port
int
conn
NHttpClientConnection
Queue
MessageContext
queue
lock
try
queue
get
host
port
unlock
while
size
block
if
conn
block
conn
getExistingConnection
host
port
if
conn
block
MessageContext
messageContext
poll
if
messageContext
block
tryNextMessage
messageContext
conn
conn
block
break
tryNextMessage
messageContext
MessageContext
conn
NHttpClientConnection
if
conn
block
try
get
setRequestMsgCtx
messageContext
conn
submitRequest
conn
messageContext
catchClause
e
error
e
submitRequest
conn
NHttpClientConnection
msgContext
MessageContext
if
isDebugEnabled
block
debug
conn
TargetRequest
request
create
msgContext
targetConfiguration
setRequest
conn
request
Pipe
pipe
Pipe
getProperty
PASS_THROUGH_PIPE
if
pipe
block
attachConsumer
conn
connect
pipe
if
equals
getProperty
MESSAGE_BUILDER_INVOKED
block
synchronized
msgContext
OutputStream
out
getOutputStream
setProperty
BUILDER_OUTPUT_STREAM
out
setProperty
WAIT_BUILDER_IN_STREAM_COMPLETE
TRUE
notifyAll
return
requestOutput
