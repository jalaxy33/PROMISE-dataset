ServerHandler
Log
log
getLog
ServerHandler
HttpResponseFactory
responseFactory
HttpProcessor
httpProcessor
ConnectionReuseStrategy
connStrategy
ConfigurationContext
cfgCtx
NHttpConfiguration
cfg
WorkerPool
workerPool
NhttpMetricsCollector
metrics
List
NHttpServerConnection
activeConnections
Parser
parser
PriorityExecutor
executor
LatencyView
latencyView
LatencyView
s2sLatencyView
ThreadingView
threadingView
String
REQUEST_SINK_BUFFER
String
RESPONSE_SOURCE_BUFFER
String
CONNECTION_CREATION_TIME
String
SERVER_CONNECTION_DEBUG
ListenerContext
listenerContext
ServerHandler
listenerContext
ListenerContext
listenerContext
listenerContext
cfgCtx
getCfgCtx
metrics
getMetrics
responseFactory
DefaultHttpResponseFactory
httpProcessor
getHttpProcessor
connStrategy
DefaultConnectionReuseStrategy
activeConnections
ArrayList
NHttpServerConnection
latencyView
LatencyView
getTransportIn
getName
s2sLatencyView
LatencyView
getTransportIn
getName
threadingView
ThreadingView
cfg
getInstance
if
getExecutor
block
workerPool
getWorkerPool
getServerCoreThreads
getServerMaxThreads
getServerKeepalive
getServerQueueLen
block
executor
getExecutor
parser
getParser
requestReceived
conn
NHttpServerConnection
HttpContext
context
getContext
setAttribute
REQ_ARRIVAL_TIME
currentTimeMillis
HttpRequest
request
getHttpRequest
setAttribute
HTTP_REQUEST
request
setAttribute
MESSAGE_IN_FLIGHT
getContext
setAttribute
SERVER_CONNECTION_DEBUG
ServerConnectionDebug
conn
try
InputStream
is
if
request
HttpEntityEnclosingRequest
block
getContext
setAttribute
REQUEST_READ
FALSE
ContentInputBuffer
inputBuffer
SharedInputBuffer
getBufferSize
INSTANCE
setAttribute
REQUEST_SINK_BUFFER
inputBuffer
is
ContentInputStream
inputBuffer
block
is
getContext
removeAttribute
REQUEST_READ
ContentOutputBuffer
outputBuffer
SharedOutputBuffer
getBufferSize
INSTANCE
setAttribute
RESPONSE_SOURCE_BUFFER
outputBuffer
OutputStream
os
ContentOutputStream
outputBuffer
ProtocolVersion
httpVersion
getRequestLine
getProtocolVersion
HttpResponse
response
newHttpResponse
httpVersion
SC_OK
context
BasicHttpEntity
entity
BasicHttpEntity
if
greaterEquals
HTTP_1_1
block
setChunked
setEntity
entity
if
metrics
block
incrementMessagesReceived
ServerWorker
worker
ServerWorker
listenerContext
conn
request
is
response
os
if
workerPool
block
execute
worker
if
executor
block
Map
String
String
headers
HashMap
String
String
for
Header
header
getAllHeaders
block
put
getName
getValue
EvaluatorContext
evaluatorContext
EvaluatorContext
getRequestLine
getUri
headers
int
priority
parse
evaluatorContext
execute
worker
priority
Header
expect
getFirstHeader
EXPECT_DIRECTIVE
if
expect
equalsIgnoreCase
getValue
block
HttpResponse
ack
BasicHttpResponse
getProtocolVersion
SC_CONTINUE
submitResponse
ack
if
isDebugEnabled
block
debug
return
catchClause
e
if
metrics
block
incrementFaultsReceiving
handleException
getRequestLine
getUri
e
conn
inputReady
conn
NHttpServerConnection
decoder
ContentDecoder
HttpContext
context
getContext
SharedInputBuffer
inBuf
SharedInputBuffer
getAttribute
REQUEST_SINK_BUFFER
try
int
bytesRead
consumeContent
decoder
conn
if
metrics
bytesRead
block
incrementBytesReceived
bytesRead
if
isCompleted
block
ServerConnectionDebug
getContext
getAttribute
SERVER_CONNECTION_DEBUG
setAttribute
REQUEST_READ
TRUE
catchClause
e
if
metrics
block
incrementFaultsReceiving
handleException
getMessage
e
conn
outputReady
conn
NHttpServerConnection
encoder
ContentEncoder
HttpContext
context
getContext
HttpResponse
response
getHttpResponse
SharedOutputBuffer
outBuf
SharedOutputBuffer
getAttribute
RESPONSE_SOURCE_BUFFER
if
outBuf
block
shutdownConnection
conn
return
try
int
bytesWritten
produceContent
encoder
conn
if
metrics
bytesWritten
block
incrementBytesSent
bytesWritten
if
isCompleted
block
if
getAttribute
REQ_ARRIVAL_TIME
getAttribute
REQ_DEPARTURE_TIME
getAttribute
RES_ARRIVAL_TIME
block
notifyTimes
Long
getAttribute
REQ_ARRIVAL_TIME
Long
getAttribute
REQ_DEPARTURE_TIME
Long
getAttribute
RES_ARRIVAL_TIME
currentTimeMillis
removeAttribute
REQ_ARRIVAL_TIME
removeAttribute
REQ_DEPARTURE_TIME
removeAttribute
RES_ARRIVAL_TIME
ServerConnectionDebug
getContext
getAttribute
SERVER_CONNECTION_DEBUG
Boolean
reqRead
Boolean
getContext
getAttribute
REQUEST_READ
Boolean
forceConnectionClose
Boolean
getContext
getAttribute
FORCE_CONNECTION_CLOSE
if
reqRead
reqRead
block
try
close
catchClause
ignore
if
keepAlive
response
context
block
close
if
forceConnectionClose
forceConnectionClose
block
close
block
requestInput
catchClause
e
if
metrics
block
incrementFaultsSending
handleException
getMessage
e
conn
commitResponseHideExceptions
conn
NHttpServerConnection
response
HttpResponse
try
suspendInput
process
response
getContext
submitResponse
response
catchClause
e
handleException
getMessage
e
conn
catchClause
e
handleException
getMessage
e
conn
commitResponse
conn
NHttpServerConnection
response
HttpResponse
try
suspendInput
HttpContext
context
getContext
process
response
context
if
getAttribute
REQ_ARRIVAL_TIME
getAttribute
REQ_DEPARTURE_TIME
getAttribute
RES_HEADER_ARRIVAL_TIME
block
notifyTimes
Long
getAttribute
REQ_ARRIVAL_TIME
Long
getAttribute
REQ_DEPARTURE_TIME
Long
getAttribute
RES_HEADER_ARRIVAL_TIME
currentTimeMillis
submitResponse
response
catchClause
e
shutdownConnection
conn
getMessage
throw
e
catchClause
e
shutdownConnection
conn
getMessage
throw
e
timeout
conn
NHttpServerConnection
HttpContext
context
getContext
Boolean
read
Boolean
getAttribute
REQUEST_READ
if
read
read
block
if
isDebugEnabled
block
debug
shutdownConnection
conn
block
String
msg
conn
error
msg
if
metrics
block
incrementTimeoutsReceiving
shutdownConnection
conn
msg
connected
conn
NHttpServerConnection
if
isTraceEnabled
block
trace
connected
getContext
setAttribute
CONNECTION_CREATION_TIME
currentTimeMillis
if
isDebugEnabled
block
debug
conn
size
add
conn
responseReady
conn
NHttpServerConnection
if
isTrueExplicitly
getContext
getAttribute
FORCE_CLOSING
isTrueExplicitly
getContext
getAttribute
MESSAGE_IN_FLIGHT
block
try
if
isDebugEnabled
block
debug
conn
close
catchClause
ignore
return
notifyReceivedMessageSize
getMetrics
getReceivedBytesCount
notifySentMessageSize
getMetrics
getSentBytesCount
getMetrics
reset
getContext
removeAttribute
MESSAGE_IN_FLIGHT
if
isTraceEnabled
block
trace
closed
conn
NHttpServerConnection
HttpContext
context
getContext
shutdownConnection
conn
removeAttribute
REQUEST_SINK_BUFFER
removeAttribute
RESPONSE_SOURCE_BUFFER
removeAttribute
CONNECTION_CREATION_TIME
removeAttribute
SERVER_CONNECTION_DEBUG
if
isTraceEnabled
block
trace
disconnected
markActiveConnectionsToBeClosed
info
size
synchronized
for
NHttpServerConnection
conn
activeConnections
block
getContext
setAttribute
FORCE_CLOSING
requestOutput
exception
conn
NHttpServerConnection
e
HttpException
if
isDebugEnabled
block
debug
e
if
metrics
block
incrementFaultsReceiving
HttpContext
context
getContext
HttpRequest
request
getHttpRequest
ProtocolVersion
ver
HTTP_1_0
if
request
getRequestLine
block
ver
getRequestLine
getProtocolVersion
HttpResponse
response
newHttpResponse
ver
SC_BAD_REQUEST
context
byte
msg
getAsciiBytes
getMessage
ByteArrayEntity
entity
ByteArrayEntity
msg
setContentType
setEntity
entity
try
commitResponseHideExceptions
conn
response
catchClause
ignore
endOfInput
conn
NHttpServerConnection
closed
conn
exception
conn
NHttpServerConnection
e
Exception
if
e
HttpException
block
exception
conn
HttpException
e
if
e
IOException
block
exception
conn
IOException
e
block
String
errMsg
getClass
getName
error
errMsg
e
if
metrics
block
incrementFaultsReceiving
shutdownConnection
conn
errMsg
exception
conn
NHttpServerConnection
e
IOException
String
errMsg
getMessage
if
e
ConnectionClosedException
getMessage
getMessage
contains
getMessage
contains
block
if
isDebugEnabled
block
errMsg
getMessage
debug
errMsg
if
getMessage
block
errMsg
getMessage
toLowerCase
if
indexOf
block
errMsg
getMessage
warn
errMsg
block
errMsg
getMessage
error
errMsg
e
if
metrics
block
incrementFaultsReceiving
block
errMsg
getMessage
error
errMsg
e
if
metrics
block
incrementFaultsReceiving
shutdownConnection
conn
errMsg
handleException
msg
String
e
Exception
conn
NHttpServerConnection
error
msg
e
if
conn
block
shutdownConnection
conn
getMessage
shutdownConnection
conn
NHttpServerConnection
isError
boolean
errorMsg
String
SharedOutputBuffer
outputBuffer
SharedOutputBuffer
getContext
getAttribute
RESPONSE_SOURCE_BUFFER
if
outputBuffer
block
close
SharedInputBuffer
inputBuffer
SharedInputBuffer
getContext
getAttribute
REQUEST_SINK_BUFFER
if
inputBuffer
block
close
if
isWarnEnabled
isError
isDebugEnabled
conn
HttpInetConnection
block
HttpInetConnection
inetConnection
HttpInetConnection
conn
InetAddress
remoteAddress
getRemoteAddress
int
remotePort
getRemotePort
String
msg
if
remotePort
remoteAddress
block
msg
remoteAddress
remotePort
getLocalAddress
getLocalPort
errorMsg
errorMsg
block
HttpContext
httpContext
getContext
msg
getAttribute
CLIENT_REMOTE_ADDR
getAttribute
CLIENT_REMOTE_PORT
getLocalAddress
getLocalPort
errorMsg
errorMsg
if
isError
block
warn
msg
block
debug
msg
synchronized
if
remove
conn
isDebugEnabled
block
debug
conn
size
try
shutdown
catchClause
ignore
getActiveConnectionsSize
int
return
size
getHttpProcessor
HttpProcessor
return
ImmutableHttpProcessor
ResponseDate
ResponseServer
ResponseContent
ResponseConnControl
getActiveCount
int
return
getActiveCount
getQueueSize
int
return
getQueueSize
getMetrics
MetricsCollector
return
metrics
stop
destroy
destroy
destroy
try
if
workerPool
block
shutdown
if
executor
block
destroy
catchClause
ignore
NHttpServerEventHandler
