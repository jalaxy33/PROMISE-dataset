PerUserViewStrategy
int
IP
int
DOMAIN
Log
log
PerUserViewStrategy
log
getLog
getClass
determineView
Map
String
Map
String
InOutStatisticsView
statisticsRecords
List
StatisticsRecord
type
ComponentType
userIDType
int
Map
String
Map
String
InOutStatisticsView
statisticsMap
HashMap
String
Map
String
InOutStatisticsView
if
statisticsRecords
block
if
isDebugEnabled
block
debug
return
statisticsMap
Map
String
InOutStatisticsView
perUserMap
HashMap
String
InOutStatisticsView
for
StatisticsRecord
record
statisticsRecords
block
if
record
block
String
userID
if
IP
userIDType
block
userID
getClientIP
block
userID
getClientHost
if
userID
equals
userID
block
if
isDebugEnabled
block
debug
continue
Map
String
InOutStatisticsView
perResourceMap
if
containsKey
userID
block
perResourceMap
get
userID
block
perResourceMap
HashMap
String
InOutStatisticsView
put
userID
perResourceMap
if
perResourceMap
block
if
isDebugEnabled
block
debug
userID
continue
StatisticsUpdateStrategy
strategy
StatisticsUpdateStrategy
record
Iterator
String
logIds
getAllLogIds
type
while
hasNext
block
String
id
next
InOutStatisticsView
view
if
containsKey
id
block
view
InOutStatisticsView
id
userID
type
put
id
view
block
view
get
id
updateStatistics
id
type
view
strategy
return
statisticsMap
determineView
Map
String
InOutStatisticsView
id
String
statisticsRecords
List
StatisticsRecord
type
ComponentType
userIDType
int
if
id
equals
id
block
handleException
Map
String
InOutStatisticsView
statisticsMap
HashMap
String
InOutStatisticsView
if
statisticsRecords
block
if
isDebugEnabled
block
debug
return
statisticsMap
for
StatisticsRecord
record
statisticsRecords
block
if
record
block
String
userID
if
IP
userIDType
block
userID
getClientIP
block
userID
getClientHost
if
userID
equals
userID
block
if
isDebugEnabled
block
debug
continue
InOutStatisticsView
view
if
containsKey
userID
block
view
get
userID
block
view
InOutStatisticsView
id
userID
type
put
userID
view
updateStatistics
id
type
view
StatisticsUpdateStrategy
record
return
statisticsMap
updateStatistics
id
String
type
ComponentType
view
InOutStatisticsView
strategy
StatisticsUpdateStrategy
if
view
block
updateStatistics
id
type
view
handleException
msg
String
error
msg
throw
SynapseException
msg
StatisticsViewStrategy
