SALSessions
SALSessions
INSTANCE
SALSessions
Log
log
getLog
SALSessions
String
SESSION_IDS
ConfigurationContext
configCtx
boolean
isClustered
boolean
initialized
Map
List
String
List
Endpoint
namesToEndpointsMap
HashMap
List
String
List
Endpoint
Map
String
SessionInformation
establishedSessions
HashMap
String
SessionInformation
Map
String
Map
String
Endpoint
childEndpoints
HashMap
String
Map
String
Endpoint
SALSessions
getInstance
SALSessions
return
INSTANCE
initialize
isClusteringEnable
boolean
cc
ConfigurationContext
if
initialized
block
if
isDebugEnabled
block
debug
isClusteringEnable
if
isClusteringEnable
block
isClustered
isClusteringEnable
configCtx
cc
initialized
registerChildren
endpoint
Endpoint
endpoints
List
Endpoint
if
isClustered
block
String
endpointName
getName
validateInput
endpointName
if
isDebugEnabled
block
debug
endpoints
endpointName
if
containsKey
endpointName
block
Map
String
Endpoint
children
HashMap
String
Endpoint
put
endpointName
endpoint
fillMap
endpoints
children
put
endpointName
children
updateSession
synCtx
MessageContext
sessionID
String
if
sessionID
equals
sessionID
block
if
isDebugEnabled
block
debug
return
boolean
createSession
SessionInformation
oldSession
SessionInformation
getProperty
PROP_SAL_CURRENT_SESSION_INFORMATION
List
Endpoint
endpoints
Member
currentMember
if
oldSession
block
if
isDebugEnabled
block
debug
sessionID
endpoints
List
Endpoint
getProperty
PROP_SAL_ENDPOINT_ENDPOINT_LIST
currentMember
Member
getProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
createSession
block
String
oldSessionID
getId
if
equals
oldSessionID
block
if
isDebugEnabled
block
debug
oldSessionID
sessionID
removeSession
oldSessionID
endpoints
getEndpointList
currentMember
getMember
createSession
block
SessionInformation
information
getSessionInformation
oldSessionID
if
information
block
if
isDebugEnabled
block
debug
sessionID
endpoints
getEndpointList
currentMember
getMember
createSession
block
if
isDebugEnabled
block
debug
sessionID
if
createSession
block
SessionInformation
newInformation
if
currentMember
block
newInformation
createSessionInformation
synCtx
sessionID
endpoints
block
newInformation
createSessionInformation
synCtx
sessionID
currentMember
if
isDebugEnabled
block
debug
sessionID
endpoints
if
isClustered
block
setAndReplicateState
SESSION_IDS
sessionID
newInformation
configCtx
block
put
sessionID
newInformation
getSession
SessionInformation
sessionID
String
if
sessionID
equals
sessionID
block
if
isDebugEnabled
block
debug
return
if
isDebugEnabled
block
debug
sessionID
SessionInformation
information
getSessionInformation
sessionID
if
information
block
if
isDebugEnabled
block
debug
sessionID
return
if
isExpired
block
if
isDebugEnabled
block
debug
sessionID
removeSession
sessionID
return
return
information
getChildEndpoints
List
Endpoint
information
SessionInformation
List
Endpoint
endpoints
if
isClustered
block
endpoints
getEndpoints
getPath
getRootEndpointName
block
endpoints
getEndpointList
if
isDebugEnabled
block
debug
endpoints
getId
if
endpoints
isEmpty
block
handleException
getId
List
Endpoint
toBeSent
ArrayList
Endpoint
addAll
endpoints
remove
return
toBeSent
removeSession
sessionId
String
if
sessionId
equals
sessionId
block
if
isDebugEnabled
block
debug
return
if
isDebugEnabled
block
debug
sessionId
if
isClustered
block
removeAndReplicateState
SESSION_IDS
sessionId
configCtx
block
remove
sessionId
clearSessions
if
initialized
block
return
try
if
isClustered
block
List
String
toBeRemoved
ArrayList
String
for
forControl
Iterator
String
props
getPropertyNames
hasNext
block
Object
name
next
if
name
String
String
name
block
String
key
String
name
SessionInformation
info
SessionInformation
getProperty
key
if
info
isExpired
block
if
isDebugEnabled
block
debug
key
add
key
if
isEmpty
block
if
isDebugEnabled
block
debug
for
String
key
toBeRemoved
block
removeAndReplicateState
key
configCtx
block
List
String
toBeRemoved
ArrayList
String
for
SessionInformation
information
values
block
if
information
isExpired
block
String
id
getId
if
isDebugEnabled
block
debug
id
add
id
if
isEmpty
block
if
isDebugEnabled
block
debug
keySet
removeAll
toBeRemoved
catchClause
ignored
debug
ignored
isInitialized
boolean
return
initialized
handleException
msg
String
error
msg
throw
SynapseException
msg
reset
if
initialized
block
return
info
initialized
clear
clear
clear
fillMap
endpoints
List
Endpoint
endpointsMap
Map
String
Endpoint
if
endpoints
block
for
Endpoint
endpoint
endpoints
block
String
endpointName
getEndpointName
endpoint
if
containsKey
endpointName
block
handleException
endpointName
put
endpointName
endpoint
fillMap
getChildren
endpointsMap
getEndpointNames
List
String
endpoints
List
Endpoint
List
String
endpointNames
ArrayList
String
for
Endpoint
endpoint
endpoints
block
add
getEndpointName
endpoint
return
endpointNames
getEndpoints
List
Endpoint
endpointNames
List
String
root
String
if
endpointNames
isEmpty
block
handleException
if
isDebugEnabled
block
debug
endpointNames
List
Endpoint
endpoints
ArrayList
Endpoint
if
containsKey
endpointNames
block
addAll
get
endpointNames
return
endpoints
Map
String
Endpoint
map
get
root
assert
endpointNames
for
String
endpointName
endpointNames
block
Endpoint
endpoint
if
map
block
endpoint
get
endpointName
if
endpoint
contains
endpoint
block
map
get
endpointName
if
map
block
endpoint
get
endpointName
if
endpoint
block
handleException
endpointName
add
endpoint
put
endpointNames
endpoints
return
endpoints
validateInput
endpointName
String
if
endpointName
block
handleException
getEndpointName
String
endpoint
Endpoint
if
endpoint
block
handleException
assert
endpoint
String
endpointName
getName
if
endpointName
endpoint
IndirectEndpoint
block
endpointName
IndirectEndpoint
endpoint
validateInput
endpointName
return
endpointName
getSessionInformation
SessionInformation
sessionID
String
if
isClustered
block
return
SessionInformation
getPropertyNonReplicable
SESSION_IDS
sessionID
block
return
get
sessionID
createSessionInformation
SessionInformation
synCtx
MessageContext
id
String
endpoints
List
Endpoint
if
endpoints
isEmpty
block
handleException
if
isDebugEnabled
block
debug
id
endpoints
long
expireTimeWindow
assert
endpoints
for
Endpoint
endpoint
endpoints
block
if
endpoint
SALoadbalanceEndpoint
block
long
sessionsTimeout
SALoadbalanceEndpoint
endpoint
if
expireTimeWindow
block
expireTimeWindow
sessionsTimeout
if
expireTimeWindow
sessionsTimeout
block
expireTimeWindow
sessionsTimeout
if
expireTimeWindow
block
expireTimeWindow
getConfiguration
getProperty
PROP_SAL_ENDPOINT_DEFAULT_SESSION_TIMEOUT
SAL_ENDPOINTS_DEFAULT_SESSION_TIMEOUT
if
isDebugEnabled
block
debug
id
expireTimeWindow
long
expiryTime
currentTimeMillis
expireTimeWindow
Endpoint
rootEndpoint
get
SessionInformation
information
SessionInformation
id
endpoints
expiryTime
if
isClustered
block
List
String
epNameList
getEndpointNames
endpoints
setPath
epNameList
setRootEndpointName
getEndpointName
rootEndpoint
return
information
createSessionInformation
SessionInformation
synCtx
MessageContext
id
String
currentMember
Member
if
currentMember
block
handleException
if
isDebugEnabled
block
debug
id
getHostName
getPort
long
expireTimeWindow
List
Endpoint
endpoints
List
Endpoint
getProperty
PROP_SAL_ENDPOINT_ENDPOINT_LIST
assert
endpoints
for
Endpoint
endpoint
endpoints
block
if
endpoint
DynamicLoadbalanceEndpoint
block
long
sessionsTimeout
DynamicLoadbalanceEndpoint
endpoint
if
expireTimeWindow
block
expireTimeWindow
sessionsTimeout
if
expireTimeWindow
sessionsTimeout
block
expireTimeWindow
sessionsTimeout
if
expireTimeWindow
block
expireTimeWindow
getConfiguration
getProperty
PROP_SAL_ENDPOINT_DEFAULT_SESSION_TIMEOUT
SAL_ENDPOINTS_DEFAULT_SESSION_TIMEOUT
if
isDebugEnabled
block
debug
id
expireTimeWindow
long
expiryTime
currentTimeMillis
expireTimeWindow
Endpoint
rootEndpoint
get
SessionInformation
information
SessionInformation
id
currentMember
expiryTime
expireTimeWindow
if
isClustered
block
setRootEndpointName
getEndpointName
rootEndpoint
return
information
