ServiceDynamicLoadbalanceEndpoint
Log
log
getLog
ServiceDynamicLoadbalanceEndpoint
ServiceLoadBalanceMembershipHandler
slbMembershipHandler
Map
String
String
hostDomainMap
init
synapseEnvironment
SynapseEnvironment
if
initialized
block
init
synapseEnvironment
ConfigurationContext
cfgCtx
Axis2SynapseEnvironment
synapseEnvironment
ClusteringAgent
clusteringAgent
getAxisConfiguration
getClusteringAgent
if
clusteringAgent
block
throw
SynapseException
for
String
domain
values
block
if
getGroupManagementAgent
domain
block
addGroupManagementAgent
DefaultGroupManagementAgent
domain
slbMembershipHandler
ServiceLoadBalanceMembershipHandler
hostDomainMap
getAlgorithm
cfgCtx
isClusteringEnabled
getName
SALSessions
salSessions
getInstance
if
isInitialized
block
initialize
isClusteringEnabled
cfgCtx
initialized
info
ServiceDynamicLoadbalanceEndpoint
hostDomainMap
Map
String
String
algorithm
LoadbalanceAlgorithm
hostDomainMap
hostDomainMap
setAlgorithm
algorithm
getLbMembershipHandler
LoadBalanceMembershipHandler
return
slbMembershipHandler
getHostDomainMap
Map
String
String
return
unmodifiableMap
hostDomainMap
send
synCtx
MessageContext
setCookieHeader
synCtx
Member
currentMember
SessionInformation
sessionInformation
if
isSessionAffinityBasedLB
block
sessionInformation
SessionInformation
getProperty
PROP_SAL_CURRENT_SESSION_INFORMATION
currentMember
Member
getProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
if
sessionInformation
currentMember
block
sessionInformation
getSession
synCtx
if
sessionInformation
block
if
isDebugEnabled
block
debug
getId
currentMember
getMember
setProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
currentMember
setProperty
PROP_SAL_CURRENT_SESSION_INFORMATION
sessionInformation
String
targetHost
getTargetHost
synCtx
ConfigurationContext
configCtx
Axis2MessageContext
synCtx
if
getConfigurationContext
block
setConfigurationContext
configCtx
ServiceDynamicLoadbalanceFaultHandlerImpl
faultHandler
ServiceDynamicLoadbalanceFaultHandlerImpl
setHost
targetHost
if
sessionInformation
currentMember
block
updateExpiryTime
sendToApplicationMember
synCtx
currentMember
faultHandler
block
currentMember
getNextApplicationMember
targetHost
if
currentMember
block
String
msg
error
msg
throw
SynapseException
msg
sendToApplicationMember
synCtx
currentMember
faultHandler
getTargetHost
String
synCtx
MessageContext
org
apache
axis2
context
MessageContext
axis2MessageContext
Axis2MessageContext
synCtx
Map
String
String
headers
Map
String
String
getProperty
TRANSPORT_HEADERS
String
address
get
TARGET_HOST
setProperty
address
if
contains
block
address
substring
indexOf
return
address
ServiceDynamicLoadbalanceFaultHandlerImpl
EndpointReference
to
Member
currentMember
Endpoint
currentEp
String
host
int
MAX_RETRY_COUNT
ThreadLocal
Integer
callCount
ThreadLocal
Integer
initialValue
Integer
return
setHost
host
String
host
host
setCurrentMember
currentMember
Member
currentMember
currentMember
setTo
to
EndpointReference
to
to
ServiceDynamicLoadbalanceFaultHandlerImpl
onFault
synCtx
MessageContext
if
currentMember
block
return
suspend
info
currentMember
set
get
if
get
MAX_RETRY_COUNT
block
return
if
currentEp
block
destroy
Integer
errorCode
Integer
getProperty
ERROR_CODE
if
errorCode
block
if
equals
CONNECTION_FAILED
equals
CONNECT_CANCEL
equals
CONNECT_TIMEOUT
block
Member
newMember
getNextApplicationMember
host
if
newMember
block
String
msg
error
msg
throw
SynapseException
msg
info
newMember
setTo
to
if
isSessionAffinityBasedLB
block
Set
pros
getPropertyKeySet
if
pros
block
remove
PROP_SAL_CURRENT_SESSION_INFORMATION
try
sleep
catchClause
ignored
sendToApplicationMember
synCtx
newMember
if
equals
SND_IO_ERROR_SENDING
equals
CONNECTION_CLOSED
block
setCurrentEp
currentEp
Endpoint
currentEp
currentEp
DynamicLoadbalanceFaultHandler
DynamicLoadbalanceEndpoint
