DynamicLoadbalanceEndpoint
Log
log
getLog
DynamicLoadbalanceEndpoint
String
PORT_MAPPING_PREFIX
boolean
sessionAffinity
Dispatcher
dispatcher
long
sessionTimeout
AlgorithmContext
algorithmContext
init
synapseEnvironment
SynapseEnvironment
ConfigurationContext
cc
Axis2SynapseEnvironment
synapseEnvironment
if
initialized
block
init
synapseEnvironment
if
algorithmContext
block
algorithmContext
AlgorithmContext
isClusteringEnabled
cc
getName
SALSessions
salSessions
getInstance
if
isInitialized
block
initialize
isClusteringEnabled
cc
info
LoadBalanceMembershipHandler
lbMembershipHandler
DynamicLoadbalanceEndpoint
setLoadBalanceMembershipHandler
lbMembershipHandler
LoadBalanceMembershipHandler
lbMembershipHandler
lbMembershipHandler
getLbMembershipHandler
LoadBalanceMembershipHandler
return
lbMembershipHandler
send
synCtx
MessageContext
SessionInformation
sessionInformation
Member
currentMember
setCookieHeader
synCtx
ConfigurationContext
configCtx
Axis2MessageContext
synCtx
if
getConfigurationContext
block
setConfigurationContext
configCtx
if
isSessionAffinityBasedLB
block
sessionInformation
SessionInformation
getProperty
PROP_SAL_CURRENT_SESSION_INFORMATION
currentMember
Member
getProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
if
sessionInformation
currentMember
block
sessionInformation
getSession
synCtx
if
sessionInformation
block
if
isDebugEnabled
block
debug
getId
currentMember
getMember
setProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
currentMember
setProperty
PROP_SAL_CURRENT_SESSION_INFORMATION
sessionInformation
DynamicLoadbalanceFaultHandlerImpl
faultHandler
DynamicLoadbalanceFaultHandlerImpl
if
sessionInformation
currentMember
block
updateExpiryTime
sendToApplicationMember
synCtx
currentMember
faultHandler
block
currentMember
getNextApplicationMember
algorithmContext
if
currentMember
block
String
msg
error
msg
throw
SynapseException
msg
sendToApplicationMember
synCtx
currentMember
faultHandler
setCookieHeader
synCtx
MessageContext
String
cookieHeader
extractSessionID
synCtx
if
cookieHeader
block
setProperty
cookieHeader
extractSessionID
String
synCtx
MessageContext
key
String
if
key
block
Map
headerMap
getTransportHeaderMap
synCtx
if
headerMap
block
Object
cookieObj
get
key
if
cookieObj
String
block
return
String
cookieObj
block
if
isDebugEnabled
block
debug
key
block
if
isDebugEnabled
block
debug
return
getTransportHeaderMap
Map
synCtx
MessageContext
org
apache
axis2
context
MessageContext
axis2MessageContext
Axis2MessageContext
synCtx
Object
o
getProperty
if
o
o
Map
block
return
Map
o
return
setName
name
String
setName
name
getDispatcher
Dispatcher
return
dispatcher
setDispatcher
dispatcher
Dispatcher
dispatcher
dispatcher
getSessionTimeout
long
return
sessionTimeout
setSessionTimeout
sessionTimeout
long
sessionTimeout
sessionTimeout
setSessionAffinity
sessionAffinity
boolean
sessionAffinity
sessionAffinity
isSessionAffinityBasedLB
boolean
return
sessionAffinity
sendToApplicationMember
synCtx
MessageContext
currentMember
Member
faultHandler
DynamicLoadbalanceFaultHandler
newSession
boolean
org
apache
axis2
context
MessageContext
axis2MsgCtx
Axis2MessageContext
synCtx
removeProperty
REST_URL_POSTFIX
String
transport
getTransportIn
getName
String
address
getTo
getAddress
int
incomingPort
extractPort
synCtx
transport
EndpointReference
to
getEndpointReferenceAfterURLRewrite
currentMember
transport
address
incomingPort
setTo
to
setTo
to
setCurrentMember
currentMember
pushFaultHandler
faultHandler
if
isFailover
block
getEnvelope
build
Endpoint
endpoint
getEndpoint
to
currentMember
synCtx
setCurrentEp
endpoint
if
isSessionAffinityBasedLB
newSession
block
prepareEndPointSequence
synCtx
endpoint
setProperty
PROP_SAL_ENDPOINT_CURRENT_MEMBER
currentMember
setProperty
PROP_SAL_ENDPOINT_CURRENT_DISPATCHER
dispatcher
setProperty
PROP_SAL_ENDPOINT_FIRST_MESSAGE_IN_SESSION
TRUE
Map
String
String
memberHosts
if
memberHosts
Map
String
String
getProperties
get
HOSTS
block
getProperties
put
HOSTS
memberHosts
HashMap
String
String
put
extractHost
synCtx
try
send
synCtx
catchClause
e
if
getMessage
toLowerCase
contains
block
fatal
e
exit
block
throw
SynapseException
e
prepareEndPointSequence
synCtx
MessageContext
endpoint
Endpoint
Object
o
getProperty
PROP_SAL_ENDPOINT_ENDPOINT_LIST
List
Endpoint
endpointList
if
o
List
block
endpointList
List
Endpoint
o
add
block
endpointList
ArrayList
Endpoint
add
setProperty
PROP_SAL_ENDPOINT_ENDPOINT_LIST
endpointList
if
endpoint
DynamicLoadbalanceEndpoint
block
add
endpoint
if
isServerInitiatedSession
block
removeSessionID
synCtx
getEndpointReferenceAfterURLRewrite
EndpointReference
currentMember
Member
transport
String
address
String
incomingPort
int
if
equals
transport
equals
transport
block
if
startsWith
startsWith
block
try
address
getPath
URL
address
catchClause
e
String
msg
address
error
msg
e
throw
SynapseException
msg
e
int
port
Properties
memberProperties
getProperties
String
mappedPort
getProperty
PORT_MAPPING_PREFIX
incomingPort
if
mappedPort
block
port
parseInt
mappedPort
if
equals
transport
block
port
getHttpPort
block
port
getHttpsPort
return
EndpointReference
transport
getHostName
port
address
block
String
msg
transport
error
msg
throw
SynapseException
msg
getEndpoint
Endpoint
to
EndpointReference
member
Member
synCtx
MessageContext
AddressEndpoint
endpoint
AddressEndpoint
setEnableMBeanStats
setName
getHostName
getPort
randomUUID
EndpointDefinition
definition
EndpointDefinition
setSuspendMaximumDuration
setReplicationDisabled
setAddress
getAddress
setDefinition
definition
init
SynapseEnvironment
Axis2MessageContext
synCtx
return
endpoint
extractHost
String
synCtx
MessageContext
org
apache
axis2
context
MessageContext
msgCtx
Axis2MessageContext
synCtx
Map
headerMap
Map
getProperty
TRANSPORT_HEADERS
String
hostName
if
headerMap
block
Object
hostObj
get
TARGET_HOST
hostName
String
hostObj
if
contains
block
hostName
substring
indexOf
return
hostName
extractPort
int
synCtx
MessageContext
transport
String
org
apache
axis2
context
MessageContext
msgCtx
Axis2MessageContext
synCtx
Map
headerMap
Map
getProperty
TRANSPORT_HEADERS
int
port
if
headerMap
block
String
hostHeader
String
get
TARGET_HOST
int
index
indexOf
if
index
block
port
parseInt
trim
substring
index
block
if
equals
transport
block
port
if
equals
transport
block
port
return
port
DynamicLoadbalanceFaultHandlerImpl
EndpointReference
to
Member
currentMember
Endpoint
currentEp
setCurrentMember
currentMember
Member
currentMember
currentMember
setTo
to
EndpointReference
to
to
DynamicLoadbalanceFaultHandlerImpl
onFault
synCtx
MessageContext
if
currentEp
block
destroy
if
currentMember
block
return
Stack
faultStack
getFaultStack
if
empty
block
pop
currentMember
getNextApplicationMember
algorithmContext
if
currentMember
block
String
msg
error
msg
throw
SynapseException
msg
setTo
to
if
isSessionAffinityBasedLB
block
Set
pros
getPropertyKeySet
if
pros
block
remove
PROP_SAL_CURRENT_SESSION_INFORMATION
sendToApplicationMember
synCtx
currentMember
setCurrentEp
currentEp
Endpoint
currentEp
currentEp
DynamicLoadbalanceFaultHandler
LoadbalanceEndpoint
