LoadbalanceEndpoint
boolean
failover
LoadbalanceAlgorithm
algorithm
AlgorithmContext
algorithmContext
List
Member
activeMembers
List
Member
inactiveMembers
init
synapseEnvironment
SynapseEnvironment
ConfigurationContext
cc
Axis2SynapseEnvironment
synapseEnvironment
if
initialized
block
init
synapseEnvironment
if
algorithmContext
block
algorithmContext
AlgorithmContext
isClusteringEnabled
cc
getName
if
algorithm
algorithm
ManagedLifecycle
block
ManagedLifecycle
lifecycle
ManagedLifecycle
algorithm
init
synapseEnvironment
destroy
destroy
if
algorithm
algorithm
ManagedLifecycle
block
ManagedLifecycle
lifecycle
ManagedLifecycle
algorithm
destroy
send
synCtx
MessageContext
if
isDebugEnabled
block
debug
toString
Endpoint
endpoint
if
activeMembers
block
endpoint
getNextChild
synCtx
evaluateProperties
synCtx
if
endpoint
block
if
getProperty
LAST_ENDPOINT
block
if
failover
block
getEnvelope
build
block
if
metricsMBean
block
reportSendingFault
ENDPOINT_LB_FAIL_OVER
pushFaultHandler
send
synCtx
if
activeMembers
isEmpty
block
EndpointReference
to
getTo
LoadbalanceFaultHandler
faultHandler
LoadbalanceFaultHandler
to
if
failover
block
pushFaultHandler
faultHandler
sendToApplicationMember
synCtx
to
faultHandler
block
String
msg
getName
getName
ANONYMOUS_ENDPOINT
warn
msg
informFailure
synCtx
ENDPOINT_LB_NONE_READY
msg
sendToApplicationMember
synCtx
MessageContext
to
EndpointReference
faultHandler
LoadbalanceFaultHandler
org
apache
axis2
context
MessageContext
axis2MsgCtx
Axis2MessageContext
synCtx
String
transport
getTransportIn
getName
setApplicationMembers
activeMembers
Member
currentMember
getNextApplicationMember
algorithmContext
setCurrentMember
currentMember
if
currentMember
block
if
equals
equals
block
String
address
getAddress
if
indexOf
block
try
address
getPath
URL
address
catchClause
e
String
msg
address
error
msg
e
throw
SynapseException
msg
e
EndpointReference
epr
EndpointReference
transport
getHostName
equals
transport
getHttpPort
getHttpsPort
address
setTo
epr
if
failover
block
getEnvelope
build
AddressEndpoint
endpoint
AddressEndpoint
EndpointDefinition
definition
EndpointDefinition
setDefinition
definition
init
getEnvironment
send
synCtx
block
error
transport
block
getFaultStack
pop
String
msg
error
msg
throw
SynapseException
msg
readyToSend
boolean
for
Endpoint
endpoint
getChildren
block
if
readyToSend
block
if
isDebugEnabled
block
debug
toString
return
warn
toString
return
onChildEndpointFail
endpoint
Endpoint
synMessageContext
MessageContext
logOnChildEndpointFail
endpoint
synMessageContext
if
failover
block
if
AbstractEndpoint
endpoint
block
if
isDebugEnabled
block
debug
getMessageID
getTo
send
synMessageContext
block
String
msg
getName
getName
ANONYMOUS_ENDPOINT
warn
msg
informFailure
synMessageContext
ENDPOINT_LB_NONE_READY
msg
block
Object
o
getFaultStack
pop
if
o
block
FaultHandler
o
isFailover
boolean
return
failover
setFailover
failover
boolean
failover
failover
getAlgorithm
LoadbalanceAlgorithm
return
algorithm
setAlgorithm
algorithm
LoadbalanceAlgorithm
if
isDebugEnabled
block
debug
toString
getName
algorithm
algorithm
getNextChild
Endpoint
synCtx
MessageContext
return
getNextEndpoint
synCtx
algorithmContext
LoadbalanceFaultHandler
EndpointReference
to
Member
currentMember
setCurrentMember
currentMember
Member
currentMember
currentMember
LoadbalanceFaultHandler
to
EndpointReference
to
to
onFault
synCtx
MessageContext
if
currentMember
block
return
pushFaultHandler
remove
currentMember
add
currentMember
sendToApplicationMember
synCtx
to
FaultHandler
setMembers
members
List
Member
activeMembers
members
inactiveMembers
ArrayList
Member
getMembers
List
Member
return
activeMembers
startApplicationMembershipTimer
Timer
timer
Timer
scheduleAtFixedRate
MemberActivatorTask
MemberActivatorTask
run
try
for
Member
member
inactiveMembers
block
if
canConnect
member
block
remove
member
add
member
catchClause
ignored
canConnect
boolean
member
Member
if
isDebugEnabled
block
debug
getHostName
for
forControl
int
retries
retries
retries
block
try
InetAddress
addr
getByName
getHostName
int
httpPort
getHttpPort
if
isDebugEnabled
block
debug
httpPort
if
httpPort
block
SocketAddress
httpSockaddr
InetSocketAddress
addr
httpPort
connect
httpSockaddr
Socket
int
httpsPort
getHttpsPort
if
isDebugEnabled
block
debug
httpPort
if
httpsPort
block
SocketAddress
httpsSockaddr
InetSocketAddress
addr
httpsPort
connect
httpsSockaddr
Socket
return
catchClause
e
if
isDebugEnabled
block
debug
e
String
msg
getMessage
if
indexOf
indexOf
block
error
member
e
return
TimerTask
AbstractEndpoint
