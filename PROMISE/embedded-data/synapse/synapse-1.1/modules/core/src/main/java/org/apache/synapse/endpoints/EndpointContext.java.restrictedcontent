EndpointContext
Log
log
getLog
EndpointContext
String
KEY_PREFIX
String
STATE
String
NEXT_RETRY_TIME
String
REMAINING_RETRIES
String
LAST_SUSPEND_DURATION
int
ST_ACTIVE
int
ST_TIMEOUT
int
ST_SUSPENDED
int
ST_OFF
int
localState
ST_ACTIVE
long
localNextRetryTime
int
localRemainingRetries
long
localLastSuspendDuration
boolean
isClustered
String
endpointName
ANONYMOUS_ENDPOINT
ConfigurationContext
cfgCtx
EndpointDefinition
definition
EndpointView
metricsBean
String
STATE_KEY
String
NEXT_RETRY_TIME_KEY
String
REMAINING_RETRIES_KEY
String
LAST_SUSPEND_DURATION_KEY
EndpointContext
endpointName
String
endpointDefinition
EndpointDefinition
clustered
boolean
cfgCtx
ConfigurationContext
metricsBean
EndpointView
if
clustered
block
if
endpointName
block
if
endpointDefinition
isReplicationDisabled
block
handleException
isClustered
cfgCtx
cfgCtx
definition
endpointDefinition
if
endpointName
block
endpointName
endpointName
if
endpointDefinition
block
endpointName
toString
metricsBean
metricsBean
STATE_KEY
KEY_PREFIX
endpointName
STATE
NEXT_RETRY_TIME_KEY
KEY_PREFIX
endpointName
NEXT_RETRY_TIME
REMAINING_RETRIES_KEY
KEY_PREFIX
endpointName
REMAINING_RETRIES
LAST_SUSPEND_DURATION_KEY
KEY_PREFIX
endpointName
LAST_SUSPEND_DURATION
if
isClustered
endpointDefinition
isReplicationDisabled
block
setNonReplicableProperty
STATE_KEY
ST_ACTIVE
recordStatistics
state
int
if
metricsBean
block
return
switch
state
case
resetConsecutiveSuspensions
resetConsecutiveTimeouts
setSuspendedAt
setTimedoutAt
break
case
resetConsecutiveSuspensions
incrementTimeouts
if
localState
ST_TIMEOUT
block
setTimedoutAt
getInstance
getTime
setSuspendedAt
break
case
resetConsecutiveTimeouts
incrementSuspensions
if
localState
ST_SUSPENDED
block
setSuspendedAt
getInstance
getTime
setTimedoutAt
break
setState
state
int
recordStatistics
state
if
isClustered
block
setAndReplicateState
STATE_KEY
state
cfgCtx
if
definition
return
switch
state
case
block
setAndReplicateState
REMAINING_RETRIES_KEY
getRetriesOnTimeoutBeforeSuspend
cfgCtx
setAndReplicateState
LAST_SUSPEND_DURATION_KEY
cfgCtx
break
case
block
Integer
retries
Integer
getPropertyNonReplicable
REMAINING_RETRIES_KEY
if
retries
block
retries
getRetriesOnTimeoutBeforeSuspend
if
retries
block
info
endpointName
setState
ST_SUSPENDED
block
setAndReplicateState
REMAINING_RETRIES_KEY
retries
cfgCtx
long
nextRetry
currentTimeMillis
getRetryDurationOnTimeout
setAndReplicateState
NEXT_RETRY_TIME_KEY
nextRetry
cfgCtx
warn
endpointName
retries
Date
nextRetry
break
case
block
computeNextRetryTimeForSuspended
break
case
block
setAndReplicateState
REMAINING_RETRIES_KEY
getRetriesOnTimeoutBeforeSuspend
cfgCtx
setAndReplicateState
LAST_SUSPEND_DURATION_KEY
cfgCtx
break
block
localState
state
if
definition
return
switch
state
case
block
localRemainingRetries
getRetriesOnTimeoutBeforeSuspend
localLastSuspendDuration
break
case
block
int
retries
localRemainingRetries
if
retries
block
retries
getRetriesOnTimeoutBeforeSuspend
if
retries
block
info
endpointName
setState
ST_SUSPENDED
block
localRemainingRetries
retries
localNextRetryTime
currentTimeMillis
getRetryDurationOnTimeout
warn
endpointName
localRemainingRetries
Date
localNextRetryTime
break
case
block
computeNextRetryTimeForSuspended
break
case
block
localRemainingRetries
getRetriesOnTimeoutBeforeSuspend
localLastSuspendDuration
break
onSuccess
if
isClustered
block
Integer
state
Integer
getPropertyNonReplicable
STATE_KEY
if
state
state
ST_ACTIVE
state
ST_OFF
block
info
endpointName
getStateAsString
setState
ST_ACTIVE
block
if
localState
ST_ACTIVE
localState
ST_OFF
block
info
endpointName
getStateAsString
setState
ST_ACTIVE
onFault
warn
endpointName
setState
ST_SUSPENDED
onTimeout
if
isDebugEnabled
block
debug
endpointName
setState
ST_TIMEOUT
computeNextRetryTimeForSuspended
boolean
notYetSuspended
long
lastSuspendDuration
getInitialSuspendDuration
if
isClustered
block
Long
lastDuration
Long
getPropertyNonReplicable
LAST_SUSPEND_DURATION_KEY
if
lastDuration
block
lastSuspendDuration
lastDuration
notYetSuspended
if
localLastSuspendDuration
block
lastSuspendDuration
localLastSuspendDuration
notYetSuspended
long
nextSuspendDuration
notYetSuspended
getInitialSuspendDuration
long
lastSuspendDuration
getSuspendProgressionFactor
if
nextSuspendDuration
getSuspendMaximumDuration
block
nextSuspendDuration
getSuspendMaximumDuration
if
nextSuspendDuration
block
nextSuspendDuration
DEFAULT_ENDPOINT_SUSPEND_TIME
long
nextRetryTime
currentTimeMillis
nextSuspendDuration
if
isClustered
block
setAndReplicateState
LAST_SUSPEND_DURATION_KEY
nextSuspendDuration
cfgCtx
setAndReplicateState
NEXT_RETRY_TIME_KEY
nextRetryTime
cfgCtx
block
localLastSuspendDuration
nextSuspendDuration
localNextRetryTime
nextRetryTime
warn
endpointName
notYetSuspended
lastSuspendDuration
nextSuspendDuration
Date
nextRetryTime
readyToSend
boolean
if
isDebugEnabled
block
debug
endpointName
getStateAsString
if
isClustered
block
Integer
state
Integer
getPropertyNonReplicable
STATE_KEY
Integer
remainingRetries
Integer
getPropertyNonReplicable
REMAINING_RETRIES_KEY
Long
nextRetryTime
Long
getPropertyNonReplicable
NEXT_RETRY_TIME_KEY
if
state
block
return
block
if
state
ST_ACTIVE
block
return
if
state
ST_OFF
block
return
if
currentTimeMillis
nextRetryTime
block
if
state
ST_TIMEOUT
block
remainingRetries
setAndReplicateState
REMAINING_RETRIES_KEY
remainingRetries
cfgCtx
if
isDebugEnabled
block
debug
endpointName
remainingRetries
block
if
isDebugEnabled
block
debug
endpointName
return
block
if
localState
ST_ACTIVE
block
return
if
localState
ST_OFF
block
return
if
currentTimeMillis
localNextRetryTime
block
if
localState
ST_TIMEOUT
block
if
isDebugEnabled
block
debug
endpointName
localRemainingRetries
block
if
isDebugEnabled
block
debug
endpointName
return
if
isDebugEnabled
block
debug
endpointName
getStateAsString
Date
localNextRetryTime
return
switchOff
info
endpointName
setState
ST_OFF
switchOn
info
endpointName
setState
ST_ACTIVE
isState
boolean
s
int
if
isClustered
block
Integer
state
Integer
getPropertyNonReplicable
STATE_KEY
return
state
state
s
block
return
localState
s
getStateAsString
String
Integer
state
localState
if
isClustered
block
state
Integer
getPropertyNonReplicable
STATE_KEY
if
state
block
return
switch
state
case
return
case
return
case
return
case
return
case
return
handleException
msg
String
error
msg
throw
SynapseException
msg
toString
String
StringBuffer
sb
StringBuffer
append
append
endpointName
append
append
getStateAsString
append
return
toString
