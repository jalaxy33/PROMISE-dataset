MailTransportListener
String
DELETE
String
MOVE
List
PollTableEntry
pollTable
ArrayList
PollTableEntry
List
PollTableEntry
removeTable
ArrayList
PollTableEntry
init
cfgCtx
ConfigurationContext
trpInDesc
TransportInDescription
setTransportName
TRANSPORT_NAME
init
cfgCtx
trpInDesc
onPoll
if
isEmpty
block
removeAll
removeTable
for
PollTableEntry
entry
pollTable
block
long
startTime
currentTimeMillis
if
startTime
getNextPollTime
block
checkMail
entry
getEmailAddress
checkMail
entry
PollTableEntry
emailAddress
InternetAddress
if
isDebugEnabled
block
debug
emailAddress
boolean
connected
int
retryCount
int
maxRetryCount
getMaxRetryCount
long
reconnectionTimeout
getReconnectTimeout
Store
store
while
connected
block
try
retryCount
if
isDebugEnabled
block
debug
getEmailAddress
getProperties
Session
session
getInstance
getProperties
setDebug
isTraceEnabled
store
getStore
getProtocol
if
getUserName
getPassword
block
connect
getUserName
getPassword
block
handleException
connected
isConnected
catchClause
e
error
emailAddress
e
if
maxRetryCount
retryCount
block
processFailure
emailAddress
getMessage
e
entry
return
if
connected
block
try
warn
getEmailAddress
reconnectionTimeout
sleep
reconnectionTimeout
catchClause
ignore
if
connected
block
Folder
folder
try
if
getFolder
block
folder
getFolder
getFolder
block
folder
getFolder
DEFAULT_FOLDER
if
folder
block
folder
getDefaultFolder
if
folder
block
processFailure
entry
block
if
isDebugEnabled
block
debug
getName
emailAddress
open
READ_WRITE
int
total
getMessageCount
Message
messages
getMessages
if
isDebugEnabled
block
debug
length
folder
for
forControl
int
i
i
total
i
block
if
messages
i
isSet
SEEN
block
if
isDebugEnabled
block
debug
i
messages
i
getSubject
if
messages
i
isSet
DELETED
block
if
isDebugEnabled
block
debug
i
messages
i
getSubject
block
setLastPollState
NONE
try
processMail
messages
i
entry
setLastPollState
SUCCSESSFUL
incrementMessagesReceived
catchClause
e
setLastPollState
FAILED
incrementFaultsReceiving
moveOrDeleteAfterProcessing
entry
store
folder
messages
i
catchClause
me
processFailure
emailAddress
getMessage
me
entry
try
close
catchClause
e
processFailure
folder
emailAddress
e
entry
if
store
block
try
close
catchClause
e
warn
emailAddress
getMessage
e
processMail
message
Message
entry
PollTableEntry
if
message
MimeMessage
block
MimeMessage
mimeMessage
MimeMessage
message
if
getContent
Multipart
block
Multipart
mp
Multipart
getContent
for
forControl
int
i
i
getCount
i
block
MimeBodyPart
mbp
MimeBodyPart
getBodyPart
i
int
size
getSize
if
size
block
incrementBytesReceived
size
block
int
size
getSize
if
size
block
incrementBytesReceived
size
Map
trpHeaders
HashMap
try
Enumeration
e
getAllHeaders
while
hasMoreElements
block
Header
h
Header
nextElement
if
retainHeader
getName
block
put
getName
getValue
catchClause
ignore
String
contentType
getContentType
if
isValid
contentType
block
Object
content
getContent
if
content
Multipart
block
contentType
getContentType
if
content
String
block
contentType
getContentType
if
content
InputStream
block
contentType
APPLICATION_BINARY
if
contentType
block
processFailure
getMessageNumber
getSubject
entry
return
if
isDebugEnabled
block
debug
contentType
org
apache
axis2
context
MessageContext
msgContext
createMessageContext
AxisService
service
getAxisConfiguration
getService
getServiceName
setAxisService
service
Parameter
operationParam
getParameter
OPERATION_PARAM
QName
operationQName
operationParam
getQNameFromString
getValue
DEFAULT_OPERATION
AxisOperation
operation
getOperation
operationQName
if
operation
block
setAxisOperation
operation
setSoapAction
getName
getLocalPart
InternetAddress
fromAddress
InternetAddress
getReplyTo
if
fromAddress
block
fromAddress
InternetAddress
getFrom
MailOutTransportInfo
outInfo
MailOutTransportInfo
fromAddress
if
getReplyTo
block
setTargetAddresses
InternetAddress
getReplyTo
if
getFrom
block
setTargetAddresses
InternetAddress
getFrom
block
Parameter
param
getParameter
TRANSPORT_MAIL_REPLY_ADDRESS
if
param
getValue
block
setTargetAddresses
parse
String
getValue
if
getRecipients
CC
block
setCcAddresses
InternetAddress
getRecipients
CC
if
getSubject
block
setSubject
getSubject
if
getHeader
MAIL_HEADER_X_MESSAGE_ID
block
setRequestMessageID
getHeader
MAIL_HEADER_X_MESSAGE_ID
if
message
MimeMessage
MimeMessage
message
block
setRequestMessageID
MimeMessage
message
setProperty
OUT_TRANSPORT_INFO
outInfo
if
getFromAddress
block
setFrom
EndpointReference
TRANSPORT_PREFIX
getFromAddress
getAddress
setMessageID
getRequestMessageID
getInstace
setSOAPEnvelope
message
msgContext
contentType
String
soapAction
String
get
SOAPACTION
if
soapAction
getSubject
getSubject
startsWith
SOAPACTION
block
soapAction
getSubject
substring
length
if
startsWith
block
soapAction
substring
trim
handleIncomingMessage
msgContext
trpHeaders
soapAction
contentType
if
isDebugEnabled
block
debug
getMessageNumber
getSubject
moveOrDeleteAfterProcessing
entry
PollTableEntry
store
Store
folder
Folder
message
Message
String
moveToFolder
try
switch
getLastPollState
case
SUCCSESSFUL
if
getActionAfterProcess
MOVE
block
moveToFolder
getMoveAfterProcess
break
case
FAILED
if
getActionAfterProcess
MOVE
block
moveToFolder
getMoveAfterFailure
break
case
NONE
return
if
moveToFolder
block
if
isDebugEnabled
block
debug
moveToFolder
Folder
dFolder
getFolder
moveToFolder
if
exists
block
create
HOLDS_MESSAGES
copyMessages
Message
message
dFolder
if
isDebugEnabled
block
debug
getMessageNumber
setFlag
DELETED
catchClause
e
error
moveToFolder
e
processFailure
msg
String
e
Exception
entry
PollTableEntry
if
e
block
error
msg
block
error
msg
e
long
now
currentTimeMillis
setLastPollState
FAILED
setLastPollTime
now
setNextPollTime
now
getPollInterval
getEPRsForService
EndpointReference
serviceName
String
ip
String
for
PollTableEntry
entry
pollTable
block
if
getServiceName
equals
serviceName
startsWith
getServiceName
block
return
EndpointReference
EndpointReference
TRANSPORT_PREFIX
getEmailAddress
return
startListeningForService
service
AxisService
if
getName
startsWith
block
return
Parameter
param
getParameter
TRANSPORT_POLL_INTERVAL
long
pollInterval
DEFAULT_POLL_INTERVAL
if
param
getValue
String
block
try
pollInterval
parseInt
getValue
toString
catchClause
e
error
getValue
getName
DEFAULT_POLL_INTERVAL
e
PollTableEntry
entry
PollTableEntry
try
setEmailAddress
getRequiredServiceParam
service
TRANSPORT_MAIL_ADDRESS
List
Parameter
params
getParameters
for
Parameter
p
params
block
if
getName
startsWith
block
addProperty
getName
String
getValue
if
equals
getName
equals
getName
block
setUserName
String
getValue
if
equals
getName
equals
getName
block
setPassword
String
getValue
if
equals
getName
block
setProtocol
String
getValue
setContentType
getOptionalServiceParam
service
TRANSPORT_MAIL_CONTENT_TYPE
setReplyAddress
getOptionalServiceParam
service
TRANSPORT_MAIL_REPLY_ADDRESS
addPreserveHeaders
getOptionalServiceParam
service
TRANSPORT_MAIL_PRESERVE_HEADERS
addRemoveHeaders
getOptionalServiceParam
service
TRANSPORT_MAIL_REMOVE_HEADERS
String
option
getOptionalServiceParam
service
TRANSPORT_MAIL_ACTION_AFTER_PROCESS
setActionAfterProcess
equals
option
MOVE
DELETE
option
getOptionalServiceParam
service
TRANSPORT_MAIL_ACTION_AFTER_FAILURE
setActionAfterFailure
equals
option
MOVE
DELETE
String
moveFolderAfterProcess
getOptionalServiceParam
service
TRANSPORT_MAIL_MOVE_AFTER_PROCESS
setMoveAfterProcess
moveFolderAfterProcess
String
modeFolderAfterFailure
getOptionalServiceParam
service
TRANSPORT_MAIL_MOVE_AFTER_FAILURE
setMoveAfterFailure
modeFolderAfterFailure
String
strMaxRetryCount
getOptionalServiceParam
service
MAX_RETRY_COUNT
if
strMaxRetryCount
setMaxRetryCount
parseInt
strMaxRetryCount
String
strReconnectTimeout
getOptionalServiceParam
service
RECONNECT_TIMEOUT
if
strReconnectTimeout
setReconnectTimeout
parseInt
strReconnectTimeout
setServiceName
getName
schedulePoll
service
pollInterval
add
entry
catchClause
axisFault
String
msg
getName
getMessage
warn
msg
disableTransportForService
service
catchClause
e
String
msg
TRANSPORT_MAIL_ADDRESS
getName
getMessage
warn
msg
disableTransportForService
service
stopListeningForService
service
AxisService
for
PollTableEntry
entry
pollTable
block
if
getName
equals
getServiceName
block
cancelPoll
service
add
entry
AbstractPollingTransportListener
ManagementSupport
