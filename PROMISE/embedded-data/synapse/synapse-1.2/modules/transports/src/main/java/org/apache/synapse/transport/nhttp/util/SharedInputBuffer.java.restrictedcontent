SharedInputBuffer
IOControl
ioctrl
Object
mutex
boolean
shutdown
boolean
endOfStream
SharedInputBuffer
buffersize
int
ioctrl
IOControl
allocator
ByteBufferAllocator
buffersize
allocator
if
ioctrl
block
throw
IllegalArgumentException
ioctrl
ioctrl
mutex
Object
reset
if
shutdown
block
return
synchronized
mutex
clear
endOfStream
consumeContent
int
decoder
ContentDecoder
if
shutdown
block
return
synchronized
mutex
setInputMode
int
totalRead
int
bytesRead
while
bytesRead
read
buffer
block
totalRead
bytesRead
if
bytesRead
isCompleted
block
endOfStream
if
buffer
hasRemaining
block
ioctrl
suspendInput
mutex
notifyAll
if
totalRead
block
return
totalRead
block
if
endOfStream
block
return
block
return
waitForData
synchronized
mutex
try
while
hasData
endOfStream
block
if
shutdown
block
throw
InterruptedIOException
ioctrl
requestInput
mutex
wait
catchClause
ex
throw
IOException
shutdown
if
shutdown
block
return
shutdown
synchronized
mutex
mutex
notifyAll
isShutdown
boolean
return
shutdown
isEndOfStream
boolean
return
shutdown
hasData
endOfStream
read
int
if
shutdown
block
return
synchronized
mutex
if
hasData
block
waitForData
if
isEndOfStream
block
return
return
buffer
get
read
int
b
byte
off
int
len
int
if
shutdown
block
return
if
b
block
return
synchronized
mutex
if
hasData
block
waitForData
if
isEndOfStream
block
return
setOutputMode
int
chunk
len
if
chunk
buffer
remaining
block
chunk
buffer
remaining
buffer
get
b
off
chunk
return
chunk
read
int
b
byte
if
shutdown
block
return
if
b
block
return
return
read
b
length
ExpandableBuffer
ContentInputBuffer
