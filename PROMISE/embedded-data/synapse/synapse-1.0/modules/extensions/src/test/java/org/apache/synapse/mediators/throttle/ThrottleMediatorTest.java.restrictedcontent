ThrottleMediatorTest
String
REMOTE_ADDR
String
POLICY
ThrottleMediatorTest
getName
ThrottleMediatorTest
createLightweightSynapseMessageContext
MessageContext
payload
String
org
apache
axis2
context
MessageContext
mc
org
apache
axis2
context
MessageContext
SynapseConfiguration
config
SynapseConfiguration
SynapseEnvironment
env
Axis2SynapseEnvironment
MessageContext
synMc
Axis2MessageContext
mc
config
env
SOAPEnvelope
envelope
getSOAP11Factory
getDefaultEnvelope
OMDocument
omDoc
getSOAP11Factory
createOMDocument
addChild
envelope
getBody
addChild
createOMElement
payload
setEnvelope
envelope
return
synMc
createOMElement
OMElement
xml
String
try
XMLStreamReader
reader
newInstance
createXMLStreamReader
StringReader
xml
StAXOMBuilder
builder
StAXOMBuilder
reader
OMElement
omElement
getDocumentElement
return
omElement
catchClause
e
throw
RuntimeException
e
testMediate
ByteArrayInputStream
in
ByteArrayInputStream
getBytes
StAXOMBuilder
builde
StAXOMBuilder
in
ThrottleTestMediator
throttleMediator
ThrottleTestMediator
setPolicyKey
MessageContext
synCtx
createLightweightSynapseMessageContext
setProperty
REMOTE_ADDR
SynapseConfiguration
synCfg
SynapseConfiguration
Entry
prop
Entry
setKey
setType
INLINE_XML
setValue
getDocumentElement
addEntry
prop
setConfiguration
synCfg
for
forControl
int
i
i
i
block
try
mediate
synCtx
sleep
catchClause
e
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
testMediateWithInLineXML
ByteArrayInputStream
in
ByteArrayInputStream
getBytes
StAXOMBuilder
build
StAXOMBuilder
in
ThrottleTestMediator
throttleMediator
ThrottleTestMediator
setInLinePolicy
getDocumentElement
MessageContext
synCtx
createLightweightSynapseMessageContext
setProperty
REMOTE_ADDR
SynapseConfiguration
synCfg
SynapseConfiguration
setConfiguration
synCfg
for
forControl
int
i
i
i
block
try
mediate
synCtx
sleep
catchClause
e
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
if
i
block
assertTrue
getMessage
lastIndexOf
ThrottleTestMediator
String
policyKey
Throttle
throttle
OMElement
inLinePolicy
mediate
boolean
synCtx
MessageContext
init
synCtx
try
return
canAcess
synCtx
catchClause
e
throw
SynapseException
getMessage
canAcess
boolean
synContext
MessageContext
if
throttle
block
throw
ThrottleException
Object
remoteIP
getProperty
REMOTE_ADDR
if
remoteIP
block
throw
ThrottleException
block
ThrottleContext
throttleContext
getThrottleContext
IP_BASED_THROTTLE_KEY
if
throttleContext
block
throw
ThrottleException
AccessController
accessControler
try
accessControler
createAccessControler
IP_BASE
boolean
canAccess
canAccess
throttleContext
remoteIP
if
canAccess
block
throw
SynapseException
remoteIP
return
canAccess
catchClause
e
return
init
synContext
MessageContext
boolean
reCreate
OMElement
policyOmElement
if
policyKey
block
Entry
entry
getConfiguration
getEntryDefinition
policyKey
if
entry
block
return
Object
entryValue
getValue
if
entryValue
OMElement
block
return
if
isCached
isExpired
block
reCreate
policyOmElement
OMElement
entryValue
if
inLinePolicy
block
policyOmElement
inLinePolicy
if
policyOmElement
block
return
if
reCreate
block
if
throttle
block
createThrottleMetaData
policyOmElement
block
createThrottleMetaData
policyOmElement
createThrottleMetaData
policyOmElement
OMElement
try
throttle
processPoclicy
getPolicy
policyOmElement
catchClause
e
throw
SynapseException
getMessage
getType
String
return
getPolicyKey
String
return
policyKey
setPolicyKey
policyKey
String
policyKey
policyKey
getInLinePolicy
OMElement
return
inLinePolicy
setInLinePolicy
inLinePolicy
OMElement
inLinePolicy
inLinePolicy
AbstractMediator
TestCase
