SSTSerializer
List
recordLengths
BinaryTree
strings
int
numStrings
int
numUniqueStrings
SSTRecordHeader
sstRecordHeader
int
bucketAbsoluteOffsets
int
bucketRelativeOffsets
int
startOfSST
startOfRecord
SSTSerializer
recordLengths
List
strings
BinaryTree
numStrings
int
numUniqueStrings
int
recordLengths
recordLengths
strings
strings
numStrings
numStrings
numUniqueStrings
numUniqueStrings
sstRecordHeader
SSTRecordHeader
numStrings
numUniqueStrings
int
infoRecs
getNumberOfInfoRecsForStrings
size
bucketAbsoluteOffsets
int
infoRecs
bucketRelativeOffsets
int
infoRecs
serialize
int
record_size
int
offset
int
data
byte
int
record_length_index
if
calculateUnicodeSize
MAX_DATA_SPACE
serializeLargeRecord
record_size
record_length_index
data
offset
serializeSingleSSTRecord
data
offset
record_length_index
return
record_size
calculateUnicodeSize
int
strings
Map
int
retval
for
forControl
int
k
k
size
k
block
retval
getUnicodeString
getRecordSize
strings
k
return
retval
calculateUnicodeSize
int
return
calculateUnicodeSize
strings
serializeSingleSSTRecord
data
byte
offset
int
record_length_index
int
int
len
Integer
get
record_length_index
int
recordSize
SST_RECORD_OVERHEAD
len
STD_RECORD_OVERHEAD
writeSSTHeader
data
offset
recordSize
int
pos
SST_RECORD_OVERHEAD
for
forControl
int
k
k
size
k
block
if
k
DEFAULT_BUCKET_SIZE
block
int
index
k
DEFAULT_BUCKET_SIZE
if
index
MAX_BUCKETS
block
bucketAbsoluteOffsets
index
pos
bucketRelativeOffsets
index
pos
arraycopy
getUnicodeString
serialize
k
data
pos
offset
getUnicodeString
getRecordSize
k
pos
getUnicodeString
getRecordSize
k
serializeLargeRecord
record_size
int
record_length_index
int
buffer
byte
offset
int
startOfSST
offset
byte
stringReminant
int
stringIndex
boolean
lastneedcontinue
boolean
first_record
int
totalWritten
while
totalWritten
record_size
block
int
recordLength
Integer
get
record_length_index
RecordProcessor
recordProcessor
RecordProcessor
buffer
recordLength
numStrings
numUniqueStrings
startOfRecord
offset
totalWritten
writeRecordHeader
offset
totalWritten
recordLength
first_record
first_record
if
lastneedcontinue
block
lastneedcontinue
length
getAvailable
stringReminant
writeStringRemainder
lastneedcontinue
stringReminant
offset
totalWritten
for
forControl
stringIndex
size
stringIndex
block
UnicodeString
unistr
getUnicodeString
stringIndex
if
stringIndex
DEFAULT_BUCKET_SIZE
block
int
index
stringIndex
DEFAULT_BUCKET_SIZE
if
index
MAX_BUCKETS
block
bucketAbsoluteOffsets
index
offset
totalWritten
getRecordOffset
startOfSST
bucketRelativeOffsets
index
offset
totalWritten
getRecordOffset
startOfRecord
if
getRecordSize
getAvailable
block
writeWholeString
unistr
offset
totalWritten
block
if
getAvailable
STRING_MINIMAL_OVERHEAD
block
stringReminant
writePartString
unistr
offset
totalWritten
lastneedcontinue
stringIndex
break
totalWritten
recordLength
STD_RECORD_OVERHEAD
getUnicodeString
UnicodeString
index
int
return
getUnicodeString
strings
index
getUnicodeString
UnicodeString
strings
Map
index
int
Integer
intunipos
Integer
index
return
UnicodeString
get
intunipos
getRecordSize
int
SSTRecordSizeCalculator
calculator
SSTRecordSizeCalculator
strings
int
recordSize
getRecordSize
recordLengths
getRecordLengths
return
recordSize
getRecordLengths
List
return
recordLengths
getBucketAbsoluteOffsets
int
return
bucketAbsoluteOffsets
getBucketRelativeOffsets
int
return
bucketRelativeOffsets
