BlockAllocationTableWriter
IntList
_entries
BATBlock
_blocks
int
_start_block
BlockAllocationTableWriter
_start_block
END_OF_CHAIN
_entries
IntList
_blocks
BATBlock
createBlocks
int
int
xbat_blocks
int
bat_blocks
while
block
int
calculated_bat_blocks
calculateStorageRequirements
bat_blocks
xbat_blocks
size
int
calculated_xbat_blocks
calculateXBATStorageRequirements
calculated_bat_blocks
if
bat_blocks
calculated_bat_blocks
xbat_blocks
calculated_xbat_blocks
block
break
block
bat_blocks
calculated_bat_blocks
xbat_blocks
calculated_xbat_blocks
int
startBlock
allocateSpace
bat_blocks
allocateSpace
xbat_blocks
simpleCreateBlocks
return
startBlock
allocateSpace
int
blockCount
int
int
startBlock
size
if
blockCount
block
int
limit
blockCount
int
index
startBlock
for
forControl
int
k
k
limit
k
block
add
index
add
END_OF_CHAIN
return
startBlock
getStartBlock
int
return
_start_block
simpleCreateBlocks
_blocks
createBATBlocks
toArray
writeBlocks
stream
OutputStream
for
forControl
int
j
j
length
j
block
_blocks
j
writeBlocks
stream
countBlocks
int
return
length
setStartBlock
start_block
int
_start_block
start_block
BlockWritable
BATManaged
