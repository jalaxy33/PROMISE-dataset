Picture
POILogger
log
getLogger
Picture
int
MFPMM_OFFSET
int
BLOCK_TYPE_OFFSET
int
PICT_HEADER_OFFSET
int
UNKNOWN_HEADER_SIZE
byte
GIF
byte
byte
PNG
byte
byte
byte
JPG
byte
byte
byte
byte
BMP
byte
byte
TIFF
byte
byte
TIFF1
byte
byte
EMF
byte
WMF1
byte
byte
byte
byte
byte
WMF2
byte
IHDR
byte
byte
COMPRESSED1
byte
byte
byte
COMPRESSED2
byte
byte
int
dataBlockStartOfsset
int
pictureBytesStartOffset
int
dataBlockSize
int
size
byte
rawContent
byte
content
byte
_dataStream
int
aspectRatioX
int
aspectRatioY
int
height
int
width
Picture
dataBlockStartOfsset
int
_dataStream
byte
fillBytes
boolean
_dataStream
_dataStream
dataBlockStartOfsset
dataBlockStartOfsset
dataBlockSize
getInt
_dataStream
dataBlockStartOfsset
pictureBytesStartOffset
getPictureBytesStartOffset
dataBlockStartOfsset
_dataStream
dataBlockSize
size
dataBlockSize
pictureBytesStartOffset
dataBlockStartOfsset
if
size
block
aspectRatioX
extractAspectRatioX
_dataStream
dataBlockStartOfsset
aspectRatioY
extractAspectRatioY
_dataStream
dataBlockStartOfsset
if
fillBytes
block
fillImageContent
fillWidthHeight
String
ext
suggestFileExtension
if
equalsIgnoreCase
ext
block
fillJPGWidthHeight
if
equalsIgnoreCase
ext
block
fillPNGWidthHeight
extractAspectRatioX
int
_dataStream
byte
dataBlockStartOffset
int
return
getShort
_dataStream
dataBlockStartOffset
extractAspectRatioY
int
_dataStream
byte
dataBlockStartOffset
int
return
getShort
_dataStream
dataBlockStartOffset
suggestFullFileName
String
String
fileExt
suggestFileExtension
return
toHexString
dataBlockStartOfsset
length
fileExt
writeImageContent
out
OutputStream
if
rawContent
length
block
write
rawContent
size
block
write
_dataStream
pictureBytesStartOffset
size
getContent
byte
if
content
length
block
fillImageContent
return
content
getRawContent
byte
if
rawContent
length
block
fillRawImageContent
return
rawContent
getSize
int
return
size
getAspectRatioX
int
return
aspectRatioX
getAspectRatioY
int
return
aspectRatioY
suggestFileExtension
String
String
extension
suggestFileExtension
_dataStream
pictureBytesStartOffset
if
equals
extension
block
extension
suggestFileExtension
getContent
return
extension
suggestFileExtension
String
_dataStream
byte
pictureBytesStartOffset
int
if
matchSignature
_dataStream
JPG
pictureBytesStartOffset
block
return
if
matchSignature
_dataStream
PNG
pictureBytesStartOffset
block
return
if
matchSignature
_dataStream
GIF
pictureBytesStartOffset
block
return
if
matchSignature
_dataStream
BMP
pictureBytesStartOffset
block
return
if
matchSignature
_dataStream
TIFF
pictureBytesStartOffset
matchSignature
_dataStream
TIFF1
pictureBytesStartOffset
block
return
block
fillImageContent
if
matchSignature
content
WMF1
matchSignature
content
WMF2
block
return
if
matchSignature
content
EMF
block
return
return
matchSignature
boolean
dataStream
byte
signature
byte
pictureBytesOffset
int
boolean
matched
pictureBytesOffset
length
for
forControl
int
i
i
pictureBytesOffset
length
i
length
i
block
if
dataStream
i
pictureBytesOffset
signature
i
block
matched
break
return
matched
fillRawImageContent
rawContent
byte
size
arraycopy
_dataStream
pictureBytesStartOffset
rawContent
size
fillImageContent
byte
rawContent
getRawContent
if
matchSignature
rawContent
COMPRESSED1
matchSignature
rawContent
COMPRESSED2
block
try
InflaterInputStream
in
InflaterInputStream
ByteArrayInputStream
rawContent
length
ByteArrayOutputStream
out
ByteArrayOutputStream
byte
buf
byte
int
readBytes
while
readBytes
read
buf
block
write
buf
readBytes
content
toByteArray
catchClause
e
log
INFO
e
block
content
rawContent
getPictureBytesStartOffset
int
dataBlockStartOffset
int
_dataStream
byte
dataBlockSize
int
int
dataBlockEndOffset
dataBlockSize
dataBlockStartOffset
int
realPicoffset
dataBlockStartOffset
int
PICTFBlockSize
getShort
_dataStream
dataBlockStartOffset
PICT_HEADER_OFFSET
int
PICTF1BlockOffset
PICTFBlockSize
PICT_HEADER_OFFSET
int
PICTF1BlockSize
getShort
_dataStream
dataBlockStartOffset
PICTF1BlockOffset
int
unknownHeaderOffset
PICTF1BlockSize
PICTF1BlockOffset
dataBlockEndOffset
PICTF1BlockSize
PICTF1BlockOffset
PICTF1BlockOffset
realPicoffset
unknownHeaderOffset
UNKNOWN_HEADER_SIZE
if
realPicoffset
dataBlockEndOffset
block
realPicoffset
UNKNOWN_HEADER_SIZE
return
realPicoffset
fillJPGWidthHeight
int
pointer
pictureBytesStartOffset
int
firstByte
_dataStream
pointer
int
secondByte
_dataStream
pointer
int
endOfPicture
pictureBytesStartOffset
size
while
pointer
endOfPicture
block
do
firstByte
byte
pointer
endOfPicture
block
firstByte
_dataStream
pointer
secondByte
_dataStream
pointer
if
firstByte
byte
pointer
endOfPicture
block
if
secondByte
byte
secondByte
byte
block
break
if
secondByte
secondByte
byte
secondByte
byte
secondByte
byte
block
pointer
height
getBigEndianShort
_dataStream
pointer
width
getBigEndianShort
_dataStream
pointer
break
block
pointer
pointer
int
length
getBigEndianShort
_dataStream
pointer
pointer
length
block
pointer
fillPNGWidthHeight
int
HEADER_START
pictureBytesStartOffset
length
if
matchSignature
_dataStream
IHDR
HEADER_START
block
int
IHDR_CHUNK_WIDTH
HEADER_START
width
getBigEndianInt
_dataStream
IHDR_CHUNK_WIDTH
height
getBigEndianInt
_dataStream
IHDR_CHUNK_WIDTH
getWidth
int
if
width
block
fillWidthHeight
return
width
getHeight
int
if
height
block
fillWidthHeight
return
height
getBigEndianInt
int
data
byte
offset
int
return
data
offset
data
offset
data
offset
data
offset
getBigEndianShort
int
data
byte
offset
int
return
data
offset
data
offset
