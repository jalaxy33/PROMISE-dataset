StandardBenchmarker
String
SOURCE_DIR
String
INDEX_DIR
DateFormat
format
SimpleDateFormat
US
setLenient
StandardBenchmarker
benchmark
TestData
workingDir
File
opts
BenchmarkOptions
StandardOptions
options
StandardOptions
opts
mkdirs
File
sourceDir
getSourceDirectory
workingDir
mkdirs
File
indexDir
File
workingDir
INDEX_DIR
mkdirs
Analyzer
a
StandardAnalyzer
List
queryList
ArrayList
addAll
asList
STANDARD_QUERIES
addAll
asList
getPrebuiltQueries
Query
qs
createQueries
queryList
a
QueryData
qds
getAll
qs
TestData
params
getTestDataMinMaxMergeAndMaxBuffered
File
sourceDir
Analyzer
a
println
length
for
forControl
int
i
i
length
i
block
try
reset
indexDir
params
i
setDirectory
getDirectory
indexDir
params
i
setQueries
qds
println
params
i
runBenchmark
params
i
options
println
params
i
showRunData
params
i
getId
params
i
getDirectory
close
runFinalization
gc
catchClause
e
printStackTrace
println
getMessage
return
params
getSourceDirectory
File
workingDir
File
return
File
workingDir
SOURCE_DIR
runBenchmark
params
TestData
options
StandardOptions
println
Date
int
runCount
getRunCount
for
forControl
int
i
i
runCount
i
block
TestRunData
trd
TestRunData
startRun
setId
valueOf
i
IndexWriter
iw
IndexWriter
getDirectory
getAnalyzer
setMergeFactor
getMergeFactor
setMaxBufferedDocs
getMaxBufferedDocs
setUseCompoundFile
isCompound
makeIndex
trd
getSource
iw
options
if
isOptimize
block
TimeData
td
TimeData
addData
td
start
optimize
stop
addData
td
close
QueryData
queries
getQueries
if
queries
block
IndexReader
ir
IndexSearcher
searcher
for
forControl
int
k
k
length
k
block
QueryData
qd
queries
k
if
ir
reopen
block
close
close
ir
searcher
if
ir
block
ir
open
getDirectory
searcher
IndexSearcher
ir
Document
doc
if
warmup
block
TimeData
td
TimeData
id
for
forControl
int
m
m
maxDoc
m
block
start
if
isDeleted
m
block
stop
continue
doc
document
m
stop
addData
td
TimeData
td
TimeData
id
start
Hits
h
search
q
stop
addData
td
td
TimeData
id
if
h
length
block
for
forControl
int
m
m
length
m
block
start
int
id
id
m
if
retrieve
block
doc
document
id
stop
addData
td
try
if
searcher
block
close
catchClause
e
try
if
ir
block
close
catchClause
e
endRun
getRunData
add
trd
println
Date
makeDocument
Document
in
File
tags
String
stored
boolean
tokenized
boolean
tfv
boolean
Document
doc
Document
if
tags
block
for
forControl
int
i
i
length
i
block
add
Field
i
tags
i
stored
YES
NO
tokenized
TOKENIZED
UN_TOKENIZED
tfv
YES
NO
add
Field
getCanonicalPath
stored
YES
NO
tokenized
TOKENIZED
UN_TOKENIZED
tfv
YES
NO
BufferedReader
reader
BufferedReader
FileReader
in
String
line
String
dateStr
readLine
readLine
String
title
readLine
readLine
StringBuffer
body
StringBuffer
while
line
readLine
block
append
append
line
close
Date
date
parse
trim
add
Field
dateToString
date
SECOND
YES
UN_TOKENIZED
if
title
block
add
Field
title
stored
YES
NO
tokenized
TOKENIZED
UN_TOKENIZED
tfv
YES
NO
if
length
block
add
Field
toString
stored
YES
NO
tokenized
TOKENIZED
UN_TOKENIZED
tfv
YES
NO
return
doc
makeIndex
trd
TestRunData
srcDir
File
iw
IndexWriter
stored
boolean
tokenized
boolean
tfv
boolean
options
StandardOptions
List
files
ArrayList
getAllFiles
srcDir
files
Document
doc
long
cnt
TimeData
td
TimeData
name
int
scaleUp
getScaleUp
int
logStep
getLogStep
int
max
min
size
getMaximumDocumentsToIndex
for
forControl
int
s
s
scaleUp
s
block
String
tags
String
getName
s
int
i
for
forControl
Iterator
iterator
iterator
hasNext
i
max
i
block
File
file
File
next
doc
makeDocument
file
tags
stored
tokenized
tfv
start
addDocument
doc
stop
cnt
if
cnt
logStep
block
println
cnt
getId
addData
td
reset
addData
td
getAllFiles
srcDir
File
filter
FileFilter
allFiles
List
File
files
listFiles
filter
for
forControl
int
i
i
length
i
block
File
file
files
i
if
isDirectory
block
getAllFiles
file
filter
allFiles
block
add
file
createQueries
Query
qs
List
a
Analyzer
QueryParser
qp
QueryParser
a
List
queries
ArrayList
for
forControl
int
i
i
size
i
block
try
Object
query
get
i
Query
q
if
query
String
block
q
parse
String
query
if
query
Query
block
q
Query
query
block
println
query
if
q
block
add
q
catchClause
e
printStackTrace
return
Query
toArray
Query
reset
indexDir
File
if
exists
block
fullyDelete
indexDir
mkdirs
saveStream
is
InputStream
out
File
closeInput
boolean
byte
buf
byte
FileOutputStream
fos
FileOutputStream
out
int
len
long
total
long
time
currentTimeMillis
long
delta
time
while
len
read
buf
block
write
buf
len
total
len
time
currentTimeMillis
if
time
delta
block
println
total
delta
time
flush
close
if
closeInput
block
close
AbstractBenchmarker
Benchmarker
