StorageQuery
Log
LOG
getLog
StorageQuery
StorageBuffer
buffer
Searcher
searcher
Sort
timeStampSort
Sort
SortField
FIELD_TIMESTAMP
STRING
StorageQuery
buffer
StorageBuffer
searcher
Searcher
buffer
buffer
searcher
searcher
storageQuery
Hits
entryId
List
String
BooleanQuery
query
BooleanQuery
for
String
id
entryId
block
TermQuery
termQuery
TermQuery
Term
FIELD_ENTRY_ID
id
add
BooleanClause
termQuery
SHOULD
return
searcher
search
query
ModifiedEntryFilter
buffer
getExculdList
FIELD_ENTRY_ID
storageFeedQuery
Hits
feedId
String
sort
Sort
TermQuery
query
TermQuery
Term
FIELD_FEED_REFERENCE
feedId
return
searcher
search
query
ModifiedEntryFilter
buffer
getExculdList
FIELD_ENTRY_ID
sort
storageQuery
Hits
entryId
String
TermQuery
termQuery
TermQuery
Term
FIELD_ENTRY_ID
entryId
return
searcher
search
termQuery
ModifiedEntryFilter
buffer
getExculdList
FIELD_ENTRY_ID
getLatestFeedQuery
BaseFeed
feedId
String
resultCount
int
startIndex
int
config
ProvidedService
DateTime
updated
Hits
feedHits
storageFeedQuery
feedId
if
length
return
BaseFeed
retVal
buildFeedFromLuceneDocument
doc
config
List
BaseEntry
returnList
ArrayList
BaseEntry
resultCount
List
StorageEntryWrapper
bufferedWrapperList
buffer
getSortedEntries
feedId
int
alreadyAdded
int
offset
startIndex
if
bufferedWrapperList
size
startIndex
block
updated
get
getEntry
getUpdated
for
forControl
alreadyAdded
resultCount
alreadyAdded
block
if
size
offset
block
StorageEntryWrapper
wrappedEntry
get
offset
add
getEntry
break
offset
startIndex
if
alreadyAdded
resultCount
block
getEntries
addAll
returnList
setUpdated
updated
return
retVal
block
if
bufferedWrapperList
offset
startIndex
size
Hits
hits
storageFeedQuery
feedId
timeStampSort
if
length
block
for
forControl
offset
length
alreadyAdded
resultCount
offset
alreadyAdded
block
Document
doc
doc
offset
BaseEntry
entry
buildEntryFromLuceneDocument
doc
config
add
entry
if
updated
block
try
long
updatedTimeStamp
parseLong
doc
get
FIELD_TIMESTAMP
updated
DateTime
updatedTimeStamp
catchClause
e
warn
getMessage
e
updated
buildEntryFromLuceneDocument
getUpdated
doc
config
setUpdated
updated
getEntries
addAll
returnList
return
retVal
singleEntryQuery
BaseEntry
entryId
String
feedId
String
config
ProvidedService
StorageEntryWrapper
wrapper
buffer
getEntry
entryId
feedId
if
wrapper
block
Hits
hits
storageQuery
entryId
if
length
return
Document
doc
doc
return
buildEntryFromLuceneDocument
doc
config
return
getEntry
entryQuery
List
BaseEntry
entryIds
List
String
feedId
String
config
ProvidedService
List
BaseEntry
resultList
ArrayList
BaseEntry
size
List
String
searchList
ArrayList
String
size
for
String
entry
entryIds
block
StorageEntryWrapper
bufferedEntry
buffer
getEntry
entry
feedId
if
bufferedEntry
block
add
getEntry
add
entry
if
isEmpty
return
resultList
Hits
hits
storageQuery
searchList
Iterator
hitIterator
iterator
while
hasNext
block
Hit
hit
Hit
next
Document
doc
getDocument
BaseEntry
entry
buildEntryFromLuceneDocument
doc
config
add
entry
return
resultList
buildEntryFromLuceneDocument
BaseEntry
doc
Document
config
ProvidedService
Reader
reader
StringReader
getField
stringValue
FIELD_CONTENT
BaseEntry
entry
buildEntry
reader
config
setVersionId
getField
stringValue
FIELD_VERSION
return
entry
buildFeedFromLuceneDocument
BaseFeed
doc
Document
config
ProvidedService
Reader
reader
StringReader
getField
stringValue
FIELD_CONTENT
return
buildFeed
reader
config
getUser
GDataAccount
username
String
if
username
return
TermQuery
query
TermQuery
Term
FIELD_ACCOUNTNAME
username
Hits
h
searcher
search
query
if
length
return
return
buildEntity
doc
close
searcher
close
buffer
close
isFeedStored
boolean
feedId
String
Hits
h
storageFeedQuery
feedId
return
length
getService
String
feedID
String
Hits
hits
storageFeedQuery
feedID
if
length
return
Document
doc
doc
String
feedType
get
FIELD_SERVICE_ID
return
feedType
storageFeedQuery
Hits
feedId
String
TermQuery
query
TermQuery
Term
FIELD_FEED_ID
feedId
return
searcher
search
query
getAccountNameForFeedId
String
feedId
String
Hits
h
storageFeedQuery
feedId
if
length
return
Document
doc
doc
return
get
FIELD_ACCOUNTREFERENCE
getEntryLastModified
long
entryId
String
feedId
String
StorageEntryWrapper
wrapper
buffer
getEntry
entryId
feedId
if
wrapper
return
getTimestamp
Hits
h
storageQuery
entryId
if
length
try
return
parseLong
doc
get
FIELD_TIMESTAMP
catchClause
e
warn
doc
get
FIELD_TIMESTAMP
throw
StorageException
return
getFeedLastModified
long
feedId
String
Long
bufferedTime
buffer
getFeedLastModified
feedId
if
bufferedTime
return
bufferedTime
Hits
entryHits
storageFeedQuery
feedId
timeStampSort
if
length
block
try
return
parseLong
doc
getField
FIELD_TIMESTAMP
stringValue
catchClause
e
warn
doc
get
FIELD_TIMESTAMP
return
isEntryStored
boolean
entryId
String
feedId
String
if
isDebugEnabled
debug
entryId
feedId
if
buffer
getEntry
entryId
feedId
return
Hits
h
storageQuery
entryId
if
length
return
return
checkEntryVersion
boolean
id
String
feedId
String
version
int
if
isDebugEnabled
debug
id
feedId
version
StorageEntryWrapper
wrapper
buffer
getEntry
id
feedId
if
wrapper
return
getVersion
version
Hits
h
storageQuery
id
if
length
return
Document
doc
doc
String
fieldValue
try
fieldValue
getField
stringValue
FIELD_VERSION
int
storedVersion
parseInt
fieldValue
if
isDebugEnabled
debug
storedVersion
return
storedVersion
version
catchClause
e
error
fieldValue
return
