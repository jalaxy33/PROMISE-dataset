RAMInputStream
int
BUFFER_SIZE
BUFFER_SIZE
RAMFile
file
long
length
byte
currentBuffer
int
currentBufferIndex
int
bufferPosition
long
bufferStart
int
bufferLength
RAMInputStream
f
RAMFile
file
f
length
length
currentBufferIndex
currentBuffer
close
length
long
return
length
readByte
byte
if
bufferPosition
bufferLength
block
currentBufferIndex
switchCurrentBuffer
return
currentBuffer
bufferPosition
readBytes
b
byte
offset
int
len
int
while
len
block
if
bufferPosition
bufferLength
block
currentBufferIndex
switchCurrentBuffer
int
remainInBuffer
bufferLength
bufferPosition
int
bytesToCopy
len
remainInBuffer
len
remainInBuffer
arraycopy
currentBuffer
bufferPosition
b
offset
bytesToCopy
offset
bytesToCopy
len
bytesToCopy
bufferPosition
bytesToCopy
switchCurrentBuffer
if
currentBufferIndex
size
block
throw
IOException
block
currentBuffer
byte
get
currentBufferIndex
bufferPosition
bufferStart
BUFFER_SIZE
currentBufferIndex
bufferLength
int
length
bufferStart
if
bufferLength
BUFFER_SIZE
block
bufferLength
BUFFER_SIZE
getFilePointer
long
return
currentBufferIndex
bufferStart
bufferPosition
seek
pos
long
long
bufferStart
currentBufferIndex
BUFFER_SIZE
if
pos
bufferStart
pos
bufferStart
BUFFER_SIZE
block
currentBufferIndex
int
pos
BUFFER_SIZE
switchCurrentBuffer
bufferPosition
int
pos
BUFFER_SIZE
IndexInput
Cloneable
