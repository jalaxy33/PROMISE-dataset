ThreadSafetyTest
Analyzer
ANALYZER
SimpleAnalyzer
Random
RANDOM
Random
Searcher
SEARCHER
int
ITERATIONS
random
int
i
int
int
r
nextInt
if
r
r
r
return
r
i
IndexerThread
int
reopenInterval
random
IndexWriter
writer
IndexerThread
writer
IndexWriter
writer
writer
run
try
boolean
useCompoundFiles
for
forControl
int
i
i
ITERATIONS
i
block
Document
d
Document
int
n
nextInt
add
Field
toString
n
YES
UN_TOKENIZED
add
Field
intToEnglish
n
NO
TOKENIZED
println
n
useCompoundFiles
random
setUseCompoundFile
useCompoundFiles
addDocument
d
if
i
reopenInterval
block
close
writer
IndexWriter
ANALYZER
close
catchClause
e
println
toString
printStackTrace
exit
Thread
SearcherThread
IndexSearcher
searcher
int
reopenInterval
random
SearcherThread
useGlobal
boolean
if
useGlobal
searcher
IndexSearcher
run
try
for
forControl
int
i
i
ITERATIONS
i
block
searchFor
nextInt
searcher
SEARCHER
searcher
if
i
reopenInterval
block
if
searcher
block
SEARCHER
IndexSearcher
block
close
searcher
IndexSearcher
catchClause
e
println
toString
printStackTrace
exit
searchFor
n
int
searcher
Searcher
println
n
QueryParser
parser
QueryParser
ANALYZER
Hits
hits
search
parse
intToEnglish
n
println
n
length
for
forControl
int
j
j
min
length
j
block
println
n
doc
get
j
Thread
main
args
String
boolean
readOnly
boolean
add
for
forControl
int
i
i
length
i
block
if
equals
args
i
readOnly
if
equals
args
i
add
File
indexDir
File
if
exists
mkdirs
unlock
getDirectory
indexDir
if
readOnly
block
IndexWriter
writer
IndexWriter
indexDir
ANALYZER
add
Thread
indexerThread
IndexerThread
writer
start
sleep
SearcherThread
searcherThread1
SearcherThread
start
SEARCHER
IndexSearcher
toString
SearcherThread
searcherThread2
SearcherThread
start
SearcherThread
searcherThread3
SearcherThread
start
