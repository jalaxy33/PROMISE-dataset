TestLockFactory
testCustomLockFactory
Directory
dir
RAMDirectory
MockLockFactory
lf
MockLockFactory
setLockFactory
lf
assertTrue
lockPrefixSet
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
for
forControl
int
i
i
i
block
addDoc
writer
assertEquals
size
assertTrue
makeLockCount
for
forControl
Enumeration
e
keys
hasMoreElements
block
String
lockName
String
nextElement
MockLockFactory
MockLock
lock
MockLockFactory
MockLock
get
lockName
assertTrue
lockAttempts
close
testRAMDirectoryNoLocking
Directory
dir
RAMDirectory
setLockFactory
getNoLockFactory
assertTrue
isInstance
getLockFactory
NoLockFactory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
IndexWriter
writer2
try
writer2
IndexWriter
dir
WhitespaceAnalyzer
catchClause
e
printStackTrace
out
fail
close
if
writer2
block
close
testDefaultRAMDirectory
Directory
dir
RAMDirectory
assertTrue
getLockFactory
isInstance
getLockFactory
SingleInstanceLockFactory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
IndexWriter
writer2
try
writer2
IndexWriter
dir
WhitespaceAnalyzer
fail
catchClause
e
close
if
writer2
block
close
testDefaultFSDirectory
String
indexDirName
IndexWriter
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
SimpleFSLockFactory
isInstance
getDirectory
getLockFactory
NativeFSLockFactory
IndexWriter
writer2
try
writer2
IndexWriter
indexDirName
WhitespaceAnalyzer
fail
catchClause
e
close
if
writer2
block
close
rmDir
indexDirName
testFSDirectoryTwoCreates
String
indexDirName
IndexWriter
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
SimpleFSLockFactory
isInstance
getDirectory
getLockFactory
NativeFSLockFactory
IndexWriter
writer2
try
writer2
IndexWriter
indexDirName
WhitespaceAnalyzer
catchClause
e
printStackTrace
out
fail
close
if
writer2
block
close
rmDir
indexDirName
testLockClassProperty
String
indexDirName
String
prpName
try
setProperty
prpName
IndexWriter
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
NoLockFactory
close
setProperty
prpName
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
SingleInstanceLockFactory
close
setProperty
prpName
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
NativeFSLockFactory
close
setProperty
prpName
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
SimpleFSLockFactory
close
setProperty
rmDir
indexDirName
testDisableLocks
String
indexDirName
assertTrue
getDisableLocks
setDisableLocks
IndexWriter
writer
IndexWriter
indexDirName
WhitespaceAnalyzer
assertTrue
getDirectory
getLockFactory
isInstance
getDirectory
getLockFactory
NoLockFactory
IndexWriter
writer2
try
writer2
IndexWriter
indexDirName
WhitespaceAnalyzer
catchClause
e
printStackTrace
out
fail
setDisableLocks
close
if
writer2
block
close
rmDir
indexDirName
testFSDirectoryDifferentLockFactory
String
indexDirName
LockFactory
lf
SingleInstanceLockFactory
FSDirectory
fs1
getDirectory
indexDirName
lf
try
FSDirectory
fs2
getDirectory
indexDirName
SingleInstanceLockFactory
fail
catchClause
e
FSDirectory
fs2
try
fs2
getDirectory
indexDirName
lf
catchClause
e
printStackTrace
out
fail
close
if
fs2
block
close
rmDir
indexDirName
testStressLocks
_testStressLocks
testStressLocksNativeFSLockFactory
_testStressLocks
NativeFSLockFactory
_testStressLocks
lockFactory
LockFactory
indexDirName
String
FSDirectory
fs1
getDirectory
indexDirName
lockFactory
IndexWriter
w
IndexWriter
fs1
WhitespaceAnalyzer
addDoc
w
close
WriterThread
writer
WriterThread
fs1
SearcherThread
searcher
SearcherThread
fs1
start
start
while
isAlive
isAlive
block
try
sleep
catchClause
e
assertTrue
hitException
assertTrue
hitException
rmDir
indexDirName
testNativeFSLockFactory
NativeFSLockFactory
f
NativeFSLockFactory
getProperty
NativeFSLockFactory
f2
NativeFSLockFactory
getProperty
setLockPrefix
Lock
l
makeLock
Lock
l2
makeLock
assertTrue
obtain
assertTrue
obtain
release
assertTrue
obtain
release
assertTrue
obtain
release
testNativeFSLockFactoryPrefix
Directory
dir1
getDirectory
NativeFSLockFactory
Directory
dir2
getDirectory
NativeFSLockFactory
String
prefix1
getLockFactory
getLockPrefix
String
prefix2
getLockFactory
getLockPrefix
assertTrue
prefix1
equals
prefix2
rmDir
rmDir
testDefaultFSLockFactoryPrefix
Directory
dir
getDirectory
String
prefix
getLockFactory
getLockPrefix
assertTrue
prefix
rmDir
WriterThread
Directory
dir
int
numIteration
boolean
hitException
WriterThread
numIteration
int
dir
Directory
numIteration
numIteration
dir
dir
run
WhitespaceAnalyzer
analyzer
WhitespaceAnalyzer
IndexWriter
writer
for
forControl
int
i
i
numIteration
i
block
try
writer
IndexWriter
dir
analyzer
catchClause
e
if
toString
indexOf
block
hitException
block
catchClause
e
hitException
println
toString
printStackTrace
out
break
if
writer
block
try
addDoc
writer
catchClause
e
hitException
println
toString
printStackTrace
out
break
try
close
catchClause
e
hitException
println
toString
printStackTrace
out
break
writer
Thread
SearcherThread
Directory
dir
int
numIteration
boolean
hitException
SearcherThread
numIteration
int
dir
Directory
numIteration
numIteration
dir
dir
run
IndexSearcher
searcher
WhitespaceAnalyzer
analyzer
WhitespaceAnalyzer
Query
query
TermQuery
Term
for
forControl
int
i
i
numIteration
i
block
try
searcher
IndexSearcher
dir
catchClause
e
hitException
println
toString
printStackTrace
out
break
if
searcher
block
Hits
hits
try
hits
search
query
catchClause
e
hitException
println
toString
printStackTrace
out
break
try
close
catchClause
e
hitException
println
toString
printStackTrace
out
break
searcher
Thread
MockLockFactory
boolean
lockPrefixSet
Hashtable
locksCreated
Hashtable
int
makeLockCount
setLockPrefix
lockPrefix
String
setLockPrefix
lockPrefix
lockPrefixSet
makeLock
Lock
lockName
String
Lock
lock
MockLock
put
lockName
lock
makeLockCount
return
lock
clearLock
specificLockName
String
MockLock
int
lockAttempts
obtain
boolean
lockAttempts
return
release
isLocked
boolean
return
Lock
LockFactory
addDoc
writer
IndexWriter
Document
doc
Document
add
Field
NO
TOKENIZED
addDocument
doc
rmDir
dirName
String
File
dir
java
io
File
dirName
String
files
list
for
forControl
int
i
i
length
i
block
File
file
File
dir
files
i
delete
delete
TestCase
