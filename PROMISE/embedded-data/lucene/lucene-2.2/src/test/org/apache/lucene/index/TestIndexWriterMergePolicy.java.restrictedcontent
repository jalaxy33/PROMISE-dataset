TestIndexWriterMergePolicy
testNormalCase
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
close
testNoOverMerge
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
boolean
noOverMerge
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
if
getRamSegmentCount
getSegmentCount
block
noOverMerge
assertTrue
noOverMerge
close
testForceFlush
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
close
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
checkInvariants
writer
close
testMergeFactorChange
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
close
testMaxBufferedDocsChange
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
for
forControl
int
j
j
i
j
block
addDoc
writer
checkInvariants
writer
close
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
close
testMergeDocCount0
Directory
dir
RAMDirectory
IndexWriter
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
close
IndexReader
reader
open
dir
deleteDocuments
Term
close
writer
IndexWriter
dir
WhitespaceAnalyzer
setMaxBufferedDocs
setMergeFactor
for
forControl
int
i
i
i
block
addDoc
writer
checkInvariants
writer
assertEquals
docCount
close
addDoc
writer
IndexWriter
Document
doc
Document
add
Field
NO
TOKENIZED
addDocument
doc
checkInvariants
writer
IndexWriter
int
maxBufferedDocs
getMaxBufferedDocs
int
mergeFactor
getMergeFactor
int
maxMergeDocs
getMaxMergeDocs
int
ramSegmentCount
getRamSegmentCount
assertTrue
ramSegmentCount
maxBufferedDocs
int
lowerBound
int
upperBound
maxBufferedDocs
int
numSegments
int
segmentCount
getSegmentCount
for
forControl
int
i
segmentCount
i
i
block
int
docCount
getDocCount
i
assertTrue
docCount
lowerBound
if
docCount
upperBound
block
numSegments
block
if
upperBound
mergeFactor
maxMergeDocs
block
assertTrue
numSegments
mergeFactor
do
docCount
upperBound
block
lowerBound
upperBound
upperBound
mergeFactor
numSegments
if
upperBound
mergeFactor
maxMergeDocs
block
assertTrue
numSegments
mergeFactor
String
files
getDirectory
list
int
segmentCfsCount
for
forControl
int
i
i
length
i
block
if
files
i
endsWith
block
segmentCfsCount
assertEquals
segmentCount
segmentCfsCount
printSegmentDocCounts
writer
IndexWriter
int
segmentCount
getSegmentCount
println
segmentCount
for
forControl
int
i
i
segmentCount
i
block
println
i
getDocCount
i
TestCase
