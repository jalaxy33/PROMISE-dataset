PatternAnalyzerTest
main
args
String
run
args
PatternAnalyzerTest
testMany
String
files
listFiles
String
println
asList
files
String
xargs
String
String
args
String
length
length
arraycopy
xargs
args
length
arraycopy
files
args
length
length
run
args
run
args
String
int
k
int
iters
if
length
k
iters
max
parseInt
args
k
int
runs
if
length
k
runs
max
parseInt
args
k
String
cmd
if
length
k
cmd
args
k
boolean
usePattern
indexOf
boolean
useLucene
indexOf
int
maxLetters
if
length
k
maxLetters
parseInt
args
k
int
maxToLower
if
length
k
maxToLower
parseInt
args
k
int
maxStops
if
length
k
maxStops
parseInt
args
k
File
files
File
File
File
if
length
k
block
files
File
length
k
for
forControl
int
i
k
i
length
i
block
files
i
k
File
args
i
for
forControl
int
iter
iter
iters
iter
block
println
iter
long
start
currentTimeMillis
long
bytes
for
forControl
int
i
i
length
i
block
File
file
files
i
if
exists
isDirectory
continue
bytes
length
String
text
toString
FileInputStream
file
println
file
for
forControl
int
letters
letters
maxLetters
letters
block
boolean
lettersOnly
letters
for
forControl
int
stops
stops
maxStops
stops
block
Set
stopWords
if
stops
stopWords
makeStopSet
ENGLISH_STOP_WORDS
for
forControl
int
toLower
toLower
maxToLower
toLower
block
boolean
toLowerCase
toLower
for
forControl
int
run
run
runs
run
block
List
tokens1
List
tokens2
try
if
usePattern
tokens1
getTokens
patternTokenStream
text
lettersOnly
toLowerCase
stopWords
if
useLucene
tokens2
getTokens
luceneTokenStream
text
lettersOnly
toLowerCase
stopWords
if
usePattern
useLucene
assertEquals
tokens1
tokens2
catchClause
t
if
t
OutOfMemoryError
printStackTrace
println
file
lettersOnly
toLowerCase
stopWords
println
toString
tokens1
println
toString
tokens2
throw
t
long
end
currentTimeMillis
println
end
start
println
runs
maxLetters
maxToLower
maxStops
length
end
start
float
mb
bytes
runs
maxLetters
maxToLower
maxStops
println
mb
end
start
if
usePattern
useLucene
println
println
patternTokenStream
TokenStream
text
String
letters
boolean
toLowerCase
boolean
stopWords
Set
Pattern
pattern
if
letters
pattern
NON_WORD_PATTERN
pattern
WHITESPACE_PATTERN
PatternAnalyzer
analyzer
PatternAnalyzer
pattern
toLowerCase
stopWords
return
tokenStream
text
luceneTokenStream
TokenStream
text
String
letters
boolean
toLowerCase
boolean
stopWords
Set
TokenStream
stream
if
letters
stream
LetterTokenizer
StringReader
text
stream
WhitespaceTokenizer
StringReader
text
if
toLowerCase
stream
LowerCaseFilter
stream
if
stopWords
stream
StopFilter
stream
stopWords
return
stream
getTokens
List
stream
TokenStream
ArrayList
tokens
ArrayList
Token
token
while
token
next
block
add
token
return
tokens
assertEquals
tokens1
List
tokens2
List
int
size
min
size
size
int
i
try
for
forControl
i
size
i
block
Token
t1
Token
get
i
Token
t2
Token
get
i
if
termText
throw
IllegalStateException
if
startOffset
startOffset
throw
IllegalStateException
if
endOffset
endOffset
throw
IllegalStateException
if
type
throw
IllegalStateException
if
size
size
throw
IllegalStateException
size
size
catchClause
e
if
size
block
println
i
size
println
Token
get
size
println
Token
get
size
throw
e
toString
String
tokens
List
if
tokens
return
String
str
for
forControl
int
i
i
size
i
block
Token
t1
Token
get
i
str
str
termText
return
str
Charset
DEFAULT_PLATFORM_CHARSET
forName
getEncoding
InputStreamReader
ByteArrayInputStream
byte
toString
String
input
InputStream
charset
Charset
if
charset
charset
DEFAULT_PLATFORM_CHARSET
byte
data
toByteArray
input
return
decode
toString
wrap
data
toByteArray
byte
input
InputStream
try
int
len
max
available
byte
buffer
byte
len
byte
output
byte
len
len
int
n
while
n
read
buffer
block
if
len
n
length
block
byte
tmp
byte
max
length
len
n
arraycopy
output
tmp
len
arraycopy
buffer
tmp
len
n
buffer
output
output
tmp
block
arraycopy
buffer
output
len
n
len
n
if
len
length
return
output
buffer
buffer
byte
len
arraycopy
output
buffer
len
return
buffer
if
input
close
TestCase
