NearSpans
SpanNearQuery
query
List
ordered
ArrayList
int
slop
boolean
inOrder
SpansCell
first
SpansCell
last
int
totalLength
CellQueue
queue
SpansCell
max
boolean
more
boolean
firstTime
CellQueue
CellQueue
size
int
initialize
size
lessThan
boolean
o1
Object
o2
Object
SpansCell
spans1
SpansCell
o1
SpansCell
spans2
SpansCell
o2
if
doc
doc
block
if
start
start
block
if
end
end
block
return
index
index
block
return
end
end
block
return
start
start
block
return
doc
doc
PriorityQueue
SpansCell
Spans
spans
SpansCell
next
int
length
int
index
SpansCell
spans
Spans
index
int
spans
spans
index
index
next
boolean
if
length
totalLength
length
boolean
more
next
if
more
block
length
end
start
totalLength
length
if
max
doc
doc
doc
doc
end
end
max
return
more
skipTo
boolean
target
int
if
length
totalLength
length
boolean
more
skipTo
target
if
more
block
length
end
start
totalLength
length
if
max
doc
doc
doc
doc
end
end
max
return
more
doc
int
return
doc
start
int
return
start
end
int
return
end
toString
String
return
toString
index
Spans
NearSpans
query
SpanNearQuery
reader
IndexReader
query
query
slop
getSlop
inOrder
isInOrder
SpanQuery
clauses
getClauses
queue
CellQueue
length
for
forControl
int
i
i
length
i
block
SpansCell
cell
SpansCell
clauses
i
getSpans
reader
i
add
cell
next
boolean
if
firstTime
block
initList
listToQueue
firstTime
if
more
block
more
min
next
if
more
adjustTop
while
more
block
boolean
queueStale
if
min
doc
doc
block
queueToList
queueStale
while
more
doc
doc
block
more
skipTo
doc
firstToLast
queueStale
if
more
return
if
queueStale
block
listToQueue
queueStale
if
atMatch
return
if
inOrder
checkSlop
block
more
firstNonOrderedNextToPartialList
if
more
block
partialListToQueue
block
more
min
next
if
more
block
adjustTop
return
skipTo
boolean
target
int
if
firstTime
block
initList
for
forControl
SpansCell
cell
first
more
cell
cell
next
block
more
skipTo
target
if
more
block
listToQueue
firstTime
block
while
more
min
doc
target
block
more
min
skipTo
target
if
more
adjustTop
if
more
block
if
atMatch
return
return
next
return
min
SpansCell
return
SpansCell
top
doc
int
return
min
doc
start
int
return
min
start
end
int
return
end
toString
String
return
toString
firstTime
more
doc
start
end
initList
next
boolean
for
forControl
int
i
more
i
size
i
block
SpansCell
cell
SpansCell
get
i
if
next
more
next
if
more
block
addToList
cell
addToList
cell
SpansCell
if
last
block
next
cell
first
cell
last
cell
next
firstToLast
next
first
last
first
first
next
next
queueToList
last
first
while
top
block
addToList
SpansCell
pop
firstNonOrderedNextToPartialList
boolean
last
first
int
orderedIndex
while
top
block
SpansCell
cell
SpansCell
pop
addToList
cell
if
index
orderedIndex
block
orderedIndex
block
return
next
throw
RuntimeException
listToQueue
clear
partialListToQueue
partialListToQueue
for
forControl
SpansCell
cell
first
cell
cell
next
block
put
cell
atMatch
boolean
return
min
doc
doc
checkSlop
inOrder
matchIsOrdered
checkSlop
boolean
int
matchLength
end
min
start
return
matchLength
totalLength
slop
matchIsOrdered
boolean
int
lastStart
for
forControl
int
i
i
size
i
block
int
start
SpansCell
get
i
if
start
lastStart
return
lastStart
start
return
Spans
