SegmentReader
String
segment
FieldInfos
fieldInfos
FieldsReader
fieldsReader
TermInfosReader
tis
TermVectorsReader
termVectorsReaderOrig
ThreadLocal
termVectorsLocal
ThreadLocal
BitVector
deletedDocs
boolean
deletedDocsDirty
boolean
normsDirty
boolean
undeleteAll
IndexInput
freqStream
IndexInput
proxStream
CompoundFileReader
cfsReader
Norm
Norm
in
IndexInput
number
int
in
in
number
number
IndexInput
in
byte
bytes
boolean
dirty
int
number
reWrite
IndexOutput
out
directory
createOutput
segment
try
writeBytes
bytes
maxDoc
close
String
fileName
if
cfsReader
fileName
segment
number
block
fileName
segment
number
directory
renameFile
segment
fileName
dirty
Hashtable
norms
Hashtable
Class
IMPL
try
String
name
getProperty
getName
SegmentReader
IMPL
forName
name
catchClause
e
throw
RuntimeException
e
e
catchClause
se
try
IMPL
forName
getName
SegmentReader
catchClause
e
throw
RuntimeException
e
e
SegmentReader
get
SegmentReader
si
SegmentInfo
return
get
dir
si
get
SegmentReader
sis
SegmentInfos
si
SegmentInfo
closeDir
boolean
return
get
dir
si
sis
closeDir
get
SegmentReader
dir
Directory
si
SegmentInfo
sis
SegmentInfos
closeDir
boolean
ownDir
boolean
SegmentReader
instance
try
instance
SegmentReader
newInstance
catchClause
e
throw
RuntimeException
e
e
init
dir
sis
closeDir
ownDir
initialize
si
return
instance
initialize
si
SegmentInfo
segment
name
Directory
cfsDir
directory
if
directory
fileExists
segment
block
cfsReader
CompoundFileReader
directory
segment
cfsDir
cfsReader
fieldInfos
FieldInfos
cfsDir
segment
fieldsReader
FieldsReader
cfsDir
segment
fieldInfos
tis
TermInfosReader
cfsDir
segment
fieldInfos
if
hasDeletions
si
deletedDocs
BitVector
directory
segment
freqStream
openInput
segment
proxStream
openInput
segment
openNorms
cfsDir
if
hasVectors
block
termVectorsReaderOrig
TermVectorsReader
cfsDir
segment
fieldInfos
finalize
set
finalize
doCommit
if
deletedDocsDirty
block
write
directory
segment
directory
renameFile
segment
segment
if
undeleteAll
directory
fileExists
segment
block
directory
deleteFile
segment
if
normsDirty
block
Enumeration
values
elements
while
hasMoreElements
block
Norm
norm
Norm
nextElement
if
dirty
block
reWrite
deletedDocsDirty
normsDirty
undeleteAll
doClose
close
close
if
freqStream
close
if
proxStream
close
closeNorms
if
termVectorsReaderOrig
close
if
cfsReader
close
hasDeletions
boolean
si
SegmentInfo
return
fileExists
name
hasDeletions
boolean
return
deletedDocs
usesCompoundFile
boolean
si
SegmentInfo
return
fileExists
name
hasSeparateNorms
boolean
si
SegmentInfo
String
result
list
String
pattern
name
int
patternLength
length
for
forControl
int
i
i
length
i
block
if
result
i
startsWith
pattern
isDigit
result
i
charAt
patternLength
return
return
doDelete
docNum
int
if
deletedDocs
deletedDocs
BitVector
maxDoc
deletedDocsDirty
undeleteAll
set
docNum
doUndeleteAll
deletedDocs
deletedDocsDirty
undeleteAll
files
Vector
Vector
files
Vector
for
forControl
int
i
i
length
i
block
String
name
segment
INDEX_EXTENSIONS
i
if
directory
fileExists
name
addElement
name
for
forControl
int
i
i
size
i
block
FieldInfo
fi
fieldInfo
i
if
isIndexed
omitNorms
block
String
name
if
cfsReader
name
segment
i
name
segment
i
if
directory
fileExists
name
addElement
name
return
files
terms
TermEnum
return
terms
terms
TermEnum
t
Term
return
terms
t
document
Document
n
int
if
isDeleted
n
throw
IllegalArgumentException
return
doc
n
isDeleted
boolean
n
int
return
deletedDocs
get
n
termDocs
TermDocs
return
SegmentTermDocs
termPositions
TermPositions
return
SegmentTermPositions
docFreq
int
t
Term
TermInfo
ti
get
t
if
ti
return
docFreq
return
numDocs
int
int
n
maxDoc
if
deletedDocs
n
count
return
n
maxDoc
int
return
size
getFieldNames
Collection
fieldOption
IndexReader
FieldOption
Set
fieldSet
HashSet
for
forControl
int
i
i
size
i
block
FieldInfo
fi
fieldInfo
i
if
fieldOption
ALL
block
add
name
if
isIndexed
fieldOption
UNINDEXED
block
add
name
if
isIndexed
fieldOption
INDEXED
block
add
name
if
isIndexed
storeTermVector
fieldOption
INDEXED_NO_TERMVECTOR
block
add
name
if
storeTermVector
storePositionWithTermVector
storeOffsetWithTermVector
fieldOption
TERMVECTOR
block
add
name
if
isIndexed
storeTermVector
fieldOption
INDEXED_WITH_TERMVECTOR
block
add
name
if
storePositionWithTermVector
storeOffsetWithTermVector
fieldOption
TERMVECTOR_WITH_POSITION
block
add
name
if
storeOffsetWithTermVector
storePositionWithTermVector
fieldOption
TERMVECTOR_WITH_OFFSET
block
add
name
if
storeOffsetWithTermVector
storePositionWithTermVector
fieldOption
TERMVECTOR_WITH_POSITION_OFFSET
block
add
name
return
fieldSet
hasNorms
boolean
field
String
return
containsKey
field
createFakeNorms
byte
size
int
byte
ones
byte
size
fill
ones
encodeNorm
return
ones
byte
ones
fakeNorms
byte
if
ones
ones
createFakeNorms
maxDoc
return
ones
getNorms
byte
field
String
Norm
norm
Norm
get
field
if
norm
return
if
bytes
block
byte
bytes
byte
maxDoc
norms
field
bytes
bytes
bytes
return
bytes
norms
byte
field
String
byte
bytes
getNorms
field
if
bytes
bytes
fakeNorms
return
bytes
doSetNorm
doc
int
field
String
value
byte
Norm
norm
Norm
get
field
if
norm
return
dirty
normsDirty
norms
doc
field
value
norms
field
String
bytes
byte
offset
int
Norm
norm
Norm
get
field
if
norm
block
arraycopy
fakeNorms
bytes
offset
maxDoc
return
if
bytes
block
arraycopy
bytes
bytes
offset
maxDoc
return
IndexInput
normStream
IndexInput
clone
try
seek
readBytes
bytes
offset
maxDoc
close
openNorms
cfsDir
Directory
for
forControl
int
i
i
size
i
block
FieldInfo
fi
fieldInfo
i
if
isIndexed
omitNorms
block
String
fileName
segment
number
Directory
d
directory
if
fileExists
fileName
block
fileName
segment
number
d
cfsDir
put
name
Norm
openInput
fileName
number
closeNorms
synchronized
norms
Enumeration
enumerator
elements
while
hasMoreElements
block
Norm
norm
Norm
nextElement
close
getTermVectorsReader
TermVectorsReader
TermVectorsReader
tvReader
TermVectorsReader
get
if
tvReader
block
tvReader
TermVectorsReader
clone
set
tvReader
return
tvReader
getTermFreqVector
TermFreqVector
docNumber
int
field
String
FieldInfo
fi
fieldInfo
field
if
fi
storeTermVector
termVectorsReaderOrig
return
TermVectorsReader
termVectorsReader
getTermVectorsReader
if
termVectorsReader
return
return
get
docNumber
field
getTermFreqVectors
TermFreqVector
docNumber
int
if
termVectorsReaderOrig
return
TermVectorsReader
termVectorsReader
getTermVectorsReader
if
termVectorsReader
return
return
get
docNumber
IndexReader
