IndexWriter
long
WRITE_LOCK_TIMEOUT
long
writeLockTimeout
WRITE_LOCK_TIMEOUT
long
COMMIT_LOCK_TIMEOUT
long
commitLockTimeout
COMMIT_LOCK_TIMEOUT
String
WRITE_LOCK_NAME
String
COMMIT_LOCK_NAME
int
DEFAULT_MERGE_FACTOR
int
DEFAULT_MAX_BUFFERED_DOCS
int
DEFAULT_MAX_MERGE_DOCS
MAX_VALUE
int
DEFAULT_MAX_FIELD_LENGTH
int
DEFAULT_TERM_INDEX_INTERVAL
Directory
directory
Analyzer
analyzer
Similarity
similarity
getDefault
SegmentInfos
segmentInfos
SegmentInfos
Directory
ramDirectory
RAMDirectory
Lock
writeLock
int
termIndexInterval
DEFAULT_TERM_INDEX_INTERVAL
boolean
useCompoundFile
boolean
closeDir
getUseCompoundFile
boolean
return
useCompoundFile
setUseCompoundFile
value
boolean
useCompoundFile
value
setSimilarity
similarity
Similarity
similarity
similarity
getSimilarity
Similarity
return
similarity
setTermIndexInterval
interval
int
termIndexInterval
interval
getTermIndexInterval
int
return
termIndexInterval
IndexWriter
path
String
a
Analyzer
create
boolean
getDirectory
path
create
a
create
IndexWriter
path
File
a
Analyzer
create
boolean
getDirectory
path
create
a
create
IndexWriter
d
Directory
a
Analyzer
create
boolean
d
a
create
IndexWriter
d
Directory
a
Analyzer
create
boolean
closeDir
boolean
closeDir
closeDir
directory
d
analyzer
a
Lock
writeLock
makeLock
WRITE_LOCK_NAME
if
obtain
writeLockTimeout
throw
IOException
writeLock
writeLock
writeLock
synchronized
directory
run
Lock
With
makeLock
COMMIT_LOCK_NAME
commitLockTimeout
doBody
Object
if
create
write
directory
read
directory
return
setMaxMergeDocs
maxMergeDocs
int
maxMergeDocs
maxMergeDocs
getMaxMergeDocs
int
return
maxMergeDocs
setMaxFieldLength
maxFieldLength
int
maxFieldLength
maxFieldLength
getMaxFieldLength
int
return
maxFieldLength
setMaxBufferedDocs
maxBufferedDocs
int
if
maxBufferedDocs
throw
IllegalArgumentException
minMergeDocs
maxBufferedDocs
getMaxBufferedDocs
int
return
minMergeDocs
setMergeFactor
mergeFactor
int
if
mergeFactor
throw
IllegalArgumentException
mergeFactor
mergeFactor
getMergeFactor
int
return
mergeFactor
setInfoStream
infoStream
PrintStream
infoStream
infoStream
getInfoStream
PrintStream
return
infoStream
setCommitLockTimeout
commitLockTimeout
long
commitLockTimeout
commitLockTimeout
getCommitLockTimeout
long
return
commitLockTimeout
setWriteLockTimeout
writeLockTimeout
long
writeLockTimeout
writeLockTimeout
getWriteLockTimeout
long
return
writeLockTimeout
close
flushRamSegments
close
if
writeLock
block
release
writeLock
if
closeDir
close
finalize
if
writeLock
block
release
writeLock
getDirectory
Directory
return
directory
getAnalyzer
Analyzer
return
analyzer
docCount
int
int
count
for
forControl
int
i
i
size
i
block
SegmentInfo
si
info
i
count
docCount
return
count
int
maxFieldLength
DEFAULT_MAX_FIELD_LENGTH
addDocument
doc
Document
addDocument
doc
analyzer
addDocument
doc
Document
analyzer
Analyzer
DocumentWriter
dw
DocumentWriter
ramDirectory
analyzer
setInfoStream
infoStream
String
segmentName
newSegmentName
addDocument
segmentName
doc
synchronized
addElement
SegmentInfo
segmentName
ramDirectory
maybeMergeSegments
getSegmentsCounter
int
return
counter
newSegmentName
String
return
toString
counter
MAX_RADIX
int
mergeFactor
DEFAULT_MERGE_FACTOR
int
minMergeDocs
DEFAULT_MAX_BUFFERED_DOCS
int
maxMergeDocs
DEFAULT_MAX_MERGE_DOCS
PrintStream
infoStream
optimize
flushRamSegments
while
size
size
hasDeletions
info
info
dir
directory
useCompoundFile
usesCompoundFile
info
hasSeparateNorms
info
block
int
minSegment
size
mergeFactor
mergeSegments
minSegment
minSegment
addIndexes
dirs
Directory
optimize
int
start
size
for
forControl
int
i
i
length
i
block
SegmentInfos
sis
SegmentInfos
read
dirs
i
for
forControl
int
j
j
size
j
block
addElement
info
j
while
size
start
mergeFactor
block
for
forControl
int
base
start
base
size
base
block
int
end
min
size
base
mergeFactor
if
end
base
mergeSegments
base
end
optimize
addIndexes
readers
IndexReader
optimize
String
mergedName
newSegmentName
SegmentMerger
merger
SegmentMerger
mergedName
Vector
segmentsToDelete
Vector
IndexReader
sReader
if
size
block
sReader
get
info
add
sReader
addElement
sReader
for
forControl
int
i
i
length
i
add
readers
i
int
docCount
merge
setSize
addElement
SegmentInfo
mergedName
docCount
directory
if
sReader
close
synchronized
directory
run
Lock
With
makeLock
COMMIT_LOCK_NAME
commitLockTimeout
doBody
Object
write
directory
return
deleteSegments
segmentsToDelete
if
useCompoundFile
block
Vector
filesToDelete
createCompoundFile
mergedName
synchronized
directory
run
Lock
With
makeLock
COMMIT_LOCK_NAME
commitLockTimeout
doBody
Object
renameFile
mergedName
mergedName
return
deleteFiles
filesToDelete
flushRamSegments
int
minSegment
size
int
docCount
while
minSegment
info
dir
minSegment
ramDirectory
block
docCount
info
docCount
minSegment
minSegment
if
minSegment
docCount
info
docCount
minSegment
mergeFactor
info
dir
size
ramDirectory
minSegment
if
minSegment
size
return
mergeSegments
minSegment
maybeMergeSegments
long
targetMergeDocs
minMergeDocs
while
targetMergeDocs
maxMergeDocs
block
int
minSegment
size
int
mergeDocs
while
minSegment
block
SegmentInfo
si
info
minSegment
if
docCount
targetMergeDocs
break
mergeDocs
docCount
if
mergeDocs
targetMergeDocs
mergeSegments
minSegment
break
targetMergeDocs
mergeFactor
mergeSegments
minSegment
int
mergeSegments
minSegment
size
mergeSegments
minSegment
int
end
int
String
mergedName
newSegmentName
if
infoStream
print
SegmentMerger
merger
SegmentMerger
mergedName
Vector
segmentsToDelete
Vector
for
forControl
int
i
minSegment
i
end
i
block
SegmentInfo
si
info
i
if
infoStream
print
name
docCount
IndexReader
reader
get
si
add
reader
if
directory
directory
directory
ramDirectory
addElement
reader
int
mergedDocCount
merge
if
infoStream
block
println
mergedName
mergedDocCount
for
forControl
int
i
end
i
minSegment
i
remove
i
set
minSegment
SegmentInfo
mergedName
mergedDocCount
directory
closeReaders
synchronized
directory
run
Lock
With
makeLock
COMMIT_LOCK_NAME
commitLockTimeout
doBody
Object
write
directory
return
deleteSegments
segmentsToDelete
if
useCompoundFile
block
Vector
filesToDelete
createCompoundFile
mergedName
synchronized
directory
run
Lock
With
makeLock
COMMIT_LOCK_NAME
commitLockTimeout
doBody
Object
renameFile
mergedName
mergedName
return
deleteFiles
filesToDelete
deleteSegments
segments
Vector
Vector
deletable
Vector
deleteFiles
readDeleteableFiles
deletable
for
forControl
int
i
i
size
i
block
SegmentReader
reader
SegmentReader
elementAt
i
if
directory
directory
deleteFiles
files
deletable
deleteFiles
files
directory
writeDeleteableFiles
deletable
deleteFiles
files
Vector
Vector
deletable
Vector
deleteFiles
readDeleteableFiles
deletable
deleteFiles
files
deletable
writeDeleteableFiles
deletable
deleteFiles
files
Vector
directory
Directory
for
forControl
int
i
i
size
i
deleteFile
String
elementAt
i
deleteFiles
files
Vector
deletable
Vector
for
forControl
int
i
i
size
i
block
String
file
String
elementAt
i
try
deleteFile
file
catchClause
e
if
fileExists
file
block
if
infoStream
println
toString
addElement
file
readDeleteableFiles
Vector
Vector
result
Vector
if
fileExists
DELETABLE
return
result
IndexInput
input
openInput
DELETABLE
try
for
forControl
int
i
readInt
i
i
addElement
readString
close
return
result
writeDeleteableFiles
files
Vector
IndexOutput
output
createOutput
try
writeInt
size
for
forControl
int
i
i
size
i
writeString
String
elementAt
i
close
renameFile
DELETABLE
