TestIndexWriterDelete
testSimpleCase
String
keywords
String
unindexed
String
unstored
String
text
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setUseCompoundFile
setMaxBufferedDeleteTerms
for
forControl
int
i
i
length
i
block
Document
doc
Document
add
Field
keywords
i
YES
NOT_ANALYZED
add
Field
unindexed
i
YES
NO
add
Field
unstored
i
NO
ANALYZED
add
Field
text
i
YES
ANALYZED
addDocument
doc
optimize
commit
Term
term
Term
int
hitCount
getHitCount
dir
term
assertEquals
hitCount
deleteDocuments
term
commit
hitCount
getHitCount
dir
term
assertEquals
hitCount
close
close
testNonRAMDelete
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDocs
setMaxBufferedDeleteTerms
int
id
int
value
for
forControl
int
i
i
i
block
addDoc
modifier
id
value
commit
assertEquals
getNumBufferedDocuments
assertTrue
getSegmentCount
commit
IndexReader
reader
open
dir
assertEquals
numDocs
close
deleteDocuments
Term
valueOf
value
commit
reader
open
dir
assertEquals
numDocs
close
close
close
testMaxBufferedDeletes
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
writer
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDeleteTerms
deleteDocuments
Term
deleteDocuments
Term
deleteDocuments
Term
assertEquals
getFlushDeletesCount
close
close
testRAMDeletes
for
forControl
int
pass
pass
pass
block
for
forControl
int
t
t
t
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDocs
setMaxBufferedDeleteTerms
int
id
int
value
addDoc
modifier
id
value
if
t
deleteDocuments
Term
valueOf
value
deleteDocuments
TermQuery
Term
valueOf
value
addDoc
modifier
id
value
if
t
block
deleteDocuments
Term
valueOf
value
assertEquals
getNumBufferedDeleteTerms
assertEquals
getBufferedDeleteTermsSize
deleteDocuments
TermQuery
Term
valueOf
value
addDoc
modifier
id
value
assertEquals
getSegmentCount
flush
commit
IndexReader
reader
open
dir
assertEquals
numDocs
int
hitCount
getHitCount
dir
Term
valueOf
id
assertEquals
hitCount
close
close
close
testBothDeletes
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDocs
setMaxBufferedDeleteTerms
int
id
int
value
for
forControl
int
i
i
i
block
addDoc
modifier
id
value
value
for
forControl
int
i
i
i
block
addDoc
modifier
id
value
commit
for
forControl
int
i
i
i
block
addDoc
modifier
id
value
deleteDocuments
Term
valueOf
value
commit
IndexReader
reader
open
dir
assertEquals
numDocs
close
testBatchDeletes
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
Directory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDocs
setMaxBufferedDeleteTerms
int
id
int
value
for
forControl
int
i
i
i
block
addDoc
modifier
id
value
commit
IndexReader
reader
open
dir
assertEquals
numDocs
close
id
deleteDocuments
Term
valueOf
id
deleteDocuments
Term
valueOf
id
commit
reader
open
dir
assertEquals
numDocs
close
Term
terms
Term
for
forControl
int
i
i
length
i
block
terms
i
Term
valueOf
id
deleteDocuments
terms
commit
reader
open
dir
assertEquals
numDocs
close
close
close
addDoc
modifier
IndexWriter
id
int
value
int
Document
doc
Document
add
Field
NO
ANALYZED
add
Field
valueOf
id
YES
NOT_ANALYZED
add
Field
valueOf
value
NO
NOT_ANALYZED
addDocument
doc
getHitCount
int
dir
Directory
term
Term
IndexSearcher
searcher
IndexSearcher
dir
int
hitCount
search
totalHits
TermQuery
term
close
return
hitCount
testDeletesOnDiskFull
testOperationsOnDiskFull
testUpdatesOnDiskFull
testOperationsOnDiskFull
testOperationsOnDiskFull
updates
boolean
boolean
debug
Term
searchTerm
Term
int
START_COUNT
int
END_COUNT
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
MockRAMDirectory
startDir
MockRAMDirectory
IndexWriter
writer
IndexWriter
startDir
autoCommit
WhitespaceAnalyzer
for
forControl
int
i
i
i
block
Document
d
Document
add
Field
toString
i
YES
NOT_ANALYZED
add
Field
i
NO
ANALYZED
addDocument
d
close
long
diskUsage
sizeInBytes
long
diskFree
diskUsage
IOException
err
boolean
done
while
done
block
MockRAMDirectory
dir
MockRAMDirectory
startDir
setPreventDoubleWrite
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setMaxBufferedDocs
setMaxBufferedDeleteTerms
boolean
success
for
forControl
int
x
x
x
block
double
rate
double
diskRatio
double
diskFree
diskUsage
long
thisDiskFree
String
testName
if
x
block
thisDiskFree
diskFree
if
diskRatio
block
rate
if
diskRatio
block
rate
if
diskRatio
block
rate
if
debug
block
println
diskFree
testName
thisDiskFree
block
thisDiskFree
rate
if
debug
block
println
testName
setMaxSizeInBytes
thisDiskFree
setRandomIOExceptionRate
rate
diskFree
try
if
x
block
int
docId
for
forControl
int
i
i
i
block
if
updates
block
Document
d
Document
add
Field
toString
i
YES
NOT_ANALYZED
add
Field
i
NO
ANALYZED
updateDocument
Term
toString
docId
d
block
deleteDocuments
Term
toString
docId
docId
close
success
if
x
block
done
catchClause
e
if
debug
block
println
e
printStackTrace
out
err
e
if
x
block
printStackTrace
fail
testName
if
success
assertNoUnreferencedFiles
dir
IndexReader
newReader
try
newReader
open
dir
catchClause
e
printStackTrace
fail
testName
e
IndexSearcher
searcher
IndexSearcher
newReader
ScoreDoc
hits
try
hits
search
scoreDocs
TermQuery
searchTerm
catchClause
e
printStackTrace
fail
testName
e
int
result2
length
if
success
block
if
x
result2
END_COUNT
block
fail
testName
result2
END_COUNT
if
x
result2
START_COUNT
result2
END_COUNT
block
fail
testName
result2
START_COUNT
END_COUNT
block
if
result2
START_COUNT
result2
END_COUNT
block
printStackTrace
fail
testName
result2
START_COUNT
END_COUNT
close
close
if
result2
END_COUNT
block
break
close
diskFree
testErrorAfterApplyDeletes
MockRAMDirectory
Failure
failure
MockRAMDirectory
Failure
boolean
sawMaybe
boolean
failed
reset
MockRAMDirectory
Failure
sawMaybe
failed
return
eval
dir
MockRAMDirectory
if
sawMaybe
failed
block
boolean
seen
StackTraceElement
trace
getStackTrace
Exception
for
forControl
int
i
i
length
i
block
if
equals
trace
i
getMethodName
block
seen
break
if
seen
block
failed
throw
IOException
if
failed
block
StackTraceElement
trace
getStackTrace
Exception
for
forControl
int
i
i
length
i
block
if
equals
trace
i
getMethodName
block
sawMaybe
break
String
keywords
String
unindexed
String
unstored
String
text
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
MockRAMDirectory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
setUseCompoundFile
setMaxBufferedDeleteTerms
failOn
reset
for
forControl
int
i
i
length
i
block
Document
doc
Document
add
Field
keywords
i
YES
NOT_ANALYZED
add
Field
unindexed
i
YES
NO
add
Field
unstored
i
NO
ANALYZED
add
Field
text
i
YES
ANALYZED
addDocument
doc
optimize
commit
Term
term
Term
int
hitCount
getHitCount
dir
term
assertEquals
hitCount
deleteDocuments
term
Document
doc
Document
addDocument
doc
boolean
failed
try
commit
catchClause
ioe
failed
assertTrue
failed
commit
hitCount
getHitCount
dir
term
assertEquals
hitCount
close
close
testErrorInDocsWriterAdd
MockRAMDirectory
Failure
failure
MockRAMDirectory
Failure
boolean
failed
reset
MockRAMDirectory
Failure
failed
return
eval
dir
MockRAMDirectory
if
failed
block
failed
throw
IOException
String
keywords
String
unindexed
String
unstored
String
text
for
forControl
int
pass
pass
pass
block
boolean
autoCommit
pass
MockRAMDirectory
dir
MockRAMDirectory
IndexWriter
modifier
IndexWriter
dir
autoCommit
WhitespaceAnalyzer
failOn
reset
for
forControl
int
i
i
length
i
block
Document
doc
Document
add
Field
keywords
i
YES
NOT_ANALYZED
add
Field
unindexed
i
YES
NO
add
Field
unstored
i
NO
ANALYZED
add
Field
text
i
YES
ANALYZED
try
addDocument
doc
catchClause
io
break
String
startFiles
list
SegmentInfos
infos
SegmentInfos
read
dir
IndexFileDeleter
dir
KeepOnlyLastCommitDeletionPolicy
infos
String
endFiles
list
if
equals
startFiles
endFiles
block
fail
arrayToString
startFiles
arrayToString
endFiles
close
arrayToString
String
l
String
String
s
for
forControl
int
i
i
length
i
block
if
i
block
s
s
l
i
return
s
LuceneTestCase
