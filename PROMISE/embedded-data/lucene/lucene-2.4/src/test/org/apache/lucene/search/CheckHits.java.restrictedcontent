CheckHits
float
EXPLAIN_SCORE_TOLERANCE_DELTA
checkNoMatchExplanations
q
Query
defaultFieldName
String
searcher
Searcher
results
int
String
d
toString
defaultFieldName
Set
ignore
TreeSet
for
forControl
int
i
i
length
i
block
add
Integer
results
i
int
maxDoc
maxDoc
for
forControl
int
doc
doc
maxDoc
doc
block
if
contains
Integer
doc
continue
Explanation
exp
explain
q
doc
assertNotNull
d
doc
exp
assertEquals
d
doc
toString
getValue
checkHitCollector
query
Query
defaultFieldName
String
searcher
Searcher
results
int
Set
correct
TreeSet
for
forControl
int
i
i
length
i
block
add
Integer
results
i
Set
actual
TreeSet
search
query
HitCollector
collect
doc
int
score
float
add
Integer
doc
assertEquals
toString
defaultFieldName
correct
actual
check
query
searcher
checkHits
query
Query
defaultFieldName
String
searcher
Searcher
results
int
if
searcher
IndexSearcher
block
check
query
IndexSearcher
searcher
ScoreDoc
hits
search
scoreDocs
query
Set
correct
TreeSet
for
forControl
int
i
i
length
i
block
add
Integer
results
i
Set
actual
TreeSet
for
forControl
int
i
i
length
i
block
add
Integer
hits
i
doc
assertEquals
toString
defaultFieldName
correct
actual
check
query
searcher
checkDocIds
mes
String
results
int
hits
ScoreDoc
assertEquals
mes
length
length
for
forControl
int
i
i
length
i
block
assertEquals
mes
i
results
i
hits
i
doc
checkHitsQuery
query
Query
hits1
ScoreDoc
hits2
ScoreDoc
results
int
checkDocIds
results
hits1
checkDocIds
results
hits2
checkEqual
query
hits1
hits2
checkEqual
query
Query
hits1
ScoreDoc
hits2
ScoreDoc
float
scoreTolerance
if
length
length
block
fail
length
length
for
forControl
int
i
i
length
i
block
if
hits1
i
doc
hits2
i
doc
block
fail
i
hits2str
hits1
hits2
toString
if
hits1
i
doc
hits2
i
doc
abs
hits1
i
score
hits2
i
score
scoreTolerance
block
fail
i
hits1
i
doc
hits2
i
doc
hits1
i
score
hits2
i
score
toString
hits2str
String
hits1
ScoreDoc
hits2
ScoreDoc
start
int
end
int
StringBuffer
sb
StringBuffer
int
len1
hits1
length
int
len2
hits2
length
if
end
block
end
max
len1
len2
append
append
len1
append
append
len2
append
for
forControl
int
i
start
i
end
i
block
append
append
i
append
if
i
len1
block
append
append
hits1
i
doc
append
append
hits1
i
score
block
append
append
if
i
len2
block
append
append
hits2
i
doc
append
append
hits2
i
score
append
return
toString
topdocsString
String
docs
TopDocs
start
int
end
int
StringBuffer
sb
StringBuffer
append
append
totalHits
append
append
length
append
if
end
end
length
end
min
end
length
for
forControl
int
i
start
i
end
i
block
append
append
i
append
append
scoreDocs
i
doc
append
append
scoreDocs
i
score
append
return
toString
checkExplanations
query
Query
defaultFieldName
String
searcher
Searcher
checkExplanations
query
defaultFieldName
searcher
checkExplanations
query
Query
defaultFieldName
String
searcher
Searcher
deep
boolean
search
query
ExplanationAsserter
query
defaultFieldName
searcher
deep
verifyExplanation
q
String
doc
int
score
float
deep
boolean
expl
Explanation
float
value
getValue
assertEquals
q
doc
score
value
expl
score
value
EXPLAIN_SCORE_TOLERANCE_DELTA
if
deep
return
Explanation
detail
getDetails
if
detail
block
if
length
block
verifyExplanation
q
doc
score
deep
detail
block
float
x
String
descr
getDescription
toLowerCase
boolean
productOf
endsWith
boolean
sumOf
endsWith
boolean
maxOf
endsWith
boolean
maxTimesOthers
if
productOf
sumOf
maxOf
block
int
k1
indexOf
if
k1
block
k1
length
int
k2
indexOf
k1
try
x
parseFloat
substring
trim
k1
k2
if
substring
trim
equals
k2
block
maxTimesOthers
catchClause
e
assertTrue
q
descr
expl
productOf
sumOf
maxOf
maxTimesOthers
float
sum
float
product
float
max
for
forControl
int
i
i
length
i
block
float
dval
detail
i
getValue
verifyExplanation
q
doc
dval
deep
detail
i
product
dval
sum
dval
max
max
max
dval
float
combined
if
productOf
block
combined
product
if
sumOf
block
combined
sum
if
maxOf
block
combined
max
if
maxTimesOthers
block
combined
max
x
sum
max
block
assertTrue
assertEquals
q
combined
value
expl
combined
value
EXPLAIN_SCORE_TOLERANCE_DELTA
ExplanationAssertingSearcher
ExplanationAssertingSearcher
d
Directory
d
ExplanationAssertingSearcher
r
IndexReader
r
checkExplanations
q
Query
search
q
ExplanationAsserter
q
search
TopFieldDocs
query
Query
filter
Filter
n
int
sort
Sort
checkExplanations
query
return
search
query
filter
n
sort
search
query
Query
results
HitCollector
checkExplanations
query
search
query
results
search
query
Query
filter
Filter
results
HitCollector
checkExplanations
query
search
query
filter
results
search
TopDocs
query
Query
filter
Filter
n
int
checkExplanations
query
return
search
query
filter
n
IndexSearcher
ExplanationAsserter
float
SCORE_TOLERANCE_DELTA
Query
q
Searcher
s
String
d
boolean
deep
ExplanationAsserter
q
Query
defaultFieldName
String
s
Searcher
q
defaultFieldName
s
ExplanationAsserter
q
Query
defaultFieldName
String
s
Searcher
deep
boolean
q
q
s
s
d
toString
defaultFieldName
deep
deep
collect
doc
int
score
float
Explanation
exp
try
exp
explain
q
doc
catchClause
e
throw
RuntimeException
d
doc
e
assertNotNull
d
doc
exp
verifyExplanation
d
doc
score
deep
exp
HitCollector
