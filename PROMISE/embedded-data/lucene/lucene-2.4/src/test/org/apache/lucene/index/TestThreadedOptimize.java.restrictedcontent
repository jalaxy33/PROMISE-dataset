TestThreadedOptimize
Analyzer
ANALYZER
SimpleAnalyzer
int
NUM_THREADS
int
NUM_ITER
int
NUM_ITER2
boolean
failed
setFailed
failed
runTest
directory
Directory
autoCommit
boolean
merger
MergeScheduler
IndexWriter
writer
IndexWriter
directory
autoCommit
ANALYZER
setMaxBufferedDocs
if
merger
setMergeScheduler
merger
for
forControl
int
iter
iter
NUM_ITER
iter
block
int
iterFinal
iter
setMergeFactor
for
forControl
int
i
i
i
block
Document
d
Document
add
Field
toString
i
YES
NOT_ANALYZED
add
Field
intToEnglish
i
NO
ANALYZED
addDocument
d
setMergeFactor
int
docCount
docCount
Thread
threads
Thread
NUM_THREADS
for
forControl
int
i
i
NUM_THREADS
i
block
int
iFinal
i
IndexWriter
writerFinal
writer
threads
i
Thread
run
try
for
forControl
int
j
j
NUM_ITER2
j
block
optimize
for
forControl
int
k
k
iFinal
k
block
Document
d
Document
add
Field
iterFinal
iFinal
j
k
YES
NOT_ANALYZED
add
Field
intToEnglish
iFinal
k
NO
ANALYZED
addDocument
d
for
forControl
int
k
k
iFinal
k
deleteDocuments
Term
iterFinal
iFinal
j
k
optimize
catchClause
t
setFailed
println
currentThread
getName
printStackTrace
out
for
forControl
int
i
i
NUM_THREADS
i
threads
i
start
for
forControl
int
i
i
NUM_THREADS
i
threads
i
join
assertTrue
failed
int
expectedDocCount
int
iter
NUM_ITER2
NUM_THREADS
NUM_THREADS
assertEquals
expectedDocCount
docCount
if
autoCommit
block
close
writer
IndexWriter
directory
autoCommit
ANALYZER
setMaxBufferedDocs
IndexReader
reader
open
directory
assertTrue
isOptimized
assertEquals
expectedDocCount
numDocs
close
close
testThreadedOptimize
Directory
directory
MockRAMDirectory
runTest
directory
SerialMergeScheduler
runTest
directory
SerialMergeScheduler
runTest
directory
ConcurrentMergeScheduler
runTest
directory
ConcurrentMergeScheduler
close
String
tempDir
getProperty
if
tempDir
throw
IOException
String
dirName
tempDir
directory
getDirectory
dirName
runTest
directory
SerialMergeScheduler
runTest
directory
SerialMergeScheduler
runTest
directory
ConcurrentMergeScheduler
runTest
directory
ConcurrentMergeScheduler
close
rmDir
dirName
LuceneTestCase
