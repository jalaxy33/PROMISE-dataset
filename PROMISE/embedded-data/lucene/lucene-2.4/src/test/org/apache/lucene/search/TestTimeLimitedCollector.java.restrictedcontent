TestTimeLimitedCollector
int
SLOW_DOWN
long
TIME_ALLOWED
SLOW_DOWN
double
MULTI_THREAD_SLACK
int
N_DOCS
int
N_THREADS
Searcher
searcher
String
FIELD_NAME
Query
query
TestTimeLimitedCollector
name
String
name
setUp
String
docText
Directory
directory
RAMDirectory
IndexWriter
iw
IndexWriter
directory
WhitespaceAnalyzer
UNLIMITED
for
forControl
int
i
i
N_DOCS
i
block
add
docText
i
length
iw
close
searcher
IndexSearcher
directory
String
qtxt
for
forControl
int
i
i
length
i
block
qtxt
docText
i
QueryParser
queryParser
QueryParser
FIELD_NAME
WhitespaceAnalyzer
query
parse
qtxt
search
query
tearDown
close
add
value
String
iw
IndexWriter
Document
d
Document
add
Field
FIELD_NAME
value
NO
ANALYZED
addDocument
d
search
collector
HitCollector
search
query
collector
testSearch
doTestSearch
doTestSearch
int
totalResults
int
totalTLCResults
try
MyHitCollector
myHc
MyHitCollector
search
myHc
totalResults
hitCount
myHc
MyHitCollector
long
oneHour
HitCollector
tlCollector
createTimedCollector
myHc
oneHour
search
tlCollector
totalTLCResults
hitCount
catchClause
e
assertTrue
e
assertEquals
totalResults
totalTLCResults
createTimedCollector
HitCollector
hc
MyHitCollector
timeAllowed
long
greedy
boolean
TimeLimitedCollector
res
TimeLimitedCollector
hc
timeAllowed
setGreedy
greedy
return
res
testTimeoutGreedy
doTestTimeout
testTimeoutNotGreedy
doTestTimeout
doTestTimeout
multiThreaded
boolean
greedy
boolean
MyHitCollector
myHc
MyHitCollector
setSlowDown
SLOW_DOWN
HitCollector
tlCollector
createTimedCollector
myHc
TIME_ALLOWED
greedy
TimeLimitedCollector
TimeExceededException
timoutException
try
search
tlCollector
catchClause
x
timoutException
x
catchClause
e
assertTrue
e
assertNotNull
timoutException
int
exceptionDoc
getLastDocCollected
int
lastCollected
getLastDocCollected
assertTrue
exceptionDoc
if
greedy
block
assertTrue
greedy
exceptionDoc
lastCollected
exceptionDoc
lastCollected
assertTrue
hitCount
block
assertTrue
greedy
exceptionDoc
lastCollected
exceptionDoc
lastCollected
assertEquals
getTimeAllowed
TIME_ALLOWED
assertTrue
getTimeElapsed
TIME_ALLOWED
getResolution
getTimeElapsed
TIME_ALLOWED
getResolution
if
getTimeElapsed
maxTime
multiThreaded
block
println
exceptionDoc
getTimeAllowed
getTimeElapsed
maxTimeStr
multiThreaded
maxTime
long
multiThreaded
boolean
long
res
getResolution
TIME_ALLOWED
SLOW_DOWN
if
multiThreaded
block
res
MULTI_THREAD_SLACK
return
res
maxTimeStr
String
multiThreaded
boolean
String
s
getResolution
TIME_ALLOWED
SLOW_DOWN
if
multiThreaded
block
s
MULTI_THREAD_SLACK
s
return
maxTime
multiThreaded
s
testModifyResolution
try
long
resolution
DEFAULT_RESOLUTION
setResolution
resolution
assertEquals
resolution
getResolution
doTestTimeout
resolution
setResolution
resolution
assertEquals
resolution
getResolution
doTestTimeout
resolution
DEFAULT_RESOLUTION
setResolution
resolution
assertEquals
resolution
getResolution
doTestTimeout
setResolution
DEFAULT_RESOLUTION
testSearchMultiThreaded
doTestMultiThreads
testTimeoutMultiThreaded
doTestMultiThreads
doTestMultiThreads
withTimeout
boolean
Thread
threadArray
Thread
N_THREADS
BitSet
success
BitSet
N_THREADS
for
forControl
int
i
i
length
i
block
int
num
i
threadArray
num
Thread
run
if
withTimeout
block
doTestTimeout
block
doTestSearch
synchronized
success
set
num
for
forControl
int
i
i
length
i
block
threadArray
i
start
boolean
interrupted
for
forControl
int
i
i
length
i
block
try
threadArray
i
join
catchClause
e
interrupted
if
interrupted
block
currentThread
interrupt
assertEquals
N_THREADS
cardinality
MyHitCollector
BitSet
bits
BitSet
int
slowdown
int
lastDocCollected
setSlowDown
milliseconds
int
slowdown
milliseconds
collect
doc
int
score
float
if
slowdown
block
try
sleep
slowdown
catchClause
x
println
x
set
doc
lastDocCollected
doc
hitCount
int
return
cardinality
getLastDocCollected
int
return
lastDocCollected
HitCollector
LuceneTestCase
