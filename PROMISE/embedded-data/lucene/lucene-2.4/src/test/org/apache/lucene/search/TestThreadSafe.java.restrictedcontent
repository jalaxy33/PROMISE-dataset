TestThreadSafe
Random
r
Random
Directory
dir1
Directory
dir2
IndexReader
ir1
IndexReader
ir2
String
failure
Thr
int
iter
Random
rand
Thr
iter
int
rand
Random
level
int
iter
iter
rand
rand
run
try
for
forControl
int
i
i
iter
i
block
switch
nextInt
case
loadDoc
ir1
break
catchClause
th
failure
toString
fail
failure
loadDoc
ir
IndexReader
Document
doc
document
nextInt
maxDoc
FieldSelector
accept
FieldSelectorResult
fieldName
String
switch
nextInt
case
return
LAZY_LOAD
case
return
LOAD
case
return
LOAD
List
fields
getFields
for
forControl
int
i
i
size
i
block
Fieldable
f
Fieldable
get
i
validateField
f
Thread
validateField
f
Fieldable
String
val
stringValue
if
startsWith
endsWith
block
throw
RuntimeException
toString
val
String
words
split
buildDir
dir
Directory
nDocs
int
maxFields
int
maxFieldLen
int
IndexWriter
iw
IndexWriter
dir
WhitespaceAnalyzer
LIMITED
setMaxBufferedDocs
for
forControl
int
j
j
nDocs
j
block
Document
d
Document
int
nFields
nextInt
maxFields
for
forControl
int
i
i
nFields
i
block
int
flen
nextInt
maxFieldLen
StringBuffer
sb
StringBuffer
while
length
flen
append
append
words
nextInt
length
append
Field
Store
store
YES
Field
Index
index
ANALYZED
add
Field
i
toString
store
index
addDocument
d
close
doTest
iter
int
nThreads
int
Thr
tarr
Thr
nThreads
for
forControl
int
i
i
nThreads
i
block
tarr
i
Thr
iter
Random
tarr
i
start
for
forControl
int
i
i
nThreads
i
block
tarr
i
join
if
failure
block
fail
failure
testLazyLoadThreadSafety
dir1
RAMDirectory
buildDir
dir1
for
forControl
int
i
i
i
block
ir1
open
dir1
doTest
LuceneTestCase
