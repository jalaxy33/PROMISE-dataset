TestScorerPerf
Random
r
Random
boolean
validate
BitSet
sets
Term
terms
IndexSearcher
s
createDummySearcher
RAMDirectory
rd
RAMDirectory
IndexWriter
iw
IndexWriter
rd
WhitespaceAnalyzer
LIMITED
close
s
IndexSearcher
rd
createRandomTerms
nDocs
int
nTerms
int
power
double
dir
Directory
int
freq
int
nTerms
terms
Term
nTerms
for
forControl
int
i
i
nTerms
i
block
int
f
nTerms
i
freq
i
int
ceil
pow
f
power
terms
i
Term
toString
char
i
IndexWriter
iw
IndexWriter
dir
WhitespaceAnalyzer
LIMITED
for
forControl
int
i
i
nDocs
i
block
Document
d
Document
for
forControl
int
j
j
nTerms
j
block
if
nextInt
freq
j
block
add
Field
terms
j
text
NO
NOT_ANALYZED
addDocument
d
optimize
close
randBitSet
BitSet
sz
int
numBitsToSet
int
BitSet
set
BitSet
sz
for
forControl
int
i
i
numBitsToSet
i
block
set
nextInt
sz
return
set
randBitSets
BitSet
numSets
int
setSize
int
BitSet
sets
BitSet
numSets
for
forControl
int
i
i
length
i
block
sets
i
randBitSet
setSize
nextInt
setSize
return
sets
CountingHitCollector
int
count
int
sum
collect
doc
int
score
float
count
sum
doc
getCount
int
return
count
getSum
int
return
sum
HitCollector
MatchingHitCollector
BitSet
answer
int
pos
MatchingHitCollector
answer
BitSet
answer
answer
collect
doc
int
score
float
pos
nextSetBit
pos
if
pos
doc
block
throw
RuntimeException
pos
doc
collect
doc
score
CountingHitCollector
addClause
BitSet
bq
BooleanQuery
result
BitSet
BitSet
rnd
sets
nextInt
length
Query
q
ConstantScoreQuery
Filter
getDocIdSet
DocIdSet
reader
IndexReader
return
DocIdBitSet
rnd
add
q
MUST
if
validate
block
if
result
result
BitSet
clone
and
rnd
return
result
doConjunctions
int
iter
int
maxClauses
int
int
ret
for
forControl
int
i
i
iter
i
block
int
nClauses
nextInt
maxClauses
BooleanQuery
bq
BooleanQuery
BitSet
result
for
forControl
int
j
j
nClauses
j
block
result
addClause
bq
result
CountingHitCollector
hc
validate
MatchingHitCollector
result
CountingHitCollector
search
bq
hc
ret
getSum
if
validate
assertEquals
cardinality
getCount
return
ret
doNestedConjunctions
int
iter
int
maxOuterClauses
int
maxClauses
int
int
ret
long
nMatches
for
forControl
int
i
i
iter
i
block
int
oClauses
nextInt
maxOuterClauses
BooleanQuery
oq
BooleanQuery
BitSet
result
for
forControl
int
o
o
oClauses
o
block
int
nClauses
nextInt
maxClauses
BooleanQuery
bq
BooleanQuery
for
forControl
int
j
j
nClauses
j
block
result
addClause
bq
result
add
bq
MUST
CountingHitCollector
hc
validate
MatchingHitCollector
result
CountingHitCollector
search
oq
hc
nMatches
getCount
ret
getSum
if
validate
assertEquals
cardinality
getCount
println
nMatches
iter
return
ret
doTermConjunctions
int
s
IndexSearcher
termsInIndex
int
maxClauses
int
iter
int
int
ret
long
nMatches
for
forControl
int
i
i
iter
i
block
int
nClauses
nextInt
maxClauses
BooleanQuery
bq
BooleanQuery
BitSet
termflag
BitSet
termsInIndex
for
forControl
int
j
j
nClauses
j
block
int
tnum
tnum
nextInt
termsInIndex
if
get
tnum
tnum
nextClearBit
tnum
if
tnum
tnum
termsInIndex
tnum
nextClearBit
set
tnum
Query
tq
TermQuery
terms
tnum
add
tq
MUST
CountingHitCollector
hc
CountingHitCollector
search
bq
hc
nMatches
getCount
ret
getSum
println
nMatches
iter
return
ret
doNestedTermConjunctions
int
s
IndexSearcher
termsInIndex
int
maxOuterClauses
int
maxClauses
int
iter
int
int
ret
long
nMatches
for
forControl
int
i
i
iter
i
block
int
oClauses
nextInt
maxOuterClauses
BooleanQuery
oq
BooleanQuery
for
forControl
int
o
o
oClauses
o
block
int
nClauses
nextInt
maxClauses
BooleanQuery
bq
BooleanQuery
BitSet
termflag
BitSet
termsInIndex
for
forControl
int
j
j
nClauses
j
block
int
tnum
tnum
nextInt
termsInIndex
if
get
tnum
tnum
nextClearBit
tnum
if
tnum
tnum
tnum
nextClearBit
set
tnum
Query
tq
TermQuery
terms
tnum
add
tq
MUST
add
bq
MUST
CountingHitCollector
hc
CountingHitCollector
search
oq
hc
nMatches
getCount
ret
getSum
println
nMatches
iter
return
ret
doSloppyPhrase
int
s
IndexSearcher
termsInIndex
int
maxClauses
int
iter
int
int
ret
for
forControl
int
i
i
iter
i
block
int
nClauses
nextInt
maxClauses
PhraseQuery
q
PhraseQuery
for
forControl
int
j
j
nClauses
j
block
int
tnum
nextInt
termsInIndex
add
Term
toString
char
tnum
j
setSlop
termsInIndex
CountingHitCollector
hc
CountingHitCollector
search
q
hc
ret
getSum
return
ret
testConjunctions
createDummySearcher
validate
sets
randBitSets
doConjunctions
doNestedConjunctions
close
LuceneTestCase
