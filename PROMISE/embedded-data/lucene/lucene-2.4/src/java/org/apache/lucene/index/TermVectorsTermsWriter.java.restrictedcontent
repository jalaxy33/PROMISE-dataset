TermVectorsTermsWriter
DocumentsWriter
docWriter
TermVectorsWriter
termVectorsWriter
PerDoc
docFreeList
PerDoc
int
freeCount
IndexOutput
tvx
IndexOutput
tvd
IndexOutput
tvf
int
lastDocID
TermVectorsTermsWriter
docWriter
DocumentsWriter
docWriter
docWriter
addThread
TermsHashConsumerPerThread
termsHashPerThread
TermsHashPerThread
return
TermVectorsTermsWriterPerThread
termsHashPerThread
createPostings
postings
RawPostingList
start
int
count
int
int
end
start
count
for
forControl
int
i
start
i
end
i
postings
i
PostingList
flush
threadsAndFields
Map
state
DocumentsWriter
FlushState
if
tvx
block
if
numDocsInStore
fill
numDocsInStore
getDocStoreOffset
flush
flush
flush
Iterator
it
entrySet
iterator
while
hasNext
block
Map
Entry
entry
Map
Entry
next
Iterator
it2
Collection
getValue
while
hasNext
block
TermVectorsTermsWriterPerField
perField
TermVectorsTermsWriterPerField
next
reset
shrinkHash
TermVectorsTermsWriterPerThread
perThread
TermVectorsTermsWriterPerThread
getKey
reset
closeDocStore
state
DocumentsWriter
FlushState
if
tvx
block
fill
numDocsInStore
getDocStoreOffset
close
close
close
tvx
assert
docStoreSegmentName
if
numDocsInStore
fileLength
docStoreSegmentName
VECTORS_INDEX_EXTENSION
throw
RuntimeException
numDocsInStore
fileLength
docStoreSegmentName
VECTORS_INDEX_EXTENSION
docStoreSegmentName
VECTORS_INDEX_EXTENSION
add
docStoreSegmentName
VECTORS_INDEX_EXTENSION
add
docStoreSegmentName
VECTORS_FIELDS_EXTENSION
add
docStoreSegmentName
VECTORS_DOCUMENTS_EXTENSION
removeOpenFile
docStoreSegmentName
VECTORS_INDEX_EXTENSION
removeOpenFile
docStoreSegmentName
VECTORS_FIELDS_EXTENSION
removeOpenFile
docStoreSegmentName
VECTORS_DOCUMENTS_EXTENSION
lastDocID
int
allocCount
getPerDoc
PerDoc
if
freeCount
block
allocCount
if
allocCount
length
block
assert
allocCount
length
docFreeList
PerDoc
getNextSize
allocCount
return
PerDoc
return
docFreeList
freeCount
fill
docID
int
int
docStoreOffset
getDocStoreOffset
int
end
docID
docStoreOffset
if
lastDocID
end
block
long
tvfPosition
getFilePointer
while
lastDocID
end
block
writeLong
getFilePointer
writeVInt
writeLong
tvfPosition
lastDocID
initTermVectorsWriter
if
tvx
block
String
docStoreSegment
getDocStoreSegment
if
docStoreSegment
return
assert
docStoreSegment
tvx
createOutput
docStoreSegment
VECTORS_INDEX_EXTENSION
tvd
createOutput
docStoreSegment
VECTORS_DOCUMENTS_EXTENSION
tvf
createOutput
docStoreSegment
VECTORS_FIELDS_EXTENSION
writeInt
FORMAT_CURRENT
writeInt
FORMAT_CURRENT
writeInt
FORMAT_CURRENT
addOpenFile
docStoreSegment
VECTORS_INDEX_EXTENSION
addOpenFile
docStoreSegment
VECTORS_FIELDS_EXTENSION
addOpenFile
docStoreSegment
VECTORS_DOCUMENTS_EXTENSION
lastDocID
finishDocument
perDoc
PerDoc
assert
testPoint
initTermVectorsWriter
fill
docID
writeLong
getFilePointer
writeLong
getFilePointer
writeVInt
numVectorFields
if
numVectorFields
block
for
forControl
int
i
i
numVectorFields
i
writeVInt
fieldNumbers
i
assert
fieldPointers
long
lastPos
fieldPointers
for
forControl
int
i
i
numVectorFields
i
block
long
pos
fieldPointers
i
writeVLong
pos
lastPos
lastPos
pos
writeTo
tvf
reset
numVectorFields
assert
lastDocID
docID
getDocStoreOffset
lastDocID
free
perDoc
assert
testPoint
freeRAM
boolean
return
abort
if
tvx
block
try
close
catchClause
t
tvx
if
tvd
block
try
close
catchClause
t
tvd
if
tvf
block
try
close
catchClause
t
tvf
lastDocID
free
doc
PerDoc
assert
freeCount
length
docFreeList
freeCount
doc
PerDoc
RAMOutputStream
tvf
RAMOutputStream
int
numVectorFields
int
fieldNumbers
int
long
fieldPointers
long
reset
reset
numVectorFields
abort
reset
free
addField
fieldNumber
int
if
numVectorFields
length
block
fieldNumbers
grow
fieldNumbers
fieldPointers
grow
fieldPointers
fieldNumbers
numVectorFields
fieldNumber
fieldPointers
numVectorFields
getFilePointer
numVectorFields
sizeInBytes
long
return
sizeInBytes
finish
finishDocument
DocumentsWriter
DocWriter
PostingList
int
freq
int
lastOffset
int
lastPosition
RawPostingList
bytesPerPosting
int
return
BYTES_SIZE
INT_NUM_BYTE
TermsHashConsumer
