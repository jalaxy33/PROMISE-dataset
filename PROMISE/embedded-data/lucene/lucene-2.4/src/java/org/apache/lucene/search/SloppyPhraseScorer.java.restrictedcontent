SloppyPhraseScorer
int
slop
PhrasePositions
repeats
PhrasePositions
tmpPos
boolean
checkedRepeats
SloppyPhraseScorer
weight
Weight
tps
TermPositions
offsets
int
similarity
Similarity
slop
int
norms
byte
weight
tps
offsets
similarity
norms
slop
slop
phraseFreq
float
int
end
initPhrasePositions
float
freq
boolean
done
end
while
done
block
PhrasePositions
pp
PhrasePositions
pop
int
start
position
int
next
PhrasePositions
top
boolean
tpsDiffer
for
forControl
int
pos
start
pos
next
tpsDiffer
pos
position
block
if
pos
next
tpsDiffer
start
pos
if
nextPosition
block
done
break
PhrasePositions
pp2
tpsDiffer
repeats
pp2
termPositionsDiffer
pp
if
pp2
pp2
pp
block
pp
flip
pp
pp2
int
matchLength
end
start
if
matchLength
slop
freq
getSimilarity
sloppyFreq
matchLength
if
position
end
end
position
put
pp
return
freq
flip
PhrasePositions
pp
PhrasePositions
pp2
PhrasePositions
int
n
PhrasePositions
pp3
while
pp3
PhrasePositions
pop
pp2
block
tmpPos
n
pp3
for
forControl
n
n
n
block
insert
tmpPos
n
put
pp
return
pp2
initPhrasePositions
int
int
end
if
checkedRepeats
repeats
block
clear
for
forControl
PhrasePositions
pp
first
pp
pp
next
block
firstPosition
if
position
end
end
position
put
pp
return
end
for
forControl
PhrasePositions
pp
first
pp
pp
next
firstPosition
if
checkedRepeats
block
checkedRepeats
HashMap
m
for
forControl
PhrasePositions
pp
first
pp
pp
next
block
int
tpPos
position
offset
for
forControl
PhrasePositions
pp2
next
pp2
pp2
next
block
int
tpPos2
position
offset
if
tpPos2
tpPos
block
if
m
m
HashMap
repeats
repeats
put
pp
put
pp2
if
m
repeats
PhrasePositions
keySet
toArray
PhrasePositions
if
repeats
block
for
forControl
int
i
i
length
i
block
PhrasePositions
pp
repeats
i
PhrasePositions
pp2
while
pp2
termPositionsDiffer
pp
block
if
nextPosition
return
clear
for
forControl
PhrasePositions
pp
first
pp
pp
next
block
if
position
end
end
position
put
pp
if
repeats
block
tmpPos
PhrasePositions
size
return
end
termPositionsDiffer
PhrasePositions
pp
PhrasePositions
int
tpPos
position
offset
for
forControl
int
i
i
length
i
block
PhrasePositions
pp2
repeats
i
if
pp2
pp
continue
int
tpPos2
position
offset
if
tpPos2
tpPos
return
offset
offset
pp
pp2
return
PhraseScorer
