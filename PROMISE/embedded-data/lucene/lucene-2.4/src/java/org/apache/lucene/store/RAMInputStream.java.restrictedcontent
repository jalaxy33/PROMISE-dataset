RAMInputStream
int
BUFFER_SIZE
BUFFER_SIZE
RAMFile
file
long
length
byte
currentBuffer
int
currentBufferIndex
int
bufferPosition
long
bufferStart
int
bufferLength
RAMInputStream
f
RAMFile
file
f
length
length
if
length
BUFFER_SIZE
MAX_VALUE
block
throw
IOException
length
currentBufferIndex
currentBuffer
close
length
long
return
length
readByte
byte
if
bufferPosition
bufferLength
block
currentBufferIndex
switchCurrentBuffer
return
currentBuffer
bufferPosition
readBytes
b
byte
offset
int
len
int
while
len
block
if
bufferPosition
bufferLength
block
currentBufferIndex
switchCurrentBuffer
int
remainInBuffer
bufferLength
bufferPosition
int
bytesToCopy
len
remainInBuffer
len
remainInBuffer
arraycopy
currentBuffer
bufferPosition
b
offset
bytesToCopy
offset
bytesToCopy
len
bytesToCopy
bufferPosition
bytesToCopy
switchCurrentBuffer
enforceEOF
boolean
if
currentBufferIndex
numBuffers
block
if
enforceEOF
throw
IOException
block
currentBufferIndex
bufferPosition
BUFFER_SIZE
block
currentBuffer
byte
getBuffer
currentBufferIndex
bufferPosition
bufferStart
long
BUFFER_SIZE
long
currentBufferIndex
long
buflen
length
bufferStart
bufferLength
buflen
BUFFER_SIZE
BUFFER_SIZE
int
buflen
getFilePointer
long
return
currentBufferIndex
bufferStart
bufferPosition
seek
pos
long
if
currentBuffer
pos
bufferStart
pos
bufferStart
BUFFER_SIZE
block
currentBufferIndex
int
pos
BUFFER_SIZE
switchCurrentBuffer
bufferPosition
int
pos
BUFFER_SIZE
IndexInput
Cloneable
