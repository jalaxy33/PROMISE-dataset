NormsWriter
byte
defaultNorm
encodeNorm
FieldInfos
fieldInfos
addThread
InvertedDocEndConsumerPerThread
docInverterPerThread
DocInverterPerThread
return
NormsWriterPerThread
docInverterPerThread
abort
files
files
Collection
setFieldInfos
fieldInfos
FieldInfos
fieldInfos
fieldInfos
flush
threadsAndFields
Map
state
DocumentsWriter
FlushState
Map
byField
HashMap
Iterator
it
entrySet
iterator
while
hasNext
block
Map
Entry
entry
Map
Entry
next
Collection
fields
Collection
getValue
Iterator
fieldsIt
iterator
while
hasNext
block
NormsWriterPerField
perField
NormsWriterPerField
next
if
upto
block
List
l
List
get
fieldInfo
if
l
block
l
ArrayList
put
fieldInfo
l
add
perField
remove
String
normsFileName
segmentName
NORMS_EXTENSION
add
normsFileName
IndexOutput
normsOut
createOutput
normsFileName
try
writeBytes
NORMS_HEADER
length
int
numField
size
int
normCount
for
forControl
int
fieldNumber
fieldNumber
numField
fieldNumber
block
FieldInfo
fieldInfo
fieldInfo
fieldNumber
List
toMerge
List
get
fieldInfo
int
upto
if
toMerge
block
int
numFields
size
normCount
NormsWriterPerField
fields
NormsWriterPerField
numFields
int
uptos
int
numFields
for
forControl
int
j
j
numFields
j
fields
j
NormsWriterPerField
get
j
int
numLeft
numFields
while
numLeft
block
assert
uptos
fields
docIDs
length
uptos
fields
int
minLoc
int
minDocID
fields
docIDs
uptos
for
forControl
int
j
j
numLeft
j
block
int
docID
fields
j
docIDs
uptos
j
if
docID
minDocID
block
minDocID
docID
minLoc
j
assert
minDocID
numDocsInRAM
for
forControl
upto
minDocID
upto
writeByte
defaultNorm
writeByte
fields
minLoc
norms
uptos
minLoc
uptos
upto
if
uptos
minLoc
fields
minLoc
upto
block
fields
minLoc
reset
if
minLoc
numLeft
block
fields
minLoc
fields
numLeft
uptos
minLoc
uptos
numLeft
numLeft
for
forControl
upto
numDocsInRAM
upto
writeByte
defaultNorm
if
isIndexed
omitNorms
block
normCount
for
forControl
upto
numDocsInRAM
upto
writeByte
defaultNorm
assert
normCount
numDocsInRAM
getFilePointer
normCount
numDocsInRAM
getFilePointer
close
closeDocStore
state
DocumentsWriter
FlushState
InvertedDocEndConsumer
