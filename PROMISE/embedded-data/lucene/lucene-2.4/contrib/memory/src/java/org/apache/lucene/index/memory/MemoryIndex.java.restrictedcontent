MemoryIndex
HashMap
fields
HashMap
Map
Entry
sortedFields
int
stride
float
docBoost
long
serialVersionUID
boolean
DEBUG
Comparator
termComparator
Comparator
compare
int
o1
Object
o2
Object
if
o1
Map
Entry
o1
Map
Entry
o1
if
o2
Map
Entry
o2
Map
Entry
o2
if
o1
o2
return
return
String
o1
MemoryIndex
MemoryIndex
storeOffsets
boolean
stride
storeOffsets
addField
fieldName
String
text
String
analyzer
Analyzer
if
fieldName
throw
IllegalArgumentException
if
text
throw
IllegalArgumentException
if
analyzer
throw
IllegalArgumentException
TokenStream
stream
if
analyzer
PatternAnalyzer
block
stream
PatternAnalyzer
analyzer
block
stream
tokenStream
fieldName
PatternAnalyzer
FastStringReader
text
addField
fieldName
stream
keywordTokenStream
TokenStream
keywords
Collection
if
keywords
throw
IllegalArgumentException
return
TokenStream
Iterator
iter
iterator
int
start
next
Token
reusableToken
Token
assert
reusableToken
if
hasNext
return
Object
obj
next
if
obj
throw
IllegalArgumentException
String
term
toString
reinit
term
start
start
termLength
start
length
return
reusableToken
addField
fieldName
String
stream
TokenStream
addField
fieldName
stream
addField
fieldName
String
stream
TokenStream
boost
float
try
if
fieldName
throw
IllegalArgumentException
if
stream
throw
IllegalArgumentException
if
boost
throw
IllegalArgumentException
if
get
fieldName
throw
IllegalArgumentException
HashMap
terms
HashMap
int
numTokens
int
pos
Token
reusableToken
Token
for
forControl
Token
nextToken
next
reusableToken
nextToken
nextToken
next
reusableToken
block
String
term
term
if
length
continue
numTokens
pos
getPositionIncrement
ArrayIntList
positions
ArrayIntList
get
term
if
positions
block
positions
ArrayIntList
stride
put
term
positions
if
stride
block
add
pos
block
add
pos
startOffset
endOffset
if
numTokens
block
boost
boost
docBoost
put
fieldName
Info
terms
numTokens
boost
sortedFields
catchClause
e
throw
RuntimeException
e
try
if
stream
close
catchClause
e2
throw
RuntimeException
e2
createSearcher
IndexSearcher
MemoryIndexReader
reader
MemoryIndexReader
IndexSearcher
searcher
IndexSearcher
reader
setSearcher
searcher
return
searcher
search
float
query
Query
if
query
throw
IllegalArgumentException
Searcher
searcher
createSearcher
try
float
scores
float
search
query
HitCollector
collect
doc
int
score
float
scores
score
float
score
scores
return
score
catchClause
e
throw
RuntimeException
e
getMemorySize
int
int
PTR
PTR
int
INT
INT
int
size
size
sizeOfObject
PTR
INT
if
sortedFields
size
sizeOfObjectArray
length
size
sizeOfHashMap
size
Iterator
iter
entrySet
iterator
while
hasNext
block
Map
Entry
entry
Map
Entry
next
Info
info
Info
getValue
size
sizeOfObject
INT
PTR
if
sortedTerms
size
sizeOfObjectArray
length
int
len
size
size
sizeOfHashMap
len
Iterator
iter2
entrySet
iterator
while
len
block
Map
Entry
e
Map
Entry
next
size
sizeOfObject
PTR
INT
ArrayIntList
positions
ArrayIntList
getValue
size
sizeOfArrayIntList
size
return
size
numPositions
int
positions
ArrayIntList
return
size
stride
sortFields
if
sortedFields
sortedFields
sort
fields
sort
Map
Entry
map
HashMap
int
size
size
Map
Entry
entries
Map
Entry
size
Iterator
iter
entrySet
iterator
for
forControl
int
i
i
size
i
block
entries
i
Map
Entry
next
if
size
sort
entries
termComparator
return
entries
toString
String
StringBuffer
result
StringBuffer
sortFields
int
sumChars
int
sumPositions
int
sumTerms
for
forControl
int
i
i
length
i
block
Map
Entry
entry
sortedFields
i
String
fieldName
String
getKey
Info
info
Info
getValue
sortTerms
append
fieldName
int
numChars
int
numPositions
for
forControl
int
j
j
length
j
block
Map
Entry
e
sortedTerms
j
String
term
String
getKey
ArrayIntList
positions
ArrayIntList
getValue
append
term
numPositions
positions
append
toString
stride
append
numPositions
numPositions
positions
numChars
length
append
length
append
numPositions
append
numChars
append
sumPositions
numPositions
sumChars
numChars
sumTerms
length
append
length
append
sumTerms
append
sumPositions
append
sumChars
return
toString
Info
HashMap
terms
Map
Entry
sortedTerms
int
numTokens
float
boost
Term
template
long
serialVersionUID
Info
terms
HashMap
numTokens
int
boost
float
terms
terms
numTokens
numTokens
boost
boost
sortTerms
if
sortedTerms
sortedTerms
sort
terms
getPositions
ArrayIntList
term
String
return
ArrayIntList
get
term
getPositions
ArrayIntList
pos
int
return
ArrayIntList
sortedTerms
pos
getValue
getBoost
float
return
boost
Serializable
ArrayIntList
int
elements
int
size
long
serialVersionUID
ArrayIntList
ArrayIntList
initialCapacity
int
elements
int
initialCapacity
add
elem
int
if
size
length
ensureCapacity
size
elements
size
elem
add
pos
int
start
int
end
int
if
size
length
ensureCapacity
size
elements
size
pos
elements
size
start
elements
size
end
size
get
int
index
int
if
index
size
throwIndex
index
return
elements
index
size
int
return
size
toArray
int
stride
int
int
arr
int
size
stride
if
stride
block
arraycopy
elements
arr
size
block
for
forControl
int
i
j
j
size
i
j
stride
arr
i
elements
j
return
arr
ensureCapacity
minCapacity
int
int
newCapacity
max
minCapacity
length
int
newElements
int
newCapacity
arraycopy
elements
newElements
size
elements
newElements
throwIndex
index
int
throw
IndexOutOfBoundsException
index
size
toString
String
stride
int
int
s
size
stride
int
len
min
s
StringBuffer
buf
StringBuffer
len
append
for
forControl
int
i
i
len
i
block
append
get
i
stride
if
i
len
append
if
len
s
append
append
return
toString
Serializable
Term
MATCH_ALL_TERM
Term
MemoryIndexReader
Searcher
searcher
MemoryIndexReader
finalize
getInfo
Info
fieldName
String
return
Info
get
fieldName
getInfo
Info
pos
int
return
Info
sortedFields
pos
getValue
docFreq
int
term
Term
Info
info
getInfo
field
int
freq
if
info
freq
getPositions
text
if
DEBUG
println
term
freq
return
freq
terms
TermEnum
if
DEBUG
println
return
terms
MATCH_ALL_TERM
terms
TermEnum
term
Term
if
DEBUG
println
term
int
i
int
j
sortFields
if
length
sortedFields
getKey
field
block
j
block
j
binarySearch
sortedFields
field
termComparator
if
j
block
j
j
i
if
j
length
getInfo
sortTerms
j
block
Info
info
getInfo
j
sortTerms
i
binarySearch
sortedTerms
text
termComparator
if
i
block
i
i
if
i
length
block
j
i
if
j
length
getInfo
sortTerms
j
int
ix
i
int
jx
j
return
TermEnum
int
i
ix
int
j
jx
next
boolean
if
DEBUG
println
if
j
length
return
Info
info
getInfo
j
if
i
length
return
j
i
if
j
length
return
getInfo
sortTerms
j
return
term
Term
if
DEBUG
println
i
if
j
length
return
Info
info
getInfo
j
if
i
length
return
return
createTerm
info
j
String
sortedTerms
i
getKey
docFreq
int
if
DEBUG
println
if
j
length
return
Info
info
getInfo
j
if
i
length
return
return
numPositions
getPositions
i
close
if
DEBUG
println
createTerm
Term
info
Info
pos
int
text
String
Term
template
template
if
template
block
String
fieldName
String
sortedFields
pos
getKey
template
Term
fieldName
template
template
return
createTerm
text
termPositions
TermPositions
if
DEBUG
println
return
TermPositions
boolean
hasNext
int
cursor
ArrayIntList
current
seek
term
Term
if
DEBUG
println
term
Info
info
getInfo
field
current
info
getPositions
text
hasNext
current
cursor
seek
termEnum
TermEnum
if
DEBUG
println
seek
term
doc
int
if
DEBUG
println
return
freq
int
int
freq
current
numPositions
current
if
DEBUG
println
freq
return
freq
next
boolean
if
DEBUG
println
current
hasNext
boolean
next
hasNext
hasNext
return
next
read
int
docs
int
freqs
int
if
DEBUG
println
length
if
hasNext
return
hasNext
docs
freqs
freq
return
skipTo
boolean
target
int
if
DEBUG
println
target
return
next
close
if
DEBUG
println
nextPosition
int
int
pos
get
cursor
cursor
stride
if
DEBUG
println
pos
return
pos
getPayloadLength
int
throw
UnsupportedOperationException
getPayload
byte
data
byte
offset
int
throw
UnsupportedOperationException
isPayloadAvailable
boolean
return
termDocs
TermDocs
if
DEBUG
println
return
termPositions
getTermFreqVectors
TermFreqVector
docNumber
int
if
DEBUG
println
TermFreqVector
vectors
TermFreqVector
size
Iterator
iter
keySet
iterator
for
forControl
int
i
i
length
i
block
String
fieldName
String
next
vectors
i
getTermFreqVector
docNumber
fieldName
return
vectors
getTermFreqVector
docNumber
int
mapper
TermVectorMapper
if
DEBUG
println
for
forControl
Iterator
iterator
keySet
iterator
hasNext
block
String
fieldName
String
next
getTermFreqVector
docNumber
fieldName
mapper
getTermFreqVector
docNumber
int
field
String
mapper
TermVectorMapper
if
DEBUG
println
Info
info
getInfo
field
if
info
block
return
sortTerms
setExpectations
field
length
stride
for
forControl
int
i
length
i
block
ArrayIntList
positions
ArrayIntList
sortedTerms
i
getValue
int
size
size
org
apache
lucene
index
TermVectorOffsetInfo
offsets
org
apache
lucene
index
TermVectorOffsetInfo
size
stride
for
forControl
int
k
j
j
size
k
j
stride
block
int
start
get
j
int
end
get
j
offsets
k
org
apache
lucene
index
TermVectorOffsetInfo
start
end
map
String
sortedTerms
i
getKey
numPositions
ArrayIntList
sortedTerms
i
getValue
offsets
ArrayIntList
sortedTerms
i
getValue
getTermFreqVector
TermFreqVector
docNumber
int
fieldName
String
if
DEBUG
println
Info
info
getInfo
fieldName
if
info
return
sortTerms
return
TermPositionVector
Map
Entry
sortedTerms
sortedTerms
getField
String
return
fieldName
size
int
return
length
getTerms
String
String
terms
String
length
for
forControl
int
i
length
i
block
terms
i
String
sortedTerms
i
getKey
return
terms
getTermFrequencies
int
int
freqs
int
length
for
forControl
int
i
length
i
block
freqs
i
numPositions
ArrayIntList
sortedTerms
i
getValue
return
freqs
indexOf
int
term
String
int
i
binarySearch
sortedTerms
term
termComparator
return
i
i
indexesOf
int
terms
String
start
int
len
int
int
indexes
int
len
for
forControl
int
i
i
len
i
block
indexes
i
indexOf
terms
start
return
indexes
getTermPositions
int
index
int
return
ArrayIntList
sortedTerms
index
getValue
getOffsets
org
apache
lucene
index
TermVectorOffsetInfo
index
int
if
stride
return
ArrayIntList
positions
ArrayIntList
sortedTerms
index
getValue
int
size
size
org
apache
lucene
index
TermVectorOffsetInfo
offsets
org
apache
lucene
index
TermVectorOffsetInfo
size
stride
for
forControl
int
i
j
j
size
i
j
stride
block
int
start
get
j
int
end
get
j
offsets
i
org
apache
lucene
index
TermVectorOffsetInfo
start
end
return
offsets
getSimilarity
Similarity
if
searcher
return
getSimilarity
return
getDefault
setSearcher
searcher
Searcher
searcher
searcher
byte
cachedNorms
String
cachedFieldName
Similarity
cachedSimilarity
norms
byte
fieldName
String
byte
norms
cachedNorms
Similarity
sim
getSimilarity
if
fieldName
cachedFieldName
sim
cachedSimilarity
block
Info
info
getInfo
fieldName
int
numTokens
info
numTokens
float
n
lengthNorm
fieldName
numTokens
float
boost
info
getBoost
n
n
boost
byte
norm
encodeNorm
n
norms
byte
norm
cachedNorms
norms
cachedFieldName
fieldName
cachedSimilarity
sim
if
DEBUG
println
fieldName
n
norm
numTokens
return
norms
norms
fieldName
String
bytes
byte
offset
int
if
DEBUG
println
fieldName
byte
norms
norms
fieldName
arraycopy
norms
bytes
offset
length
doSetNorm
doc
int
fieldName
String
value
byte
throw
UnsupportedOperationException
numDocs
int
if
DEBUG
println
return
size
maxDoc
int
if
DEBUG
println
return
document
Document
n
int
if
DEBUG
println
return
Document
document
Document
n
int
fieldSelector
FieldSelector
if
DEBUG
println
return
Document
isDeleted
boolean
n
int
if
DEBUG
println
return
hasDeletions
boolean
if
DEBUG
println
return
doDelete
docNum
int
throw
UnsupportedOperationException
doUndeleteAll
throw
UnsupportedOperationException
doCommit
if
DEBUG
println
doClose
if
DEBUG
println
getFieldNames
Collection
fieldOption
FieldOption
if
DEBUG
println
if
fieldOption
UNINDEXED
return
EMPTY_SET
if
fieldOption
INDEXED_NO_TERMVECTOR
return
EMPTY_SET
if
fieldOption
TERMVECTOR_WITH_OFFSET
stride
return
EMPTY_SET
if
fieldOption
TERMVECTOR_WITH_POSITION_OFFSET
stride
return
EMPTY_SET
return
unmodifiableSet
keySet
IndexReader
VM
int
PTR
is64BitVM
int
BOOLEAN
int
BYTE
int
CHAR
int
SHORT
int
INT
int
LONG
int
FLOAT
int
DOUBLE
int
LOG_PTR
int
round
log2
PTR
int
OBJECT_HEADER
PTR
boolean
IS_WORD_ALIGNED_VM
VM
sizeOf
int
n
int
return
IS_WORD_ALIGNED_VM
n
LOG_PTR
LOG_PTR
n
sizeOfObject
int
n
int
return
sizeOf
OBJECT_HEADER
n
sizeOfObjectArray
int
len
int
return
sizeOfObject
INT
PTR
len
sizeOfCharArray
int
len
int
return
sizeOfObject
INT
CHAR
len
sizeOfIntArray
int
len
int
return
sizeOfObject
INT
INT
len
sizeOfString
int
len
int
return
sizeOfObject
INT
PTR
sizeOfCharArray
len
sizeOfHashMap
int
len
int
return
sizeOfObject
PTR
INT
sizeOfObjectArray
len
len
sizeOfObject
PTR
INT
sizeOfArrayList
int
len
int
return
sizeOfObject
PTR
INT
sizeOfObjectArray
len
sizeOfArrayIntList
int
len
int
return
sizeOfObject
PTR
INT
sizeOfIntArray
len
is64BitVM
boolean
try
int
bits
getInteger
intValue
if
bits
return
bits
return
getProperty
toLowerCase
indexOf
catchClause
t
return
log2
double
value
double
return
log
value
log
Serializable
