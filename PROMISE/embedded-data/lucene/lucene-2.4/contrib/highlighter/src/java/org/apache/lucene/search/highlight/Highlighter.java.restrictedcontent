Highlighter
int
DEFAULT_MAX_CHARS_TO_ANALYZE
int
DEFAULT_MAX_DOC_BYTES_TO_ANALYZE
DEFAULT_MAX_CHARS_TO_ANALYZE
int
maxDocCharsToAnalyze
DEFAULT_MAX_CHARS_TO_ANALYZE
Formatter
formatter
Encoder
encoder
Fragmenter
textFragmenter
SimpleFragmenter
Scorer
fragmentScorer
Highlighter
fragmentScorer
Scorer
SimpleHTMLFormatter
fragmentScorer
Highlighter
formatter
Formatter
fragmentScorer
Scorer
formatter
DefaultEncoder
fragmentScorer
Highlighter
formatter
Formatter
encoder
Encoder
fragmentScorer
Scorer
formatter
formatter
encoder
encoder
fragmentScorer
fragmentScorer
getBestFragment
String
analyzer
Analyzer
fieldName
String
text
String
TokenStream
tokenStream
tokenStream
fieldName
StringReader
text
return
getBestFragment
tokenStream
text
getBestFragment
String
tokenStream
TokenStream
text
String
String
results
getBestFragments
tokenStream
text
if
length
block
return
results
return
getBestFragments
String
analyzer
Analyzer
text
String
maxNumFragments
int
TokenStream
tokenStream
tokenStream
StringReader
text
return
getBestFragments
tokenStream
text
maxNumFragments
getBestFragments
String
analyzer
Analyzer
fieldName
String
text
String
maxNumFragments
int
TokenStream
tokenStream
tokenStream
fieldName
StringReader
text
return
getBestFragments
tokenStream
text
maxNumFragments
getBestFragments
String
tokenStream
TokenStream
text
String
maxNumFragments
int
maxNumFragments
max
maxNumFragments
TextFragment
frag
getBestTextFragments
tokenStream
text
maxNumFragments
ArrayList
fragTexts
ArrayList
for
forControl
int
i
i
length
i
block
if
frag
i
frag
i
getScore
block
add
frag
i
toString
return
String
toArray
String
getBestTextFragments
TextFragment
tokenStream
TokenStream
text
String
mergeContiguousFragments
boolean
maxNumFragments
int
ArrayList
docFrags
ArrayList
StringBuffer
newText
StringBuffer
TextFragment
currentFrag
TextFragment
newText
length
size
startFragment
currentFrag
add
currentFrag
FragmentQueue
fragQueue
FragmentQueue
maxNumFragments
try
Token
reusableToken
Token
String
tokenText
int
startOffset
int
endOffset
int
lastEndOffset
start
text
TokenGroup
tokenGroup
TokenGroup
for
forControl
Token
nextToken
next
reusableToken
nextToken
startOffset
maxDocCharsToAnalyze
nextToken
next
reusableToken
block
if
numTokens
isDistinct
nextToken
block
startOffset
matchStartOffset
endOffset
matchEndOffset
tokenText
substring
startOffset
endOffset
String
markedUpText
highlightTerm
encodeText
tokenText
tokenGroup
if
startOffset
lastEndOffset
append
encodeText
substring
lastEndOffset
startOffset
append
markedUpText
lastEndOffset
max
endOffset
lastEndOffset
clear
if
isNewFragment
nextToken
block
setScore
getFragmentScore
textEndPos
length
currentFrag
TextFragment
newText
length
size
startFragment
currentFrag
add
currentFrag
addToken
nextToken
getTokenScore
nextToken
setScore
getFragmentScore
if
numTokens
block
startOffset
matchStartOffset
endOffset
matchEndOffset
tokenText
substring
startOffset
endOffset
String
markedUpText
highlightTerm
encodeText
tokenText
tokenGroup
if
startOffset
lastEndOffset
append
encodeText
substring
lastEndOffset
startOffset
append
markedUpText
lastEndOffset
max
lastEndOffset
endOffset
if
lastEndOffset
length
length
maxDocCharsToAnalyze
block
append
encodeText
substring
lastEndOffset
textEndPos
length
for
forControl
Iterator
i
iterator
hasNext
block
currentFrag
TextFragment
next
insert
currentFrag
TextFragment
frag
TextFragment
size
for
forControl
int
i
length
i
i
block
frag
i
TextFragment
pop
if
mergeContiguousFragments
block
mergeContiguousFragments
frag
ArrayList
fragTexts
ArrayList
for
forControl
int
i
i
length
i
block
if
frag
i
frag
i
getScore
block
add
frag
i
frag
TextFragment
toArray
TextFragment
return
frag
if
tokenStream
block
try
close
catchClause
e
mergeContiguousFragments
frag
TextFragment
boolean
mergingStillBeingDone
if
length
do
mergingStillBeingDone
block
mergingStillBeingDone
for
forControl
int
i
i
length
i
block
if
frag
i
block
continue
for
forControl
int
x
x
length
x
block
if
frag
x
block
continue
if
frag
i
block
break
TextFragment
frag1
TextFragment
frag2
int
frag1Num
int
frag2Num
int
bestScoringFragNum
int
worstScoringFragNum
if
frag
i
follows
frag
x
block
frag1
frag
x
frag1Num
x
frag2
frag
i
frag2Num
i
if
frag
x
follows
frag
i
block
frag1
frag
i
frag1Num
i
frag2
frag
x
frag2Num
x
if
frag1
block
if
getScore
getScore
block
bestScoringFragNum
frag1Num
worstScoringFragNum
frag2Num
block
bestScoringFragNum
frag2Num
worstScoringFragNum
frag1Num
merge
frag2
frag
worstScoringFragNum
mergingStillBeingDone
frag
bestScoringFragNum
frag1
getBestFragments
String
tokenStream
TokenStream
text
String
maxNumFragments
int
separator
String
String
sections
getBestFragments
tokenStream
text
maxNumFragments
StringBuffer
result
StringBuffer
for
forControl
int
i
i
length
i
block
if
i
block
append
separator
append
sections
i
return
toString
getMaxDocBytesToAnalyze
int
return
maxDocCharsToAnalyze
setMaxDocBytesToAnalyze
byteCount
int
maxDocCharsToAnalyze
byteCount
getMaxDocCharsToAnalyze
int
return
maxDocCharsToAnalyze
setMaxDocCharsToAnalyze
maxDocCharsToAnalyze
int
maxDocCharsToAnalyze
maxDocCharsToAnalyze
getTextFragmenter
Fragmenter
return
textFragmenter
setTextFragmenter
fragmenter
Fragmenter
textFragmenter
fragmenter
getFragmentScorer
Scorer
return
fragmentScorer
setFragmentScorer
scorer
Scorer
fragmentScorer
scorer
getEncoder
Encoder
return
encoder
setEncoder
encoder
Encoder
encoder
encoder
FragmentQueue
FragmentQueue
size
int
initialize
size
lessThan
boolean
a
Object
b
Object
TextFragment
fragA
TextFragment
a
TextFragment
fragB
TextFragment
b
if
getScore
getScore
return
fragNum
fragNum
return
getScore
getScore
PriorityQueue
