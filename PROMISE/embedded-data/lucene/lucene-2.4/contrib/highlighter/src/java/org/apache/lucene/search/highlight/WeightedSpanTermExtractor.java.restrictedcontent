WeightedSpanTermExtractor
String
fieldName
CachingTokenFilter
cachedTokenFilter
Map
readers
HashMap
String
defaultField
boolean
highlightCnstScrRngQuery
WeightedSpanTermExtractor
WeightedSpanTermExtractor
defaultField
String
if
defaultField
block
defaultField
intern
closeReaders
Collection
readerSet
values
Iterator
it
iterator
while
hasNext
block
IndexReader
reader
IndexReader
next
try
close
catchClause
e
extract
query
Query
terms
Map
if
query
BooleanQuery
block
BooleanClause
queryClauses
BooleanQuery
query
Map
booleanTerms
PositionCheckingMap
for
forControl
int
i
i
length
i
block
if
queryClauses
i
isProhibited
block
extract
queryClauses
i
getQuery
booleanTerms
putAll
booleanTerms
if
query
PhraseQuery
block
Term
phraseQueryTerms
PhraseQuery
query
SpanQuery
clauses
SpanQuery
length
for
forControl
int
i
i
length
i
block
clauses
i
SpanTermQuery
phraseQueryTerms
i
int
slop
PhraseQuery
query
boolean
inorder
if
slop
block
inorder
SpanNearQuery
sp
SpanNearQuery
clauses
slop
inorder
setBoost
getBoost
extractWeightedSpanTerms
terms
sp
if
query
TermQuery
block
extractWeightedTerms
terms
query
if
query
SpanQuery
block
extractWeightedSpanTerms
terms
SpanQuery
query
if
query
FilteredQuery
block
extract
FilteredQuery
query
terms
if
query
DisjunctionMaxQuery
block
Map
disjunctTerms
PositionCheckingMap
for
forControl
Iterator
iterator
DisjunctionMaxQuery
query
hasNext
block
extract
Query
next
disjunctTerms
putAll
disjunctTerms
if
query
MultiPhraseQuery
block
MultiPhraseQuery
mpq
MultiPhraseQuery
query
List
termArrays
getTermArrays
int
positions
getPositions
if
length
block
int
maxPosition
positions
length
for
forControl
int
i
i
length
i
block
if
positions
i
maxPosition
block
maxPosition
positions
i
List
disjunctLists
List
maxPosition
int
distinctPositions
for
forControl
int
i
i
size
i
block
Term
termArray
Term
get
i
List
disjuncts
disjunctLists
positions
i
if
disjuncts
block
disjuncts
disjunctLists
positions
i
ArrayList
length
distinctPositions
for
forControl
int
j
j
length
j
block
add
SpanTermQuery
termArray
j
int
positionGaps
int
position
SpanQuery
clauses
SpanQuery
distinctPositions
for
forControl
int
i
i
length
i
block
List
disjuncts
disjunctLists
i
if
disjuncts
block
clauses
position
SpanOrQuery
SpanQuery
toArray
SpanQuery
size
block
positionGaps
int
slop
getSlop
boolean
inorder
slop
SpanNearQuery
sp
SpanNearQuery
clauses
slop
positionGaps
inorder
setBoost
getBoost
extractWeightedSpanTerms
terms
sp
if
highlightCnstScrRngQuery
query
ConstantScoreRangeQuery
block
ConstantScoreRangeQuery
q
ConstantScoreRangeQuery
query
Term
lower
Term
fieldName
getLowerVal
Term
upper
Term
fieldName
getUpperVal
FilterIndexReader
fir
FilterIndexReader
getReaderForField
fieldName
try
TermEnum
te
terms
lower
BooleanQuery
bq
BooleanQuery
do
next
block
Term
term
term
if
term
compareTo
term
block
add
BooleanClause
TermQuery
term
SHOULD
block
break
extract
bq
terms
close
extractWeightedSpanTerms
terms
Map
spanQuery
SpanQuery
Set
nonWeightedTerms
HashSet
extractTerms
nonWeightedTerms
Set
fieldNames
if
fieldName
block
fieldNames
HashSet
for
forControl
Iterator
iter
iterator
hasNext
block
Term
queryTerm
Term
next
add
field
block
fieldNames
HashSet
add
fieldName
if
defaultField
block
add
defaultField
Iterator
it
iterator
List
spanPositions
ArrayList
while
hasNext
block
String
field
String
next
IndexReader
reader
getReaderForField
field
Spans
spans
getSpans
reader
while
next
block
add
PositionSpan
start
end
reset
if
size
block
return
for
forControl
Iterator
iter
iterator
hasNext
block
Term
queryTerm
Term
next
if
fieldNameComparator
field
block
WeightedSpanTerm
weightedSpanTerm
WeightedSpanTerm
get
text
if
weightedSpanTerm
block
weightedSpanTerm
WeightedSpanTerm
getBoost
text
addPositionSpans
spanPositions
positionSensitive
put
text
weightedSpanTerm
block
if
size
block
addPositionSpans
spanPositions
extractWeightedTerms
terms
Map
query
Query
Set
nonWeightedTerms
HashSet
extractTerms
nonWeightedTerms
for
forControl
Iterator
iter
iterator
hasNext
block
Term
queryTerm
Term
next
if
fieldNameComparator
field
block
WeightedSpanTerm
weightedSpanTerm
WeightedSpanTerm
getBoost
text
put
text
weightedSpanTerm
fieldNameComparator
boolean
fieldNameToCheck
String
boolean
rv
fieldName
fieldNameToCheck
fieldName
fieldNameToCheck
defaultField
return
rv
getReaderForField
IndexReader
field
String
IndexReader
reader
IndexReader
get
field
if
reader
block
MemoryIndex
indexer
MemoryIndex
addField
field
cachedTokenFilter
IndexSearcher
searcher
createSearcher
reader
getIndexReader
put
field
reader
return
reader
getWeightedSpanTerms
Map
query
Query
cachingTokenFilter
CachingTokenFilter
fieldName
cachedTokenFilter
cachingTokenFilter
Map
terms
PositionCheckingMap
try
extract
query
terms
closeReaders
return
terms
getWeightedSpanTerms
Map
query
Query
cachingTokenFilter
CachingTokenFilter
fieldName
String
if
fieldName
block
fieldName
intern
Map
terms
PositionCheckingMap
cachedTokenFilter
cachingTokenFilter
try
extract
query
terms
closeReaders
return
terms
getWeightedSpanTermsWithScores
Map
query
Query
tokenStream
TokenStream
fieldName
String
reader
IndexReader
fieldName
fieldName
cachedTokenFilter
CachingTokenFilter
tokenStream
Map
terms
PositionCheckingMap
extract
query
terms
int
totalNumDocs
numDocs
Set
weightedTerms
keySet
Iterator
it
iterator
try
while
hasNext
block
WeightedSpanTerm
weightedSpanTerm
WeightedSpanTerm
get
next
int
docFreq
docFreq
Term
fieldName
term
if
totalNumDocs
docFreq
block
docFreq
totalNumDocs
float
idf
float
log
float
totalNumDocs
double
docFreq
weight
idf
closeReaders
return
terms
isHighlightCnstScrRngQuery
boolean
return
highlightCnstScrRngQuery
setHighlightCnstScrRngQuery
highlightCnstScrRngQuery
boolean
highlightCnstScrRngQuery
highlightCnstScrRngQuery
PositionCheckingMap
putAll
m
Map
Iterator
it
keySet
iterator
while
hasNext
block
Object
key
next
Object
val
get
key
put
key
val
put
Object
key
Object
value
Object
Object
prev
put
key
value
if
prev
return
prev
WeightedSpanTerm
prevTerm
WeightedSpanTerm
prev
WeightedSpanTerm
newTerm
WeightedSpanTerm
value
if
positionSensitive
block
positionSensitive
return
prev
HashMap
