DuplicateFilter
String
fieldName
int
keepMode
KM_USE_FIRST_OCCURRENCE
int
KM_USE_FIRST_OCCURRENCE
int
KM_USE_LAST_OCCURRENCE
int
processingMode
PM_FULL_VALIDATION
int
PM_FULL_VALIDATION
int
PM_FAST_INVALIDATION
DuplicateFilter
fieldName
String
fieldName
KM_USE_LAST_OCCURRENCE
PM_FULL_VALIDATION
DuplicateFilter
fieldName
String
keepMode
int
processingMode
int
fieldName
fieldName
keepMode
keepMode
processingMode
processingMode
getDocIdSet
DocIdSet
reader
IndexReader
if
processingMode
PM_FAST_INVALIDATION
block
return
fastBits
reader
block
return
correctBits
reader
correctBits
OpenBitSet
reader
IndexReader
OpenBitSet
bits
OpenBitSet
maxDoc
Term
startTerm
Term
fieldName
TermEnum
te
terms
startTerm
if
te
block
Term
currTerm
term
while
currTerm
field
field
block
int
lastDoc
TermDocs
td
termDocs
currTerm
if
next
block
if
keepMode
KM_USE_FIRST_OCCURRENCE
block
set
doc
block
do
next
block
lastDoc
doc
set
lastDoc
if
next
block
break
currTerm
term
return
bits
fastBits
OpenBitSet
reader
IndexReader
OpenBitSet
bits
OpenBitSet
maxDoc
set
maxDoc
Term
startTerm
Term
fieldName
TermEnum
te
terms
startTerm
if
te
block
Term
currTerm
term
while
currTerm
field
field
block
if
docFreq
block
int
lastDoc
TermDocs
td
termDocs
currTerm
next
if
keepMode
KM_USE_FIRST_OCCURRENCE
block
next
do
next
block
lastDoc
doc
clear
lastDoc
if
keepMode
KM_USE_LAST_OCCURRENCE
block
set
lastDoc
if
next
block
break
currTerm
term
return
bits
main
args
String
IndexReader
r
open
long
start
currentTimeMillis
DuplicateFilter
df
DuplicateFilter
KM_USE_LAST_OCCURRENCE
PM_FAST_INVALIDATION
BitSet
b
bits
r
long
end
currentTimeMillis
start
println
cardinality
end
getFieldName
String
return
fieldName
setFieldName
fieldName
String
fieldName
fieldName
getKeepMode
int
return
keepMode
setKeepMode
keepMode
int
keepMode
keepMode
equals
boolean
obj
Object
if
obj
return
if
obj
getClass
getClass
return
DuplicateFilter
other
DuplicateFilter
obj
return
keepMode
keepMode
processingMode
processingMode
fieldName
fieldName
fieldName
equals
fieldName
hashCode
int
int
hash
hash
hash
keepMode
hash
hash
processingMode
hash
hash
hashCode
return
hash
getProcessingMode
int
return
processingMode
setProcessingMode
processingMode
int
processingMode
processingMode
Filter
