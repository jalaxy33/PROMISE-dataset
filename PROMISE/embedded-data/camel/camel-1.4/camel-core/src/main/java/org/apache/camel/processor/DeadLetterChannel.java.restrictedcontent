DeadLetterChannel
String
REDELIVERY_COUNTER
String
REDELIVERED
String
EXCEPTION_CAUSE_PROPERTY
RedeliveryData
int
redeliveryCounter
long
redeliveryDelay
boolean
sync
RedeliveryPolicy
currentRedeliveryPolicy
redeliveryPolicy
Processor
failureProcessor
deadLetter
Log
LOG
getLog
DeadLetterChannel
String
FAILURE_HANDLED_PROPERTY
getName
DeadLetterChannel
Processor
output
Processor
deadLetter
AsyncProcessor
outputAsync
RedeliveryPolicy
redeliveryPolicy
Logger
logger
DeadLetterChannel
output
Processor
deadLetter
Processor
output
deadLetter
RedeliveryPolicy
createDefaultLogger
createDefaultExceptionPolicyStrategy
DeadLetterChannel
output
Processor
deadLetter
Processor
redeliveryPolicy
RedeliveryPolicy
logger
Logger
exceptionPolicyStrategy
ExceptionPolicyStrategy
deadLetter
deadLetter
output
output
outputAsync
convert
output
redeliveryPolicy
redeliveryPolicy
logger
logger
setExceptionPolicy
exceptionPolicyStrategy
createDefaultLogger
Exchange
Logger
return
Logger
LOG
ERROR
toString
String
return
output
deadLetter
redeliveryPolicy
process
boolean
exchange
Exchange
callback
AsyncCallback
return
process
exchange
callback
RedeliveryData
process
boolean
exchange
Exchange
callback
AsyncCallback
data
RedeliveryData
while
block
if
isRunAllowed
block
if
getException
block
setException
RejectedExecutionException
done
sync
return
sync
if
isTransacted
getException
block
if
isDebugEnabled
block
debug
exchange
return
sync
if
getException
block
Throwable
e
getException
setException
log
getExchangeId
redeliveryCounter
e
e
redeliveryCounter
incrementRedeliveryCounter
exchange
e
ExceptionType
exceptionPolicy
getExceptionPolicy
exchange
e
if
exceptionPolicy
block
currentRedeliveryPolicy
createRedeliveryPolicy
currentRedeliveryPolicy
Processor
processor
getErrorHandler
if
processor
block
failureProcessor
processor
if
shouldRedeliver
redeliveryCounter
block
setFailureHandled
exchange
AsyncProcessor
afp
convert
failureProcessor
boolean
sync
process
exchange
AsyncCallback
done
sync
boolean
restoreExceptionOnExchange
exchange
done
sync
restoreExceptionOnExchange
exchange
log
getExchangeId
failureProcessor
return
sync
if
redeliveryCounter
block
redeliveryDelay
sleep
redeliveryDelay
setProperty
EXCEPTION_CAUSE_PROPERTY
getException
setException
boolean
sync
process
exchange
AsyncCallback
done
sync
boolean
if
sync
block
return
sync
if
getException
block
process
exchange
callback
data
block
done
sync
if
sync
block
return
if
getException
isFailureHandled
exchange
block
done
return
isFailureHandled
boolean
exchange
Exchange
return
getProperty
FAILURE_HANDLED_PROPERTY
setFailureHandled
exchange
Exchange
isHandled
boolean
if
isHandled
block
setProperty
FAILURE_HANDLED_PROPERTY
getException
setException
block
setException
getProperty
FAILURE_HANDLED_PROPERTY
Throwable
removeProperty
FAILURE_HANDLED_PROPERTY
restoreExceptionOnExchange
exchange
Exchange
setException
getProperty
FAILURE_HANDLED_PROPERTY
Throwable
process
exchange
Exchange
process
exchange
getOutput
Processor
return
output
getDeadLetter
Processor
return
deadLetter
getRedeliveryPolicy
RedeliveryPolicy
return
redeliveryPolicy
setRedeliveryPolicy
redeliveryPolicy
RedeliveryPolicy
redeliveryPolicy
redeliveryPolicy
getLogger
Logger
return
logger
setLogger
logger
Logger
logger
logger
incrementRedeliveryCounter
int
exchange
Exchange
e
Throwable
Message
in
getIn
Integer
counter
getHeader
REDELIVERY_COUNTER
Integer
int
next
if
counter
block
next
counter
setHeader
REDELIVERY_COUNTER
next
setHeader
REDELIVERED
TRUE
setException
e
return
next
doStart
startServices
output
deadLetter
doStop
stopServices
deadLetter
output
ErrorHandlerSupport
AsyncProcessor
