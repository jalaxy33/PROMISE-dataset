FileConsumer
Log
LOG
getLog
FileConsumer
FileEndpoint
endpoint
ConcurrentHashMap
File
File
filesBeingProcessed
ConcurrentHashMap
File
File
ConcurrentHashMap
File
Long
fileSizes
ConcurrentHashMap
File
Long
LRUCache
ConcurrentHashMap
File
Long
noopMap
ConcurrentHashMap
File
Long
LRUCache
long
lastPollTime
int
unchangedDelay
boolean
unchangedSize
boolean
generateEmptyExchangeWhenIdle
boolean
alwaysConsume
boolean
recursive
String
regexPattern
boolean
exclusiveReadLock
FileConsumer
endpoint
FileEndpoint
processor
Processor
endpoint
processor
endpoint
endpoint
poll
int
rc
pollFileOrDirectory
getFile
if
rc
generateEmptyExchangeWhenIdle
block
FileExchange
exchange
createExchange
File
getAsyncProcessor
process
exchange
AsyncCallback
done
sync
boolean
lastPollTime
currentTimeMillis
pollFileOrDirectory
int
fileOrDirectory
File
processDir
boolean
if
isDirectory
block
return
pollFile
fileOrDirectory
if
processDir
block
int
rc
if
isValidFile
fileOrDirectory
block
if
isTraceEnabled
block
trace
fileOrDirectory
File
files
listFiles
for
File
file
files
block
rc
pollFileOrDirectory
file
isRecursive
return
rc
block
if
isTraceEnabled
block
trace
fileOrDirectory
return
pollFile
int
target
File
if
isTraceEnabled
block
trace
target
if
exists
block
return
if
isValidFile
target
block
return
if
isNoop
block
if
contains
target
block
return
put
target
target
FileProcessStrategy
processStrategy
getFileStrategy
FileExchange
exchange
createExchange
target
configureMessage
target
getIn
try
if
exclusiveReadLock
block
acquireExclusiveReadLock
target
if
isDebugEnabled
block
debug
target
exchange
if
begin
endpoint
exchange
target
block
getAsyncProcessor
process
exchange
AsyncCallback
done
sync
boolean
File
file
getFile
boolean
failed
isFailed
boolean
handled
isFailureHandled
exchange
if
isDebugEnabled
block
debug
file
failed
failed
handled
boolean
committed
try
if
failed
handled
block
processStrategyCommit
processStrategy
exchange
file
handled
committed
block
handleException
getException
if
committed
block
processStrategyRollback
processStrategy
exchange
file
remove
file
block
warn
endpoint
target
catchClause
e
handleException
e
return
acquireExclusiveReadLock
file
File
if
isTraceEnabled
block
trace
file
FileChannel
channel
getChannel
RandomAccessFile
file
try
FileLock
lock
lock
if
isTraceEnabled
block
trace
lock
file
release
close
channel
LOG
processStrategyCommit
processStrategy
FileProcessStrategy
exchange
FileExchange
file
File
failureHandled
boolean
try
if
isDebugEnabled
block
debug
processStrategy
file
failureHandled
commit
endpoint
exchange
file
catchClause
e
warn
processStrategy
e
handleException
e
processStrategyRollback
processStrategy
FileProcessStrategy
exchange
FileExchange
file
File
if
isDebugEnabled
block
debug
processStrategy
file
rollback
endpoint
exchange
file
isValidFile
boolean
file
File
boolean
result
if
file
exists
block
if
isMatched
file
alwaysConsume
isChanged
file
block
result
return
result
isChanged
boolean
file
File
if
file
block
return
if
isDirectory
block
return
block
boolean
lastModifiedCheck
long
modifiedDuration
if
getUnchangedDelay
block
modifiedDuration
currentTimeMillis
lastModified
lastModifiedCheck
modifiedDuration
getUnchangedDelay
long
fileModified
lastModified
Long
previousModified
get
file
put
file
fileModified
if
previousModified
fileModified
previousModified
block
lastModifiedCheck
boolean
sizeCheck
long
sizeDifference
if
isUnchangedSize
block
Long
value
get
file
if
value
block
sizeCheck
block
sizeCheck
length
value
boolean
answer
lastModifiedCheck
sizeCheck
if
isDebugEnabled
block
debug
file
answer
sizeCheck
sizeDifference
lastModifiedCheck
modifiedDuration
if
isUnchangedSize
block
if
answer
block
put
file
length
block
remove
file
return
answer
isMatched
boolean
file
File
String
name
getName
if
startsWith
block
return
if
endsWith
DEFAULT_LOCK_FILE_POSTFIX
block
return
if
isDirectory
block
return
if
regexPattern
length
block
if
matches
regexPattern
block
return
if
getExcludedNamePrefix
block
if
startsWith
getExcludedNamePrefix
block
return
String
prefixes
getExcludedNamePrefixes
if
prefixes
block
for
String
prefix
prefixes
block
if
startsWith
prefix
block
return
if
getExcludedNamePostfix
block
if
endsWith
getExcludedNamePostfix
block
return
String
postfixes
getExcludedNamePostfixes
if
postfixes
block
for
String
postfix
postfixes
block
if
endsWith
postfix
block
return
return
isRecursive
boolean
return
recursive
setRecursive
recursive
boolean
recursive
recursive
getRegexPattern
String
return
regexPattern
setRegexPattern
regexPattern
String
regexPattern
regexPattern
isGenerateEmptyExchangeWhenIdle
boolean
return
generateEmptyExchangeWhenIdle
setGenerateEmptyExchangeWhenIdle
generateEmptyExchangeWhenIdle
boolean
generateEmptyExchangeWhenIdle
generateEmptyExchangeWhenIdle
getUnchangedDelay
int
return
unchangedDelay
setUnchangedDelay
unchangedDelay
int
unchangedDelay
unchangedDelay
isUnchangedSize
boolean
return
unchangedSize
setUnchangedSize
unchangedSize
boolean
unchangedSize
unchangedSize
isExclusiveReadLock
boolean
return
exclusiveReadLock
setExclusiveReadLock
exclusiveReadLock
boolean
exclusiveReadLock
exclusiveReadLock
isAlwaysConsume
boolean
return
alwaysConsume
setAlwaysConsume
alwaysConsume
boolean
alwaysConsume
alwaysConsume
isTimestamp
boolean
return
alwaysConsume
setTimestamp
timestamp
boolean
alwaysConsume
timestamp
ScheduledPollConsumer
FileExchange
