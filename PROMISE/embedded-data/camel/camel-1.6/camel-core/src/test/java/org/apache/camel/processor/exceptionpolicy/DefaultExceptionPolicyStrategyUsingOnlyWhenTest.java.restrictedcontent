DefaultExceptionPolicyStrategyUsingOnlyWhenTest
String
ERROR_QUEUE
String
ERROR_USER_QUEUE
MyUserException
MyUserException
message
String
message
Exception
testNoWhen
MockEndpoint
mock
getMockEndpoint
ERROR_QUEUE
expectedMessageCount
try
sendBody
fail
catchClause
e
assertMockEndpointsSatisfied
testWithWhen
MockEndpoint
mock
getMockEndpoint
ERROR_USER_QUEUE
expectedMessageCount
try
sendBodyAndHeader
fail
catchClause
e
assertMockEndpointsSatisfied
createRouteBuilder
RouteBuilder
return
RouteBuilder
configure
errorHandler
deadLetterChannel
maximumRedeliveries
ERROR_QUEUE
onException
onWhen
header
isNotNull
maximumRedeliveries
to
ERROR_USER_QUEUE
MyUserException
from
process
Processor
process
exchange
Exchange
String
s
getIn
getBody
String
if
equals
s
block
throw
MyUserException
getOut
setBody
to
ContextTestSupport
