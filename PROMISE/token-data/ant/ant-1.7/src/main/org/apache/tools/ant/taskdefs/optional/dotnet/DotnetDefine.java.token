package
org
.
apache
.
tools
.
ant
.
taskdefs
.
optional
.
dotnet
;
import
org
.
apache
.
tools
.
ant
.
BuildException
;
import
org
.
apache
.
tools
.
ant
.
Task
;
import
org
.
apache
.
tools
.
ant
.
Project
;
public
class
DotnetDefine
{
private
String
name
;
private
String
ifCond
;
private
String
unlessCond
;
public
void
setIf
(
String
condition
)
{
this
.
ifCond
=
condition
;
}
public
void
setUnless
(
String
condition
)
{
this
.
unlessCond
=
condition
;
}
public
String
getName
(
)
{
return
name
;
}
public
void
setName
(
String
name
)
{
this
.
name
=
name
;
}
public
String
getValue
(
Task
owner
)
throws
BuildException
{
if
(
name
==
null
)
{
throw
new
BuildException
(
"No name provided for the define element"
,
owner
.
getLocation
(
)
)
;
}
if
(
!
isSet
(
owner
)
)
{
return
null
;
}
return
name
;
}
public
boolean
isSet
(
Task
owner
)
{
Project
p
=
owner
.
getProject
(
)
;
if
(
ifCond
!=
null
&&
p
.
getProperty
(
ifCond
)
==
null
)
{
return
false
;
}
else
if
(
unlessCond
!=
null
&&
p
.
getProperty
(
unlessCond
)
!=
null
)
{
return
false
;
}
return
true
;
}
}
