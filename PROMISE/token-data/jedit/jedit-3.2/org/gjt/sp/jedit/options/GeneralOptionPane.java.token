package
org
.
gjt
.
sp
.
jedit
.
options
;
import
javax
.
swing
.
*
;
import
java
.
awt
.
*
;
import
java
.
io
.
*
;
import
org
.
gjt
.
sp
.
jedit
.
*
;
import
org
.
gjt
.
sp
.
util
.
Log
;
public
class
GeneralOptionPane
extends
AbstractOptionPane
{
public
GeneralOptionPane
(
)
{
super
(
"general"
)
;
}
protected
void
_init
(
)
{
addComponent
(
new
JLabel
(
jEdit
.
getProperty
(
"options.general.lf.note"
)
)
)
;
lfs
=
UIManager
.
getInstalledLookAndFeels
(
)
;
String
[
]
names
=
new
String
[
lfs
.
length
]
;
String
lf
=
UIManager
.
getLookAndFeel
(
)
.
getClass
(
)
.
getName
(
)
;
int
index
=
0
;
for
(
int
i
=
0
;
i
<
names
.
length
;
i
++
)
{
names
[
i
]
=
lfs
[
i
]
.
getName
(
)
;
if
(
lf
.
equals
(
lfs
[
i
]
.
getClassName
(
)
)
)
index
=
i
;
}
lookAndFeel
=
new
JComboBox
(
names
)
;
lookAndFeel
.
setSelectedIndex
(
index
)
;
addComponent
(
jEdit
.
getProperty
(
"options.general.lf"
)
,
lookAndFeel
)
;
history
=
new
JTextField
(
jEdit
.
getProperty
(
"history"
)
)
;
addComponent
(
jEdit
.
getProperty
(
"options.general.history"
)
,
history
)
;
saveCaret
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.saveCaret"
)
)
;
saveCaret
.
setSelected
(
jEdit
.
getBooleanProperty
(
"saveCaret"
)
)
;
addComponent
(
saveCaret
)
;
sortBuffers
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.sortBuffers"
)
)
;
sortBuffers
.
setSelected
(
jEdit
.
getBooleanProperty
(
"sortBuffers"
)
)
;
addComponent
(
sortBuffers
)
;
sortByName
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.sortByName"
)
)
;
sortByName
.
setSelected
(
jEdit
.
getBooleanProperty
(
"sortByName"
)
)
;
addComponent
(
sortByName
)
;
checkModStatus
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.checkModStatus"
)
)
;
checkModStatus
.
setSelected
(
jEdit
.
getBooleanProperty
(
"view.checkModStatus"
)
)
;
addComponent
(
checkModStatus
)
;
showFullPath
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.showFullPath"
)
)
;
showFullPath
.
setSelected
(
jEdit
.
getBooleanProperty
(
"view.showFullPath"
)
)
;
addComponent
(
showFullPath
)
;
showSearchbar
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.showSearchbar"
)
)
;
showSearchbar
.
setSelected
(
jEdit
.
getBooleanProperty
(
"view.showSearchbar"
)
)
;
addComponent
(
showSearchbar
)
;
showBufferSwitcher
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.showBufferSwitcher"
)
)
;
showBufferSwitcher
.
setSelected
(
jEdit
.
getBooleanProperty
(
"view.showBufferSwitcher"
)
)
;
addComponent
(
showBufferSwitcher
)
;
showTips
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.showTips"
)
)
;
showTips
.
setSelected
(
jEdit
.
getBooleanProperty
(
"tip.show"
)
)
;
addComponent
(
showTips
)
;
showSplash
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.showSplash"
)
)
;
String
settingsDirectory
=
jEdit
.
getSettingsDirectory
(
)
;
if
(
settingsDirectory
==
null
)
showSplash
.
setSelected
(
true
)
;
else
showSplash
.
setSelected
(
!
new
File
(
settingsDirectory
,
"nosplash"
)
.
exists
(
)
)
;
addComponent
(
showSplash
)
;
globalColors
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.general.globalColors"
)
)
;
globalColors
.
setSelected
(
jEdit
.
getBooleanProperty
(
"globalColors"
)
)
;
addComponent
(
globalColors
)
;
}
protected
void
_save
(
)
{
String
lf
=
lfs
[
lookAndFeel
.
getSelectedIndex
(
)
]
.
getClassName
(
)
;
jEdit
.
setProperty
(
"lookAndFeel"
,
lf
)
;
jEdit
.
setProperty
(
"history"
,
history
.
getText
(
)
)
;
jEdit
.
setBooleanProperty
(
"saveCaret"
,
saveCaret
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"sortBuffers"
,
sortBuffers
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"sortByName"
,
sortByName
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"view.checkModStatus"
,
checkModStatus
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"view.showFullPath"
,
showFullPath
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"view.showSearchbar"
,
showSearchbar
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"view.showBufferSwitcher"
,
showBufferSwitcher
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"tip.show"
,
showTips
.
isSelected
(
)
)
;
String
settingsDirectory
=
jEdit
.
getSettingsDirectory
(
)
;
if
(
settingsDirectory
!=
null
)
{
File
file
=
new
File
(
settingsDirectory
,
"nosplash"
)
;
if
(
showSplash
.
isSelected
(
)
)
file
.
delete
(
)
;
else
{
try
{
FileOutputStream
out
=
new
FileOutputStream
(
file
)
;
out
.
write
(
'\n'
)
;
out
.
close
(
)
;
}
catch
(
IOException
io
)
{
Log
.
log
(
Log
.
ERROR
,
this
,
io
)
;
}
}
}
jEdit
.
setBooleanProperty
(
"globalColors"
,
globalColors
.
isSelected
(
)
)
;
}
private
UIManager
.
LookAndFeelInfo
[
]
lfs
;
private
JComboBox
lookAndFeel
;
private
JTextField
history
;
private
JCheckBox
saveCaret
;
private
JCheckBox
sortBuffers
;
private
JCheckBox
sortByName
;
private
JCheckBox
checkModStatus
;
private
JCheckBox
showFullPath
;
private
JCheckBox
showSearchbar
;
private
JCheckBox
showBufferSwitcher
;
private
JCheckBox
showTips
;
private
JCheckBox
showSplash
;
private
JCheckBox
globalColors
;
}
