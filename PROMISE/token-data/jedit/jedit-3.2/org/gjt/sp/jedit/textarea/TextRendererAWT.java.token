package
org
.
gjt
.
sp
.
jedit
.
textarea
;
import
java
.
awt
.
*
;
class
TextRendererAWT
extends
TextRenderer
{
float
_drawChars
(
char
[
]
text
,
int
start
,
int
len
,
Graphics
g
,
float
x
,
float
y
)
{
g
.
drawChars
(
text
,
start
,
len
,
(
int
)
x
,
(
int
)
y
)
;
return
(
float
)
g
.
getFontMetrics
(
)
.
charsWidth
(
text
,
start
,
len
)
;
}
float
_getWidth
(
char
[
]
text
,
int
start
,
int
len
,
Font
font
)
{
return
(
float
)
Toolkit
.
getDefaultToolkit
(
)
.
getFontMetrics
(
font
)
.
charsWidth
(
text
,
start
,
len
)
;
}
int
_xToOffset
(
char
[
]
text
,
int
start
,
int
len
,
Font
font
,
float
x
,
boolean
round
)
{
int
end
=
start
+
len
;
FontMetrics
fm
=
Toolkit
.
getDefaultToolkit
(
)
.
getFontMetrics
(
font
)
;
int
width
=
0
;
for
(
int
i
=
start
;
i
<
end
;
i
++
)
{
int
newWidth
=
fm
.
charWidth
(
text
[
i
]
)
;
if
(
x
<=
width
+
newWidth
)
{
if
(
round
&&
(
x
-
width
)
<
(
width
+
newWidth
-
x
)
)
return
i
-
start
;
else
return
i
+
1
-
start
;
}
else
width
+=
newWidth
;
}
return
-
1
;
}
}
