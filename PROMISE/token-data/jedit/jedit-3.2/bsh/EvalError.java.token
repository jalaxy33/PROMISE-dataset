package
bsh
;
public
class
EvalError
extends
Exception
{
SimpleNode
node
;
public
EvalError
(
String
s
)
{
super
(
s
)
;
}
public
EvalError
(
String
s
,
SimpleNode
node
)
{
super
(
s
)
;
this
.
node
=
node
;
}
public
String
toString
(
)
{
String
trace
;
if
(
node
!=
null
)
trace
=
" : at Line: "
+
node
.
getLineNumber
(
)
+
" : in file: "
+
node
.
getSourceFile
(
)
+
" : "
+
node
.
getText
(
)
;
else
trace
=
": <at unknown location>"
;
return
getMessage
(
)
+
trace
;
}
public
void
reThrow
(
String
msg
)
throws
EvalError
{
reThrow
(
msg
,
null
)
;
}
public
void
reThrow
(
SimpleNode
node
)
throws
EvalError
{
reThrow
(
null
,
node
)
;
}
public
void
reThrow
(
String
addMsg
,
SimpleNode
addNode
)
throws
EvalError
{
String
msg
=
getMessage
(
)
;
if
(
addMsg
!=
null
)
msg
=
addMsg
+
" : "
+
msg
;
SimpleNode
node
=
this
.
node
;
if
(
node
==
null
&&
addNode
!=
null
)
node
=
addNode
;
throw
new
EvalError
(
msg
,
node
)
;
}
void
setNode
(
SimpleNode
node
)
{
this
.
node
=
node
;
}
SimpleNode
getNode
(
)
{
return
node
;
}
public
String
getErrorText
(
)
{
if
(
node
!=
null
)
return
node
.
getText
(
)
;
else
return
"<unknown error>"
;
}
public
int
getErrorLineNumber
(
)
{
if
(
node
!=
null
)
return
node
.
getLineNumber
(
)
;
else
return
-
1
;
}
public
String
getErrorSourceFile
(
)
{
if
(
node
!=
null
)
return
node
.
getSourceFile
(
)
;
else
return
"<unknown file>"
;
}
}
