package
org
.
gjt
.
sp
.
jedit
.
options
;
import
javax
.
swing
.
*
;
import
java
.
awt
.
event
.
*
;
import
java
.
awt
.
*
;
import
java
.
io
.
*
;
import
org
.
gjt
.
sp
.
jedit
.
gui
.
FontSelector
;
import
org
.
gjt
.
sp
.
jedit
.
*
;
import
org
.
gjt
.
sp
.
util
.
Log
;
public
class
AppearanceOptionPane
extends
AbstractOptionPane
{
public
AppearanceOptionPane
(
)
{
super
(
"appearance"
)
;
}
protected
void
_init
(
)
{
addComponent
(
new
JLabel
(
jEdit
.
getProperty
(
"options.appearance.lf.note"
)
)
)
;
lfs
=
UIManager
.
getInstalledLookAndFeels
(
)
;
String
[
]
names
=
new
String
[
lfs
.
length
]
;
String
lf
=
UIManager
.
getLookAndFeel
(
)
.
getClass
(
)
.
getName
(
)
;
int
index
=
0
;
for
(
int
i
=
0
;
i
<
names
.
length
;
i
++
)
{
names
[
i
]
=
lfs
[
i
]
.
getName
(
)
;
if
(
lf
.
equals
(
lfs
[
i
]
.
getClassName
(
)
)
)
index
=
i
;
}
lookAndFeel
=
new
JComboBox
(
names
)
;
lookAndFeel
.
setSelectedIndex
(
index
)
;
lookAndFeel
.
addActionListener
(
new
ActionListener
(
)
{
public
void
actionPerformed
(
ActionEvent
evt
)
{
updateEnabled
(
)
;
}
}
)
;
addComponent
(
jEdit
.
getProperty
(
"options.appearance.lf"
)
,
lookAndFeel
)
;
primaryFont
=
new
FontSelector
(
jEdit
.
getFontProperty
(
"metal.primary.font"
)
)
;
addComponent
(
jEdit
.
getProperty
(
"options.appearance.primaryFont"
)
,
primaryFont
)
;
secondaryFont
=
new
FontSelector
(
jEdit
.
getFontProperty
(
"metal.secondary.font"
)
)
;
addComponent
(
jEdit
.
getProperty
(
"options.appearance.secondaryFont"
)
,
secondaryFont
)
;
updateEnabled
(
)
;
textColors
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.appearance.textColors"
)
)
;
textColors
.
setSelected
(
jEdit
.
getBooleanProperty
(
"textColors"
)
)
;
addComponent
(
textColors
)
;
decorateFrames
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.appearance.decorateFrames"
)
)
;
decorateFrames
.
setSelected
(
jEdit
.
getBooleanProperty
(
"decorate.frames"
)
)
;
decorateDialogs
=
new
JCheckBox
(
jEdit
.
getProperty
(
"options.appearance.decorateDialogs"
)
)
;
decorateDialogs
.
setSelected
(
jEdit
.
getBooleanProperty
(
"decorate.dialogs"
)
)
;
if
(
OperatingSystem
.
hasJava14
(
)
)
{
addComponent
(
decorateFrames
)
;
addComponent
(
decorateDialogs
)
;
}
}
protected
void
_save
(
)
{
String
lf
=
lfs
[
lookAndFeel
.
getSelectedIndex
(
)
]
.
getClassName
(
)
;
jEdit
.
setProperty
(
"lookAndFeel"
,
lf
)
;
jEdit
.
setFontProperty
(
"metal.primary.font"
,
primaryFont
.
getFont
(
)
)
;
jEdit
.
setFontProperty
(
"metal.secondary.font"
,
secondaryFont
.
getFont
(
)
)
;
jEdit
.
setBooleanProperty
(
"textColors"
,
textColors
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"decorate.frames"
,
decorateFrames
.
isSelected
(
)
)
;
jEdit
.
setBooleanProperty
(
"decorate.dialogs"
,
decorateDialogs
.
isSelected
(
)
)
;
}
private
UIManager
.
LookAndFeelInfo
[
]
lfs
;
private
JComboBox
lookAndFeel
;
private
FontSelector
primaryFont
;
private
FontSelector
secondaryFont
;
private
JCheckBox
textColors
;
private
JCheckBox
decorateFrames
;
private
JCheckBox
decorateDialogs
;
private
void
updateEnabled
(
)
{
String
className
=
lfs
[
lookAndFeel
.
getSelectedIndex
(
)
]
.
getClassName
(
)
;
if
(
className
.
equals
(
"javax.swing.plaf.metal.MetalLookAndFeel"
)
||
className
.
equals
(
"com.incors.plaf.kunststoff.KunststoffLookAndFeel"
)
)
{
primaryFont
.
setEnabled
(
true
)
;
secondaryFont
.
setEnabled
(
true
)
;
}
else
{
primaryFont
.
setEnabled
(
false
)
;
secondaryFont
.
setEnabled
(
false
)
;
}
}
}
