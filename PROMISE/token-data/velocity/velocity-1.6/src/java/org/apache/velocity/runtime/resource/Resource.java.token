package
org
.
apache
.
velocity
.
runtime
.
resource
;
import
org
.
apache
.
velocity
.
runtime
.
RuntimeServices
;
import
org
.
apache
.
velocity
.
runtime
.
RuntimeConstants
;
import
org
.
apache
.
velocity
.
runtime
.
resource
.
loader
.
ResourceLoader
;
import
org
.
apache
.
velocity
.
exception
.
ResourceNotFoundException
;
import
org
.
apache
.
velocity
.
exception
.
ParseErrorException
;
public
abstract
class
Resource
{
protected
RuntimeServices
rsvc
=
null
;
protected
ResourceLoader
resourceLoader
;
protected
static
final
long
MILLIS_PER_SECOND
=
1000
;
protected
long
modificationCheckInterval
=
0
;
protected
long
lastModified
=
0
;
protected
long
nextCheck
=
0
;
protected
String
name
;
protected
String
encoding
=
RuntimeConstants
.
ENCODING_DEFAULT
;
protected
Object
data
=
null
;
protected
int
type
;
public
Resource
(
)
{
}
public
void
setRuntimeServices
(
RuntimeServices
rs
)
{
rsvc
=
rs
;
}
public
abstract
boolean
process
(
)
throws
ResourceNotFoundException
,
ParseErrorException
,
Exception
;
public
boolean
isSourceModified
(
)
{
return
resourceLoader
.
isSourceModified
(
this
)
;
}
public
void
setModificationCheckInterval
(
long
modificationCheckInterval
)
{
this
.
modificationCheckInterval
=
modificationCheckInterval
;
}
public
boolean
requiresChecking
(
)
{
if
(
modificationCheckInterval
<=
0
)
{
return
false
;
}
return
(
System
.
currentTimeMillis
(
)
>=
nextCheck
)
;
}
public
void
touch
(
)
{
nextCheck
=
System
.
currentTimeMillis
(
)
+
(
MILLIS_PER_SECOND
*
modificationCheckInterval
)
;
}
public
void
setName
(
String
name
)
{
this
.
name
=
name
;
}
public
String
getName
(
)
{
return
name
;
}
public
void
setEncoding
(
String
encoding
)
{
this
.
encoding
=
encoding
;
}
public
String
getEncoding
(
)
{
return
encoding
;
}
public
long
getLastModified
(
)
{
return
lastModified
;
}
public
void
setLastModified
(
long
lastModified
)
{
this
.
lastModified
=
lastModified
;
}
public
ResourceLoader
getResourceLoader
(
)
{
return
resourceLoader
;
}
public
void
setResourceLoader
(
ResourceLoader
resourceLoader
)
{
this
.
resourceLoader
=
resourceLoader
;
}
public
void
setData
(
Object
data
)
{
this
.
data
=
data
;
}
public
Object
getData
(
)
{
return
data
;
}
public
void
setType
(
int
type
)
{
this
.
type
=
type
;
}
public
int
getType
(
)
{
return
type
;
}
}
