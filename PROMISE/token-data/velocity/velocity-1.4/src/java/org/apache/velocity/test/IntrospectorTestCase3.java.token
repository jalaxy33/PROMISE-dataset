package
org
.
apache
.
velocity
.
test
;
import
java
.
util
.
ArrayList
;
import
java
.
util
.
List
;
import
java
.
lang
.
reflect
.
Method
;
import
org
.
apache
.
velocity
.
runtime
.
RuntimeSingleton
;
import
junit
.
framework
.
TestCase
;
import
junit
.
framework
.
Test
;
import
junit
.
framework
.
TestSuite
;
public
class
IntrospectorTestCase3
extends
BaseTestCase
{
public
IntrospectorTestCase3
(
String
name
)
{
super
(
name
)
;
}
public
static
Test
suite
(
)
{
return
new
TestSuite
(
IntrospectorTestCase3
.
class
)
;
}
public
void
testSimple
(
)
throws
Exception
{
Method
method
;
String
result
;
String
type
;
MethodProvider
mp
=
new
MethodProvider
(
)
;
Object
[
]
listIntInt
=
{
new
ArrayList
(
)
,
new
Integer
(
1
)
,
new
Integer
(
2
)
}
;
Object
[
]
listLongList
=
{
new
ArrayList
(
)
,
new
Long
(
1
)
,
new
ArrayList
(
)
}
;
Object
[
]
listLongInt
=
{
new
ArrayList
(
)
,
new
Long
(
1
)
,
new
Integer
(
2
)
}
;
Object
[
]
intInt
=
{
new
Integer
(
1
)
,
new
Integer
(
2
)
}
;
Object
[
]
longInt
=
{
new
Long
(
1
)
,
new
Integer
(
2
)
}
;
Object
[
]
longLong
=
{
new
Long
(
1
)
,
new
Long
(
2
)
}
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"lii"
,
listIntInt
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
listIntInt
)
;
assertTrue
(
result
.
equals
(
"lii"
)
)
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"ii"
,
intInt
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
intInt
)
;
assertTrue
(
result
.
equals
(
"ii"
)
)
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"ll"
,
longInt
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
longInt
)
;
assertTrue
(
result
.
equals
(
"ll"
)
)
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"ll"
,
longLong
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
longLong
)
;
assertTrue
(
result
.
equals
(
"ll"
)
)
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"lll"
,
listLongList
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
listLongList
)
;
assertTrue
(
result
.
equals
(
"lll"
)
)
;
Object
[
]
oa
=
{
null
,
new
Integer
(
0
)
}
;
method
=
RuntimeSingleton
.
getIntrospector
(
)
.
getMethod
(
MethodProvider
.
class
,
"lll"
,
oa
)
;
result
=
(
String
)
method
.
invoke
(
mp
,
oa
)
;
assertTrue
(
result
.
equals
(
"Listl"
)
)
;
}
public
static
class
MethodProvider
{
public
String
ii
(
int
p
,
int
d
)
{
return
"ii"
;
}
public
String
lii
(
List
s
,
int
p
,
int
d
)
{
return
"lii"
;
}
public
String
lll
(
List
s
,
long
p
,
List
d
)
{
return
"lll"
;
}
public
String
lll
(
List
s
,
long
p
,
int
d
)
{
return
"lli"
;
}
public
String
lll
(
List
s
,
long
p
)
{
return
"Listl"
;
}
public
String
ll
(
long
p
,
long
d
)
{
return
"ll"
;
}
}
}
