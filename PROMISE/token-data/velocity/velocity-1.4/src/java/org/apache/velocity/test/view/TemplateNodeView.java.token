package
org
.
apache
.
velocity
.
test
.
view
;
import
java
.
io
.
IOException
;
import
java
.
io
.
PrintWriter
;
import
java
.
io
.
FileInputStream
;
import
java
.
io
.
BufferedReader
;
import
java
.
io
.
InputStreamReader
;
import
org
.
apache
.
velocity
.
runtime
.
RuntimeSingleton
;
import
org
.
apache
.
velocity
.
runtime
.
visitor
.
NodeViewMode
;
import
org
.
apache
.
velocity
.
runtime
.
parser
.
node
.
SimpleNode
;
public
class
TemplateNodeView
{
private
SimpleNode
document
;
private
NodeViewMode
visitor
;
public
TemplateNodeView
(
String
template
)
{
try
{
RuntimeSingleton
.
init
(
"velocity.properties"
)
;
InputStreamReader
isr
=
new
InputStreamReader
(
new
FileInputStream
(
template
)
,
RuntimeSingleton
.
getString
(
RuntimeSingleton
.
INPUT_ENCODING
)
)
;
BufferedReader
br
=
new
BufferedReader
(
isr
)
;
document
=
RuntimeSingleton
.
parse
(
br
,
template
)
;
visitor
=
new
NodeViewMode
(
)
;
visitor
.
setContext
(
null
)
;
visitor
.
setWriter
(
new
PrintWriter
(
System
.
out
)
)
;
document
.
jjtAccept
(
visitor
,
null
)
;
}
catch
(
Exception
e
)
{
System
.
out
.
println
(
e
)
;
e
.
printStackTrace
(
)
;
}
}
public
static
void
main
(
String
args
[
]
)
{
TemplateNodeView
v
=
new
TemplateNodeView
(
args
[
0
]
)
;
}
}
