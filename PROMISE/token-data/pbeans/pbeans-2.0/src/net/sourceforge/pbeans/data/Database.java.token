package
net
.
sourceforge
.
pbeans
.
data
;
import
java
.
sql
.
*
;
import
java
.
util
.
*
;
public
interface
Database
{
public
void
init
(
javax
.
sql
.
DataSource
dataSource
)
throws
SQLException
;
int
getMaxTableNameLength
(
)
throws
SQLException
;
int
getMaxColumnNameLength
(
)
throws
SQLException
;
void
ensureTableExists
(
String
tableName
,
FieldDescriptor
fixedDescriptor
,
Collection
fieldDescriptors
,
Collection
indexDescriptors
,
boolean
userManaged
,
boolean
autoIncrementRequested
,
boolean
deleteFields
)
throws
SQLException
;
public
ResultsIterator
<
BeanWrapper
>
query
(
String
sql
,
Object
[
]
parameters
,
BeanUnmarshaller
unmarshaller
)
throws
SQLException
;
public
int
update
(
String
sql
,
Object
[
]
parameters
)
throws
SQLException
;
public
Long
insert
(
String
tableName
,
String
idField
,
String
[
]
fieldNames
,
Object
[
]
values
,
boolean
autoIncrementRequested
)
throws
SQLException
;
void
requestLock
(
String
lockName
,
int
transactionIsolationLevel
)
throws
InterruptedException
,
SQLException
;
void
relinquishLock
(
)
throws
SQLException
;
void
beginTransaction
(
int
transactionIsolationLevel
)
throws
SQLException
;
void
endTransaction
(
)
throws
SQLException
;
public
Savepoint
setSavepoint
(
String
savepointName
)
throws
SQLException
;
public
void
rollback
(
Savepoint
savepoint
)
throws
SQLException
;
public
boolean
inTransaction
(
)
;
boolean
isDuplicateEntryError
(
SQLException
se
)
;
public
String
normalizeName
(
String
itemName
)
;
}
