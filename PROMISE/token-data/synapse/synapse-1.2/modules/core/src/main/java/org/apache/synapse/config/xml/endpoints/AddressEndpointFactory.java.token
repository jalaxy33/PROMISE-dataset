package
org
.
apache
.
synapse
.
config
.
xml
.
endpoints
;
import
org
.
apache
.
axiom
.
om
.
OMAttribute
;
import
org
.
apache
.
axiom
.
om
.
OMElement
;
import
org
.
apache
.
synapse
.
SynapseConstants
;
import
org
.
apache
.
synapse
.
config
.
xml
.
XMLConfigConstants
;
import
org
.
apache
.
synapse
.
endpoints
.
AddressEndpoint
;
import
org
.
apache
.
synapse
.
endpoints
.
Endpoint
;
import
org
.
apache
.
synapse
.
endpoints
.
utils
.
EndpointDefinition
;
import
javax
.
xml
.
namespace
.
QName
;
public
class
AddressEndpointFactory
extends
DefaultEndpointFactory
{
private
static
AddressEndpointFactory
instance
=
new
AddressEndpointFactory
(
)
;
private
AddressEndpointFactory
(
)
{
}
public
static
AddressEndpointFactory
getInstance
(
)
{
return
instance
;
}
protected
Endpoint
createEndpoint
(
OMElement
epConfig
,
boolean
anonymousEndpoint
)
{
AddressEndpoint
addressEndpoint
=
new
AddressEndpoint
(
)
;
OMAttribute
name
=
epConfig
.
getAttribute
(
new
QName
(
XMLConfigConstants
.
NULL_NAMESPACE
,
"name"
)
)
;
if
(
name
!=
null
)
{
addressEndpoint
.
setName
(
name
.
getAttributeValue
(
)
)
;
}
OMElement
addressElement
=
epConfig
.
getFirstChildWithName
(
new
QName
(
SynapseConstants
.
SYNAPSE_NAMESPACE
,
"address"
)
)
;
if
(
addressElement
!=
null
)
{
EndpointDefinition
endpoint
=
createEndpointDefinition
(
addressElement
)
;
addressEndpoint
.
setEndpoint
(
endpoint
)
;
}
return
addressEndpoint
;
}
public
EndpointDefinition
createEndpointDefinition
(
OMElement
elem
)
{
OMAttribute
address
=
elem
.
getAttribute
(
new
QName
(
"uri"
)
)
;
EndpointDefinition
endpointDefinition
=
new
EndpointDefinition
(
)
;
if
(
address
!=
null
)
{
endpointDefinition
.
setAddress
(
address
.
getAttributeValue
(
)
)
;
}
extractCommonEndpointProperties
(
endpointDefinition
,
elem
)
;
extractSpecificEndpointProperties
(
endpointDefinition
,
elem
)
;
return
endpointDefinition
;
}
}
