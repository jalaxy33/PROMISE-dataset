package
org
.
apache
.
synapse
.
config
.
xml
;
import
org
.
apache
.
axiom
.
om
.
OMElement
;
import
org
.
apache
.
synapse
.
Mediator
;
import
org
.
apache
.
synapse
.
mediators
.
db
.
DBReportMediator
;
public
class
DBReportMediatorSerializer
extends
AbstractDBMediatorSerializer
{
public
OMElement
serializeSpecificMediator
(
Mediator
m
)
{
if
(
!
(
m
instanceof
DBReportMediator
)
)
{
handleException
(
"Unsupported mediator passed in for serialization : "
+
m
.
getType
(
)
)
;
}
DBReportMediator
mediator
=
(
DBReportMediator
)
m
;
OMElement
dbReport
=
fac
.
createOMElement
(
"dbreport"
,
synNS
)
;
if
(
mediator
.
isUseTransaction
(
)
)
{
dbReport
.
addAttribute
(
fac
.
createOMAttribute
(
"useTransaction"
,
nullNS
,
"true"
)
)
;
}
saveTracingState
(
dbReport
,
mediator
)
;
serializeDBInformation
(
mediator
,
dbReport
)
;
return
dbReport
;
}
public
String
getMediatorClassName
(
)
{
return
DBReportMediator
.
class
.
getName
(
)
;
}
}
