package
org
.
apache
.
synapse
.
config
.
xml
;
import
org
.
apache
.
axiom
.
om
.
OMAttribute
;
import
org
.
apache
.
axiom
.
om
.
OMElement
;
import
org
.
apache
.
synapse
.
Mediator
;
import
org
.
apache
.
synapse
.
config
.
xml
.
endpoints
.
EndpointFactory
;
import
org
.
apache
.
synapse
.
endpoints
.
Endpoint
;
import
org
.
apache
.
synapse
.
mediators
.
Value
;
import
org
.
apache
.
synapse
.
mediators
.
builtin
.
SendMediator
;
import
javax
.
xml
.
namespace
.
QName
;
import
java
.
util
.
Properties
;
public
class
SendMediatorFactory
extends
AbstractMediatorFactory
{
private
static
final
QName
SEND_Q
=
new
QName
(
XMLConfigConstants
.
SYNAPSE_NAMESPACE
,
"send"
)
;
private
static
final
QName
ENDPOINT_Q
=
new
QName
(
XMLConfigConstants
.
SYNAPSE_NAMESPACE
,
"endpoint"
)
;
private
static
final
QName
RECEIVING_SEQUENCE
=
new
QName
(
XMLConfigConstants
.
RECEIVE
)
;
public
Mediator
createSpecificMediator
(
OMElement
elem
,
Properties
properties
)
{
SendMediator
sm
=
new
SendMediator
(
)
;
processAuditStatus
(
sm
,
elem
)
;
OMElement
epElement
=
elem
.
getFirstChildWithName
(
ENDPOINT_Q
)
;
if
(
epElement
!=
null
)
{
Endpoint
endpoint
=
EndpointFactory
.
getEndpointFromElement
(
epElement
,
true
,
properties
)
;
if
(
endpoint
!=
null
)
{
sm
.
setEndpoint
(
endpoint
)
;
}
}
String
receivingSequence
=
elem
.
getAttributeValue
(
RECEIVING_SEQUENCE
)
;
if
(
receivingSequence
!=
null
)
{
ValueFactory
valueFactory
=
new
ValueFactory
(
)
;
Value
value
=
valueFactory
.
createValue
(
XMLConfigConstants
.
RECEIVE
,
elem
)
;
sm
.
setReceivingSequence
(
value
)
;
}
return
sm
;
}
public
QName
getTagQName
(
)
{
return
SEND_Q
;
}
}
