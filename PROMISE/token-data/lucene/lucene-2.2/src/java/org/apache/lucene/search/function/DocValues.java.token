package
org
.
apache
.
lucene
.
search
.
function
;
import
org
.
apache
.
lucene
.
search
.
Explanation
;
public
abstract
class
DocValues
{
private
int
nVals
;
public
DocValues
(
int
nVals
)
{
this
.
nVals
=
nVals
;
}
private
DocValues
(
)
{
}
public
abstract
float
floatVal
(
int
doc
)
;
public
int
intVal
(
int
doc
)
{
return
(
int
)
floatVal
(
doc
)
;
}
public
long
longVal
(
int
doc
)
{
return
(
long
)
floatVal
(
doc
)
;
}
public
double
doubleVal
(
int
doc
)
{
return
(
double
)
floatVal
(
doc
)
;
}
public
String
strVal
(
int
doc
)
{
return
Float
.
toString
(
floatVal
(
doc
)
)
;
}
public
abstract
String
toString
(
int
doc
)
;
public
Explanation
explain
(
int
doc
)
{
return
new
Explanation
(
floatVal
(
doc
)
,
toString
(
doc
)
)
;
}
Object
getInnerArray
(
)
{
return
new
Object
[
0
]
;
}
private
float
minVal
;
private
float
maxVal
;
private
float
avgVal
;
private
boolean
computed
=
false
;
private
void
compute
(
)
{
if
(
computed
)
{
return
;
}
minVal
=
Float
.
MAX_VALUE
;
maxVal
=
0
;
float
sum
=
0
;
for
(
int
i
=
0
;
i
<
nVals
;
i
++
)
{
float
val
=
floatVal
(
i
)
;
sum
+=
val
;
minVal
=
Math
.
min
(
minVal
,
val
)
;
maxVal
=
Math
.
max
(
maxVal
,
val
)
;
}
avgVal
=
sum
/
nVals
;
computed
=
true
;
}
public
float
getMinValue
(
)
{
compute
(
)
;
return
minVal
;
}
public
float
getMaxValue
(
)
{
compute
(
)
;
return
maxVal
;
}
public
float
getAverageValue
(
)
{
compute
(
)
;
return
avgVal
;
}
}
