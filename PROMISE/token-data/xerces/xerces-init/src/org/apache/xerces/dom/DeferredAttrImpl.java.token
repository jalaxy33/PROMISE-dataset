package
org
.
apache
.
xerces
.
dom
;
import
org
.
w3c
.
dom
.
*
;
import
org
.
apache
.
xerces
.
utils
.
StringPool
;
public
final
class
DeferredAttrImpl
extends
AttrImpl
implements
DeferredNode
{
static
final
long
serialVersionUID
=
8793967374959140933L
;
protected
transient
int
fNodeIndex
;
DeferredAttrImpl
(
DeferredDocumentImpl
ownerDocument
,
int
nodeIndex
)
{
super
(
ownerDocument
,
null
)
;
fNodeIndex
=
nodeIndex
;
syncData
=
true
;
syncChildren
=
true
;
}
public
int
getNodeIndex
(
)
{
return
fNodeIndex
;
}
protected
void
synchronizeData
(
)
{
syncData
=
false
;
DeferredDocumentImpl
ownerDocument
=
(
DeferredDocumentImpl
)
this
.
ownerDocument
;
name
=
ownerDocument
.
getNodeNameString
(
fNodeIndex
)
;
specified
=
ownerDocument
.
getNodeValue
(
fNodeIndex
)
==
1
;
if
(
ownerDocument
.
fNamespacesEnabled
)
{
int
elementTypeName
=
ownerDocument
.
getNodeName
(
fNodeIndex
)
;
StringPool
fStringPool
=
ownerDocument
.
fStringPool
;
prefix
=
fStringPool
.
toString
(
fStringPool
.
getPrefixForQName
(
elementTypeName
)
)
;
namespaceURI
=
fStringPool
.
toString
(
fStringPool
.
getURIForQName
(
elementTypeName
)
)
;
localName
=
fStringPool
.
toString
(
fStringPool
.
getLocalPartForQName
(
elementTypeName
)
)
;
}
else
{
localName
=
name
;
}
}
protected
void
synchronizeChildren
(
)
{
syncChildren
=
false
;
DeferredDocumentImpl
ownerDocument
=
(
DeferredDocumentImpl
)
this
.
ownerDocument
;
NodeImpl
last
=
null
;
for
(
int
index
=
ownerDocument
.
getFirstChild
(
fNodeIndex
)
;
index
!=
-
1
;
index
=
ownerDocument
.
getNextSibling
(
index
)
)
{
NodeImpl
node
=
(
NodeImpl
)
ownerDocument
.
getNodeObject
(
index
)
;
if
(
last
==
null
)
{
firstChild
=
node
;
}
else
{
last
.
nextSibling
=
node
;
}
node
.
parentNode
=
this
;
node
.
previousSibling
=
last
;
last
=
node
;
}
if
(
last
!=
null
)
{
lastChild
=
last
;
}
}
}
