package
org
.
apache
.
xerces
.
validators
.
common
;
import
org
.
apache
.
xerces
.
framework
.
XMLContentSpec
;
import
org
.
apache
.
xerces
.
utils
.
ImplementationMessages
;
import
org
.
apache
.
xerces
.
utils
.
QName
;
import
org
.
apache
.
xerces
.
utils
.
StringPool
;
public
class
CMLeaf
extends
CMNode
{
private
QName
fElement
=
new
QName
(
)
;
private
int
fPosition
=
-
1
;
public
CMLeaf
(
QName
element
,
int
position
)
throws
CMException
{
super
(
XMLContentSpec
.
CONTENTSPECNODE_LEAF
)
;
fElement
.
setValues
(
element
)
;
fPosition
=
position
;
}
public
CMLeaf
(
QName
element
)
throws
CMException
{
super
(
XMLContentSpec
.
CONTENTSPECNODE_LEAF
)
;
fElement
.
setValues
(
element
)
;
}
final
QName
getElement
(
)
{
return
fElement
;
}
final
int
getPosition
(
)
{
return
fPosition
;
}
final
void
setPosition
(
int
newPosition
)
{
fPosition
=
newPosition
;
}
boolean
isNullable
(
)
throws
CMException
{
return
(
fPosition
==
-
1
)
;
}
String
toString
(
StringPool
stringPool
)
{
StringBuffer
strRet
=
new
StringBuffer
(
fElement
.
toString
(
)
)
;
strRet
.
append
(
" ("
)
;
strRet
.
append
(
stringPool
.
toString
(
fElement
.
uri
)
)
;
strRet
.
append
(
','
)
;
strRet
.
append
(
stringPool
.
toString
(
fElement
.
localpart
)
)
;
strRet
.
append
(
')'
)
;
if
(
fPosition
>=
0
)
{
strRet
.
append
(
" (Pos:"
+
new
Integer
(
fPosition
)
.
toString
(
)
+
")"
)
;
}
return
strRet
.
toString
(
)
;
}
protected
void
calcFirstPos
(
CMStateSet
toSet
)
throws
CMException
{
if
(
fPosition
==
-
1
)
toSet
.
zeroBits
(
)
;
else
toSet
.
setBit
(
fPosition
)
;
}
protected
void
calcLastPos
(
CMStateSet
toSet
)
throws
CMException
{
if
(
fPosition
==
-
1
)
toSet
.
zeroBits
(
)
;
else
toSet
.
setBit
(
fPosition
)
;
}
}
