package
org
.
apache
.
xerces
.
validators
.
schema
;
import
org
.
apache
.
xerces
.
utils
.
XMLMessageProvider
;
import
java
.
util
.
ResourceBundle
;
import
java
.
util
.
ListResourceBundle
;
import
java
.
util
.
Locale
;
public
class
SchemaMessageProvider
implements
XMLMessageProvider
{
public
static
final
String
SCHEMA_DOMAIN
=
"http://www.w3.org/TR/xml-schema-1"
;
public
void
setLocale
(
Locale
locale
)
{
fLocale
=
locale
;
}
public
Locale
getLocale
(
)
{
return
fLocale
;
}
public
String
createMessage
(
Locale
locale
,
int
majorCode
,
int
minorCode
,
Object
args
[
]
)
{
boolean
throwex
=
false
;
if
(
fResourceBundle
==
null
||
locale
!=
fLocale
)
{
if
(
locale
!=
null
)
fResourceBundle
=
ListResourceBundle
.
getBundle
(
"org.apache.xerces.msg.SchemaMessages"
,
locale
)
;
if
(
fResourceBundle
==
null
)
fResourceBundle
=
ListResourceBundle
.
getBundle
(
"org.apache.xerces.msg.SchemaMessages"
)
;
}
if
(
majorCode
<
0
||
majorCode
>=
fgMessageKeys
.
length
)
{
majorCode
=
MSG_BAD_MAJORCODE
;
throwex
=
true
;
}
String
msgKey
=
fgMessageKeys
[
majorCode
]
;
String
msg
=
fResourceBundle
.
getString
(
msgKey
)
;
if
(
args
!=
null
)
{
try
{
msg
=
java
.
text
.
MessageFormat
.
format
(
msg
,
args
)
;
}
catch
(
Exception
e
)
{
msg
=
fResourceBundle
.
getString
(
fgMessageKeys
[
MSG_FORMAT_FAILURE
]
)
;
msg
+=
" "
+
fResourceBundle
.
getString
(
msgKey
)
;
}
}
if
(
throwex
)
{
throw
new
RuntimeException
(
msg
)
;
}
return
msg
;
}
private
Locale
fLocale
=
null
;
private
ResourceBundle
fResourceBundle
=
null
;
public
static
final
int
MSG_BAD_MAJORCODE
=
0
,
MSG_FORMAT_FAILURE
=
1
,
NoValidatorFor
=
2
,
IncorrectDatatype
=
3
,
AttMissingType
=
4
,
NotADatatype
=
5
,
TextOnlyContentWithType
=
6
,
FeatureUnsupported
=
7
,
NestedOnlyInElemOnly
=
8
,
EltRefOnlyInMixedElemOnly
=
9
,
OnlyInEltContent
=
10
,
OrderIsAll
=
11
,
DatatypeWithType
=
12
,
DatatypeQualUnsupported
=
13
,
GroupContentRestricted
=
14
,
UnknownBaseDatatype
=
15
,
OneOfTypeRefArchRef
=
16
,
NoContentForRef
=
17
,
IncorrectDefaultType
=
18
,
IllegalAttContent
=
19
,
ValueNotInteger
=
20
,
DatatypeError
=
21
,
TypeAlreadySet
=
22
,
GenericError
=
23
,
UnclassifiedError
=
24
,
MSG_MAX_CODE
=
31
;
public
static
final
int
MSG_NONE
=
0
;
public
static
final
String
[
]
fgMessageKeys
=
{
"BadMajorCode"
,
"FormatFailed"
,
"NoValidatorFor"
,
"IncorrectDatatype"
,
"AttMissingType"
,
"NotADatatype"
,
"TextOnlyContentWithType"
,
"FeatureUnsupported"
,
"NestedOnlyInElemOnly"
,
"EltRefOnlyInMixedElemOnly"
,
"OnlyInEltContent"
,
"OrderIsAll"
,
"DatatypeWithType"
,
"DatatypeQualUnsupported"
,
"GroupContentRestricted"
,
"UnknownBaseDatatype"
,
"OneOfTypeRefArchRef"
,
"NoContentForRef"
,
"IncorrectDefaultType"
,
"IllegalAttContent"
,
"ValueNotInteger"
,
"DatatypeError"
,
"TypeAlreadySet"
,
"GenericError"
,
"UnclassifiedError"
,
}
;
}
