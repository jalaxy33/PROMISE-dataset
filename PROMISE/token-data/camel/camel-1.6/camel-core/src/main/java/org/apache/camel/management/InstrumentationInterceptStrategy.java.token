package
org
.
apache
.
camel
.
management
;
import
java
.
util
.
Map
;
import
org
.
apache
.
camel
.
Processor
;
import
org
.
apache
.
camel
.
model
.
ProcessorType
;
import
org
.
apache
.
camel
.
spi
.
InterceptStrategy
;
public
class
InstrumentationInterceptStrategy
implements
InterceptStrategy
{
private
Map
<
ProcessorType
,
PerformanceCounter
>
counterMap
;
public
InstrumentationInterceptStrategy
(
Map
<
ProcessorType
,
PerformanceCounter
>
counterMap
)
{
this
.
counterMap
=
counterMap
;
}
public
Processor
wrapProcessorInInterceptors
(
ProcessorType
processorType
,
Processor
target
)
throws
Exception
{
Processor
retval
=
target
;
PerformanceCounter
counter
=
counterMap
.
get
(
processorType
)
;
if
(
counter
!=
null
)
{
InstrumentationProcessor
wrapper
=
new
InstrumentationProcessor
(
counter
)
;
wrapper
.
setProcessor
(
target
)
;
retval
=
wrapper
;
}
return
retval
;
}
}
