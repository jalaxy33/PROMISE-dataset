package
org
.
apache
.
camel
.
util
;
import
org
.
apache
.
commons
.
logging
.
Log
;
import
org
.
apache
.
commons
.
logging
.
LogFactory
;
public
final
class
PackageHelper
{
private
static
final
transient
Log
LOG
=
LogFactory
.
getLog
(
PackageHelper
.
class
)
;
private
PackageHelper
(
)
{
}
public
static
boolean
isValidVersion
(
String
packageName
,
double
minimumVersion
)
{
try
{
Package
spring
=
Package
.
getPackage
(
packageName
)
;
String
value
=
spring
.
getImplementationVersion
(
)
;
if
(
value
!=
null
)
{
int
idx
=
value
.
indexOf
(
'.'
)
;
if
(
idx
>=
0
)
{
StringBuffer
buffer
=
new
StringBuffer
(
value
.
substring
(
0
,
++
idx
)
)
;
int
i
=
idx
;
for
(
int
size
=
value
.
length
(
)
;
i
<
size
;
i
++
)
{
char
ch
=
value
.
charAt
(
i
)
;
if
(
Character
.
isDigit
(
ch
)
)
{
buffer
.
append
(
ch
)
;
}
}
value
=
buffer
.
toString
(
)
;
}
double
number
=
Double
.
parseDouble
(
value
)
;
return
number
>=
minimumVersion
;
}
}
catch
(
Exception
e
)
{
LOG
.
debug
(
"Failed to find out "
+
packageName
+
" version: "
+
e
,
e
)
;
}
return
true
;
}
}
