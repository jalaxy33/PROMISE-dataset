package
org
.
apache
.
camel
.
component
.
file
;
import
org
.
apache
.
camel
.
Consumer
;
import
org
.
apache
.
camel
.
Processor
;
import
org
.
apache
.
camel
.
Producer
;
import
org
.
apache
.
camel
.
impl
.
ScheduledPollEndpoint
;
import
java
.
io
.
File
;
public
class
FileEndpoint
extends
ScheduledPollEndpoint
<
FileExchange
>
{
private
File
file
;
private
boolean
autoCreate
=
true
;
protected
FileEndpoint
(
File
file
,
String
endpointUri
,
FileComponent
component
)
{
super
(
endpointUri
,
component
)
;
this
.
file
=
file
;
}
public
Producer
<
FileExchange
>
createProducer
(
)
throws
Exception
{
Producer
<
FileExchange
>
result
=
new
FileProducer
(
this
)
;
return
result
;
}
public
Consumer
<
FileExchange
>
createConsumer
(
Processor
file
)
throws
Exception
{
Consumer
<
FileExchange
>
result
=
new
FileConsumer
(
this
,
file
)
;
configureConsumer
(
result
)
;
return
result
;
}
public
FileExchange
createExchange
(
File
file
)
{
return
new
FileExchange
(
getContext
(
)
,
file
)
;
}
public
FileExchange
createExchange
(
)
{
return
createExchange
(
getFile
(
)
)
;
}
public
File
getFile
(
)
{
if
(
autoCreate
&&
!
file
.
exists
(
)
)
{
file
.
mkdirs
(
)
;
}
return
file
;
}
public
boolean
isSingleton
(
)
{
return
true
;
}
public
boolean
isAutoCreate
(
)
{
return
this
.
autoCreate
;
}
public
void
setAutoCreate
(
boolean
autoCreate
)
{
this
.
autoCreate
=
autoCreate
;
}
}
