package
org
.
apache
.
xpath
.
axes
;
import
javax
.
xml
.
transform
.
TransformerException
;
import
org
.
apache
.
xpath
.
compiler
.
Compiler
;
import
org
.
apache
.
xpath
.
patterns
.
NodeTest
;
import
org
.
apache
.
xpath
.
XPathContext
;
import
org
.
apache
.
xml
.
utils
.
PrefixResolver
;
import
org
.
apache
.
xml
.
dtm
.
DTM
;
public
class
SelfIteratorNoPredicate
extends
LocPathIterator
{
SelfIteratorNoPredicate
(
Compiler
compiler
,
int
opPos
,
int
analysis
)
throws
javax
.
xml
.
transform
.
TransformerException
{
super
(
compiler
,
opPos
,
analysis
,
false
)
;
}
public
SelfIteratorNoPredicate
(
)
throws
javax
.
xml
.
transform
.
TransformerException
{
super
(
null
)
;
}
public
int
nextNode
(
)
{
int
next
;
DTM
dtm
=
m_cdtm
;
m_lastFetched
=
next
=
(
DTM
.
NULL
==
m_lastFetched
)
?
m_context
:
DTM
.
NULL
;
if
(
DTM
.
NULL
!=
next
)
{
m_pos
++
;
return
next
;
}
else
{
m_foundLast
=
true
;
return
DTM
.
NULL
;
}
}
public
int
asNode
(
XPathContext
xctxt
)
throws
javax
.
xml
.
transform
.
TransformerException
{
return
xctxt
.
getCurrentNode
(
)
;
}
public
int
getLastPos
(
XPathContext
xctxt
)
{
return
1
;
}
}
