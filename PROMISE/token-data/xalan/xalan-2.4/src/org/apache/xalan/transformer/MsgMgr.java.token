package
org
.
apache
.
xalan
.
transformer
;
import
org
.
apache
.
xalan
.
res
.
XSLMessages
;
import
org
.
xml
.
sax
.
Locator
;
import
org
.
xml
.
sax
.
helpers
.
LocatorImpl
;
import
org
.
w3c
.
dom
.
Node
;
import
javax
.
xml
.
transform
.
TransformerException
;
import
javax
.
xml
.
transform
.
ErrorListener
;
import
javax
.
xml
.
transform
.
dom
.
DOMLocator
;
import
javax
.
xml
.
transform
.
SourceLocator
;
public
class
MsgMgr
{
public
MsgMgr
(
TransformerImpl
transformer
)
{
m_transformer
=
transformer
;
}
private
TransformerImpl
m_transformer
;
private
static
XSLMessages
m_XSLMessages
=
new
XSLMessages
(
)
;
public
void
message
(
SourceLocator
srcLctr
,
String
msg
,
boolean
terminate
)
throws
TransformerException
{
ErrorListener
errHandler
=
m_transformer
.
getErrorListener
(
)
;
if
(
null
!=
errHandler
)
{
errHandler
.
warning
(
new
TransformerException
(
msg
,
srcLctr
)
)
;
}
else
{
if
(
terminate
)
throw
new
TransformerException
(
msg
,
srcLctr
)
;
else
System
.
out
.
println
(
msg
)
;
}
}
public
void
warn
(
SourceLocator
srcLctr
,
int
msg
)
throws
TransformerException
{
warn
(
srcLctr
,
null
,
null
,
msg
,
null
)
;
}
public
void
warn
(
SourceLocator
srcLctr
,
int
msg
,
Object
[
]
args
)
throws
TransformerException
{
warn
(
srcLctr
,
null
,
null
,
msg
,
args
)
;
}
public
void
warn
(
SourceLocator
srcLctr
,
Node
styleNode
,
Node
sourceNode
,
int
msg
)
throws
TransformerException
{
warn
(
srcLctr
,
styleNode
,
sourceNode
,
msg
,
null
)
;
}
public
void
warn
(
SourceLocator
srcLctr
,
Node
styleNode
,
Node
sourceNode
,
int
msg
,
Object
args
[
]
)
throws
TransformerException
{
String
formattedMsg
=
m_XSLMessages
.
createWarning
(
msg
,
args
)
;
ErrorListener
errHandler
=
m_transformer
.
getErrorListener
(
)
;
if
(
null
!=
errHandler
)
errHandler
.
warning
(
new
TransformerException
(
formattedMsg
,
srcLctr
)
)
;
else
System
.
out
.
println
(
formattedMsg
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
String
msg
)
throws
TransformerException
{
ErrorListener
errHandler
=
m_transformer
.
getErrorListener
(
)
;
if
(
null
!=
errHandler
)
errHandler
.
fatalError
(
new
TransformerException
(
msg
,
srcLctr
)
)
;
else
throw
new
TransformerException
(
msg
,
srcLctr
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
int
msg
)
throws
TransformerException
{
error
(
srcLctr
,
null
,
null
,
msg
,
null
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
int
msg
,
Object
[
]
args
)
throws
TransformerException
{
error
(
srcLctr
,
null
,
null
,
msg
,
args
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
int
msg
,
Exception
e
)
throws
TransformerException
{
error
(
srcLctr
,
msg
,
null
,
e
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
int
msg
,
Object
args
[
]
,
Exception
e
)
throws
TransformerException
{
String
formattedMsg
=
m_XSLMessages
.
createMessage
(
msg
,
args
)
;
ErrorListener
errHandler
=
m_transformer
.
getErrorListener
(
)
;
if
(
null
!=
errHandler
)
errHandler
.
fatalError
(
new
TransformerException
(
formattedMsg
,
srcLctr
)
)
;
else
throw
new
TransformerException
(
formattedMsg
,
srcLctr
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
Node
styleNode
,
Node
sourceNode
,
int
msg
)
throws
TransformerException
{
error
(
srcLctr
,
styleNode
,
sourceNode
,
msg
,
null
)
;
}
public
void
error
(
SourceLocator
srcLctr
,
Node
styleNode
,
Node
sourceNode
,
int
msg
,
Object
args
[
]
)
throws
TransformerException
{
String
formattedMsg
=
m_XSLMessages
.
createMessage
(
msg
,
args
)
;
ErrorListener
errHandler
=
m_transformer
.
getErrorListener
(
)
;
if
(
null
!=
errHandler
)
errHandler
.
fatalError
(
new
TransformerException
(
formattedMsg
,
srcLctr
)
)
;
else
throw
new
TransformerException
(
formattedMsg
,
srcLctr
)
;
}
}
