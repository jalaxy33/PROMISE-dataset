package
org
.
apache
.
log4j
;
import
java
.
io
.
OutputStreamWriter
;
import
org
.
apache
.
log4j
.
helpers
.
LogLog
;
public
class
ConsoleAppender
extends
WriterAppender
{
public
static
final
String
SYSTEM_OUT
=
"System.out"
;
public
static
final
String
SYSTEM_ERR
=
"System.err"
;
protected
String
target
=
SYSTEM_OUT
;
public
ConsoleAppender
(
)
{
}
public
ConsoleAppender
(
Layout
layout
)
{
this
(
layout
,
SYSTEM_OUT
)
;
}
public
ConsoleAppender
(
Layout
layout
,
String
target
)
{
this
.
layout
=
layout
;
if
(
SYSTEM_OUT
.
equals
(
target
)
)
{
setWriter
(
new
OutputStreamWriter
(
System
.
out
)
)
;
}
else
if
(
SYSTEM_ERR
.
equalsIgnoreCase
(
target
)
)
{
setWriter
(
new
OutputStreamWriter
(
System
.
err
)
)
;
}
else
{
targetWarn
(
target
)
;
}
}
public
void
setTarget
(
String
value
)
{
String
v
=
value
.
trim
(
)
;
if
(
SYSTEM_OUT
.
equalsIgnoreCase
(
v
)
)
{
target
=
SYSTEM_OUT
;
}
else
if
(
SYSTEM_ERR
.
equalsIgnoreCase
(
v
)
)
{
target
=
SYSTEM_ERR
;
}
else
{
targetWarn
(
value
)
;
}
}
public
String
getTarget
(
)
{
return
target
;
}
void
targetWarn
(
String
val
)
{
LogLog
.
warn
(
"["
+
val
+
"] should be System.out or System.err."
)
;
LogLog
.
warn
(
"Using System.out (default)."
)
;
}
public
void
activateOptions
(
)
{
if
(
target
.
equals
(
SYSTEM_OUT
)
)
{
setWriter
(
new
OutputStreamWriter
(
System
.
out
)
)
;
}
else
{
setWriter
(
new
OutputStreamWriter
(
System
.
err
)
)
;
}
}
protected
final
void
closeWriter
(
)
{
}
}
