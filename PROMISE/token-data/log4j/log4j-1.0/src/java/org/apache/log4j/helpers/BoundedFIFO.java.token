package
org
.
apache
.
log4j
.
helpers
;
import
org
.
apache
.
log4j
.
spi
.
LoggingEvent
;
public
class
BoundedFIFO
{
LoggingEvent
[
]
buf
;
int
numElements
=
0
;
int
first
=
0
;
int
next
=
0
;
int
maxSize
;
public
BoundedFIFO
(
int
maxSize
)
{
if
(
maxSize
<
1
)
{
throw
new
IllegalArgumentException
(
"The maxSize argument ("
+
maxSize
+
") is not a positive integer."
)
;
}
this
.
maxSize
=
maxSize
;
buf
=
new
LoggingEvent
[
maxSize
]
;
}
public
LoggingEvent
get
(
)
{
if
(
numElements
==
0
)
return
null
;
LoggingEvent
r
=
buf
[
first
]
;
if
(
++
first
==
maxSize
)
{
first
=
0
;
}
numElements
--
;
return
r
;
}
public
void
put
(
LoggingEvent
o
)
{
if
(
numElements
!=
maxSize
)
{
buf
[
next
]
=
o
;
if
(
++
next
==
maxSize
)
{
next
=
0
;
}
numElements
++
;
}
}
public
int
getMaxSize
(
)
{
return
maxSize
;
}
public
boolean
isFull
(
)
{
return
numElements
==
maxSize
;
}
public
int
length
(
)
{
return
numElements
;
}
public
boolean
wasEmpty
(
)
{
return
numElements
==
1
;
}
public
boolean
wasFull
(
)
{
return
(
numElements
+
1
==
maxSize
)
;
}
}
