package
org
.
apache
.
log4j
.
varia
;
import
org
.
apache
.
log4j
.
Priority
;
import
org
.
apache
.
log4j
.
spi
.
Filter
;
import
org
.
apache
.
log4j
.
spi
.
LoggingEvent
;
import
org
.
apache
.
log4j
.
helpers
.
OptionConverter
;
public
class
PriorityMatchFilter
extends
Filter
{
public
static
final
String
PRIORITY_TO_MATCH_OPTION
=
"PriorityToMatch"
;
public
static
final
String
ACCEPT_ON_MATCH_OPTION
=
"AcceptOnMatch"
;
boolean
acceptOnMatch
=
true
;
Priority
priorityToMatch
;
public
int
decide
(
LoggingEvent
event
)
{
if
(
this
.
priorityToMatch
==
null
)
{
return
Filter
.
NEUTRAL
;
}
boolean
matchOccured
=
false
;
if
(
this
.
priorityToMatch
==
event
.
priority
)
{
matchOccured
=
true
;
}
if
(
this
.
acceptOnMatch
^
matchOccured
)
{
return
Filter
.
DENY
;
}
else
{
return
Filter
.
ACCEPT
;
}
}
public
String
[
]
getOptionStrings
(
)
{
return
new
String
[
]
{
PRIORITY_TO_MATCH_OPTION
,
ACCEPT_ON_MATCH_OPTION
}
;
}
public
void
setOption
(
String
key
,
String
value
)
{
if
(
key
.
equalsIgnoreCase
(
PRIORITY_TO_MATCH_OPTION
)
)
{
priorityToMatch
=
Priority
.
toPriority
(
value
,
null
)
;
}
else
if
(
key
.
equalsIgnoreCase
(
ACCEPT_ON_MATCH_OPTION
)
)
{
acceptOnMatch
=
OptionConverter
.
toBoolean
(
value
,
acceptOnMatch
)
;
}
}
}
