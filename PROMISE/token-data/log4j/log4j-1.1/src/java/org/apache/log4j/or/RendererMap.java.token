package
org
.
apache
.
log4j
.
or
;
import
java
.
util
.
Hashtable
;
public
class
RendererMap
{
Hashtable
map
;
static
ObjectRenderer
defaultRenderer
=
new
DefaultRenderer
(
)
;
public
RendererMap
(
)
{
map
=
new
Hashtable
(
)
;
}
public
String
findAndRender
(
Object
o
)
{
if
(
o
==
null
)
return
null
;
else
return
get
(
o
.
getClass
(
)
)
.
doRender
(
o
)
;
}
public
ObjectRenderer
get
(
Object
o
)
{
if
(
o
==
null
)
return
null
;
else
return
get
(
o
.
getClass
(
)
)
;
}
public
ObjectRenderer
get
(
Class
clazz
)
{
ObjectRenderer
r
=
null
;
for
(
Class
c
=
clazz
;
c
!=
null
;
c
=
c
.
getSuperclass
(
)
)
{
r
=
(
ObjectRenderer
)
map
.
get
(
c
)
;
if
(
r
!=
null
)
{
return
r
;
}
r
=
searchInterfaces
(
c
)
;
if
(
r
!=
null
)
return
r
;
}
return
defaultRenderer
;
}
ObjectRenderer
searchInterfaces
(
Class
c
)
{
ObjectRenderer
r
=
(
ObjectRenderer
)
map
.
get
(
c
)
;
if
(
r
!=
null
)
{
return
r
;
}
else
{
Class
[
]
ia
=
c
.
getInterfaces
(
)
;
for
(
int
i
=
0
;
i
<
ia
.
length
;
i
++
)
{
r
=
searchInterfaces
(
ia
[
i
]
)
;
if
(
r
!=
null
)
return
r
;
}
}
return
null
;
}
public
ObjectRenderer
getDefaultRenderer
(
)
{
return
defaultRenderer
;
}
public
void
clear
(
)
{
map
.
clear
(
)
;
}
public
void
put
(
Class
clazz
,
ObjectRenderer
or
)
{
map
.
put
(
clazz
,
or
)
;
}
}
