package
fr
jayasoft
ivy
resolver
import
java
io
File
import
java
io
IOException
import
java
text
ParseException
import
java
util
Collections
import
fr
jayasoft
ivy
Artifact
import
fr
jayasoft
ivy
DependencyDescriptor
import
fr
jayasoft
ivy
Ivy
import
fr
jayasoft
ivy
IvyNode
import
fr
jayasoft
ivy
ModuleRevisionId
import
fr
jayasoft
ivy
ResolveData
import
fr
jayasoft
ivy
ResolvedModuleRevision
import
fr
jayasoft
ivy
report
ArtifactDownloadReport
import
fr
jayasoft
ivy
report
DownloadReport
import
fr
jayasoft
ivy
report
DownloadStatus
import
fr
jayasoft
ivy
util
Message
public
class
CacheResolver
extends
FileSystemResolver
private
File
_configured
public
CacheResolver
public
CacheResolver
Ivy
ivy
setIvy
ivy
setName
public
ResolvedModuleRevision
getDependency
DependencyDescriptor
dd
ResolveData
data
throws
ParseException
clearIvyAttempts
ModuleRevisionId
mrid
dd
getDependencyRevisionId
if
getIvy
getVersionMatcher
isDynamic
mrid
ResolvedModuleRevision
rmr
data
getIvy
findModuleInCache
mrid
data
getCache
doValidate
data
if
rmr
Message
verbose
getName
mrid
return
rmr
else
Message
verbose
getName
mrid
return
else
ensureConfigured
data
getIvy
data
getCache
ResolvedResource
ivyRef
findIvyFileRef
dd
data
if
ivyRef
Message
verbose
getName
mrid
Message
verbose
ivyRef
ModuleRevisionId
resolvedMrid
ModuleRevisionId
newInstance
mrid
ivyRef
getRevision
IvyNode
node
data
getNode
resolvedMrid
if
node
node
getModuleRevision
Message
verbose
getName
resolvedMrid
return
searchedRmr
node
getModuleRevision
ResolvedModuleRevision
rmr
data
getIvy
findModuleInCache
resolvedMrid
data
getCache
doValidate
data
if
rmr
Message
verbose
getName
resolvedMrid
return
searchedRmr
rmr
else
Message
error
getName
return
else
Message
verbose
getName
mrid
return
public
DownloadReport
download
Artifact
artifacts
Ivy
ivy
File
cache
clearArtifactAttempts
DownloadReport
dr
new
DownloadReport
for
int
i
i
artifacts
length
i
final
ArtifactDownloadReport
adr
new
ArtifactDownloadReport
artifacts
i
dr
addArtifactReport
adr
File
archiveFile
ivy
getArchiveFileInCache
cache
artifacts
i
if
archiveFile
exists
Message
verbose
artifacts
i
adr
setDownloadStatus
DownloadStatus
NO
adr
setSize
archiveFile
length
else
logArtifactNotFound
artifacts
i
adr
setDownloadStatus
DownloadStatus
FAILED
return
dr
public
boolean
exists
Artifact
artifact
ensureConfigured
return
super
exists
artifact
public
void
publish
Artifact
artifact
File
src
boolean
overwrite
throws
IOException
ensureConfigured
super
publish
artifact
src
overwrite
public
OrganisationEntry
listOrganisations
ensureConfigured
return
super
listOrganisations
public
ModuleEntry
listModules
OrganisationEntry
org
ensureConfigured
return
super
listModules
org
public
RevisionEntry
listRevisions
ModuleEntry
module
ensureConfigured
return
super
listRevisions
module
public
void
dumpConfig
Message
verbose
getName
private
void
ensureConfigured
if
getIvy
ensureConfigured
getIvy
getIvy
getDefaultCache
private
void
ensureConfigured
Ivy
ivy
File
cache
if
ivy
cache
_configured
_configured
equals
cache
return
setIvyPatterns
Collections
singletonList
cache
getAbsolutePath
ivy
getCacheIvyPattern
setArtifactPatterns
Collections
singletonList
cache
getAbsolutePath
ivy
getCacheArtifactPattern
public
String
getTypeName
return
