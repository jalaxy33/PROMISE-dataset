package
fr
jayasoft
ivy
util
import
java
awt
GridBagConstraints
import
java
awt
GridBagLayout
import
java
awt
Insets
import
java
io
File
import
java
io
FileInputStream
import
java
io
FileOutputStream
import
java
io
IOException
import
java
util
Properties
import
javax
swing
ImageIcon
import
javax
swing
JCheckBox
import
javax
swing
JLabel
import
javax
swing
JOptionPane
import
javax
swing
JPanel
import
javax
swing
JPasswordField
import
javax
swing
JTextField
import
fr
jayasoft
ivy
Ivy
public
class
CredentialsUtil
private
static
final
class
CredentialPanel
extends
JPanel
JTextField
userNameField
new
JTextField
JTextField
passwordField
new
JPasswordField
JCheckBox
rememberDataCB
new
JCheckBox
CredentialPanel
Credentials
credentials
File
passfile
GridBagLayout
layout
new
GridBagLayout
setLayout
layout
GridBagConstraints
c
new
GridBagConstraints
c
insets
new
Insets
c
gridx
c
gridheight
c
gridwidth
String
prompt
credentials
getRealm
credentials
getRealm
credentials
getHost
credentials
getHost
add
new
JLabel
prompt
c
c
gridy
c
gridwidth
add
new
JLabel
c
c
gridx
add
userNameField
c
c
gridx
c
gridy
if
credentials
getUserName
userNameField
setText
credentials
getUserName
if
credentials
getPasswd
add
new
JLabel
c
c
gridx
add
passwordField
c
c
gridx
c
gridy
else
passwordField
setText
credentials
getPasswd
if
passfile
c
gridwidth
add
rememberDataCB
c
c
gridy
c
gridwidth
add
new
JLabel
c
public
static
Credentials
promptCredentials
Credentials
c
File
passfile
c
loadPassfile
c
passfile
if
c
getUserName
c
getPasswd
return
c
CredentialPanel
credentialPanel
new
CredentialPanel
c
passfile
if
JOptionPane
showOptionDialog
credentialPanel
c
getHost
JOptionPane
OK_CANCEL_OPTION
new
ImageIcon
Ivy
class
getResource
new
Integer
JOptionPane
OK_OPTION
JOptionPane
OK_OPTION
String
username
credentialPanel
userNameField
getText
String
passwd
credentialPanel
passwordField
getText
if
credentialPanel
rememberDataCB
isSelected
Properties
props
new
EncrytedProperties
props
setProperty
username
props
setProperty
passwd
FileOutputStream
fos
try
fos
new
FileOutputStream
passfile
props
store
fos
catch
Exception
e
Message
warn
passfile
e
finally
if
fos
try
fos
close
catch
Exception
e
c
new
Credentials
c
getRealm
c
getHost
username
passwd
return
c
public
static
Credentials
loadPassfile
Credentials
c
File
passfile
if
passfile
passfile
exists
Properties
props
new
EncrytedProperties
FileInputStream
fis
try
fis
new
FileInputStream
passfile
props
load
fis
String
username
c
getUserName
String
passwd
c
getPasswd
if
username
username
props
getProperty
if
passwd
passwd
props
getProperty
return
new
Credentials
c
getRealm
c
getHost
username
passwd
catch
IOException
e
Message
warn
passfile
e
finally
if
fis
try
fis
close
catch
IOException
e
return
c
