package
fr
jayasoft
ivy
version
import
java
util
Comparator
import
java
util
regex
Matcher
import
java
util
regex
Pattern
import
fr
jayasoft
ivy
ArtifactInfo
import
fr
jayasoft
ivy
Ivy
import
fr
jayasoft
ivy
IvyAware
import
fr
jayasoft
ivy
LatestStrategy
import
fr
jayasoft
ivy
ModuleRevisionId
public
class
VersionRangeMatcher
extends
AbstractVersionMatcher
implements
IvyAware
private
final
static
String
OPEN_INC
private
final
static
String
OPEN_EXC
private
final
static
String
CLOSE_INC
private
final
static
String
CLOSE_EXC
private
final
static
String
LOWER_INFINITE
private
final
static
String
UPPER_INFINITE
private
final
static
String
SEPARATOR
private
final
static
String
OPEN_INC_PATTERN
OPEN_INC
private
final
static
String
OPEN_EXC_PATTERN
OPEN_EXC
private
final
static
String
CLOSE_INC_PATTERN
CLOSE_INC
private
final
static
String
CLOSE_EXC_PATTERN
CLOSE_EXC
private
final
static
String
LI_PATTERN
LOWER_INFINITE
private
final
static
String
UI_PATTERN
UPPER_INFINITE
private
final
static
String
SEP_PATTERN
SEPARATOR
private
final
static
String
OPEN_PATTERN
OPEN_INC_PATTERN
OPEN_EXC_PATTERN
private
final
static
String
CLOSE_PATTERN
CLOSE_INC_PATTERN
CLOSE_EXC_PATTERN
private
final
static
String
ANY_NON_SPECIAL_PATTERN
SEP_PATTERN
OPEN_INC_PATTERN
OPEN_EXC_PATTERN
CLOSE_INC_PATTERN
CLOSE_EXC_PATTERN
LI_PATTERN
UI_PATTERN
private
final
static
String
FINITE_PATTERN
OPEN_PATTERN
ANY_NON_SPECIAL_PATTERN
SEP_PATTERN
ANY_NON_SPECIAL_PATTERN
CLOSE_PATTERN
private
final
static
String
LOWER_INFINITE_PATTERN
LI_PATTERN
ANY_NON_SPECIAL_PATTERN
CLOSE_PATTERN
private
final
static
String
UPPER_INFINITE_PATTERN
OPEN_PATTERN
ANY_NON_SPECIAL_PATTERN
UI_PATTERN
private
final
static
Pattern
FINITE_RANGE
Pattern
compile
FINITE_PATTERN
private
final
static
Pattern
LOWER_INFINITE_RANGE
Pattern
compile
LOWER_INFINITE_PATTERN
private
final
static
Pattern
UPPER_INFINITE_RANGE
Pattern
compile
UPPER_INFINITE_PATTERN
private
final
static
Pattern
ALL_RANGE
Pattern
compile
FINITE_PATTERN
LOWER_INFINITE_PATTERN
UPPER_INFINITE_PATTERN
private
final
class
MRIDArtifactInfo
implements
ArtifactInfo
private
ModuleRevisionId
_mrid
public
MRIDArtifactInfo
ModuleRevisionId
id
_mrid
id
public
long
getLastModified
return
public
String
getRevision
return
_mrid
getRevision
private
final
Comparator
COMPARATOR
new
Comparator
public
int
compare
Object
o1
Object
o2
if
o1
equals
o2
return
ArtifactInfo
art1
new
MRIDArtifactInfo
ModuleRevisionId
o1
ArtifactInfo
art2
new
MRIDArtifactInfo
ModuleRevisionId
o2
ArtifactInfo
art
getLatestStrategy
findLatest
new
ArtifactInfo
art1
art2
return
art
art1
private
LatestStrategy
_latestStrategy
private
String
_latestStrategyName
public
VersionRangeMatcher
super
public
VersionRangeMatcher
String
name
super
name
public
VersionRangeMatcher
String
name
LatestStrategy
strategy
super
name
_latestStrategy
strategy
public
VersionRangeMatcher
String
name
Ivy
ivy
super
name
setIvy
ivy
public
boolean
isDynamic
ModuleRevisionId
askedMrid
return
ALL_RANGE
matcher
askedMrid
getRevision
matches
public
boolean
accept
ModuleRevisionId
askedMrid
ModuleRevisionId
foundMrid
String
revision
askedMrid
getRevision
Matcher
m
m
FINITE_RANGE
matcher
revision
if
m
matches
String
lower
m
group
String
upper
m
group
return
isUpper
askedMrid
lower
foundMrid
revision
startsWith
OPEN_INC
isLower
askedMrid
upper
foundMrid
revision
endsWith
CLOSE_INC
m
LOWER_INFINITE_RANGE
matcher
revision
if
m
matches
String
upper
m
group
return
isLower
askedMrid
upper
foundMrid
revision
endsWith
CLOSE_INC
m
UPPER_INFINITE_RANGE
matcher
revision
if
m
matches
String
lower
m
group
return
isUpper
askedMrid
lower
foundMrid
revision
startsWith
OPEN_INC
return
private
boolean
isLower
ModuleRevisionId
askedMrid
String
revision
ModuleRevisionId
foundMrid
boolean
inclusive
return
COMPARATOR
compare
ModuleRevisionId
newInstance
askedMrid
revision
foundMrid
inclusive
private
boolean
isUpper
ModuleRevisionId
askedMrid
String
revision
ModuleRevisionId
foundMrid
boolean
inclusive
return
COMPARATOR
compare
ModuleRevisionId
newInstance
askedMrid
revision
foundMrid
inclusive
public
LatestStrategy
getLatestStrategy
if
_latestStrategy
if
getIvy
throw
new
IllegalStateException
this
if
_latestStrategyName
throw
new
IllegalStateException
this
_latestStrategy
getIvy
getLatestStrategy
_latestStrategyName
if
_latestStrategy
throw
new
IllegalStateException
_latestStrategyName
this
return
_latestStrategy
public
void
setLatestStrategy
LatestStrategy
latestStrategy
_latestStrategy
latestStrategy
public
void
setLatest
String
latestStrategyName
_latestStrategyName
latestStrategyName
