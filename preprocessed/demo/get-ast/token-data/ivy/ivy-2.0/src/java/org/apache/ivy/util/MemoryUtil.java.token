package
org
apache
ivy
util
public
final
class
MemoryUtil
private
static
final
int
SAMPLING_SIZE
private
static
final
int
SLEEP_TIME
private
MemoryUtil
public
static
long
sizeOf
Class
clazz
long
size
Object
objects
new
Object
SAMPLING_SIZE
try
clazz
newInstance
long
startingMemoryUse
getUsedMemory
for
int
i
i
objects
length
i
objects
i
clazz
newInstance
long
endingMemoryUse
getUsedMemory
float
approxSize
endingMemoryUse
startingMemoryUse
float
objects
length
size
Math
round
approxSize
catch
Exception
e
System
out
println
clazz
e
printStackTrace
return
size
public
static
long
getUsedMemory
gc
long
totalMemory
Runtime
getRuntime
totalMemory
gc
long
freeMemory
Runtime
getRuntime
freeMemory
long
usedMemory
totalMemory
freeMemory
return
usedMemory
private
static
void
gc
try
System
gc
Thread
sleep
SLEEP_TIME
System
runFinalization
Thread
sleep
SLEEP_TIME
System
gc
Thread
sleep
SLEEP_TIME
System
runFinalization
Thread
sleep
SLEEP_TIME
catch
Exception
e
e
printStackTrace
public
static
void
main
String
args
throws
ClassNotFoundException
System
out
println
sizeOf
Class
forName
args
