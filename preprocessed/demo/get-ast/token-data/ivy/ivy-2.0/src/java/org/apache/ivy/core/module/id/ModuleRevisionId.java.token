package
org
apache
ivy
core
module
id
import
java
lang
ref
WeakReference
import
java
util
HashMap
import
java
util
Iterator
import
java
util
Map
import
java
util
WeakHashMap
import
java
util
regex
Matcher
import
java
util
regex
Pattern
import
org
apache
ivy
Ivy
import
org
apache
ivy
core
IvyContext
import
org
apache
ivy
core
IvyPatternHelper
import
org
apache
ivy
util
extendable
UnmodifiableExtendableItem
public
class
ModuleRevisionId
extends
UnmodifiableExtendableItem
private
static
final
String
ENCODE_SEPARATOR
ModuleId
ENCODE_SEPARATOR
private
static
final
String
ENCODE_PREFIX
private
static
final
String
NULL_ENCODE
static
final
String
STRICT_CHARS_PATTERN
private
static
final
String
REV_STRICT_CHARS_PATTERN
private
static
final
Map
CACHE
new
WeakHashMap
public
static
final
Pattern
MRID_PATTERN
Pattern
compile
STRICT_CHARS_PATTERN
STRICT_CHARS_PATTERN
STRICT_CHARS_PATTERN
REV_STRICT_CHARS_PATTERN
public
static
final
Pattern
NON_CAPTURING_PATTERN
Pattern
compile
STRICT_CHARS_PATTERN
STRICT_CHARS_PATTERN
STRICT_CHARS_PATTERN
REV_STRICT_CHARS_PATTERN
public
static
ModuleRevisionId
parse
String
mrid
Matcher
m
MRID_PATTERN
matcher
mrid
trim
if
m
matches
throw
new
IllegalArgumentException
mrid
MRID_PATTERN
pattern
return
newInstance
m
group
m
group
m
group
m
group
public
static
ModuleRevisionId
newInstance
String
organisation
String
name
String
revision
return
intern
new
ModuleRevisionId
ModuleId
newInstance
organisation
name
revision
public
static
ModuleRevisionId
newInstance
String
organisation
String
name
String
revision
Map
extraAttributes
return
intern
new
ModuleRevisionId
ModuleId
newInstance
organisation
name
revision
extraAttributes
public
static
ModuleRevisionId
newInstance
String
organisation
String
name
String
branch
String
revision
return
intern
new
ModuleRevisionId
ModuleId
newInstance
organisation
name
branch
revision
public
static
ModuleRevisionId
newInstance
String
organisation
String
name
String
branch
String
revision
Map
extraAttributes
return
intern
new
ModuleRevisionId
ModuleId
newInstance
organisation
name
branch
revision
extraAttributes
public
static
ModuleRevisionId
newInstance
ModuleRevisionId
mrid
String
rev
return
intern
new
ModuleRevisionId
mrid
getModuleId
mrid
getBranch
rev
mrid
getQualifiedExtraAttributes
public
static
ModuleRevisionId
newInstance
ModuleRevisionId
mrid
String
branch
String
rev
return
intern
new
ModuleRevisionId
mrid
getModuleId
branch
rev
mrid
getQualifiedExtraAttributes
public
static
ModuleRevisionId
intern
ModuleRevisionId
moduleRevisionId
ModuleRevisionId
r
synchronized
CACHE
WeakReference
ref
WeakReference
CACHE
get
moduleRevisionId
if
ref
r
ModuleRevisionId
ref
get
if
r
r
moduleRevisionId
CACHE
put
r
new
WeakReference
r
return
r
private
final
ModuleId
moduleId
private
final
String
branch
private
final
String
revision
private
int
hash
public
ModuleRevisionId
ModuleId
moduleId
String
revision
this
moduleId
revision
public
ModuleRevisionId
ModuleId
moduleId
String
branch
String
revision
this
moduleId
branch
revision
private
ModuleRevisionId
ModuleId
moduleId
String
revision
Map
extraAttributes
this
moduleId
revision
extraAttributes
private
ModuleRevisionId
ModuleId
moduleId
String
branch
String
revision
Map
extraAttributes
super
extraAttributes
this
moduleId
moduleId
IvyContext
context
IvyContext
getContext
this
branch
branch
context
peekIvy
context
getSettings
getDefaultBranch
moduleId
branch
this
revision
revision
Ivy
getWorkingRevision
revision
setStandardAttribute
IvyPatternHelper
ORGANISATION_KEY
this
moduleId
getOrganisation
setStandardAttribute
IvyPatternHelper
MODULE_KEY
this
moduleId
getName
setStandardAttribute
IvyPatternHelper
BRANCH_KEY
this
branch
setStandardAttribute
IvyPatternHelper
REVISION_KEY
this
revision
public
ModuleId
getModuleId
return
moduleId
public
String
getName
return
getModuleId
getName
public
String
getOrganisation
return
getModuleId
getOrganisation
public
String
getRevision
return
revision
public
boolean
equals
Object
obj
if
obj
instanceof
ModuleRevisionId
return
ModuleRevisionId
other
ModuleRevisionId
obj
if
other
getRevision
equals
getRevision
return
else
if
other
getBranch
getBranch
return
else
if
other
getBranch
other
getBranch
equals
getBranch
return
else
if
other
getModuleId
equals
getModuleId
return
else
return
other
getQualifiedExtraAttributes
equals
getQualifiedExtraAttributes
public
int
hashCode
if
hash
hash
hash
hash
getBranch
getBranch
hashCode
hash
hash
getRevision
hashCode
hash
hash
getModuleId
hashCode
hash
hash
getQualifiedExtraAttributes
hashCode
return
hash
public
String
toString
return
moduleId
branch
branch
length
branch
revision
revision
public
String
encodeToString
StringBuffer
buf
new
StringBuffer
Map
attributes
getAttributes
for
Iterator
iter
attributes
keySet
iterator
iter
hasNext
String
attName
String
iter
next
String
value
String
attributes
get
attName
value
value
NULL_ENCODE
value
buf
append
ENCODE_PREFIX
append
attName
append
ENCODE_SEPARATOR
append
ENCODE_PREFIX
append
value
append
ENCODE_SEPARATOR
return
buf
toString
public
static
ModuleRevisionId
decode
String
encoded
String
parts
encoded
split
ENCODE_SEPARATOR
if
parts
length
throw
new
IllegalArgumentException
encoded
Map
attributes
new
HashMap
for
int
i
i
parts
length
i
String
attName
parts
i
if
attName
startsWith
ENCODE_PREFIX
throw
new
IllegalArgumentException
encoded
attName
ENCODE_PREFIX
else
attName
attName
substring
String
attValue
parts
i
if
attValue
startsWith
ENCODE_PREFIX
throw
new
IllegalArgumentException
encoded
attValue
ENCODE_PREFIX
else
attValue
attValue
substring
if
NULL_ENCODE
equals
attValue
attValue
attributes
put
attName
attValue
String
org
String
attributes
remove
IvyPatternHelper
ORGANISATION_KEY
String
mod
String
attributes
remove
IvyPatternHelper
MODULE_KEY
String
rev
String
attributes
remove
IvyPatternHelper
REVISION_KEY
String
branch
String
attributes
remove
IvyPatternHelper
BRANCH_KEY
if
org
throw
new
IllegalArgumentException
encoded
if
mod
throw
new
IllegalArgumentException
encoded
if
rev
throw
new
IllegalArgumentException
encoded
return
newInstance
org
mod
branch
rev
attributes
public
String
getBranch
return
branch
