package
org
apache
ivy
plugins
conflict
import
java
util
Arrays
import
java
util
Collection
import
java
util
Collections
import
java
util
Iterator
import
java
util
regex
Matcher
import
java
util
regex
Pattern
import
org
apache
ivy
core
resolve
IvyNode
import
org
apache
ivy
util
Message
public
class
RegexpConflictManager
extends
AbstractConflictManager
private
Pattern
pattern
Pattern
compile
private
boolean
mIgnoreNonMatching
public
RegexpConflictManager
public
void
setRegexp
String
regexp
pattern
Pattern
compile
regexp
Matcher
matcher
pattern
matcher
if
matcher
groupCount
String
message
pattern
Message
error
message
throw
new
IllegalArgumentException
message
public
void
setIgnoreNonMatching
boolean
ignoreNonMatching
mIgnoreNonMatching
ignoreNonMatching
public
Collection
resolveConflicts
IvyNode
parent
Collection
conflicts
IvyNode
lastNode
for
Iterator
iter
conflicts
iterator
iter
hasNext
IvyNode
node
IvyNode
iter
next
if
lastNode
matchEquals
node
lastNode
String
msg
lastNode
getMatch
lastNode
Arrays
asList
lastNode
getAllRealCallers
node
getMatch
node
Arrays
asList
node
getAllRealCallers
throw
new
StrictConflictException
msg
if
lastNode
nodeIsGreater
node
lastNode
lastNode
node
return
Collections
singleton
lastNode
private
boolean
nodeIsGreater
IvyNode
node
IvyNode
lastNode
return
getMatch
node
compareTo
getMatch
lastNode
private
boolean
matchEquals
IvyNode
lastNode
IvyNode
node
return
getMatch
lastNode
equals
getMatch
node
private
String
getMatch
IvyNode
node
String
revision
node
getId
getRevision
Matcher
matcher
pattern
matcher
revision
if
matcher
matches
String
match
matcher
group
if
match
return
match
warnOrThrow
pattern
revision
node
else
warnOrThrow
pattern
revision
node
return
revision
private
void
warnOrThrow
String
message
if
mIgnoreNonMatching
Message
warn
message
else
throw
new
StrictConflictException
message
