package
org
apache
ivy
plugins
report
import
java
io
BufferedWriter
import
java
io
OutputStream
import
java
io
OutputStreamWriter
import
java
io
PrintWriter
import
java
io
UnsupportedEncodingException
import
java
util
ArrayList
import
java
util
Collection
import
java
util
Date
import
java
util
Iterator
import
java
util
List
import
java
util
Map
import
java
util
Map
Entry
import
org
apache
ivy
Ivy
import
org
apache
ivy
core
cache
ArtifactOrigin
import
org
apache
ivy
core
module
descriptor
License
import
org
apache
ivy
core
module
descriptor
ModuleDescriptor
import
org
apache
ivy
core
module
id
ModuleId
import
org
apache
ivy
core
module
id
ModuleRevisionId
import
org
apache
ivy
core
report
ArtifactDownloadReport
import
org
apache
ivy
core
report
ConfigurationResolveReport
import
org
apache
ivy
core
report
MetadataArtifactDownloadReport
import
org
apache
ivy
core
resolve
IvyNode
import
org
apache
ivy
core
resolve
IvyNodeCallers
Caller
import
org
apache
ivy
core
resolve
IvyNodeEviction
EvictionData
import
org
apache
ivy
util
StringUtils
import
org
apache
ivy
util
XMLHelper
public
class
XmlReportWriter
static
final
String
REPORT_ENCODING
public
void
output
ConfigurationResolveReport
report
OutputStream
stream
output
report
new
String
report
getConfiguration
stream
public
void
output
ConfigurationResolveReport
report
String
confs
OutputStream
stream
OutputStreamWriter
encodedOutStream
try
encodedOutStream
new
OutputStreamWriter
stream
REPORT_ENCODING
catch
UnsupportedEncodingException
e
throw
new
RuntimeException
REPORT_ENCODING
e
PrintWriter
out
new
PrintWriter
new
BufferedWriter
encodedOutStream
ModuleRevisionId
mrid
report
getModuleDescriptor
getModuleRevisionId
out
println
REPORT_ENCODING
out
println
out
println
out
println
out
println
XMLHelper
escape
mrid
getOrganisation
out
println
XMLHelper
escape
mrid
getName
out
println
XMLHelper
escape
mrid
getRevision
if
mrid
getBranch
out
println
XMLHelper
escape
mrid
getBranch
Map
extraAttributes
mrid
getExtraAttributes
for
Iterator
it
extraAttributes
entrySet
iterator
it
hasNext
Map
Entry
entry
Entry
it
next
out
println
entry
getKey
XMLHelper
escape
entry
getValue
toString
out
println
XMLHelper
escape
report
getConfiguration
out
println
XMLHelper
escape
StringUtils
join
confs
out
println
Ivy
DATE_FORMAT
format
report
getDate
out
println
List
dependencies
new
ArrayList
report
getModuleRevisionIds
for
Iterator
iter
report
getModuleIds
iterator
iter
hasNext
ModuleId
mid
ModuleId
iter
next
out
println
XMLHelper
escape
mid
getOrganisation
XMLHelper
escape
mid
getName
for
Iterator
it2
report
getNodes
mid
iterator
it2
hasNext
IvyNode
dep
IvyNode
it2
next
ouputRevision
report
out
dependencies
dep
out
println
out
println
out
println
out
flush
private
void
ouputRevision
ConfigurationResolveReport
report
PrintWriter
out
List
dependencies
IvyNode
dep
Map
extraAttributes
ModuleDescriptor
md
if
dep
getModuleRevision
md
dep
getModuleRevision
getDescriptor
StringBuffer
details
new
StringBuffer
if
dep
isLoaded
details
append
details
append
XMLHelper
escape
dep
getDescriptor
getStatus
details
append
details
append
Ivy
DATE_FORMAT
format
new
Date
dep
getPublication
details
append
details
append
XMLHelper
escape
dep
getModuleRevision
getResolver
getName
details
append
details
append
XMLHelper
escape
dep
getModuleRevision
getArtifactResolver
getName
details
append
if
dep
isEvicted
report
getConfiguration
EvictionData
ed
dep
getEvictedData
report
getConfiguration
if
ed
getConflictManager
details
append
append
XMLHelper
escape
ed
getConflictManager
toString
append
else
details
append
details
append
append
XMLHelper
escape
ed
getDetail
ed
getDetail
append
if
dep
hasProblem
details
append
append
XMLHelper
escape
dep
getProblem
getMessage
append
if
md
md
getHomePage
details
append
append
XMLHelper
escape
md
getHomePage
append
extraAttributes
md
md
getExtraAttributes
dep
getResolvedId
getExtraAttributes
for
Iterator
iterator
extraAttributes
keySet
iterator
iterator
hasNext
String
attName
String
iterator
next
details
append
append
attName
append
append
XMLHelper
escape
extraAttributes
get
attName
toString
append
String
defaultValue
dep
getDescriptor
dep
getDescriptor
isDefault
int
position
dependencies
indexOf
dep
getResolvedId
out
println
XMLHelper
escape
dep
getResolvedId
getRevision
dep
getResolvedId
getBranch
XMLHelper
escape
dep
getResolvedId
getBranch
details
dep
isDownloaded
dep
isSearched
defaultValue
toString
dep
getConfigurations
report
getConfiguration
position
if
md
License
licenses
md
getLicenses
for
int
i
i
licenses
length
i
String
lurl
if
licenses
i
getUrl
lurl
XMLHelper
escape
licenses
i
getUrl
else
lurl
out
println
XMLHelper
escape
licenses
i
getName
lurl
outputMetadataArtifact
out
dep
outputEvictionInformation
report
out
dep
outputCallers
report
out
dep
outputArtifacts
report
out
dep
out
println
private
void
outputEvictionInformation
ConfigurationResolveReport
report
PrintWriter
out
IvyNode
dep
if
dep
isEvicted
report
getConfiguration
EvictionData
ed
dep
getEvictedData
report
getConfiguration
Collection
selected
ed
getSelected
if
selected
for
Iterator
it3
selected
iterator
it3
hasNext
IvyNode
sel
IvyNode
it3
next
out
println
XMLHelper
escape
sel
getResolvedId
getRevision
private
void
outputMetadataArtifact
PrintWriter
out
IvyNode
dep
if
dep
getModuleRevision
MetadataArtifactDownloadReport
madr
dep
getModuleRevision
getReport
out
print
out
print
XMLHelper
escape
madr
getDownloadStatus
toString
out
print
XMLHelper
escape
madr
getDownloadDetails
out
print
madr
getSize
out
print
madr
getDownloadTimeMillis
if
madr
getLocalFile
out
print
XMLHelper
escape
madr
getLocalFile
getAbsolutePath
out
print
madr
isSearched
if
madr
getOriginalLocalFile
out
print
XMLHelper
escape
madr
getOriginalLocalFile
getAbsolutePath
ArtifactOrigin
origin
madr
getArtifactOrigin
if
origin
out
print
String
valueOf
origin
isLocal
out
print
XMLHelper
escape
origin
getLocation
out
println
private
void
outputCallers
ConfigurationResolveReport
report
PrintWriter
out
IvyNode
dep
Caller
callers
dep
getCallers
report
getConfiguration
for
int
i
i
callers
length
i
StringBuffer
callerDetails
new
StringBuffer
Map
callerExtraAttributes
callers
i
getDependencyDescriptor
getExtraAttributes
for
Iterator
iterator
callerExtraAttributes
keySet
iterator
iterator
hasNext
String
attName
String
iterator
next
callerDetails
append
append
attName
append
append
XMLHelper
escape
callerExtraAttributes
get
attName
toString
append
out
println
XMLHelper
escape
callers
i
getModuleRevisionId
getOrganisation
XMLHelper
escape
callers
i
getModuleRevisionId
getName
XMLHelper
escape
toString
callers
i
getCallerConfigurations
XMLHelper
escape
callers
i
getAskedDependencyId
dep
getData
getRevision
XMLHelper
escape
callers
i
getDependencyDescriptor
getDependencyRevisionId
getRevision
XMLHelper
escape
callers
i
getDependencyDescriptor
getDynamicConstraintDependencyRevisionId
getRevision
XMLHelper
escape
callers
i
getModuleRevisionId
getRevision
callerDetails
private
void
outputArtifacts
ConfigurationResolveReport
report
PrintWriter
out
IvyNode
dep
Map
extraAttributes
ArtifactDownloadReport
adr
report
getDownloadReports
dep
getResolvedId
out
println
for
int
i
i
adr
length
i
out
print
XMLHelper
escape
adr
i
getName
XMLHelper
escape
adr
i
getType
XMLHelper
escape
adr
i
getExt
extraAttributes
adr
i
getArtifact
getExtraAttributes
for
Iterator
iterator
extraAttributes
keySet
iterator
iterator
hasNext
String
attName
String
iterator
next
out
print
attName
XMLHelper
escape
extraAttributes
get
attName
toString
out
print
XMLHelper
escape
adr
i
getDownloadStatus
toString
out
print
XMLHelper
escape
adr
i
getDownloadDetails
out
print
adr
i
getSize
out
print
adr
i
getDownloadTimeMillis
if
adr
i
getLocalFile
out
print
XMLHelper
escape
adr
i
getLocalFile
getAbsolutePath
ArtifactOrigin
origin
adr
i
getArtifactOrigin
if
origin
out
println
out
println
String
valueOf
origin
isLocal
XMLHelper
escape
origin
getLocation
out
println
else
out
println
out
println
private
String
toString
String
strs
StringBuffer
buf
new
StringBuffer
for
int
i
i
strs
length
i
buf
append
strs
i
if
i
strs
length
buf
append
return
XMLHelper
escape
buf
toString
