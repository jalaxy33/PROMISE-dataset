package
org
apache
ivy
plugins
resolver
util
import
java
io
IOException
import
java
net
MalformedURLException
import
java
net
URL
import
java
util
ArrayList
import
java
util
Arrays
import
java
util
Iterator
import
java
util
List
import
java
util
regex
Matcher
import
java
util
regex
Pattern
import
org
apache
ivy
core
IvyPatternHelper
import
org
apache
ivy
core
module
descriptor
Artifact
import
org
apache
ivy
core
module
id
ModuleRevisionId
import
org
apache
ivy
plugins
repository
Repository
import
org
apache
ivy
plugins
repository
Resource
import
org
apache
ivy
util
Message
public
final
class
ResolverHelper
private
ResolverHelper
public
static
String
listTokenValues
Repository
rep
String
pattern
String
token
String
fileSep
rep
getFileSeparator
pattern
rep
standardize
pattern
String
tokenString
IvyPatternHelper
getTokenString
token
int
index
pattern
indexOf
tokenString
if
index
Message
verbose
token
pattern
return
if
pattern
length
index
tokenString
length
fileSep
equals
pattern
substring
index
tokenString
length
index
tokenString
length
index
fileSep
equals
pattern
substring
index
index
String
root
pattern
substring
index
return
listAll
rep
root
else
int
slashIndex
pattern
substring
index
lastIndexOf
fileSep
String
root
slashIndex
pattern
substring
slashIndex
try
Message
debug
rep
root
List
all
rep
list
root
if
all
Message
debug
all
size
List
ret
new
ArrayList
all
size
int
endNameIndex
pattern
indexOf
fileSep
slashIndex
String
namePattern
if
endNameIndex
namePattern
pattern
substring
slashIndex
endNameIndex
else
namePattern
pattern
substring
slashIndex
String
acceptNamePattern
IvyPatternHelper
substituteToken
namePattern
token
fileSep
Pattern
p
Pattern
compile
acceptNamePattern
toString
for
Iterator
iter
all
iterator
iter
hasNext
String
path
String
iter
next
Matcher
m
p
matcher
path
if
m
matches
String
value
m
group
ret
add
value
Message
debug
ret
size
pattern
return
String
ret
toArray
new
String
ret
size
else
return
catch
IOException
e
Message
verbose
root
rep
Message
verbose
e
getClass
getName
e
getMessage
return
catch
Exception
e
Message
warn
root
rep
Message
warn
e
getClass
getName
e
getMessage
return
public
static
String
listAll
Repository
rep
String
parent
try
String
fileSep
rep
getFileSeparator
Message
debug
rep
parent
List
all
rep
list
parent
if
all
Message
debug
all
size
List
names
new
ArrayList
all
size
for
Iterator
iter
all
iterator
iter
hasNext
String
path
String
iter
next
if
path
endsWith
fileSep
path
path
substring
path
length
int
slashIndex
path
lastIndexOf
fileSep
names
add
path
substring
slashIndex
return
String
names
toArray
new
String
names
size
else
Message
debug
return
catch
IOException
e
Message
verbose
parent
rep
Message
verbose
e
getClass
getName
e
getMessage
return
catch
Exception
e
Message
warn
parent
rep
Message
warn
e
getClass
getName
e
getMessage
return
public
static
ResolvedResource
findAll
Repository
rep
ModuleRevisionId
mrid
String
pattern
Artifact
artifact
String
partiallyResolvedPattern
IvyPatternHelper
substitute
pattern
ModuleRevisionId
newInstance
mrid
IvyPatternHelper
getTokenString
IvyPatternHelper
REVISION_KEY
artifact
Message
debug
partiallyResolvedPattern
String
revs
listTokenValues
rep
partiallyResolvedPattern
IvyPatternHelper
REVISION_KEY
if
revs
Message
debug
Arrays
asList
revs
List
ret
new
ArrayList
revs
length
for
int
i
i
revs
length
i
String
rres
IvyPatternHelper
substituteToken
partiallyResolvedPattern
IvyPatternHelper
REVISION_KEY
revs
i
try
Resource
res
rep
getResource
rres
if
res
res
exists
ret
add
new
ResolvedResource
res
revs
i
catch
IOException
e
Message
warn
rres
e
getMessage
if
revs
length
ret
size
Message
debug
ret
return
ResolvedResource
ret
toArray
new
ResolvedResource
ret
size
else
if
partiallyResolvedPattern
indexOf
IvyPatternHelper
REVISION_KEY
try
Resource
res
rep
getResource
partiallyResolvedPattern
if
res
exists
Message
debug
rep
getName
res
getName
return
new
ResolvedResource
new
ResolvedResource
res
rep
getName
catch
IOException
e
Message
debug
partiallyResolvedPattern
e
getMessage
Message
debug
return
public
static
String
listTokenValues
URLLister
lister
String
pattern
String
token
pattern
standardize
pattern
if
lister
accept
pattern
String
tokenString
IvyPatternHelper
getTokenString
token
int
index
pattern
indexOf
tokenString
if
index
Message
verbose
token
pattern
return
if
pattern
length
index
tokenString
length
equals
pattern
substring
index
tokenString
length
index
tokenString
length
index
equals
pattern
substring
index
index
String
root
pattern
substring
index
try
return
listAll
lister
new
URL
root
catch
MalformedURLException
e
Message
warn
root
e
getMessage
return
else
int
slashIndex
pattern
substring
index
lastIndexOf
String
root
slashIndex
pattern
substring
slashIndex
try
Message
debug
lister
root
List
all
lister
listAll
new
URL
root
Message
debug
all
size
List
ret
new
ArrayList
all
size
int
endNameIndex
pattern
indexOf
slashIndex
String
namePattern
if
endNameIndex
namePattern
pattern
substring
slashIndex
endNameIndex
else
namePattern
pattern
substring
slashIndex
String
acceptNamePattern
IvyPatternHelper
substituteToken
namePattern
token
Pattern
p
Pattern
compile
acceptNamePattern
toString
for
Iterator
iter
all
iterator
iter
hasNext
URL
url
URL
iter
next
String
path
standardize
url
getPath
Matcher
m
p
matcher
path
if
m
matches
String
value
m
group
ret
add
value
Message
debug
ret
size
pattern
return
String
ret
toArray
new
String
ret
size
catch
Exception
e
Message
warn
root
e
getClass
e
getMessage
return
return
private
static
String
standardize
String
path
return
path
replace
public
static
String
listAll
URLLister
lister
URL
root
try
if
lister
accept
root
toExternalForm
Message
debug
lister
root
List
all
lister
listAll
root
Message
debug
all
size
List
names
new
ArrayList
all
size
for
Iterator
iter
all
iterator
iter
hasNext
URL
dir
URL
iter
next
String
path
dir
getPath
if
path
endsWith
path
path
substring
path
length
int
slashIndex
path
lastIndexOf
names
add
path
substring
slashIndex
return
String
names
toArray
new
String
names
size
return
catch
Exception
e
Message
warn
root
e
getClass
e
getMessage
return
