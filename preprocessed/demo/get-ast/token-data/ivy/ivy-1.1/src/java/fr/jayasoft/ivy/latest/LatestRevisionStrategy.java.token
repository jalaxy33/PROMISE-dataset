package
fr
jayasoft
ivy
latest
import
java
util
Comparator
import
java
util
Date
import
java
util
HashMap
import
java
util
Map
import
fr
jayasoft
ivy
ArtifactInfo
public
class
LatestRevisionStrategy
extends
AbstractLatestStrategy
private
static
final
Map
SPECIAL_MEANINGS
static
SPECIAL_MEANINGS
new
HashMap
SPECIAL_MEANINGS
put
new
Integer
SPECIAL_MEANINGS
put
new
Integer
SPECIAL_MEANINGS
put
new
Integer
public
static
Comparator
COMPARATOR
new
Comparator
public
int
compare
Object
o1
Object
o2
String
rev1
String
o1
String
rev2
String
o2
if
rev1
startsWith
return
if
rev1
endsWith
rev2
startsWith
rev1
substring
rev1
length
return
if
rev2
startsWith
return
if
rev2
endsWith
rev1
startsWith
rev2
substring
rev2
length
return
rev1
rev1
replaceAll
rev1
rev1
replaceAll
rev2
rev2
replaceAll
rev2
rev2
replaceAll
String
parts1
rev1
split
String
parts2
rev2
split
int
i
for
i
parts1
length
i
parts2
length
i
if
parts1
i
equals
parts2
i
continue
boolean
is1Number
isNumber
parts1
i
boolean
is2Number
isNumber
parts2
i
if
is1Number
is2Number
return
if
is2Number
is1Number
return
if
is1Number
is2Number
return
Long
valueOf
parts1
i
compareTo
Long
valueOf
parts2
i
Integer
sm1
Integer
SPECIAL_MEANINGS
get
parts1
i
toLowerCase
Integer
sm2
Integer
SPECIAL_MEANINGS
get
parts2
i
toLowerCase
if
sm1
sm2
sm2
new
Integer
sm2
return
sm1
compareTo
sm2
if
sm2
return
new
Integer
compareTo
sm2
return
parts1
i
compareTo
parts2
i
if
i
parts1
length
return
isNumber
parts1
i
if
i
parts2
length
return
isNumber
parts2
i
return
private
boolean
isNumber
String
str
return
str
matches
public
LatestRevisionStrategy
setName
public
ArtifactInfo
findLatest
ArtifactInfo
artifacts
Date
date
if
artifacts
return
ArtifactInfo
found
for
int
i
i
artifacts
length
i
ArtifactInfo
art
artifacts
i
if
found
COMPARATOR
compare
art
getRevision
found
getRevision
if
date
long
lastModified
art
getLastModified
if
lastModified
date
getTime
continue
found
art
return
found
