package
fr
jayasoft
ivy
resolver
import
java
io
File
import
java
io
IOException
import
java
util
ArrayList
import
java
util
Collection
import
java
util
Collections
import
java
util
Date
import
java
util
HashMap
import
java
util
HashSet
import
java
util
Iterator
import
java
util
List
import
java
util
ListIterator
import
java
util
Map
import
fr
jayasoft
ivy
Artifact
import
fr
jayasoft
ivy
DefaultArtifact
import
fr
jayasoft
ivy
DependencyDescriptor
import
fr
jayasoft
ivy
ModuleDescriptor
import
fr
jayasoft
ivy
ModuleRevisionId
import
fr
jayasoft
ivy
ResolveData
import
fr
jayasoft
ivy
repository
Resource
import
fr
jayasoft
ivy
util
IvyPattern
import
fr
jayasoft
ivy
util
IvyPatternHelper
import
fr
jayasoft
ivy
util
Message
public
abstract
class
AbstractResourceResolver
extends
BasicResolver
private
List
_ivyPatterns
new
ArrayList
private
List
_artifactPatterns
new
ArrayList
public
AbstractResourceResolver
protected
ResolvedResource
findIvyFileRef
DependencyDescriptor
dd
ResolveData
data
return
findResourceUsingPatterns
dd
getDependencyRevisionId
_ivyPatterns
data
getDate
protected
ResolvedResource
findFirstArtifactRef
ModuleDescriptor
md
DependencyDescriptor
dd
ResolveData
data
ResolvedResource
ret
String
conf
md
getConfigurationsNames
for
int
i
i
conf
length
i
Artifact
artifacts
md
getArtifacts
conf
i
for
int
j
j
artifacts
length
j
ret
findResourceUsingPatterns
dd
getDependencyRevisionId
_artifactPatterns
artifacts
j
getName
artifacts
j
getType
artifacts
j
getExt
data
getDate
if
ret
return
ret
return
protected
ResolvedResource
findArtifactRef
Artifact
artifact
return
findResourceUsingPatterns
artifact
getModuleRevisionId
_artifactPatterns
artifact
getName
artifact
getType
artifact
getExt
protected
ResolvedResource
findResourceUsingPatterns
ModuleRevisionId
moduleRevision
List
patternList
String
artifact
String
type
String
ext
Date
date
ResolvedResource
rres
for
Iterator
iter
patternList
iterator
iter
hasNext
rres
String
pattern
String
iter
next
rres
findResourceUsingPattern
moduleRevision
pattern
artifact
type
ext
date
return
rres
protected
abstract
ResolvedResource
findResourceUsingPattern
ModuleRevisionId
mrid
String
pattern
String
artifact
String
type
String
ext
Date
date
protected
abstract
ResolvedResource
findAll
ModuleRevisionId
mrid
String
pattern
String
artifact
String
type
String
ext
protected
abstract
long
get
Resource
resource
File
ivyTempFile
throws
IOException
protected
void
logIvyNotFound
ModuleRevisionId
mrid
Artifact
artifact
new
DefaultArtifact
mrid
new
Date
String
revisionToken
mrid
getRevision
startsWith
mrid
getRevision
substring
length
mrid
getRevision
Artifact
latestArtifact
new
DefaultArtifact
new
ModuleRevisionId
mrid
getModuleId
revisionToken
new
Date
if
_ivyPatterns
isEmpty
logIvyAttempt
mrid
else
for
Iterator
iter
_ivyPatterns
iterator
iter
hasNext
String
pattern
String
iter
next
String
resolvedFileName
IvyPatternHelper
substitute
pattern
artifact
logIvyAttempt
resolvedFileName
if
mrid
isExactRevision
resolvedFileName
IvyPatternHelper
substitute
pattern
latestArtifact
logIvyAttempt
resolvedFileName
protected
void
logArtifactNotFound
Artifact
artifact
if
_artifactPatterns
isEmpty
logArtifactAttempt
artifact
artifact
for
Iterator
iter
_artifactPatterns
iterator
iter
hasNext
String
pattern
String
iter
next
String
resolvedFileName
IvyPatternHelper
substitute
pattern
artifact
logArtifactAttempt
artifact
resolvedFileName
protected
Collection
findNames
Map
tokenValues
String
token
Collection
names
new
HashSet
names
addAll
findIvyNames
tokenValues
token
names
addAll
findArtifactNames
tokenValues
token
return
names
protected
Collection
findIvyNames
Map
tokenValues
String
token
Collection
names
new
HashSet
tokenValues
new
HashMap
tokenValues
tokenValues
put
IvyPatternHelper
ARTIFACT_KEY
tokenValues
put
IvyPatternHelper
TYPE_KEY
tokenValues
put
IvyPatternHelper
EXT_KEY
findTokenValues
names
getIvyPatterns
tokenValues
token
getIvy
filterIgnore
names
return
names
protected
Collection
findArtifactNames
Map
tokenValues
String
token
Collection
names
new
HashSet
tokenValues
new
HashMap
tokenValues
tokenValues
put
IvyPatternHelper
ARTIFACT_KEY
tokenValues
get
IvyPatternHelper
MODULE_KEY
tokenValues
put
IvyPatternHelper
TYPE_KEY
tokenValues
put
IvyPatternHelper
EXT_KEY
findTokenValues
names
getArtifactPatterns
tokenValues
token
getIvy
filterIgnore
names
return
names
protected
void
findTokenValues
Collection
names
List
patterns
Map
tokenValues
String
token
public
void
addIvyPattern
String
pattern
_ivyPatterns
add
pattern
public
void
addArtifactPattern
String
pattern
_artifactPatterns
add
pattern
public
List
getIvyPatterns
return
Collections
unmodifiableList
_ivyPatterns
public
List
getArtifactPatterns
return
Collections
unmodifiableList
_artifactPatterns
protected
void
setIvyPatterns
List
ivyPatterns
_ivyPatterns
ivyPatterns
protected
void
setArtifactPatterns
List
artifactPatterns
_artifactPatterns
artifactPatterns
public
void
addConfiguredIvy
IvyPattern
p
_ivyPatterns
add
p
getPattern
public
void
addConfiguredArtifact
IvyPattern
p
_artifactPatterns
add
p
getPattern
public
void
dumpConfig
super
dumpConfig
Message
debug
for
ListIterator
iter
_ivyPatterns
listIterator
iter
hasNext
String
p
String
iter
next
Message
debug
p
Message
debug
for
ListIterator
iter
_artifactPatterns
listIterator
iter
hasNext
String
p
String
iter
next
Message
debug
p
