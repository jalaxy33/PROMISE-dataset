package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
import
org
apache
tools
ant
types
ZipFileSet
import
java
io
import
java
util
zip
public
class
Jar
extends
Zip
private
File
manifest
private
boolean
manifestAdded
public
Jar
super
archiveType
emptyBehavior
public
void
setJarfile
File
jarFile
super
setZipfile
jarFile
public
void
setManifest
File
manifestFile
manifest
manifestFile
if
manifest
exists
throw
new
BuildException
manifest
ZipFileSet
fs
new
ZipFileSet
fs
setDir
new
File
manifest
getParent
fs
setIncludes
manifest
getName
fs
setFullpath
super
addFileset
fs
protected
void
initZipOutputStream
ZipOutputStream
zOut
throws
IOException
BuildException
if
manifest
String
s
InputStream
in
this
getClass
getResourceAsStream
s
if
in
throw
new
BuildException
s
zipDir
zOut
zipFile
in
zOut
System
currentTimeMillis
super
initZipOutputStream
zOut
protected
void
zipFile
File
file
ZipOutputStream
zOut
String
vPath
throws
IOException
if
vPath
equalsIgnoreCase
if
manifest
manifest
equals
file
manifestAdded
log
archiveType
archiveType
Project
MSG_WARN
else
super
zipFile
file
zOut
vPath
manifestAdded
else
super
zipFile
file
zOut
vPath
protected
void
cleanUp
manifestAdded
super
cleanUp
