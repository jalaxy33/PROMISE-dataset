package
org
apache
tools
ant
types
import
java
util
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
BuildException
public
class
CommandlineJava
implements
Cloneable
private
Commandline
vmCommand
new
Commandline
private
Commandline
javaCommand
new
Commandline
private
SysProperties
sysProperties
new
SysProperties
private
Path
classpath
private
String
vmVersion
public
static
class
SysProperties
extends
Environment
implements
Cloneable
Properties
sys
public
String
getVariables
throws
BuildException
String
props
super
getVariables
if
props
return
for
int
i
i
props
length
i
props
i
props
i
return
props
public
int
size
return
variables
size
public
void
setSystem
throws
BuildException
try
Properties
p
new
Properties
sys
System
getProperties
for
Enumeration
e
variables
elements
e
hasMoreElements
Environment
Variable
v
Environment
Variable
e
nextElement
p
put
v
getKey
v
getValue
System
setProperties
p
catch
SecurityException
e
throw
new
BuildException
e
public
void
restoreSystem
throws
BuildException
if
sys
throw
new
BuildException
try
System
setProperties
sys
sys
catch
SecurityException
e
throw
new
BuildException
e
public
Object
clone
try
SysProperties
c
SysProperties
super
clone
c
variables
Vector
variables
clone
return
c
catch
CloneNotSupportedException
e
return
public
CommandlineJava
setVm
setVmversion
org
apache
tools
ant
Project
getJavaVersion
public
Commandline
Argument
createArgument
return
javaCommand
createArgument
public
Commandline
Argument
createVmArgument
return
vmCommand
createArgument
public
void
addSysproperty
Environment
Variable
sysp
sysProperties
addVariable
sysp
public
void
setVm
String
vm
vmCommand
setExecutable
vm
public
void
setVmversion
String
value
vmVersion
value
public
void
setClassname
String
classname
javaCommand
setExecutable
classname
public
String
getClassname
return
javaCommand
getExecutable
public
Path
createClasspath
Project
p
if
classpath
classpath
new
Path
p
return
classpath
public
String
getVmversion
return
vmVersion
public
String
getCommandline
Path
fullClasspath
classpath
classpath
concatSystemClasspath
int
size
vmCommand
size
javaCommand
size
sysProperties
size
if
fullClasspath
fullClasspath
size
size
String
result
new
String
size
System
arraycopy
vmCommand
getCommandline
result
vmCommand
size
int
pos
vmCommand
size
if
sysProperties
size
System
arraycopy
sysProperties
getVariables
result
pos
sysProperties
size
pos
sysProperties
size
if
fullClasspath
fullClasspath
toString
trim
length
result
pos
result
pos
fullClasspath
toString
System
arraycopy
javaCommand
getCommandline
result
pos
javaCommand
size
return
result
public
String
toString
return
Commandline
toString
getCommandline
public
int
size
int
size
vmCommand
size
javaCommand
size
if
classpath
classpath
size
size
return
size
public
Commandline
getJavaCommand
return
javaCommand
public
Commandline
getVmCommand
return
vmCommand
public
Path
getClasspath
return
classpath
public
void
setSystemProperties
throws
BuildException
sysProperties
setSystem
public
void
restoreSystemProperties
throws
BuildException
sysProperties
restoreSystem
public
SysProperties
getSystemProperties
return
sysProperties
public
Object
clone
CommandlineJava
c
new
CommandlineJava
c
vmCommand
Commandline
vmCommand
clone
c
javaCommand
Commandline
javaCommand
clone
c
sysProperties
SysProperties
sysProperties
clone
if
classpath
c
classpath
Path
classpath
clone
c
vmVersion
vmVersion
return
c
public
void
clearJavaArgs
javaCommand
clearArgs
