package
org
apache
tools
ant
util
import
java
lang
reflect
InvocationTargetException
import
java
lang
reflect
Method
import
org
apache
tools
ant
BuildException
public
class
LoaderUtils
private
static
Method
getContextClassLoader
private
static
Method
setContextClassLoader
static
try
getContextClassLoader
Thread
class
getMethod
new
Class
Class
setContextArgs
new
Class
ClassLoader
class
setContextClassLoader
Thread
class
getMethod
setContextArgs
catch
Exception
e
public
static
void
setContextClassLoader
ClassLoader
loader
if
setContextClassLoader
return
try
Thread
currentThread
Thread
currentThread
setContextClassLoader
invoke
currentThread
new
Object
loader
catch
IllegalAccessException
e
throw
new
BuildException
e
catch
InvocationTargetException
e
throw
new
BuildException
e
public
static
ClassLoader
getContextClassLoader
if
getContextClassLoader
return
try
Thread
currentThread
Thread
currentThread
return
ClassLoader
getContextClassLoader
invoke
currentThread
new
Object
catch
IllegalAccessException
e
throw
new
BuildException
e
catch
InvocationTargetException
e
throw
new
BuildException
e
public
static
boolean
isContextLoaderAvailable
return
getContextClassLoader
setContextClassLoader
