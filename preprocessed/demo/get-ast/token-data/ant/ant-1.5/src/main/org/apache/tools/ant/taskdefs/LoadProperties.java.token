package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
types
FilterChain
import
org
apache
tools
ant
filters
StringInputStream
import
org
apache
tools
ant
filters
util
ChainReaderHelper
import
java
io
File
import
java
io
FileInputStream
import
java
io
BufferedInputStream
import
java
io
InputStreamReader
import
java
io
Reader
import
java
io
IOException
import
java
util
Enumeration
import
java
util
Properties
import
java
util
Vector
public
final
class
LoadProperties
extends
Task
private
File
srcFile
private
final
Vector
filterChains
new
Vector
public
final
void
setSrcFile
final
File
srcFile
this
srcFile
srcFile
public
final
void
execute
throws
BuildException
if
srcFile
throw
new
BuildException
if
srcFile
exists
throw
new
BuildException
if
srcFile
isFile
throw
new
BuildException
FileInputStream
fis
BufferedInputStream
bis
Reader
instream
try
final
long
len
srcFile
length
final
int
size
int
len
fis
new
FileInputStream
srcFile
bis
new
BufferedInputStream
fis
instream
new
InputStreamReader
bis
ChainReaderHelper
crh
new
ChainReaderHelper
crh
setBufferSize
size
crh
setPrimaryReader
instream
crh
setFilterChains
filterChains
crh
setProject
project
instream
crh
getAssembledReader
String
text
crh
readFully
instream
if
text
if
text
endsWith
text
text
final
StringInputStream
sis
new
StringInputStream
text
final
Properties
props
new
Properties
props
load
sis
final
Enumeration
e
props
keys
while
e
hasMoreElements
final
String
key
String
e
nextElement
final
String
value
props
getProperty
key
if
key
value
value
trim
length
project
setNewProperty
key
value
sis
close
catch
final
IOException
ioe
final
String
message
ioe
toString
throw
new
BuildException
message
ioe
location
catch
final
BuildException
be
throw
be
finally
try
if
fis
fis
close
catch
IOException
ioex
public
final
void
addFilterChain
FilterChain
filter
filterChains
addElement
filter
