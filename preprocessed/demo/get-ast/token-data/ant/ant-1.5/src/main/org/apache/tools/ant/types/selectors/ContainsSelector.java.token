package
org
apache
tools
ant
types
selectors
import
java
io
File
import
java
io
BufferedReader
import
java
io
InputStreamReader
import
java
io
FileInputStream
import
java
io
IOException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
types
Parameter
import
org
apache
tools
ant
BuildException
public
class
ContainsSelector
extends
BaseExtendSelector
private
String
contains
private
boolean
casesensitive
public
final
static
String
CONTAINS_KEY
public
final
static
String
CASE_KEY
public
ContainsSelector
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
contains
buf
append
if
casesensitive
buf
append
else
buf
append
buf
append
return
buf
toString
public
void
setText
String
contains
this
contains
contains
public
void
setCasesensitive
boolean
casesensitive
this
casesensitive
casesensitive
public
void
setParameters
Parameter
parameters
super
setParameters
parameters
if
parameters
for
int
i
i
parameters
length
i
String
paramname
parameters
i
getName
if
CONTAINS_KEY
equalsIgnoreCase
paramname
setText
parameters
i
getValue
else
if
CASE_KEY
equalsIgnoreCase
paramname
setCasesensitive
Project
toBoolean
parameters
i
getValue
else
setError
paramname
public
void
verifySettings
if
contains
setError
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
if
file
isDirectory
return
String
userstr
contains
if
casesensitive
userstr
contains
toLowerCase
BufferedReader
in
try
in
new
BufferedReader
new
InputStreamReader
new
FileInputStream
file
String
teststr
in
readLine
while
teststr
if
casesensitive
teststr
teststr
toLowerCase
if
teststr
indexOf
userstr
return
teststr
in
readLine
return
catch
IOException
ioe
throw
new
BuildException
filename
finally
try
in
close
catch
Exception
e
throw
new
BuildException
filename
