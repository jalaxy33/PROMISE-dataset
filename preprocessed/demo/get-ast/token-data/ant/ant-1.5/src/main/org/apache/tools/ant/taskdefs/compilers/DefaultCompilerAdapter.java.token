package
org
apache
tools
ant
taskdefs
compilers
import
org
apache
tools
ant
Location
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
taskdefs
Javac
import
org
apache
tools
ant
taskdefs
Execute
import
org
apache
tools
ant
taskdefs
LogStreamHandler
import
org
apache
tools
ant
types
Path
import
org
apache
tools
ant
types
Commandline
import
org
apache
tools
ant
util
FileUtils
import
org
apache
tools
ant
util
JavaEnvUtils
import
java
io
File
import
java
io
PrintWriter
import
java
io
FileWriter
import
java
io
IOException
public
abstract
class
DefaultCompilerAdapter
implements
CompilerAdapter
protected
Path
src
protected
File
destDir
protected
String
encoding
protected
boolean
debug
protected
boolean
optimize
protected
boolean
deprecation
protected
boolean
depend
protected
boolean
verbose
protected
String
target
protected
Path
bootclasspath
protected
Path
extdirs
protected
Path
compileClasspath
protected
Path
compileSourcepath
protected
Project
project
protected
Location
location
protected
boolean
includeAntRuntime
protected
boolean
includeJavaRuntime
protected
String
memoryInitialSize
protected
String
memoryMaximumSize
protected
File
compileList
protected
static
String
lSep
System
getProperty
protected
Javac
attributes
private
FileUtils
fileUtils
FileUtils
newFileUtils
public
void
setJavac
Javac
attributes
this
attributes
attributes
src
attributes
getSrcdir
destDir
attributes
getDestdir
encoding
attributes
getEncoding
debug
attributes
getDebug
optimize
attributes
getOptimize
deprecation
attributes
getDeprecation
depend
attributes
getDepend
verbose
attributes
getVerbose
target
attributes
getTarget
bootclasspath
attributes
getBootclasspath
extdirs
attributes
getExtdirs
compileList
attributes
getFileList
compileClasspath
attributes
getClasspath
compileSourcepath
attributes
getSourcepath
project
attributes
getProject
location
attributes
getLocation
includeAntRuntime
attributes
getIncludeantruntime
includeJavaRuntime
attributes
getIncludejavaruntime
memoryInitialSize
attributes
getMemoryInitialSize
memoryMaximumSize
attributes
getMemoryMaximumSize
public
Javac
getJavac
return
attributes
protected
Path
getCompileClasspath
Path
classpath
new
Path
project
if
destDir
classpath
setLocation
destDir
if
compileClasspath
if
includeAntRuntime
classpath
addExisting
Path
systemClasspath
else
if
includeAntRuntime
classpath
addExisting
compileClasspath
concatSystemClasspath
else
classpath
addExisting
compileClasspath
concatSystemClasspath
if
includeJavaRuntime
classpath
addJavaRuntime
return
classpath
protected
Commandline
setupJavacCommandlineSwitches
Commandline
cmd
return
setupJavacCommandlineSwitches
cmd
protected
Commandline
setupJavacCommandlineSwitches
Commandline
cmd
boolean
useDebugLevel
Path
classpath
getCompileClasspath
Path
sourcepath
if
compileSourcepath
sourcepath
compileSourcepath
else
sourcepath
src
String
memoryParameterPrefix
assumeJava11
if
memoryInitialSize
if
attributes
isForkedJavac
attributes
log
Project
MSG_WARN
else
cmd
createArgument
setValue
memoryParameterPrefix
memoryInitialSize
if
memoryMaximumSize
if
attributes
isForkedJavac
attributes
log
Project
MSG_WARN
else
cmd
createArgument
setValue
memoryParameterPrefix
memoryMaximumSize
if
attributes
getNowarn
cmd
createArgument
setValue
if
deprecation
cmd
createArgument
setValue
if
destDir
cmd
createArgument
setValue
cmd
createArgument
setFile
destDir
cmd
createArgument
setValue
if
assumeJava11
Path
cp
new
Path
project
if
bootclasspath
cp
append
bootclasspath
if
extdirs
cp
addExtdirs
extdirs
cp
append
classpath
cp
append
sourcepath
cmd
createArgument
setPath
cp
else
cmd
createArgument
setPath
classpath
if
sourcepath
size
cmd
createArgument
setValue
cmd
createArgument
setPath
sourcepath
if
target
cmd
createArgument
setValue
cmd
createArgument
setValue
target
if
bootclasspath
bootclasspath
size
cmd
createArgument
setValue
cmd
createArgument
setPath
bootclasspath
if
extdirs
extdirs
size
cmd
createArgument
setValue
cmd
createArgument
setPath
extdirs
if
encoding
cmd
createArgument
setValue
cmd
createArgument
setValue
encoding
if
debug
if
useDebugLevel
assumeJava11
String
debugLevel
attributes
getDebugLevel
if
debugLevel
cmd
createArgument
setValue
debugLevel
else
cmd
createArgument
setValue
else
cmd
createArgument
setValue
else
if
assumeJava11
cmd
createArgument
setValue
if
optimize
cmd
createArgument
setValue
if
depend
if
assumeJava11
cmd
createArgument
setValue
else
if
assumeJava12
cmd
createArgument
setValue
else
attributes
log
Project
MSG_WARN
if
verbose
cmd
createArgument
setValue
addCurrentCompilerArgs
cmd
return
cmd
protected
Commandline
setupModernJavacCommandlineSwitches
Commandline
cmd
setupJavacCommandlineSwitches
cmd
if
attributes
getSource
assumeJava13
cmd
createArgument
setValue
cmd
createArgument
setValue
attributes
getSource
return
cmd
protected
Commandline
setupModernJavacCommand
Commandline
cmd
new
Commandline
setupModernJavacCommandlineSwitches
cmd
logAndAddFilesToCompile
cmd
return
cmd
protected
Commandline
setupJavacCommand
return
setupJavacCommand
protected
Commandline
setupJavacCommand
boolean
debugLevelCheck
Commandline
cmd
new
Commandline
setupJavacCommandlineSwitches
cmd
debugLevelCheck
logAndAddFilesToCompile
cmd
return
cmd
protected
void
logAndAddFilesToCompile
Commandline
cmd
attributes
log
cmd
describeArguments
Project
MSG_VERBOSE
StringBuffer
niceSourceList
new
StringBuffer
if
compileList
length
niceSourceList
append
niceSourceList
append
niceSourceList
append
lSep
for
int
i
i
compileList
length
i
String
arg
compileList
i
getAbsolutePath
cmd
createArgument
setValue
arg
niceSourceList
append
arg
lSep
attributes
log
niceSourceList
toString
Project
MSG_VERBOSE
protected
int
executeExternalCompile
String
args
int
firstFileName
String
commandArray
File
tmpFile
try
if
Commandline
toString
args
length
firstFileName
PrintWriter
out
try
String
userDirName
System
getProperty
File
userDir
new
File
userDirName
tmpFile
fileUtils
createTempFile
userDir
out
new
PrintWriter
new
FileWriter
tmpFile
for
int
i
firstFileName
i
args
length
i
out
println
args
i
out
flush
commandArray
new
String
firstFileName
System
arraycopy
args
commandArray
firstFileName
commandArray
firstFileName
tmpFile
catch
IOException
e
throw
new
BuildException
e
location
finally
if
out
try
out
close
catch
Throwable
t
else
commandArray
args
try
Execute
exe
new
Execute
new
LogStreamHandler
attributes
Project
MSG_INFO
Project
MSG_WARN
exe
setAntRun
project
exe
setWorkingDirectory
project
getBaseDir
exe
setCommandline
commandArray
exe
execute
return
exe
getExitValue
catch
IOException
e
throw
new
BuildException
args
e
location
finally
if
tmpFile
tmpFile
delete
protected
void
addExtdirsToClasspath
Path
classpath
classpath
addExtdirs
extdirs
protected
void
addCurrentCompilerArgs
Commandline
cmd
cmd
addArguments
getJavac
getCurrentCompilerArgs
protected
boolean
assumeJava11
return
equals
attributes
getCompilerVersion
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_1
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_1
protected
boolean
assumeJava12
return
equals
attributes
getCompilerVersion
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_2
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_2
protected
boolean
assumeJava13
return
equals
attributes
getCompilerVersion
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_3
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_3
equals
attributes
getCompilerVersion
JavaEnvUtils
isJavaVersion
JavaEnvUtils
JAVA_1_3
