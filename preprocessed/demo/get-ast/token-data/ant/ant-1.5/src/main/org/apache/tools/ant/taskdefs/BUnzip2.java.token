package
org
apache
tools
ant
taskdefs
import
java
io
BufferedInputStream
import
java
io
FileInputStream
import
java
io
FileOutputStream
import
java
io
IOException
import
org
apache
tools
ant
BuildException
import
org
apache
tools
bzip2
CBZip2InputStream
public
class
BUnzip2
extends
Unpack
private
static
final
String
DEFAULT_EXTENSION
protected
String
getDefaultExtension
return
DEFAULT_EXTENSION
protected
void
extract
if
source
lastModified
dest
lastModified
log
source
getAbsolutePath
dest
getAbsolutePath
FileOutputStream
out
CBZip2InputStream
zIn
FileInputStream
fis
BufferedInputStream
bis
try
out
new
FileOutputStream
dest
fis
new
FileInputStream
source
bis
new
BufferedInputStream
fis
int
b
bis
read
if
b
throw
new
BuildException
location
b
bis
read
if
b
throw
new
BuildException
location
zIn
new
CBZip2InputStream
bis
byte
buffer
new
byte
int
count
do
out
write
buffer
count
count
zIn
read
buffer
buffer
length
while
count
catch
IOException
ioe
String
msg
ioe
getMessage
throw
new
BuildException
msg
ioe
location
finally
if
bis
try
bis
close
catch
IOException
ioex
if
fis
try
fis
close
catch
IOException
ioex
if
out
try
out
close
catch
IOException
ioex
if
zIn
try
zIn
close
catch
IOException
ioex
