package
org
apache
tools
ant
taskdefs
import
java
io
IOException
import
java
io
InputStream
import
java
io
OutputStream
public
class
StreamPumper
implements
Runnable
private
static
final
int
SLEEP
private
static
final
int
SIZE
private
InputStream
is
private
OutputStream
os
private
boolean
finished
public
StreamPumper
InputStream
is
OutputStream
os
this
is
is
this
os
os
public
void
run
synchronized
this
finished
final
byte
buf
new
byte
SIZE
int
length
try
while
length
is
read
buf
os
write
buf
length
try
Thread
sleep
SLEEP
catch
InterruptedException
e
catch
IOException
e
finally
synchronized
this
finished
notify
public
synchronized
boolean
isFinished
return
finished
public
synchronized
void
waitFor
throws
InterruptedException
while
isFinished
wait
