package
org
apache
tools
ant
types
selectors
import
java
io
File
import
org
apache
tools
ant
types
EnumeratedAttribute
import
org
apache
tools
ant
types
Parameter
import
org
apache
tools
ant
BuildException
public
class
SizeSelector
extends
BaseExtendSelector
private
long
size
private
long
multiplier
private
long
sizelimit
private
int
cmp
public
final
static
String
SIZE_KEY
public
final
static
String
UNITS_KEY
public
final
static
String
WHEN_KEY
public
SizeSelector
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
sizelimit
buf
append
if
cmp
buf
append
else
if
cmp
buf
append
else
buf
append
buf
append
return
buf
toString
public
void
setValue
long
size
this
size
size
if
multiplier
size
sizelimit
size
multiplier
public
void
setUnits
ByteUnits
units
int
i
units
getIndex
multiplier
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
else
if
i
i
multiplier
if
multiplier
size
sizelimit
size
multiplier
public
void
setWhen
SizeComparisons
cmp
this
cmp
cmp
getIndex
public
void
setParameters
Parameter
parameters
super
setParameters
parameters
if
parameters
for
int
i
i
parameters
length
i
String
paramname
parameters
i
getName
if
SIZE_KEY
equalsIgnoreCase
paramname
try
setValue
new
Long
parameters
i
getValue
longValue
catch
NumberFormatException
nfe
setError
parameters
i
getValue
else
if
UNITS_KEY
equalsIgnoreCase
paramname
ByteUnits
units
new
ByteUnits
units
setValue
parameters
i
getValue
setUnits
units
else
if
WHEN_KEY
equalsIgnoreCase
paramname
SizeComparisons
cmp
new
SizeComparisons
cmp
setValue
parameters
i
getValue
setWhen
cmp
else
setError
paramname
public
void
verifySettings
if
size
setError
else
if
multiplier
setError
else
if
sizelimit
setError
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
if
file
isDirectory
return
if
cmp
return
file
length
sizelimit
else
if
cmp
return
file
length
sizelimit
else
return
file
length
sizelimit
public
static
class
ByteUnits
extends
EnumeratedAttribute
public
String
getValues
return
new
String
public
static
class
SizeComparisons
extends
EnumeratedAttribute
public
String
getValues
return
new
String
