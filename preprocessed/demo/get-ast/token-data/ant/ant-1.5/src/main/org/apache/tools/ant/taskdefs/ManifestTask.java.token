package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
types
EnumeratedAttribute
import
java
io
File
import
java
io
FileReader
import
java
io
FileWriter
import
java
io
IOException
import
java
io
PrintWriter
public
class
ManifestTask
extends
Task
private
Manifest
nestedManifest
new
Manifest
private
File
manifestFile
private
Mode
mode
public
static
class
Mode
extends
EnumeratedAttribute
public
String
getValues
return
new
String
public
ManifestTask
mode
new
Mode
mode
setValue
public
void
addConfiguredSection
Manifest
Section
section
throws
ManifestException
nestedManifest
addConfiguredSection
section
public
void
addConfiguredAttribute
Manifest
Attribute
attribute
throws
ManifestException
nestedManifest
addConfiguredAttribute
attribute
public
void
setFile
File
f
manifestFile
f
public
void
setMode
Mode
m
mode
m
public
void
execute
throws
BuildException
if
manifestFile
throw
new
BuildException
Manifest
toWrite
Manifest
getDefaultManifest
Manifest
current
BuildException
error
if
manifestFile
exists
FileReader
f
try
f
new
FileReader
manifestFile
current
new
Manifest
f
catch
ManifestException
m
error
new
BuildException
manifestFile
m
location
catch
IOException
e
error
new
BuildException
manifestFile
e
location
finally
if
f
try
f
close
catch
IOException
e
try
if
mode
getValue
equals
manifestFile
exists
if
current
toWrite
merge
current
else
if
error
throw
error
toWrite
merge
nestedManifest
catch
ManifestException
m
throw
new
BuildException
m
location
if
toWrite
equals
current
log
Project
MSG_VERBOSE
return
PrintWriter
w
try
w
new
PrintWriter
new
FileWriter
manifestFile
toWrite
write
w
catch
IOException
e
throw
new
BuildException
manifestFile
e
location
finally
if
w
w
close
