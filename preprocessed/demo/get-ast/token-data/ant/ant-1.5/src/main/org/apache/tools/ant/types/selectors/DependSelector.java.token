package
org
apache
tools
ant
types
selectors
import
java
io
File
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
types
Mapper
import
org
apache
tools
ant
util
IdentityMapper
import
org
apache
tools
ant
util
FileNameMapper
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
taskdefs
condition
Os
public
class
DependSelector
extends
BaseSelector
private
File
targetdir
private
Mapper
mapperElement
private
FileNameMapper
map
private
int
granularity
public
DependSelector
if
Os
isFamily
granularity
public
String
toString
StringBuffer
buf
new
StringBuffer
if
targetdir
buf
append
else
buf
append
targetdir
getName
buf
append
buf
append
granularity
if
map
buf
append
buf
append
map
toString
else
if
mapperElement
buf
append
buf
append
mapperElement
toString
buf
append
return
buf
toString
public
void
setTargetdir
File
targetdir
this
targetdir
targetdir
public
void
setGranularity
int
granularity
this
granularity
granularity
public
Mapper
createMapper
throws
BuildException
if
mapperElement
throw
new
BuildException
mapperElement
new
Mapper
project
return
mapperElement
public
void
verifySettings
if
targetdir
setError
if
mapperElement
map
new
IdentityMapper
else
map
mapperElement
getImplementation
if
map
setError
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
String
destfiles
map
mapFileName
filename
if
destfiles
return
if
destfiles
length
destfiles
throw
new
BuildException
targetdir
getName
filename
String
destname
destfiles
File
destfile
new
File
targetdir
destname
return
SelectorUtils
isOutOfDate
file
destfile
granularity
