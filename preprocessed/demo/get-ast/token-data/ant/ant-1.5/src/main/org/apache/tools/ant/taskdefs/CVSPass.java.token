package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
util
StringUtils
import
java
io
File
import
java
io
BufferedReader
import
java
io
FileReader
import
java
io
PrintWriter
import
java
io
FileWriter
import
java
io
IOException
public
class
CVSPass
extends
Task
private
String
cvsRoot
private
File
passFile
private
String
password
private
final
char
shifts
public
CVSPass
passFile
new
File
System
getProperty
System
getProperty
File
separatorChar
public
final
void
execute
throws
BuildException
if
cvsRoot
throw
new
BuildException
if
password
throw
new
BuildException
log
cvsRoot
Project
MSG_DEBUG
log
password
Project
MSG_DEBUG
log
passFile
Project
MSG_DEBUG
BufferedReader
reader
PrintWriter
writer
try
StringBuffer
buf
new
StringBuffer
if
passFile
exists
reader
new
BufferedReader
new
FileReader
passFile
String
line
while
line
reader
readLine
if
line
startsWith
cvsRoot
buf
append
line
append
StringUtils
LINE_SEP
String
pwdfile
buf
toString
cvsRoot
mangle
password
log
pwdfile
Project
MSG_DEBUG
writer
new
PrintWriter
new
FileWriter
passFile
writer
println
pwdfile
catch
IOException
e
throw
new
BuildException
e
finally
if
reader
try
reader
close
catch
IOException
e
if
writer
writer
close
private
final
String
mangle
String
password
StringBuffer
buf
new
StringBuffer
for
int
i
i
password
length
i
buf
append
shifts
password
charAt
i
return
buf
toString
public
void
setCvsroot
String
cvsRoot
this
cvsRoot
cvsRoot
public
void
setPassfile
File
passFile
this
passFile
passFile
public
void
setPassword
String
password
this
password
password
