package
org
apache
tools
ant
types
selectors
import
java
io
File
import
java
util
StringTokenizer
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
types
Parameter
import
org
apache
tools
ant
BuildException
public
class
DepthSelector
extends
BaseExtendSelector
public
int
min
public
int
max
public
final
static
String
MIN_KEY
public
final
static
String
MAX_KEY
public
DepthSelector
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
min
buf
append
buf
append
max
buf
append
return
buf
toString
public
void
setMin
int
min
this
min
min
public
void
setMax
int
max
this
max
max
public
void
setParameters
Parameter
parameters
super
setParameters
parameters
if
parameters
for
int
i
i
parameters
length
i
String
paramname
parameters
i
getName
if
MIN_KEY
equalsIgnoreCase
paramname
try
setMin
Integer
parseInt
parameters
i
getValue
catch
NumberFormatException
nfe1
setError
parameters
i
getValue
else
if
MAX_KEY
equalsIgnoreCase
paramname
try
setMax
Integer
parseInt
parameters
i
getValue
catch
NumberFormatException
nfe1
setError
parameters
i
getValue
else
setError
paramname
public
void
verifySettings
if
min
max
setError
if
max
min
max
setError
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
int
depth
String
abs_base
basedir
getAbsolutePath
String
abs_file
file
getAbsolutePath
StringTokenizer
tok_base
new
StringTokenizer
abs_base
File
separator
StringTokenizer
tok_file
new
StringTokenizer
abs_file
File
separator
while
tok_file
hasMoreTokens
String
filetoken
tok_file
nextToken
if
tok_base
hasMoreTokens
String
basetoken
tok_base
nextToken
if
basetoken
equals
filetoken
throw
new
BuildException
filename
abs_base
else
depth
if
max
depth
max
return
if
tok_base
hasMoreTokens
throw
new
BuildException
filename
abs_base
if
min
depth
min
return
return
