package
org
apache
tools
ant
taskdefs
optional
ejb
import
java
io
File
import
java
io
IOException
import
javax
xml
parsers
ParserConfigurationException
import
javax
xml
parsers
SAXParser
import
javax
xml
parsers
SAXParserFactory
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
types
Path
import
org
xml
sax
SAXException
public
class
IPlanetEjbcTask
extends
Task
private
File
ejbdescriptor
private
File
iasdescriptor
private
File
dest
private
Path
classpath
private
boolean
keepgenerated
private
boolean
debug
private
File
iashome
public
void
setEjbdescriptor
File
ejbdescriptor
this
ejbdescriptor
ejbdescriptor
public
void
setIasdescriptor
File
iasdescriptor
this
iasdescriptor
iasdescriptor
public
void
setDest
File
dest
this
dest
dest
public
void
setClasspath
Path
classpath
if
this
classpath
this
classpath
classpath
else
this
classpath
append
classpath
public
Path
createClasspath
if
classpath
classpath
new
Path
getProject
return
classpath
createPath
public
void
setKeepgenerated
boolean
keepgenerated
this
keepgenerated
keepgenerated
public
void
setDebug
boolean
debug
this
debug
debug
public
void
setIashome
File
iashome
this
iashome
iashome
public
void
execute
throws
BuildException
checkConfiguration
executeEjbc
getParser
private
void
checkConfiguration
throws
BuildException
if
ejbdescriptor
String
msg
throw
new
BuildException
msg
getLocation
if
ejbdescriptor
exists
ejbdescriptor
isFile
String
msg
ejbdescriptor
throw
new
BuildException
msg
getLocation
if
iasdescriptor
String
msg
throw
new
BuildException
msg
getLocation
if
iasdescriptor
exists
iasdescriptor
isFile
String
msg
iasdescriptor
throw
new
BuildException
msg
getLocation
if
dest
String
msg
throw
new
BuildException
msg
getLocation
if
dest
exists
dest
isDirectory
String
msg
dest
throw
new
BuildException
msg
getLocation
if
iashome
iashome
isDirectory
String
msg
iashome
throw
new
BuildException
msg
getLocation
private
SAXParser
getParser
throws
BuildException
SAXParser
saxParser
try
SAXParserFactory
saxParserFactory
SAXParserFactory
newInstance
saxParserFactory
setValidating
saxParser
saxParserFactory
newSAXParser
catch
SAXException
e
String
msg
e
getMessage
throw
new
BuildException
msg
e
getLocation
catch
ParserConfigurationException
e
String
msg
e
getMessage
throw
new
BuildException
msg
e
getLocation
return
saxParser
private
void
executeEjbc
SAXParser
saxParser
throws
BuildException
IPlanetEjbc
ejbc
new
IPlanetEjbc
ejbdescriptor
iasdescriptor
dest
getClasspath
toString
saxParser
ejbc
setRetainSource
keepgenerated
ejbc
setDebugOutput
debug
if
iashome
ejbc
setIasHomeDir
iashome
try
ejbc
execute
catch
IOException
e
String
msg
e
getMessage
throw
new
BuildException
msg
e
getLocation
catch
SAXException
e
String
msg
e
getMessage
throw
new
BuildException
msg
e
getLocation
catch
IPlanetEjbc
EjbcException
e
String
msg
e
getMessage
throw
new
BuildException
msg
e
getLocation
private
Path
getClasspath
Path
cp
if
classpath
cp
new
Path
getProject
concatSystemClasspath
else
cp
classpath
concatSystemClasspath
return
cp
