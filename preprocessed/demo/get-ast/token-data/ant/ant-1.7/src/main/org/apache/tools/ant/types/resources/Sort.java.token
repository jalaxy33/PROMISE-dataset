package
org
apache
tools
ant
types
resources
import
java
util
Stack
import
java
util
TreeMap
import
java
util
Iterator
import
java
util
Collection
import
java
util
Comparator
import
java
util
Collections
import
java
util
AbstractCollection
import
java
util
NoSuchElementException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
types
DataType
import
org
apache
tools
ant
types
ResourceCollection
import
org
apache
tools
ant
types
resources
comparators
ResourceComparator
import
org
apache
tools
ant
types
resources
comparators
DelegatedResourceComparator
public
class
Sort
extends
BaseResourceCollectionWrapper
private
static
class
SortedBag
extends
AbstractCollection
private
class
MutableInt
private
int
value
private
class
MyIterator
implements
Iterator
private
Iterator
keyIter
t
keySet
iterator
private
Object
current
private
int
occurrence
public
synchronized
boolean
hasNext
return
occurrence
keyIter
hasNext
public
synchronized
Object
next
if
hasNext
throw
new
NoSuchElementException
if
occurrence
current
keyIter
next
occurrence
MutableInt
t
get
current
value
occurrence
return
current
public
void
remove
throw
new
UnsupportedOperationException
private
TreeMap
t
private
int
size
SortedBag
Comparator
c
t
new
TreeMap
c
public
synchronized
Iterator
iterator
return
new
MyIterator
public
synchronized
boolean
add
Object
o
if
size
Integer
MAX_VALUE
size
MutableInt
m
MutableInt
t
get
o
if
m
m
new
MutableInt
t
put
o
m
m
value
return
public
synchronized
int
size
return
size
private
DelegatedResourceComparator
comp
new
DelegatedResourceComparator
protected
synchronized
Collection
getCollection
ResourceCollection
rc
getResourceCollection
Iterator
iter
rc
iterator
if
iter
hasNext
return
Collections
EMPTY_SET
SortedBag
b
new
SortedBag
comp
while
iter
hasNext
b
add
iter
next
return
b
public
synchronized
void
add
ResourceComparator
c
if
isReference
throw
noChildrenAllowed
comp
add
c
FailFast
invalidate
this
protected
synchronized
void
dieOnCircularReference
Stack
stk
Project
p
throws
BuildException
if
isChecked
return
if
isReference
super
dieOnCircularReference
stk
p
else
DataType
invokeCircularReferenceCheck
comp
stk
p
setChecked
