package
org
apache
tools
ant
taskdefs
optional
import
java
io
File
import
java
util
ArrayList
import
java
util
Enumeration
import
java
util
StringTokenizer
import
java
util
Vector
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
taskdefs
optional
javah
JavahAdapter
import
org
apache
tools
ant
taskdefs
optional
javah
JavahAdapterFactory
import
org
apache
tools
ant
types
Commandline
import
org
apache
tools
ant
types
Path
import
org
apache
tools
ant
types
Reference
import
org
apache
tools
ant
util
facade
FacadeTaskHelper
import
org
apache
tools
ant
util
facade
ImplementationSpecificArgument
public
class
Javah
extends
Task
private
Vector
classes
new
Vector
private
String
cls
private
File
destDir
private
Path
classpath
private
File
outputFile
private
boolean
verbose
private
boolean
force
private
boolean
old
private
boolean
stubs
private
Path
bootclasspath
private
static
String
lSep
System
getProperty
private
FacadeTaskHelper
facade
public
Javah
facade
new
FacadeTaskHelper
JavahAdapterFactory
getDefault
public
void
setClass
String
cls
this
cls
cls
public
ClassArgument
createClass
ClassArgument
ga
new
ClassArgument
classes
addElement
ga
return
ga
public
class
ClassArgument
private
String
name
public
ClassArgument
public
void
setName
String
name
this
name
name
public
String
getName
return
name
public
String
getClasses
ArrayList
al
new
ArrayList
if
cls
StringTokenizer
tok
new
StringTokenizer
cls
while
tok
hasMoreTokens
al
add
tok
nextToken
trim
Enumeration
e
classes
elements
while
e
hasMoreElements
ClassArgument
arg
ClassArgument
e
nextElement
al
add
arg
getName
return
String
al
toArray
new
String
al
size
public
void
setDestdir
File
destDir
this
destDir
destDir
public
File
getDestdir
return
destDir
public
void
setClasspath
Path
src
if
classpath
classpath
src
else
classpath
append
src
public
Path
createClasspath
if
classpath
classpath
new
Path
getProject
return
classpath
createPath
public
void
setClasspathRef
Reference
r
createClasspath
setRefid
r
public
Path
getClasspath
return
classpath
public
void
setBootclasspath
Path
src
if
bootclasspath
bootclasspath
src
else
bootclasspath
append
src
public
Path
createBootclasspath
if
bootclasspath
bootclasspath
new
Path
getProject
return
bootclasspath
createPath
public
void
setBootClasspathRef
Reference
r
createBootclasspath
setRefid
r
public
Path
getBootclasspath
return
bootclasspath
public
void
setOutputFile
File
outputFile
this
outputFile
outputFile
public
File
getOutputfile
return
outputFile
public
void
setForce
boolean
force
this
force
force
public
boolean
getForce
return
force
public
void
setOld
boolean
old
this
old
old
public
boolean
getOld
return
old
public
void
setStubs
boolean
stubs
this
stubs
stubs
public
boolean
getStubs
return
stubs
public
void
setVerbose
boolean
verbose
this
verbose
verbose
public
boolean
getVerbose
return
verbose
public
void
setImplementation
String
impl
if
equals
impl
facade
setImplementation
JavahAdapterFactory
getDefault
else
facade
setImplementation
impl
public
ImplementationSpecificArgument
createArg
ImplementationSpecificArgument
arg
new
ImplementationSpecificArgument
facade
addImplementationArgument
arg
return
arg
public
String
getCurrentArgs
return
facade
getArgs
public
void
execute
throws
BuildException
if
cls
classes
size
throw
new
BuildException
getLocation
if
cls
classes
size
throw
new
BuildException
getLocation
if
destDir
if
destDir
isDirectory
throw
new
BuildException
destDir
getLocation
if
outputFile
throw
new
BuildException
getLocation
if
classpath
classpath
new
Path
getProject
concatSystemClasspath
else
classpath
classpath
concatSystemClasspath
JavahAdapter
ad
JavahAdapterFactory
getAdapter
facade
getImplementation
this
if
ad
compile
this
throw
new
BuildException
public
void
logAndAddFiles
Commandline
cmd
logAndAddFilesToCompile
cmd
protected
void
logAndAddFilesToCompile
Commandline
cmd
log
cmd
describeArguments
Project
MSG_VERBOSE
StringBuffer
niceClassList
new
StringBuffer
String
c
getClasses
for
int
i
i
c
length
i
cmd
createArgument
setValue
c
i
niceClassList
append
niceClassList
append
c
i
niceClassList
append
lSep
StringBuffer
prefix
new
StringBuffer
if
c
length
prefix
append
prefix
append
prefix
append
lSep
log
prefix
toString
niceClassList
toString
Project
MSG_VERBOSE
