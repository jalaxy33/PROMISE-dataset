package
org
apache
tools
ant
util
import
java
io
File
import
java
io
IOException
import
java
io
InputStream
import
java
io
InputStreamReader
import
java
io
Reader
import
java
io
UnsupportedEncodingException
import
java
io
Writer
import
java
io
OutputStream
import
java
net
MalformedURLException
import
java
net
URL
import
java
text
DecimalFormat
import
java
util
ArrayList
import
java
util
Arrays
import
java
util
Iterator
import
java
util
List
import
java
util
Random
import
java
util
Stack
import
java
util
StringTokenizer
import
java
util
Vector
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
PathTokenizer
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
taskdefs
condition
Os
import
org
apache
tools
ant
types
FilterSetCollection
import
org
apache
tools
ant
types
resources
FileResource
import
org
apache
tools
ant
launch
Locator
public
class
FileUtils
private
static
final
FileUtils
PRIMARY_INSTANCE
new
FileUtils
private
static
Random
rand
new
Random
System
currentTimeMillis
Runtime
getRuntime
freeMemory
private
static
boolean
onNetWare
Os
isFamily
private
static
boolean
onDos
Os
isFamily
private
static
boolean
onWin9x
Os
isFamily
private
static
boolean
onWindows
Os
isFamily
static
final
int
BUF_SIZE
public
static
final
long
FAT_FILE_TIMESTAMP_GRANULARITY
public
static
final
long
UNIX_FILE_TIMESTAMP_GRANULARITY
public
static
final
long
NTFS_FILE_TIMESTAMP_GRANULARITY
private
Object
cacheFromUriLock
new
Object
private
String
cacheFromUriRequest
private
String
cacheFromUriResponse
public
static
FileUtils
newFileUtils
return
new
FileUtils
public
static
FileUtils
getFileUtils
return
PRIMARY_INSTANCE
protected
FileUtils
public
URL
getFileURL
File
file
throws
MalformedURLException
return
new
URL
toURI
file
getAbsolutePath
public
void
copyFile
String
sourceFile
String
destFile
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
boolean
overwrite
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
overwrite
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
boolean
overwrite
boolean
preserveLastModified
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
overwrite
preserveLastModified
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
boolean
overwrite
boolean
preserveLastModified
String
encoding
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
overwrite
preserveLastModified
encoding
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
Vector
filterChains
boolean
overwrite
boolean
preserveLastModified
String
encoding
Project
project
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
filterChains
overwrite
preserveLastModified
encoding
project
public
void
copyFile
String
sourceFile
String
destFile
FilterSetCollection
filters
Vector
filterChains
boolean
overwrite
boolean
preserveLastModified
String
inputEncoding
String
outputEncoding
Project
project
throws
IOException
copyFile
new
File
sourceFile
new
File
destFile
filters
filterChains
overwrite
preserveLastModified
inputEncoding
outputEncoding
project
public
void
copyFile
File
sourceFile
File
destFile
throws
IOException
copyFile
sourceFile
destFile
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
throws
IOException
copyFile
sourceFile
destFile
filters
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
boolean
overwrite
throws
IOException
copyFile
sourceFile
destFile
filters
overwrite
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
boolean
overwrite
boolean
preserveLastModified
throws
IOException
copyFile
sourceFile
destFile
filters
overwrite
preserveLastModified
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
boolean
overwrite
boolean
preserveLastModified
String
encoding
throws
IOException
copyFile
sourceFile
destFile
filters
overwrite
preserveLastModified
encoding
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
Vector
filterChains
boolean
overwrite
boolean
preserveLastModified
String
encoding
Project
project
throws
IOException
copyFile
sourceFile
destFile
filters
filterChains
overwrite
preserveLastModified
encoding
encoding
project
public
void
copyFile
File
sourceFile
File
destFile
FilterSetCollection
filters
Vector
filterChains
boolean
overwrite
boolean
preserveLastModified
String
inputEncoding
String
outputEncoding
Project
project
throws
IOException
ResourceUtils
copyResource
new
FileResource
sourceFile
new
FileResource
destFile
filters
filterChains
overwrite
preserveLastModified
inputEncoding
outputEncoding
project
public
void
setFileLastModified
File
file
long
time
ResourceUtils
setLastModified
new
FileResource
file
time
public
File
resolveFile
File
file
String
filename
if
isAbsolutePath
filename
char
sep
File
separatorChar
filename
filename
replace
sep
replace
sep
if
isContextRelativePath
filename
file
String
udir
System
getProperty
if
filename
charAt
sep
udir
charAt
sep
filename
dissect
udir
filename
substring
filename
new
File
file
filename
getAbsolutePath
return
normalize
filename
public
static
boolean
isContextRelativePath
String
filename
if
onDos
onNetWare
filename
length
return
char
sep
File
separatorChar
filename
filename
replace
sep
replace
sep
char
c
filename
charAt
int
len
filename
length
return
c
sep
len
filename
charAt
sep
Character
isLetter
c
len
filename
indexOf
len
filename
charAt
sep
public
static
boolean
isAbsolutePath
String
filename
int
len
filename
length
if
len
return
char
sep
File
separatorChar
filename
filename
replace
sep
replace
sep
char
c
filename
charAt
if
onDos
onNetWare
return
c
sep
if
c
sep
if
onDos
len
filename
charAt
sep
return
int
nextsep
filename
indexOf
sep
return
nextsep
nextsep
len
int
colon
filename
indexOf
return
Character
isLetter
c
colon
filename
length
filename
charAt
sep
onNetWare
colon
public
static
String
translatePath
String
toProcess
if
toProcess
toProcess
length
return
StringBuffer
path
new
StringBuffer
toProcess
length
PathTokenizer
tokenizer
new
PathTokenizer
toProcess
while
tokenizer
hasMoreTokens
String
pathComponent
tokenizer
nextToken
pathComponent
pathComponent
replace
File
separatorChar
pathComponent
pathComponent
replace
File
separatorChar
if
path
length
path
append
File
pathSeparatorChar
path
append
pathComponent
return
path
toString
public
File
normalize
final
String
path
Stack
s
new
Stack
String
dissect
dissect
path
s
push
dissect
StringTokenizer
tok
new
StringTokenizer
dissect
File
separator
while
tok
hasMoreTokens
String
thisToken
tok
nextToken
if
equals
thisToken
continue
else
if
equals
thisToken
if
s
size
return
new
File
path
s
pop
else
s
push
thisToken
StringBuffer
sb
new
StringBuffer
for
int
i
i
s
size
i
if
i
sb
append
File
separatorChar
sb
append
s
elementAt
i
return
new
File
sb
toString
public
String
dissect
String
path
char
sep
File
separatorChar
path
path
replace
sep
replace
sep
if
isAbsolutePath
path
throw
new
BuildException
path
String
root
int
colon
path
indexOf
if
colon
onDos
onNetWare
int
next
colon
root
path
substring
next
char
ca
path
toCharArray
root
sep
next
ca
next
sep
next
next
StringBuffer
sbPath
new
StringBuffer
for
int
i
next
i
ca
length
i
if
ca
i
sep
ca
i
sep
sbPath
append
ca
i
path
sbPath
toString
else
if
path
length
path
charAt
sep
int
nextsep
path
indexOf
sep
nextsep
path
indexOf
sep
nextsep
root
nextsep
path
substring
nextsep
path
path
path
substring
root
length
else
root
File
separator
path
path
substring
return
new
String
root
path
public
String
toVMSPath
File
f
String
osPath
String
path
normalize
f
getAbsolutePath
getPath
String
name
f
getName
boolean
isAbsolute
path
charAt
File
separatorChar
boolean
isDirectory
f
isDirectory
name
regionMatches
name
length
String
device
StringBuffer
directory
String
file
int
index
if
isAbsolute
index
path
indexOf
File
separatorChar
if
index
return
path
substring
else
device
path
substring
index
if
isDirectory
directory
new
StringBuffer
path
substring
index
replace
File
separatorChar
else
int
dirEnd
path
lastIndexOf
File
separatorChar
path
length
if
dirEnd
dirEnd
index
file
path
substring
index
else
directory
new
StringBuffer
path
substring
index
dirEnd
replace
File
separatorChar
index
dirEnd
if
path
length
index
file
path
substring
index
if
isAbsolute
directory
directory
insert
osPath
device
device
directory
directory
file
file
return
osPath
public
File
createTempFile
String
prefix
String
suffix
File
parentDir
return
createTempFile
prefix
suffix
parentDir
public
File
createTempFile
String
prefix
String
suffix
File
parentDir
boolean
deleteOnExit
File
result
String
parent
parentDir
System
getProperty
parentDir
getPath
DecimalFormat
fmt
new
DecimalFormat
synchronized
rand
do
result
new
File
parent
prefix
fmt
format
Math
abs
rand
nextInt
suffix
while
result
exists
if
deleteOnExit
result
deleteOnExit
return
result
public
boolean
contentEquals
File
f1
File
f2
throws
IOException
return
contentEquals
f1
f2
public
boolean
contentEquals
File
f1
File
f2
boolean
textfile
throws
IOException
return
ResourceUtils
contentEquals
new
FileResource
f1
new
FileResource
f2
textfile
public
File
getParentFile
File
f
return
f
f
getParentFile
public
static
final
String
readFully
Reader
rdr
throws
IOException
return
readFully
rdr
BUF_SIZE
public
static
final
String
readFully
Reader
rdr
int
bufferSize
throws
IOException
if
bufferSize
throw
new
IllegalArgumentException
final
char
buffer
new
char
bufferSize
int
bufferLength
StringBuffer
textBuffer
while
bufferLength
bufferLength
rdr
read
buffer
if
bufferLength
textBuffer
textBuffer
new
StringBuffer
textBuffer
textBuffer
append
new
String
buffer
bufferLength
return
textBuffer
textBuffer
toString
public
boolean
createNewFile
File
f
throws
IOException
return
f
createNewFile
public
boolean
createNewFile
File
f
boolean
mkdirs
throws
IOException
File
parent
f
getParentFile
if
mkdirs
parent
exists
parent
mkdirs
return
f
createNewFile
public
boolean
isSymbolicLink
File
parent
String
name
throws
IOException
if
parent
File
f
new
File
name
parent
f
getParentFile
name
f
getName
File
toTest
new
File
parent
getCanonicalPath
name
return
toTest
getAbsolutePath
equals
toTest
getCanonicalPath
public
String
removeLeadingPath
File
leading
File
path
String
l
normalize
leading
getAbsolutePath
getAbsolutePath
String
p
normalize
path
getAbsolutePath
getAbsolutePath
if
l
equals
p
return
if
l
endsWith
File
separator
l
File
separator
return
p
startsWith
l
p
substring
l
length
p
public
boolean
isLeadingPath
File
leading
File
path
String
l
normalize
leading
getAbsolutePath
getAbsolutePath
String
p
normalize
path
getAbsolutePath
getAbsolutePath
if
l
equals
p
return
if
l
endsWith
File
separator
l
File
separator
return
p
startsWith
l
public
String
toURI
String
path
Class
uriClazz
try
uriClazz
Class
forName
catch
ClassNotFoundException
e
if
uriClazz
try
File
f
new
File
path
getAbsoluteFile
java
lang
reflect
Method
toURIMethod
File
class
getMethod
new
Class
Object
uriObj
toURIMethod
invoke
f
new
Object
java
lang
reflect
Method
toASCIIStringMethod
uriClazz
getMethod
new
Class
return
String
toASCIIStringMethod
invoke
uriObj
new
Object
catch
Exception
e
e
printStackTrace
boolean
isDir
new
File
path
isDirectory
StringBuffer
sb
new
StringBuffer
path
resolveFile
path
getPath
sb
append
if
path
startsWith
File
separator
sb
append
path
path
replace
try
sb
append
Locator
encodeURI
path
catch
UnsupportedEncodingException
exc
throw
new
BuildException
exc
if
isDir
path
endsWith
sb
append
return
sb
toString
public
String
fromURI
String
uri
synchronized
cacheFromUriLock
if
uri
equals
cacheFromUriRequest
return
cacheFromUriResponse
String
path
Locator
fromURI
uri
String
ret
isAbsolutePath
path
normalize
path
getAbsolutePath
path
cacheFromUriRequest
uri
cacheFromUriResponse
ret
return
ret
public
boolean
fileNameEquals
File
f1
File
f2
return
normalize
f1
getAbsolutePath
equals
normalize
f2
getAbsolutePath
public
void
rename
File
from
File
to
throws
IOException
if
to
exists
to
delete
throw
new
IOException
to
from
File
parent
to
getParentFile
if
parent
parent
exists
parent
mkdirs
throw
new
IOException
parent
from
if
from
renameTo
to
copyFile
from
to
if
from
delete
throw
new
IOException
from
public
long
getFileTimestampGranularity
if
onWin9x
return
FAT_FILE_TIMESTAMP_GRANULARITY
else
if
onWindows
return
NTFS_FILE_TIMESTAMP_GRANULARITY
else
if
onDos
return
FAT_FILE_TIMESTAMP_GRANULARITY
return
UNIX_FILE_TIMESTAMP_GRANULARITY
public
boolean
isUpToDate
File
source
File
dest
long
granularity
if
dest
exists
return
long
sourceTime
source
lastModified
long
destTime
dest
lastModified
return
isUpToDate
sourceTime
destTime
granularity
public
boolean
isUpToDate
File
source
File
dest
return
isUpToDate
source
dest
getFileTimestampGranularity
public
boolean
isUpToDate
long
sourceTime
long
destTime
long
granularity
if
destTime
return
return
destTime
sourceTime
granularity
public
boolean
isUpToDate
long
sourceTime
long
destTime
return
isUpToDate
sourceTime
destTime
getFileTimestampGranularity
public
static
void
close
Writer
device
if
device
try
device
close
catch
IOException
ioex
public
static
void
close
Reader
device
if
device
try
device
close
catch
IOException
ioex
public
static
void
close
OutputStream
device
if
device
try
device
close
catch
IOException
ioex
public
static
void
close
InputStream
device
if
device
try
device
close
catch
IOException
ioex
public
static
void
delete
File
file
if
file
file
delete
public
static
String
getRelativePath
File
fromFile
File
toFile
throws
Exception
String
fromPath
fromFile
getCanonicalPath
String
toPath
toFile
getCanonicalPath
String
fromPathStack
getPathStack
fromPath
String
toPathStack
getPathStack
toPath
if
toPathStack
length
fromPathStack
length
if
fromPathStack
equals
toPathStack
return
getPath
Arrays
asList
toPathStack
else
return
getPath
Arrays
asList
toPathStack
int
minLength
Math
min
fromPathStack
length
toPathStack
length
int
same
for
same
minLength
same
if
fromPathStack
same
equals
toPathStack
same
break
List
relativePathStack
new
ArrayList
for
int
i
same
i
fromPathStack
length
i
relativePathStack
add
for
int
i
same
i
toPathStack
length
i
relativePathStack
add
toPathStack
i
return
getPath
relativePathStack
public
static
String
getPathStack
String
path
String
normalizedPath
path
replace
File
separatorChar
Object
tokens
StringUtils
split
normalizedPath
toArray
String
rv
new
String
tokens
length
System
arraycopy
tokens
rv
tokens
length
return
rv
public
static
String
getPath
List
pathStack
return
getPath
pathStack
public
static
String
getPath
final
List
pathStack
final
char
separatorChar
final
StringBuffer
buffer
new
StringBuffer
final
Iterator
iter
pathStack
iterator
if
iter
hasNext
buffer
append
iter
next
while
iter
hasNext
buffer
append
separatorChar
buffer
append
iter
next
return
buffer
toString
public
String
getDefaultEncoding
InputStreamReader
is
new
InputStreamReader
new
InputStream
public
int
read
return
try
return
is
getEncoding
finally
close
is
