package
org
apache
tools
ant
filters
import
java
io
IOException
import
java
io
Reader
import
java
lang
reflect
InvocationTargetException
import
java
lang
reflect
Method
import
org
apache
tools
ant
BuildException
public
final
class
ClassConstants
extends
BaseFilterReader
implements
ChainableReader
private
String
queuedData
private
static
final
String
JAVA_CLASS_HELPER
public
ClassConstants
super
public
ClassConstants
final
Reader
in
super
in
public
int
read
throws
IOException
int
ch
if
queuedData
queuedData
length
queuedData
if
queuedData
ch
queuedData
charAt
queuedData
queuedData
substring
if
queuedData
length
queuedData
else
final
String
clazz
readFully
if
clazz
ch
else
final
byte
bytes
clazz
getBytes
try
final
Class
javaClassHelper
Class
forName
JAVA_CLASS_HELPER
if
javaClassHelper
final
Class
params
byte
class
final
Method
getConstants
javaClassHelper
getMethod
params
final
Object
args
bytes
final
StringBuffer
sb
StringBuffer
getConstants
invoke
args
if
sb
length
queuedData
sb
toString
return
read
catch
NoClassDefFoundError
ex
throw
ex
catch
RuntimeException
ex
throw
ex
catch
InvocationTargetException
ex
Throwable
t
ex
getTargetException
if
t
instanceof
NoClassDefFoundError
throw
NoClassDefFoundError
t
if
t
instanceof
RuntimeException
throw
RuntimeException
t
throw
new
BuildException
t
catch
Exception
ex
throw
new
BuildException
ex
return
ch
public
Reader
chain
final
Reader
rdr
ClassConstants
newFilter
new
ClassConstants
rdr
return
newFilter
