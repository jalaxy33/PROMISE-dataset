package
org
apache
tools
ant
types
import
java
io
File
import
java
util
Iterator
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
DirectoryScanner
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
types
resources
FileResource
import
org
apache
tools
zip
UnixStat
public
abstract
class
ArchiveFileSet
extends
FileSet
private
static
final
int
BASE_OCTAL
public
static
final
int
DEFAULT_DIR_MODE
UnixStat
DIR_FLAG
UnixStat
DEFAULT_DIR_PERM
public
static
final
int
DEFAULT_FILE_MODE
UnixStat
FILE_FLAG
UnixStat
DEFAULT_FILE_PERM
private
Resource
src
private
String
prefix
private
String
fullpath
private
boolean
hasDir
private
int
fileMode
DEFAULT_FILE_MODE
private
int
dirMode
DEFAULT_DIR_MODE
private
boolean
fileModeHasBeenSet
private
boolean
dirModeHasBeenSet
public
ArchiveFileSet
super
protected
ArchiveFileSet
FileSet
fileset
super
fileset
protected
ArchiveFileSet
ArchiveFileSet
fileset
super
fileset
src
fileset
src
prefix
fileset
prefix
fullpath
fileset
fullpath
hasDir
fileset
hasDir
fileMode
fileset
fileMode
dirMode
fileset
dirMode
fileModeHasBeenSet
fileset
fileModeHasBeenSet
dirModeHasBeenSet
fileset
dirModeHasBeenSet
public
void
setDir
File
dir
throws
BuildException
checkAttributesAllowed
if
src
throw
new
BuildException
else
super
setDir
dir
hasDir
public
void
addConfigured
ResourceCollection
a
checkChildrenAllowed
if
a
size
throw
new
BuildException
setSrcResource
Resource
a
iterator
next
public
void
setSrc
File
srcFile
setSrcResource
new
FileResource
srcFile
public
void
setSrcResource
Resource
src
checkArchiveAttributesAllowed
if
hasDir
throw
new
BuildException
this
src
src
public
File
getSrc
Project
p
if
isReference
return
ArchiveFileSet
getRef
p
getSrc
p
return
getSrc
public
File
getSrc
if
src
instanceof
FileResource
return
FileResource
src
getFile
return
public
void
setPrefix
String
prefix
checkArchiveAttributesAllowed
if
prefix
equals
fullpath
equals
throw
new
BuildException
this
prefix
prefix
public
String
getPrefix
Project
p
if
isReference
return
ArchiveFileSet
getRef
p
getPrefix
p
return
prefix
public
void
setFullpath
String
fullpath
checkArchiveAttributesAllowed
if
prefix
equals
fullpath
equals
throw
new
BuildException
this
fullpath
fullpath
public
String
getFullpath
Project
p
if
isReference
return
ArchiveFileSet
getRef
p
getFullpath
p
return
fullpath
protected
abstract
ArchiveScanner
newArchiveScanner
public
DirectoryScanner
getDirectoryScanner
Project
p
if
isReference
return
getRef
p
getDirectoryScanner
p
if
src
return
super
getDirectoryScanner
p
if
src
isExists
throw
new
BuildException
if
src
isDirectory
throw
new
BuildException
ArchiveScanner
as
newArchiveScanner
as
setSrc
src
super
setDir
p
getBaseDir
setupDirectoryScanner
as
p
as
init
return
as
public
Iterator
iterator
if
isReference
return
ResourceCollection
getRef
getProject
iterator
if
src
return
super
iterator
ArchiveScanner
as
ArchiveScanner
getDirectoryScanner
getProject
return
as
getResourceFiles
public
int
size
if
isReference
return
ResourceCollection
getRef
getProject
size
if
src
return
super
size
ArchiveScanner
as
ArchiveScanner
getDirectoryScanner
getProject
return
as
getIncludedFilesCount
public
boolean
isFilesystemOnly
return
src
public
void
setFileMode
String
octalString
checkArchiveAttributesAllowed
integerSetFileMode
Integer
parseInt
octalString
BASE_OCTAL
public
void
integerSetFileMode
int
mode
fileModeHasBeenSet
this
fileMode
UnixStat
FILE_FLAG
mode
public
int
getFileMode
Project
p
if
isReference
return
ArchiveFileSet
getRef
p
getFileMode
p
return
fileMode
public
boolean
hasFileModeBeenSet
if
isReference
return
ArchiveFileSet
getRef
getProject
hasFileModeBeenSet
return
fileModeHasBeenSet
public
void
setDirMode
String
octalString
checkArchiveAttributesAllowed
integerSetDirMode
Integer
parseInt
octalString
BASE_OCTAL
public
void
integerSetDirMode
int
mode
dirModeHasBeenSet
this
dirMode
UnixStat
DIR_FLAG
mode
public
int
getDirMode
Project
p
if
isReference
return
ArchiveFileSet
getRef
p
getDirMode
p
return
dirMode
public
boolean
hasDirModeBeenSet
if
isReference
return
ArchiveFileSet
getRef
getProject
hasDirModeBeenSet
return
dirModeHasBeenSet
protected
void
configureFileSet
ArchiveFileSet
zfs
zfs
setPrefix
prefix
zfs
setFullpath
fullpath
zfs
fileModeHasBeenSet
fileModeHasBeenSet
zfs
fileMode
fileMode
zfs
dirModeHasBeenSet
dirModeHasBeenSet
zfs
dirMode
dirMode
public
Object
clone
if
isReference
return
ArchiveFileSet
getRef
getProject
clone
else
return
super
clone
public
String
toString
if
hasDir
getProject
return
super
toString
else
if
src
return
src
getName
else
return
public
String
getPrefix
return
prefix
public
String
getFullpath
return
fullpath
public
int
getFileMode
return
fileMode
public
int
getDirMode
return
dirMode
private
void
checkArchiveAttributesAllowed
if
getProject
isReference
getRefid
getReferencedObject
getProject
instanceof
ArchiveFileSet
checkAttributesAllowed
