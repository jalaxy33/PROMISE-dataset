package
org
apache
tools
ant
types
import
java
util
Enumeration
import
java
util
Iterator
import
java
util
Map
import
java
util
HashSet
import
java
util
Set
import
java
util
TreeMap
import
java
util
Hashtable
import
java
util
Properties
import
java
util
Vector
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
types
resources
PropertyResource
import
org
apache
tools
ant
util
FileNameMapper
import
org
apache
tools
ant
util
regexp
RegexpMatcher
import
org
apache
tools
ant
util
regexp
RegexpMatcherFactory
public
class
PropertySet
extends
DataType
implements
ResourceCollection
private
boolean
dynamic
private
boolean
negate
private
Set
cachedNames
private
Vector
ptyRefs
new
Vector
private
Vector
setRefs
new
Vector
private
Mapper
mapper
public
static
class
PropertyRef
private
int
count
private
String
name
private
String
regex
private
String
prefix
private
String
builtin
public
void
setName
String
name
assertValid
name
this
name
name
public
void
setRegex
String
regex
assertValid
regex
this
regex
regex
public
void
setPrefix
String
prefix
assertValid
prefix
this
prefix
prefix
public
void
setBuiltin
BuiltinPropertySetName
b
String
pBuiltIn
b
getValue
assertValid
pBuiltIn
this
builtin
pBuiltIn
private
void
assertValid
String
attr
String
value
if
value
value
length
throw
new
BuildException
attr
if
count
throw
new
BuildException
public
String
toString
return
name
regex
prefix
builtin
public
void
appendName
String
name
PropertyRef
r
new
PropertyRef
r
setName
name
addPropertyref
r
public
void
appendRegex
String
regex
PropertyRef
r
new
PropertyRef
r
setRegex
regex
addPropertyref
r
public
void
appendPrefix
String
prefix
PropertyRef
r
new
PropertyRef
r
setPrefix
prefix
addPropertyref
r
public
void
appendBuiltin
BuiltinPropertySetName
b
PropertyRef
r
new
PropertyRef
r
setBuiltin
b
addPropertyref
r
public
void
setMapper
String
type
String
from
String
to
Mapper
m
createMapper
Mapper
MapperType
mapperType
new
Mapper
MapperType
mapperType
setValue
type
m
setType
mapperType
m
setFrom
from
m
setTo
to
public
void
addPropertyref
PropertyRef
ref
assertNotReference
ptyRefs
addElement
ref
public
void
addPropertyset
PropertySet
ref
assertNotReference
setRefs
addElement
ref
public
Mapper
createMapper
assertNotReference
if
mapper
throw
new
BuildException
mapper
new
Mapper
getProject
return
mapper
public
void
add
FileNameMapper
fileNameMapper
createMapper
add
fileNameMapper
public
void
setDynamic
boolean
dynamic
assertNotReference
this
dynamic
dynamic
public
void
setNegate
boolean
negate
assertNotReference
this
negate
negate
public
boolean
getDynamic
return
isReference
getRef
dynamic
dynamic
public
Mapper
getMapper
return
isReference
getRef
mapper
mapper
private
Hashtable
getAllSystemProperties
Hashtable
ret
new
Hashtable
for
Enumeration
e
System
getProperties
propertyNames
e
hasMoreElements
String
name
String
e
nextElement
ret
put
name
System
getProperties
getProperty
name
return
ret
public
Properties
getProperties
if
isReference
return
getRef
getProperties
Set
names
Project
prj
getProject
Hashtable
props
prj
getAllSystemProperties
prj
getProperties
for
Enumeration
e
setRefs
elements
e
hasMoreElements
PropertySet
set
PropertySet
e
nextElement
props
putAll
set
getProperties
if
getDynamic
cachedNames
names
new
HashSet
addPropertyNames
names
props
for
Enumeration
e
setRefs
elements
e
hasMoreElements
PropertySet
set
PropertySet
e
nextElement
names
addAll
set
getProperties
keySet
if
negate
HashSet
complement
new
HashSet
props
keySet
complement
removeAll
names
names
complement
if
getDynamic
cachedNames
names
else
names
cachedNames
FileNameMapper
m
Mapper
myMapper
getMapper
if
myMapper
m
myMapper
getImplementation
Properties
properties
new
Properties
for
Iterator
iter
names
iterator
iter
hasNext
String
name
String
iter
next
String
value
String
props
get
name
if
value
if
m
String
newname
m
mapFileName
name
if
newname
name
newname
properties
setProperty
name
value
return
properties
private
void
addPropertyNames
Set
names
Hashtable
properties
for
Enumeration
e
ptyRefs
elements
e
hasMoreElements
PropertyRef
r
PropertyRef
e
nextElement
if
r
name
if
properties
get
r
name
names
add
r
name
else
if
r
prefix
for
Enumeration
p
properties
keys
p
hasMoreElements
String
name
String
p
nextElement
if
name
startsWith
r
prefix
names
add
name
else
if
r
regex
RegexpMatcherFactory
matchMaker
new
RegexpMatcherFactory
RegexpMatcher
matcher
matchMaker
newRegexpMatcher
matcher
setPattern
r
regex
for
Enumeration
p
properties
keys
p
hasMoreElements
String
name
String
p
nextElement
if
matcher
matches
name
names
add
name
else
if
r
builtin
if
r
builtin
equals
BuiltinPropertySetName
ALL
names
addAll
properties
keySet
else
if
r
builtin
equals
BuiltinPropertySetName
SYSTEM
names
addAll
System
getProperties
keySet
else
if
r
builtin
equals
BuiltinPropertySetName
COMMANDLINE
names
addAll
getProject
getUserProperties
keySet
else
throw
new
BuildException
else
throw
new
BuildException
protected
PropertySet
getRef
return
PropertySet
getCheckedRef
PropertySet
class
public
final
void
setRefid
Reference
r
if
noAttributeSet
throw
tooManyAttributes
super
setRefid
r
protected
final
void
assertNotReference
if
isReference
throw
tooManyAttributes
noAttributeSet
private
boolean
noAttributeSet
public
static
class
BuiltinPropertySetName
extends
EnumeratedAttribute
static
final
String
ALL
static
final
String
SYSTEM
static
final
String
COMMANDLINE
public
String
getValues
return
new
String
ALL
SYSTEM
COMMANDLINE
public
String
toString
StringBuffer
b
new
StringBuffer
TreeMap
sorted
new
TreeMap
getProperties
for
Iterator
i
sorted
entrySet
iterator
i
hasNext
Map
Entry
e
Map
Entry
i
next
if
b
length
b
append
b
append
e
getKey
toString
b
append
b
append
e
getValue
toString
return
b
toString
public
Iterator
iterator
final
Enumeration
e
getProperties
propertyNames
return
new
Iterator
public
boolean
hasNext
return
e
hasMoreElements
public
Object
next
return
new
PropertyResource
getProject
String
e
nextElement
public
void
remove
throw
new
UnsupportedOperationException
public
int
size
return
isReference
getRef
size
getProperties
size
public
boolean
isFilesystemOnly
return
isReference
getRef
isFilesystemOnly
