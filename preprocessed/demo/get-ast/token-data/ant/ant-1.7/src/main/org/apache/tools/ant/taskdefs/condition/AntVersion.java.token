package
org
apache
tools
ant
taskdefs
condition
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
util
DeweyDecimal
public
class
AntVersion
implements
Condition
private
String
atLeast
private
String
exactly
public
boolean
eval
throws
BuildException
validate
DeweyDecimal
actual
getVersion
if
atLeast
return
actual
isGreaterThanOrEqual
new
DeweyDecimal
atLeast
if
exactly
return
actual
isEqual
new
DeweyDecimal
exactly
return
private
void
validate
throws
BuildException
if
atLeast
exactly
throw
new
BuildException
if
atLeast
exactly
throw
new
BuildException
try
if
atLeast
new
DeweyDecimal
atLeast
else
new
DeweyDecimal
exactly
catch
NumberFormatException
e
throw
new
BuildException
private
DeweyDecimal
getVersion
Project
p
new
Project
p
init
char
versionString
p
getProperty
toCharArray
StringBuffer
sb
new
StringBuffer
boolean
foundFirstDigit
for
int
i
i
versionString
length
i
if
Character
isDigit
versionString
i
sb
append
versionString
i
foundFirstDigit
if
versionString
i
foundFirstDigit
sb
append
versionString
i
if
Character
isLetter
versionString
i
foundFirstDigit
break
return
new
DeweyDecimal
sb
toString
public
String
getAtLeast
return
atLeast
public
void
setAtLeast
String
atLeast
this
atLeast
atLeast
public
String
getExactly
return
exactly
public
void
setExactly
String
exactly
this
exactly
exactly
