package
org
apache
tools
ant
util
import
java
io
InputStream
import
java
io
BufferedInputStream
import
java
io
IOException
import
java
util
Iterator
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
ProjectComponent
import
org
apache
tools
ant
types
Resource
import
org
apache
tools
ant
types
ResourceCollection
public
class
ConcatResourceInputStream
extends
InputStream
private
static
final
int
EOF
private
boolean
eof
private
Iterator
iter
private
InputStream
currentStream
private
ProjectComponent
managingPc
private
boolean
ignoreErrors
public
ConcatResourceInputStream
ResourceCollection
rc
iter
rc
iterator
public
void
setIgnoreErrors
boolean
b
ignoreErrors
b
public
boolean
isIgnoreErrors
return
ignoreErrors
public
void
close
throws
IOException
closeCurrent
eof
public
int
read
throws
IOException
if
eof
return
EOF
int
result
readCurrent
if
result
EOF
nextResource
result
readCurrent
return
result
public
void
setManagingComponent
ProjectComponent
pc
this
managingPc
pc
public
void
log
String
message
int
loglevel
if
managingPc
managingPc
log
message
loglevel
else
loglevel
Project
MSG_WARN
System
out
System
err
println
message
private
int
readCurrent
throws
IOException
return
eof
currentStream
EOF
currentStream
read
private
void
nextResource
throws
IOException
closeCurrent
while
iter
hasNext
Resource
r
Resource
iter
next
if
r
isExists
continue
log
r
toLongString
Project
MSG_VERBOSE
try
currentStream
new
BufferedInputStream
r
getInputStream
return
catch
IOException
eyeOhEx
if
ignoreErrors
log
r
Project
MSG_ERR
throw
eyeOhEx
eof
private
void
closeCurrent
FileUtils
close
currentStream
currentStream
