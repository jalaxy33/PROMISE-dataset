package
org
apache
tools
ant
taskdefs
optional
import
java
io
File
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
DirectoryScanner
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
taskdefs
MatchingTask
import
org
apache
tools
ant
taskdefs
optional
native2ascii
Native2AsciiAdapter
import
org
apache
tools
ant
taskdefs
optional
native2ascii
Native2AsciiAdapterFactory
import
org
apache
tools
ant
types
Mapper
import
org
apache
tools
ant
util
FileNameMapper
import
org
apache
tools
ant
util
IdentityMapper
import
org
apache
tools
ant
util
SourceFileScanner
import
org
apache
tools
ant
util
facade
FacadeTaskHelper
import
org
apache
tools
ant
util
facade
ImplementationSpecificArgument
public
class
Native2Ascii
extends
MatchingTask
private
boolean
reverse
private
String
encoding
private
File
srcDir
private
File
destDir
private
String
extension
private
Mapper
mapper
private
FacadeTaskHelper
facade
public
Native2Ascii
facade
new
FacadeTaskHelper
Native2AsciiAdapterFactory
getDefault
public
void
setReverse
boolean
reverse
this
reverse
reverse
public
boolean
getReverse
return
reverse
public
void
setEncoding
String
encoding
this
encoding
encoding
public
String
getEncoding
return
encoding
public
void
setSrc
File
srcDir
this
srcDir
srcDir
public
void
setDest
File
destDir
this
destDir
destDir
public
void
setExt
String
ext
this
extension
ext
public
void
setImplementation
String
impl
if
equals
impl
facade
setImplementation
Native2AsciiAdapterFactory
getDefault
else
facade
setImplementation
impl
public
Mapper
createMapper
throws
BuildException
if
mapper
throw
new
BuildException
getLocation
mapper
new
Mapper
getProject
return
mapper
public
void
add
FileNameMapper
fileNameMapper
createMapper
add
fileNameMapper
public
ImplementationSpecificArgument
createArg
ImplementationSpecificArgument
arg
new
ImplementationSpecificArgument
facade
addImplementationArgument
arg
return
arg
public
void
execute
throws
BuildException
DirectoryScanner
scanner
String
files
if
srcDir
srcDir
getProject
resolveFile
if
destDir
throw
new
BuildException
if
srcDir
equals
destDir
extension
mapper
throw
new
BuildException
FileNameMapper
m
if
mapper
if
extension
m
new
IdentityMapper
else
m
new
ExtMapper
else
m
mapper
getImplementation
scanner
getDirectoryScanner
srcDir
files
scanner
getIncludedFiles
SourceFileScanner
sfs
new
SourceFileScanner
this
files
sfs
restrict
files
srcDir
destDir
m
int
count
files
length
if
count
return
String
message
count
count
log
message
srcDir
destDir
for
int
i
i
files
length
i
convert
files
i
m
mapFileName
files
i
private
void
convert
String
srcName
String
destName
throws
BuildException
File
srcFile
File
destFile
srcFile
new
File
srcDir
srcName
destFile
new
File
destDir
destName
if
srcFile
equals
destFile
throw
new
BuildException
srcFile
String
parentName
destFile
getParent
if
parentName
File
parentFile
new
File
parentName
if
parentFile
exists
parentFile
mkdirs
throw
new
BuildException
parentName
log
srcName
Project
MSG_VERBOSE
Native2AsciiAdapter
ad
Native2AsciiAdapterFactory
getAdapter
facade
getImplementation
this
if
ad
convert
this
srcFile
destFile
throw
new
BuildException
public
String
getCurrentArgs
return
facade
getArgs
private
class
ExtMapper
implements
FileNameMapper
public
void
setFrom
String
s
public
void
setTo
String
s
public
String
mapFileName
String
fileName
int
lastDot
fileName
lastIndexOf
if
lastDot
return
new
String
fileName
substring
lastDot
extension
else
return
new
String
fileName
extension
