package
org
apache
tools
ant
taskdefs
import
java
io
IOException
import
java
io
InputStream
import
java
io
OutputStream
public
class
StreamPumper
implements
Runnable
private
InputStream
is
private
OutputStream
os
private
volatile
boolean
finish
private
volatile
boolean
finished
private
boolean
closeWhenExhausted
private
boolean
autoflush
private
Exception
exception
private
int
bufferSize
private
boolean
started
public
StreamPumper
InputStream
is
OutputStream
os
boolean
closeWhenExhausted
this
is
is
this
os
os
this
closeWhenExhausted
closeWhenExhausted
public
StreamPumper
InputStream
is
OutputStream
os
this
is
os
void
setAutoflush
boolean
autoflush
this
autoflush
autoflush
public
void
run
synchronized
this
started
finished
finish
final
byte
buf
new
byte
bufferSize
int
length
try
while
length
is
read
buf
finish
os
write
buf
length
if
autoflush
os
flush
os
flush
catch
Exception
e
synchronized
this
exception
e
finally
if
closeWhenExhausted
try
os
close
catch
IOException
e
finished
synchronized
this
notifyAll
public
boolean
isFinished
return
finished
public
synchronized
void
waitFor
throws
InterruptedException
while
isFinished
wait
public
synchronized
void
setBufferSize
int
bufferSize
if
started
throw
new
IllegalStateException
this
bufferSize
bufferSize
public
synchronized
int
getBufferSize
return
bufferSize
public
synchronized
Exception
getException
return
exception
synchronized
void
stop
finish
notifyAll
