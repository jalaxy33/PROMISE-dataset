package
org
apache
tools
ant
types
selectors
import
java
io
File
import
java
util
StringTokenizer
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
types
Parameter
public
class
DepthSelector
extends
BaseExtendSelector
public
int
min
public
int
max
public
static
final
String
MIN_KEY
public
static
final
String
MAX_KEY
public
DepthSelector
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
min
buf
append
buf
append
max
buf
append
return
buf
toString
public
void
setMin
int
min
this
min
min
public
void
setMax
int
max
this
max
max
public
void
setParameters
Parameter
parameters
super
setParameters
parameters
if
parameters
for
int
i
i
parameters
length
i
String
paramname
parameters
i
getName
if
MIN_KEY
equalsIgnoreCase
paramname
try
setMin
Integer
parseInt
parameters
i
getValue
catch
NumberFormatException
nfe1
setError
parameters
i
getValue
else
if
MAX_KEY
equalsIgnoreCase
paramname
try
setMax
Integer
parseInt
parameters
i
getValue
catch
NumberFormatException
nfe1
setError
parameters
i
getValue
else
setError
paramname
public
void
verifySettings
if
min
max
setError
if
max
min
max
setError
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
int
depth
String
absBase
basedir
getAbsolutePath
String
absFile
file
getAbsolutePath
StringTokenizer
tokBase
new
StringTokenizer
absBase
File
separator
StringTokenizer
tokFile
new
StringTokenizer
absFile
File
separator
while
tokFile
hasMoreTokens
String
filetoken
tokFile
nextToken
if
tokBase
hasMoreTokens
String
basetoken
tokBase
nextToken
if
basetoken
equals
filetoken
throw
new
BuildException
filename
absBase
else
depth
if
max
depth
max
return
if
tokBase
hasMoreTokens
throw
new
BuildException
filename
absBase
if
min
depth
min
return
return
