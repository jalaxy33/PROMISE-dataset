package
org
apache
tools
ant
types
import
java
io
File
import
java
util
Stack
import
java
util
Vector
import
java
util
Iterator
import
java
util
ArrayList
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
taskdefs
Redirector
public
class
RedirectorElement
extends
DataType
private
boolean
usingInput
private
boolean
usingOutput
private
boolean
usingError
private
Boolean
logError
private
String
outputProperty
private
String
errorProperty
private
String
inputString
private
Boolean
append
private
Boolean
alwaysLog
private
Boolean
createEmptyFiles
private
Mapper
inputMapper
private
Mapper
outputMapper
private
Mapper
errorMapper
private
Vector
inputFilterChains
new
Vector
private
Vector
outputFilterChains
new
Vector
private
Vector
errorFilterChains
new
Vector
private
String
outputEncoding
private
String
errorEncoding
private
String
inputEncoding
private
Boolean
logInputString
public
void
addConfiguredInputMapper
Mapper
inputMapper
if
isReference
throw
noChildrenAllowed
if
this
inputMapper
if
usingInput
throw
new
BuildException
else
throw
new
BuildException
this
inputMapper
inputMapper
public
void
addConfiguredOutputMapper
Mapper
outputMapper
if
isReference
throw
noChildrenAllowed
if
this
outputMapper
if
usingOutput
throw
new
BuildException
else
throw
new
BuildException
this
outputMapper
outputMapper
public
void
addConfiguredErrorMapper
Mapper
errorMapper
if
isReference
throw
noChildrenAllowed
if
this
errorMapper
if
usingError
throw
new
BuildException
else
throw
new
BuildException
this
errorMapper
errorMapper
public
void
setRefid
Reference
r
throws
BuildException
if
usingInput
usingOutput
usingError
inputString
logError
append
createEmptyFiles
inputEncoding
outputEncoding
errorEncoding
outputProperty
errorProperty
logInputString
throw
tooManyAttributes
super
setRefid
r
public
void
setInput
File
input
if
isReference
throw
tooManyAttributes
if
inputString
throw
new
BuildException
usingInput
inputMapper
createMergeMapper
input
public
void
setInputString
String
inputString
if
isReference
throw
tooManyAttributes
if
usingInput
throw
new
BuildException
this
inputString
inputString
public
void
setLogInputString
boolean
logInputString
if
isReference
throw
tooManyAttributes
this
logInputString
logInputString
Boolean
TRUE
Boolean
FALSE
public
void
setOutput
File
out
if
isReference
throw
tooManyAttributes
if
out
throw
new
IllegalArgumentException
usingOutput
outputMapper
createMergeMapper
out
public
void
setOutputEncoding
String
outputEncoding
if
isReference
throw
tooManyAttributes
this
outputEncoding
outputEncoding
public
void
setErrorEncoding
String
errorEncoding
if
isReference
throw
tooManyAttributes
this
errorEncoding
errorEncoding
public
void
setInputEncoding
String
inputEncoding
if
isReference
throw
tooManyAttributes
this
inputEncoding
inputEncoding
public
void
setLogError
boolean
logError
if
isReference
throw
tooManyAttributes
this
logError
logError
Boolean
TRUE
Boolean
FALSE
public
void
setError
File
error
if
isReference
throw
tooManyAttributes
if
error
throw
new
IllegalArgumentException
usingError
errorMapper
createMergeMapper
error
public
void
setOutputProperty
String
outputProperty
if
isReference
throw
tooManyAttributes
this
outputProperty
outputProperty
public
void
setAppend
boolean
append
if
isReference
throw
tooManyAttributes
this
append
append
Boolean
TRUE
Boolean
FALSE
public
void
setAlwaysLog
boolean
alwaysLog
if
isReference
throw
tooManyAttributes
this
alwaysLog
alwaysLog
Boolean
TRUE
Boolean
FALSE
public
void
setCreateEmptyFiles
boolean
createEmptyFiles
if
isReference
throw
tooManyAttributes
this
createEmptyFiles
createEmptyFiles
Boolean
TRUE
Boolean
FALSE
public
void
setErrorProperty
String
errorProperty
if
isReference
throw
tooManyAttributes
this
errorProperty
errorProperty
public
FilterChain
createInputFilterChain
if
isReference
throw
noChildrenAllowed
FilterChain
result
new
FilterChain
result
setProject
getProject
inputFilterChains
add
result
return
result
public
FilterChain
createOutputFilterChain
if
isReference
throw
noChildrenAllowed
FilterChain
result
new
FilterChain
result
setProject
getProject
outputFilterChains
add
result
return
result
public
FilterChain
createErrorFilterChain
if
isReference
throw
noChildrenAllowed
FilterChain
result
new
FilterChain
result
setProject
getProject
errorFilterChains
add
result
return
result
public
void
configure
Redirector
redirector
configure
redirector
public
void
configure
Redirector
redirector
String
sourcefile
if
isReference
getRef
configure
redirector
sourcefile
return
if
alwaysLog
redirector
setAlwaysLog
alwaysLog
booleanValue
if
logError
redirector
setLogError
logError
booleanValue
if
append
redirector
setAppend
append
booleanValue
if
createEmptyFiles
redirector
setCreateEmptyFiles
createEmptyFiles
booleanValue
if
outputProperty
redirector
setOutputProperty
outputProperty
if
errorProperty
redirector
setErrorProperty
errorProperty
if
inputString
redirector
setInputString
inputString
if
logInputString
redirector
setLogInputString
logInputString
booleanValue
if
inputMapper
String
inputTargets
try
inputTargets
inputMapper
getImplementation
mapFileName
sourcefile
catch
NullPointerException
enPeaEx
if
sourcefile
throw
enPeaEx
if
inputTargets
inputTargets
length
redirector
setInput
toFileArray
inputTargets
if
outputMapper
String
outputTargets
try
outputTargets
outputMapper
getImplementation
mapFileName
sourcefile
catch
NullPointerException
enPeaEx
if
sourcefile
throw
enPeaEx
if
outputTargets
outputTargets
length
redirector
setOutput
toFileArray
outputTargets
if
errorMapper
String
errorTargets
try
errorTargets
errorMapper
getImplementation
mapFileName
sourcefile
catch
NullPointerException
enPeaEx
if
sourcefile
throw
enPeaEx
if
errorTargets
errorTargets
length
redirector
setError
toFileArray
errorTargets
if
inputFilterChains
size
redirector
setInputFilterChains
inputFilterChains
if
outputFilterChains
size
redirector
setOutputFilterChains
outputFilterChains
if
errorFilterChains
size
redirector
setErrorFilterChains
errorFilterChains
if
inputEncoding
redirector
setInputEncoding
inputEncoding
if
outputEncoding
redirector
setOutputEncoding
outputEncoding
if
errorEncoding
redirector
setErrorEncoding
errorEncoding
protected
Mapper
createMergeMapper
File
destfile
Mapper
result
new
Mapper
getProject
result
setClassname
org
apache
tools
ant
util
MergingMapper
class
getName
result
setTo
destfile
getAbsolutePath
return
result
protected
File
toFileArray
String
name
if
name
return
ArrayList
list
new
ArrayList
name
length
for
int
i
i
name
length
i
if
name
i
list
add
getProject
resolveFile
name
i
return
File
list
toArray
new
File
list
size
protected
void
dieOnCircularReference
Stack
stk
Project
p
throws
BuildException
if
isChecked
return
if
isReference
super
dieOnCircularReference
stk
p
else
Mapper
m
new
Mapper
inputMapper
outputMapper
errorMapper
for
int
i
i
m
length
i
if
m
i
stk
push
m
i
m
i
dieOnCircularReference
stk
p
stk
pop
Vector
v
new
Vector
inputFilterChains
outputFilterChains
errorFilterChains
for
int
i
i
v
length
i
if
v
i
for
Iterator
fci
v
i
iterator
fci
hasNext
FilterChain
fc
FilterChain
fci
next
stk
push
fc
fc
dieOnCircularReference
stk
p
stk
pop
setChecked
private
RedirectorElement
getRef
return
RedirectorElement
getCheckedRef
