package
org
apache
tools
ant
taskdefs
import
java
io
IOException
import
java
io
InputStream
import
java
io
OutputStream
public
class
StreamPumper
implements
Runnable
private
static
final
int
SIZE
private
InputStream
is
private
OutputStream
os
private
boolean
finished
private
boolean
closeWhenExhausted
public
StreamPumper
InputStream
is
OutputStream
os
boolean
closeWhenExhausted
this
is
is
this
os
os
this
closeWhenExhausted
closeWhenExhausted
public
StreamPumper
InputStream
is
OutputStream
os
this
is
os
public
void
run
synchronized
this
finished
final
byte
buf
new
byte
SIZE
int
length
try
while
length
is
read
buf
os
write
buf
length
catch
Exception
e
finally
if
closeWhenExhausted
try
os
close
catch
IOException
e
synchronized
this
finished
notifyAll
public
synchronized
boolean
isFinished
return
finished
public
synchronized
void
waitFor
throws
InterruptedException
while
isFinished
wait
