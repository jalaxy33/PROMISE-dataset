package
org
apache
tools
ant
public
class
AntTypeDefinition
private
String
name
private
Class
clazz
private
Class
adapterClass
private
Class
adaptToClass
private
String
className
private
ClassLoader
classLoader
public
void
setName
String
name
this
name
name
public
String
getName
return
name
public
void
setClass
Class
clazz
this
clazz
clazz
if
clazz
return
if
classLoader
this
classLoader
clazz
getClassLoader
if
className
this
className
clazz
getName
public
void
setClassName
String
className
this
className
className
public
String
getClassName
return
className
public
void
setAdapterClass
Class
adapterClass
this
adapterClass
adapterClass
public
void
setAdaptToClass
Class
adaptToClass
this
adaptToClass
adaptToClass
public
void
setClassLoader
ClassLoader
classLoader
this
classLoader
classLoader
public
ClassLoader
getClassLoader
return
classLoader
public
Class
getExposedClass
Project
project
if
adaptToClass
Class
z
getTypeClass
project
if
z
return
if
adaptToClass
isAssignableFrom
z
return
z
if
adapterClass
return
adapterClass
return
getTypeClass
project
public
Class
getTypeClass
Project
project
if
clazz
return
clazz
try
if
classLoader
clazz
Class
forName
className
else
clazz
classLoader
loadClass
className
catch
NoClassDefFoundError
ncdfe
project
log
ncdfe
getMessage
name
Project
MSG_DEBUG
catch
ClassNotFoundException
cnfe
project
log
className
name
Project
MSG_DEBUG
return
clazz
public
Object
create
Project
project
return
icreate
project
private
Object
icreate
Project
project
Class
c
getTypeClass
project
if
c
return
Object
o
createAndSet
project
c
if
o
adapterClass
return
o
if
adaptToClass
if
adaptToClass
isAssignableFrom
o
getClass
return
o
TypeAdapter
adapterObject
TypeAdapter
createAndSet
project
adapterClass
if
adapterObject
return
adapterObject
setProxy
o
return
adapterObject
public
void
checkClass
Project
project
if
clazz
clazz
getTypeClass
project
if
clazz
throw
new
BuildException
getName
if
adapterClass
boolean
needToCheck
if
adaptToClass
adaptToClass
isAssignableFrom
clazz
needToCheck
if
needToCheck
TypeAdapter
adapter
TypeAdapter
createAndSet
project
adapterClass
if
adapter
throw
new
BuildException
adapter
checkProxyClass
clazz
private
Object
createAndSet
Project
project
Class
c
try
java
lang
reflect
Constructor
ctor
boolean
noArg
try
ctor
c
getConstructor
new
Class
noArg
catch
NoSuchMethodException
nse
ctor
c
getConstructor
new
Class
Project
class
noArg
Object
o
if
noArg
o
ctor
newInstance
new
Object
else
o
ctor
newInstance
new
Object
project
project
setProjectReference
o
return
o
catch
java
lang
reflect
InvocationTargetException
ex
Throwable
t
ex
getTargetException
throw
new
BuildException
name
t
t
catch
NoClassDefFoundError
ncdfe
String
msg
name
c
ncdfe
getMessage
throw
new
BuildException
msg
ncdfe
catch
Throwable
t
throw
new
BuildException
name
t
t
public
boolean
sameDefinition
AntTypeDefinition
other
Project
project
if
other
return
if
other
getClass
this
getClass
return
if
other
getTypeClass
project
equals
getTypeClass
project
return
if
other
getExposedClass
project
equals
getExposedClass
project
return
if
other
adapterClass
adapterClass
return
if
other
adaptToClass
adaptToClass
return
return
public
boolean
similarDefinition
AntTypeDefinition
other
Project
project
if
other
return
if
getClass
other
getClass
return
if
getClassName
equals
other
getClassName
return
if
extractClassname
adapterClass
equals
extractClassname
other
adapterClass
return
if
extractClassname
adaptToClass
equals
extractClassname
other
adaptToClass
return
ClassLoader
oldLoader
other
getClassLoader
ClassLoader
newLoader
this
getClassLoader
if
oldLoader
newLoader
oldLoader
instanceof
AntClassLoader
newLoader
instanceof
AntClassLoader
AntClassLoader
oldLoader
getClasspath
equals
AntClassLoader
newLoader
getClasspath
return
else
return
private
String
extractClassname
Class
c
if
c
return
else
return
c
getClass
getName
