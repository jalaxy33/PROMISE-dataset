package
org
apache
tools
ant
types
selectors
modifiedselector
import
java
util
Iterator
import
java
util
Vector
import
java
util
Enumeration
import
java
util
Properties
import
java
io
File
import
java
io
BufferedInputStream
import
java
io
FileInputStream
import
java
io
BufferedOutputStream
import
java
io
FileOutputStream
public
class
PropertiesfileCache
implements
Cache
private
File
cachefile
private
Properties
cache
new
Properties
private
boolean
cacheLoaded
private
boolean
cacheDirty
public
PropertiesfileCache
public
PropertiesfileCache
File
cachefile
this
cachefile
cachefile
public
void
setCachefile
File
file
cachefile
file
public
File
getCachefile
return
cachefile
public
boolean
isValid
return
cachefile
public
void
load
if
cachefile
cachefile
isFile
cachefile
canRead
try
BufferedInputStream
bis
new
BufferedInputStream
new
FileInputStream
cachefile
cache
load
bis
bis
close
catch
Exception
e
e
printStackTrace
cacheLoaded
cacheDirty
public
void
save
if
cacheDirty
return
if
cachefile
cache
propertyNames
hasMoreElements
try
BufferedOutputStream
bos
new
BufferedOutputStream
new
FileOutputStream
cachefile
cache
store
bos
bos
flush
bos
close
catch
Exception
e
e
printStackTrace
cacheDirty
public
void
delete
cache
new
Properties
cachefile
delete
cacheLoaded
cacheDirty
public
Object
get
Object
key
if
cacheLoaded
load
try
return
cache
getProperty
String
valueOf
key
catch
ClassCastException
e
return
public
void
put
Object
key
Object
value
cache
put
String
valueOf
key
String
valueOf
value
cacheDirty
public
Iterator
iterator
Vector
v
new
java
util
Vector
Enumeration
en
cache
propertyNames
while
en
hasMoreElements
v
add
en
nextElement
return
v
iterator
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
buf
append
append
cachefile
buf
append
append
cache
size
buf
append
return
buf
toString
