package
org
apache
tools
ant
import
java
lang
reflect
Method
public
class
TaskAdapter
extends
Task
implements
TypeAdapter
private
Object
proxy
public
static
void
checkTaskClass
final
Class
taskClass
final
Project
project
try
final
Method
executeM
taskClass
getMethod
if
Void
TYPE
equals
executeM
getReturnType
final
String
message
executeM
getReturnType
taskClass
project
log
message
Project
MSG_WARN
catch
NoSuchMethodException
e
final
String
message
taskClass
project
log
message
Project
MSG_ERR
throw
new
BuildException
message
public
void
checkProxyClass
Class
proxyClass
checkTaskClass
proxyClass
getProject
public
void
execute
throws
BuildException
Method
setProjectM
try
Class
c
proxy
getClass
setProjectM
c
getMethod
new
Class
Project
class
if
setProjectM
setProjectM
invoke
proxy
new
Object
getProject
catch
NoSuchMethodException
e
catch
Exception
ex
log
proxy
getClass
Project
MSG_ERR
throw
new
BuildException
ex
Method
executeM
try
Class
c
proxy
getClass
executeM
c
getMethod
new
Class
if
executeM
log
proxy
getClass
Project
MSG_ERR
throw
new
BuildException
proxy
getClass
executeM
invoke
proxy
return
catch
java
lang
reflect
InvocationTargetException
ie
log
proxy
getClass
Project
MSG_VERBOSE
Throwable
t
ie
getTargetException
if
t
instanceof
BuildException
throw
BuildException
t
else
throw
new
BuildException
t
catch
Exception
ex
log
proxy
getClass
Project
MSG_VERBOSE
throw
new
BuildException
ex
public
void
setProxy
Object
o
this
proxy
o
public
Object
getProxy
return
proxy
