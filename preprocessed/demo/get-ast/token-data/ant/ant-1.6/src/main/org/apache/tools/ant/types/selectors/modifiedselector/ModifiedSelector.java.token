package
org
apache
tools
ant
types
selectors
modifiedselector
import
java
util
Comparator
import
java
util
Vector
import
java
util
Iterator
import
java
io
File
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
IntrospectionHelper
import
org
apache
tools
ant
types
EnumeratedAttribute
import
org
apache
tools
ant
types
Parameter
import
org
apache
tools
ant
types
selectors
BaseExtendSelector
public
class
ModifiedSelector
extends
BaseExtendSelector
private
Cache
cache
private
Algorithm
algorithm
private
Comparator
comparator
private
boolean
update
private
boolean
selectDirectories
private
boolean
isConfigured
private
AlgorithmName
algoName
private
CacheName
cacheName
private
ComparatorName
compName
private
Vector
configParameter
new
Vector
private
Vector
specialParameter
new
Vector
public
ModifiedSelector
public
void
verifySettings
configure
if
cache
setError
else
if
algorithm
setError
else
if
cache
isValid
setError
else
if
algorithm
isValid
setError
public
void
configure
if
isConfigured
return
isConfigured
org
apache
tools
ant
Project
project
getProject
String
filename
File
cachefile
if
project
cachefile
new
File
project
getBaseDir
filename
else
cachefile
new
File
filename
cache
new
PropertiesfileCache
cachefile
algorithm
new
DigestAlgorithm
comparator
new
EqualComparator
update
selectDirectories
for
Iterator
itConfig
configParameter
iterator
itConfig
hasNext
Parameter
par
Parameter
itConfig
next
if
par
getName
indexOf
specialParameter
add
par
else
useParameter
par
configParameter
new
Vector
String
className
String
pkg
if
algorithm
if
equals
algoName
getValue
className
pkg
else
if
equals
algoName
getValue
className
pkg
if
className
try
algorithm
Algorithm
Class
forName
className
newInstance
catch
Exception
e
e
printStackTrace
if
cache
if
equals
cacheName
getValue
className
pkg
if
className
try
cache
Cache
Class
forName
className
newInstance
catch
Exception
e
e
printStackTrace
if
comparator
if
equals
compName
getValue
className
pkg
else
if
equals
compName
getValue
className
if
className
try
comparator
Comparator
Class
forName
className
newInstance
catch
Exception
e
e
printStackTrace
for
Iterator
itSpecial
specialParameter
iterator
itSpecial
hasNext
Parameter
par
Parameter
itSpecial
next
useParameter
par
specialParameter
new
Vector
public
boolean
isSelected
File
basedir
String
filename
File
file
validate
File
f
new
File
basedir
filename
if
f
isDirectory
return
selectDirectories
String
cachedValue
String
valueOf
cache
get
f
getAbsolutePath
String
newValue
algorithm
getValue
f
boolean
rv
comparator
compare
cachedValue
newValue
if
update
cachedValue
equals
newValue
cache
put
f
getAbsolutePath
newValue
cache
save
return
rv
public
void
setUpdate
boolean
update
this
update
update
public
void
setSeldirs
boolean
seldirs
selectDirectories
seldirs
public
void
addParam
String
key
Object
value
Parameter
par
new
Parameter
par
setName
key
par
setValue
String
valueOf
value
configParameter
add
par
public
void
addParam
Parameter
parameter
configParameter
add
parameter
public
void
setParameters
Parameter
parameters
if
parameters
for
int
i
i
parameters
length
i
configParameter
add
parameters
i
public
void
useParameter
Parameter
parameter
String
key
parameter
getName
String
value
parameter
getValue
if
equals
key
CacheName
cn
new
CacheName
cn
setValue
value
setCache
cn
else
if
equals
key
AlgorithmName
an
new
AlgorithmName
an
setValue
value
setAlgorithm
an
else
if
equals
key
ComparatorName
cn
new
ComparatorName
cn
setValue
value
setComparator
cn
else
if
equals
key
boolean
updateValue
equalsIgnoreCase
value
setUpdate
updateValue
else
if
equals
key
boolean
sdValue
equalsIgnoreCase
value
setSeldirs
sdValue
else
if
key
startsWith
String
name
key
substring
tryToSetAParameter
cache
name
value
else
if
key
startsWith
String
name
key
substring
tryToSetAParameter
algorithm
name
value
else
if
key
startsWith
String
name
key
substring
tryToSetAParameter
comparator
name
value
else
setError
key
protected
void
tryToSetAParameter
Object
obj
String
name
String
value
Project
prj
getProject
getProject
new
Project
IntrospectionHelper
iHelper
IntrospectionHelper
getHelper
prj
obj
getClass
try
iHelper
setAttribute
prj
obj
name
value
catch
org
apache
tools
ant
BuildException
e
public
String
toString
StringBuffer
buf
new
StringBuffer
buf
append
append
update
buf
append
append
selectDirectories
buf
append
append
cache
buf
append
append
algorithm
buf
append
append
comparator
buf
append
return
buf
toString
public
Cache
getCache
return
cache
public
void
setCache
CacheName
name
cacheName
name
public
static
class
CacheName
extends
EnumeratedAttribute
public
String
getValues
return
new
String
public
Algorithm
getAlgorithm
return
algorithm
public
void
setAlgorithm
AlgorithmName
name
algoName
name
public
static
class
AlgorithmName
extends
EnumeratedAttribute
public
String
getValues
return
new
String
public
Comparator
getComparator
return
comparator
public
void
setComparator
ComparatorName
name
compName
name
public
static
class
ComparatorName
extends
EnumeratedAttribute
public
String
getValues
return
new
String
