package
org
apache
tools
ant
taskdefs
import
java
io
ByteArrayOutputStream
import
java
io
IOException
import
java
io
OutputStream
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
Task
public
class
LogOutputStream
extends
OutputStream
private
static
final
int
INTIAL_SIZE
private
static
final
int
CR
private
static
final
int
LF
private
ByteArrayOutputStream
buffer
new
ByteArrayOutputStream
INTIAL_SIZE
private
boolean
skip
private
Task
task
private
int
level
Project
MSG_INFO
public
LogOutputStream
Task
task
int
level
this
task
task
this
level
level
public
void
write
int
cc
throws
IOException
final
byte
c
byte
cc
if
c
c
if
skip
processBuffer
else
buffer
write
cc
skip
c
public
void
flush
processBuffer
protected
void
processBuffer
processLine
buffer
toString
buffer
reset
protected
void
processLine
String
line
processLine
line
level
protected
void
processLine
String
line
int
level
task
log
line
level
public
void
close
throws
IOException
if
buffer
size
processBuffer
super
close
public
int
getMessageLevel
return
level
public
void
write
byte
b
int
off
int
len
throws
IOException
int
offset
off
int
blockStartOffset
offset
int
remaining
len
while
remaining
while
remaining
b
offset
LF
b
offset
CR
offset
remaining
int
blockLength
offset
blockStartOffset
if
blockLength
buffer
write
b
blockStartOffset
blockLength
while
remaining
b
offset
LF
b
offset
CR
write
b
offset
offset
remaining
blockStartOffset
offset
