package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
import
org
apache
tools
tar
import
java
io
public
class
Untar
extends
Task
private
File
dest
private
File
source
private
boolean
overwrite
public
void
execute
throws
BuildException
Touch
touch
Touch
project
createTask
touch
setOwningTarget
target
touch
setTaskName
getTaskName
touch
setLocation
getLocation
File
srcF
source
TarInputStream
tis
try
if
source
throw
new
BuildException
location
if
srcF
exists
throw
new
BuildException
srcF
location
if
dest
throw
new
BuildException
location
File
dir
dest
log
srcF
dir
Project
MSG_INFO
tis
new
TarInputStream
new
FileInputStream
srcF
TarEntry
te
while
te
tis
getNextEntry
try
File
f
new
File
dir
project
translatePath
te
getName
if
overwrite
f
exists
f
lastModified
te
getModTime
getTime
log
f
Project
MSG_DEBUG
continue
log
te
getName
f
Project
MSG_VERBOSE
File
dirF
new
File
f
getParent
dirF
mkdirs
if
te
isDirectory
f
mkdirs
else
byte
buffer
new
byte
int
length
FileOutputStream
fos
new
FileOutputStream
f
while
length
tis
read
buffer
fos
write
buffer
length
fos
close
if
project
getJavaVersion
Project
JAVA_1_1
touch
setFile
f
touch
setMillis
te
getModTime
getTime
touch
touch
catch
FileNotFoundException
ex
log
te
getName
Project
MSG_WARN
catch
IOException
ioe
throw
new
BuildException
srcF
getPath
ioe
location
finally
if
tis
try
tis
close
catch
IOException
e
public
void
setDest
File
d
this
dest
d
public
void
setSrc
File
s
this
source
s
public
void
setOverwrite
boolean
b
overwrite
b
