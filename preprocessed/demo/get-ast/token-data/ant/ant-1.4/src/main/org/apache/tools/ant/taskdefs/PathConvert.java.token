package
org
apache
tools
ant
taskdefs
import
org
apache
tools
ant
BuildException
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
types
import
java
util
import
java
io
File
public
class
PathConvert
extends
Task
public
class
MapEntry
public
void
setFrom
String
from
this
from
from
public
void
setTo
String
to
this
to
to
public
String
apply
String
elem
if
from
to
throw
new
BuildException
String
cmpElem
onWindows
elem
toLowerCase
elem
String
cmpFrom
onWindows
from
toLowerCase
from
if
cmpElem
startsWith
cmpFrom
int
len
from
length
if
len
elem
length
elem
to
else
elem
to
elem
substring
len
return
elem
private
String
from
private
String
to
public
Path
createPath
if
isReference
throw
noChildrenAllowed
if
path
path
new
Path
getProject
return
path
createPath
public
MapEntry
createMap
MapEntry
entry
new
MapEntry
prefixMap
addElement
entry
return
entry
public
void
setTargetos
String
target
targetOS
target
toLowerCase
if
targetOS
equals
target
equals
throw
new
BuildException
targetWindows
targetOS
equals
public
void
setProperty
String
p
property
p
public
void
setRefid
Reference
r
if
path
throw
noChildrenAllowed
refid
r
public
void
setPathSep
String
sep
pathSep
sep
public
void
setDirSep
String
sep
dirSep
sep
public
boolean
isReference
return
refid
public
void
execute
throws
BuildException
if
isReference
path
new
Path
getProject
createPath
Object
obj
refid
getReferencedObject
getProject
if
obj
instanceof
Path
path
setRefid
refid
else
if
obj
instanceof
FileSet
FileSet
fs
FileSet
obj
path
addFileset
fs
else
throw
new
BuildException
validateSetup
String
osname
System
getProperty
toLowerCase
onWindows
osname
indexOf
char
fromDirSep
onWindows
char
toDirSep
dirSep
charAt
StringBuffer
rslt
new
StringBuffer
String
elems
path
list
for
int
i
i
elems
length
i
String
elem
elems
i
elem
mapElement
elem
elem
elem
replace
fromDirSep
toDirSep
if
i
rslt
append
pathSep
rslt
append
elem
String
value
rslt
toString
log
property
value
Project
MSG_VERBOSE
getProject
setProperty
property
value
private
String
mapElement
String
elem
int
size
prefixMap
size
if
size
for
int
i
i
size
i
MapEntry
entry
MapEntry
prefixMap
elementAt
i
String
newElem
entry
apply
elem
if
newElem
elem
elem
newElem
break
return
elem
private
void
validateSetup
throws
BuildException
if
path
throw
new
BuildException
if
property
throw
new
BuildException
if
targetOS
pathSep
dirSep
throw
new
BuildException
String
dsep
File
separator
String
psep
File
pathSeparator
if
targetOS
psep
targetWindows
dsep
targetWindows
if
pathSep
psep
pathSep
if
dirSep
dsep
dirSep
pathSep
psep
dirSep
dsep
private
BuildException
noChildrenAllowed
return
new
BuildException
private
Path
path
private
Reference
refid
private
String
targetOS
private
boolean
targetWindows
private
boolean
onWindows
private
String
property
private
Vector
prefixMap
new
Vector
private
String
pathSep
private
String
dirSep
