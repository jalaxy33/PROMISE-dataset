package
org
apache
tools
ant
taskdefs
import
java
io
import
java
util
import
org
apache
tools
mail
MailMessage
import
org
apache
tools
ant
Project
import
org
apache
tools
ant
Task
import
org
apache
tools
ant
BuildException
public
class
SendEmail
extends
Task
private
String
from
private
String
mailhost
private
String
message
private
String
toList
private
String
subject
private
Vector
files
new
Vector
public
SendEmail
public
void
setToList
String
toList
this
toList
toList
public
void
setFrom
String
from
this
from
from
public
void
setMailhost
String
mailhost
this
mailhost
mailhost
public
void
setMessage
String
message
this
message
message
public
void
setSubject
String
subject
this
subject
subject
public
void
setFiles
String
filenames
StringTokenizer
t
new
StringTokenizer
filenames
while
t
hasMoreTokens
files
addElement
project
resolveFile
t
nextToken
public
void
execute
try
MailMessage
mailMessage
new
MailMessage
mailhost
if
from
mailMessage
from
from
else
throw
new
BuildException
if
toList
StringTokenizer
t
new
StringTokenizer
toList
while
t
hasMoreTokens
mailMessage
to
t
nextToken
else
throw
new
BuildException
if
subject
mailMessage
setSubject
subject
if
files
isEmpty
PrintStream
out
mailMessage
getPrintStream
for
Enumeration
e
files
elements
e
hasMoreElements
File
file
File
e
nextElement
if
file
exists
file
canRead
int
bufsize
int
length
byte
buf
new
byte
bufsize
BufferedInputStream
in
try
in
new
BufferedInputStream
new
FileInputStream
file
bufsize
while
length
in
read
buf
bufsize
out
write
buf
length
finally
if
in
in
close
else
throw
new
BuildException
file
getName
else
if
message
PrintStream
out
mailMessage
getPrintStream
out
print
message
else
throw
new
BuildException
log
mailMessage
sendAndClose
catch
IOException
ioe
throw
new
BuildException
ioe
getMessage
