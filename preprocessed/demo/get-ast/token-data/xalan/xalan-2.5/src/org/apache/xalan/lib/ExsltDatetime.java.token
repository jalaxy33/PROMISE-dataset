package
org
apache
xalan
lib
import
java
text
ParseException
import
java
text
SimpleDateFormat
import
java
util
Calendar
import
java
util
Date
import
java
util
TimeZone
import
org
apache
xpath
objects
XBoolean
import
org
apache
xpath
objects
XNumber
import
org
apache
xpath
objects
XObject
public
class
ExsltDatetime
static
final
String
dt
static
final
String
d
static
final
String
gym
static
final
String
gy
static
final
String
gmd
static
final
String
gm
static
final
String
gd
static
final
String
t
static
final
String
EMPTY_STR
public
static
String
dateTime
Calendar
cal
Calendar
getInstance
Date
datetime
cal
getTime
SimpleDateFormat
dateFormat
new
SimpleDateFormat
dt
StringBuffer
buff
new
StringBuffer
dateFormat
format
datetime
int
offset
cal
get
Calendar
ZONE_OFFSET
cal
get
Calendar
DST_OFFSET
if
offset
buff
append
else
int
hrs
offset
int
min
offset
char
posneg
hrs
buff
append
posneg
formatDigits
hrs
formatDigits
min
return
buff
toString
private
static
String
formatDigits
int
q
String
dd
String
valueOf
Math
abs
q
return
dd
length
dd
dd
public
static
String
date
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
leader
edz
String
datetime
edz
String
zone
edz
if
datetime
zone
return
EMPTY_STR
String
formatsIn
dt
d
String
formatOut
d
Date
date
testFormats
datetime
formatsIn
if
date
return
EMPTY_STR
SimpleDateFormat
dateFormat
new
SimpleDateFormat
formatOut
dateFormat
setLenient
String
dateOut
dateFormat
format
date
if
dateOut
length
return
EMPTY_STR
else
return
leader
dateOut
zone
public
static
String
date
String
datetime
dateTime
toString
String
date
datetime
substring
datetime
indexOf
String
zone
datetime
substring
getZoneStart
datetime
return
date
zone
public
static
String
time
String
timeIn
throws
ParseException
String
edz
getEraDatetimeZone
timeIn
String
time
edz
String
zone
edz
if
time
zone
return
EMPTY_STR
String
formatsIn
dt
d
String
formatOut
t
Date
date
testFormats
time
formatsIn
if
date
return
EMPTY_STR
SimpleDateFormat
dateFormat
new
SimpleDateFormat
formatOut
String
out
dateFormat
format
date
return
out
zone
public
static
String
time
String
datetime
dateTime
toString
String
time
datetime
substring
datetime
indexOf
String
zone
datetime
substring
getZoneStart
datetime
return
time
zone
public
static
double
year
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
boolean
ad
edz
length
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
gym
gy
double
yr
getNumber
datetime
formats
Calendar
YEAR
if
ad
yr
Double
NaN
return
yr
else
return
yr
public
static
double
year
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
YEAR
public
static
double
monthInYear
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
gym
gm
gmd
return
getNumber
datetime
formats
Calendar
MONTH
public
static
double
monthInYear
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
MONTH
public
static
double
weekInYear
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
return
getNumber
datetime
formats
Calendar
WEEK_OF_YEAR
public
static
double
weekInYear
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
WEEK_OF_YEAR
public
static
double
dayInYear
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
return
getNumber
datetime
formats
Calendar
DAY_OF_YEAR
public
static
double
dayInYear
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
DAY_OF_YEAR
public
static
double
dayInMonth
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
String
formats
dt
d
gmd
gd
double
day
getNumber
datetime
formats
Calendar
DAY_OF_MONTH
return
day
public
static
double
dayInMonth
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
DAY_OF_MONTH
public
static
double
dayOfWeekInMonth
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
return
getNumber
datetime
formats
Calendar
DAY_OF_WEEK_IN_MONTH
public
static
double
dayOfWeekInMonth
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
DAY_OF_WEEK_IN_MONTH
public
static
double
dayInWeek
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
d
return
getNumber
datetime
formats
Calendar
DAY_OF_WEEK
public
static
double
dayInWeek
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
DAY_OF_WEEK
public
static
double
hourInDay
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
t
return
getNumber
datetime
formats
Calendar
HOUR_OF_DAY
public
static
double
hourInDay
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
HOUR_OF_DAY
public
static
double
minuteInHour
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
t
return
getNumber
datetime
formats
Calendar
MINUTE
public
static
double
minuteInHour
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
MINUTE
public
static
double
secondInMinute
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
Double
NaN
String
formats
dt
t
return
getNumber
datetime
formats
Calendar
SECOND
public
static
double
secondInMinute
Calendar
cal
Calendar
getInstance
return
cal
get
Calendar
SECOND
public
static
XObject
leapYear
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
new
XNumber
Double
NaN
String
formats
dt
d
gym
gy
double
dbl
getNumber
datetime
formats
Calendar
YEAR
if
dbl
Double
NaN
return
new
XNumber
Double
NaN
int
yr
int
dbl
return
new
XBoolean
yr
yr
yr
public
static
boolean
leapYear
Calendar
cal
Calendar
getInstance
int
yr
int
cal
get
Calendar
YEAR
return
yr
yr
yr
public
static
String
monthName
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
EMPTY_STR
String
formatsIn
dt
d
gym
gm
String
formatOut
return
getNameOrAbbrev
datetimeIn
formatsIn
formatOut
public
static
String
monthName
Calendar
cal
Calendar
getInstance
String
format
return
getNameOrAbbrev
format
public
static
String
monthAbbreviation
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
EMPTY_STR
String
formatsIn
dt
d
gym
gm
String
formatOut
return
getNameOrAbbrev
datetimeIn
formatsIn
formatOut
public
static
String
monthAbbreviation
String
format
return
getNameOrAbbrev
format
public
static
String
dayName
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
EMPTY_STR
String
formatsIn
dt
d
String
formatOut
return
getNameOrAbbrev
datetimeIn
formatsIn
formatOut
public
static
String
dayName
String
format
return
getNameOrAbbrev
format
public
static
String
dayAbbreviation
String
datetimeIn
throws
ParseException
String
edz
getEraDatetimeZone
datetimeIn
String
datetime
edz
if
datetime
return
EMPTY_STR
String
formatsIn
dt
d
String
formatOut
return
getNameOrAbbrev
datetimeIn
formatsIn
formatOut
public
static
String
dayAbbreviation
String
format
return
getNameOrAbbrev
format
private
static
String
getEraDatetimeZone
String
in
String
leader
String
datetime
in
String
zone
if
in
charAt
in
startsWith
leader
datetime
in
substring
int
z
getZoneStart
datetime
if
z
zone
datetime
substring
z
datetime
datetime
substring
z
else
if
z
zone
return
new
String
leader
datetime
zone
private
static
int
getZoneStart
String
datetime
if
datetime
indexOf
datetime
length
return
datetime
length
else
if
datetime
length
datetime
charAt
datetime
length
datetime
charAt
datetime
length
datetime
charAt
datetime
length
try
SimpleDateFormat
dateFormat
new
SimpleDateFormat
dateFormat
setLenient
Date
d
dateFormat
parse
datetime
substring
datetime
length
return
datetime
length
catch
ParseException
pe
System
out
println
pe
getErrorOffset
return
return
private
static
Date
testFormats
String
in
String
formats
throws
ParseException
for
int
i
i
formats
length
i
try
SimpleDateFormat
dateFormat
new
SimpleDateFormat
formats
i
dateFormat
setLenient
return
dateFormat
parse
in
catch
ParseException
pe
return
private
static
double
getNumber
String
in
String
formats
int
calField
throws
ParseException
Calendar
cal
Calendar
getInstance
cal
setLenient
Date
date
testFormats
in
formats
if
date
return
Double
NaN
cal
setTime
date
return
cal
get
calField
private
static
String
getNameOrAbbrev
String
in
String
formatsIn
String
formatOut
throws
ParseException
for
int
i
i
formatsIn
length
i
try
SimpleDateFormat
dateFormat
new
SimpleDateFormat
formatsIn
i
dateFormat
setLenient
Date
dt
dateFormat
parse
in
dateFormat
applyPattern
formatOut
return
dateFormat
format
dt
catch
ParseException
pe
return
private
static
String
getNameOrAbbrev
String
format
Calendar
cal
Calendar
getInstance
SimpleDateFormat
dateFormat
new
SimpleDateFormat
format
return
dateFormat
format
cal
getTime
public
static
String
formatDate
String
dateTime
String
pattern
final
String
yearSymbols
final
String
monthSymbols
final
String
daySymbols
TimeZone
timeZone
String
zone
if
dateTime
endsWith
dateTime
endsWith
timeZone
TimeZone
getTimeZone
dateTime
dateTime
substring
dateTime
length
zone
else
if
dateTime
length
dateTime
charAt
dateTime
length
dateTime
charAt
dateTime
length
dateTime
charAt
dateTime
length
String
offset
dateTime
substring
dateTime
length
if
equals
offset
equals
offset
timeZone
TimeZone
getTimeZone
else
timeZone
TimeZone
getTimeZone
offset
zone
dateTime
dateTime
substring
dateTime
length
offset
else
timeZone
TimeZone
getDefault
zone
String
formats
dt
zone
d
gym
gy
try
SimpleDateFormat
inFormat
new
SimpleDateFormat
t
zone
inFormat
setLenient
Date
d
inFormat
parse
dateTime
SimpleDateFormat
outFormat
new
SimpleDateFormat
strip
yearSymbols
monthSymbols
daySymbols
pattern
outFormat
setTimeZone
timeZone
return
outFormat
format
d
catch
ParseException
pe
for
int
i
i
formats
length
i
try
SimpleDateFormat
inFormat
new
SimpleDateFormat
formats
i
inFormat
setLenient
Date
d
inFormat
parse
dateTime
SimpleDateFormat
outFormat
new
SimpleDateFormat
pattern
outFormat
setTimeZone
timeZone
return
outFormat
format
d
catch
ParseException
pe
try
SimpleDateFormat
inFormat
new
SimpleDateFormat
gmd
inFormat
setLenient
Date
d
inFormat
parse
dateTime
SimpleDateFormat
outFormat
new
SimpleDateFormat
strip
yearSymbols
pattern
outFormat
setTimeZone
timeZone
return
outFormat
format
d
catch
ParseException
pe
try
SimpleDateFormat
inFormat
new
SimpleDateFormat
gm
inFormat
setLenient
Date
d
inFormat
parse
dateTime
SimpleDateFormat
outFormat
new
SimpleDateFormat
strip
yearSymbols
pattern
outFormat
setTimeZone
timeZone
return
outFormat
format
d
catch
ParseException
pe
try
SimpleDateFormat
inFormat
new
SimpleDateFormat
gd
inFormat
setLenient
Date
d
inFormat
parse
dateTime
SimpleDateFormat
outFormat
new
SimpleDateFormat
strip
yearSymbols
monthSymbols
pattern
outFormat
setTimeZone
timeZone
return
outFormat
format
d
catch
ParseException
pe
return
EMPTY_STR
private
static
String
strip
String
symbols
String
pattern
int
quoteSemaphore
int
i
StringBuffer
result
new
StringBuffer
pattern
length
while
i
pattern
length
char
ch
pattern
charAt
i
if
ch
int
endQuote
pattern
indexOf
i
if
endQuote
endQuote
pattern
length
result
append
pattern
substring
i
endQuote
i
endQuote
else
if
symbols
indexOf
ch
i
else
result
append
ch
i
return
result
toString
