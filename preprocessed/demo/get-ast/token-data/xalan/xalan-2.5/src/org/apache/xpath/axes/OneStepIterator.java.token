package
org
apache
xpath
axes
import
org
apache
xml
dtm
DTM
import
org
apache
xml
dtm
DTMAxisIterator
import
org
apache
xml
dtm
DTMFilter
import
org
apache
xml
dtm
DTMIterator
import
org
apache
xpath
Expression
import
org
apache
xpath
XPathContext
import
org
apache
xpath
compiler
Compiler
public
class
OneStepIterator
extends
ChildTestIterator
protected
int
m_axis
protected
DTMAxisIterator
m_iterator
OneStepIterator
Compiler
compiler
int
opPos
int
analysis
throws
javax
xml
transform
TransformerException
super
compiler
opPos
analysis
int
firstStepPos
compiler
getFirstChildPos
opPos
m_axis
WalkerFactory
getAxisFromStep
compiler
firstStepPos
public
OneStepIterator
DTMAxisIterator
iterator
int
axis
throws
javax
xml
transform
TransformerException
super
m_iterator
iterator
m_axis
axis
int
whatToShow
DTMFilter
SHOW_ALL
initNodeTest
whatToShow
public
void
setRoot
int
context
Object
environment
super
setRoot
context
environment
if
m_axis
m_iterator
m_cdtm
getAxisIterator
m_axis
m_iterator
setStartNode
m_context
public
void
detach
if
m_allowDetach
if
m_axis
m_iterator
super
detach
protected
int
getNextNode
return
m_lastFetched
m_iterator
next
public
Object
clone
throws
CloneNotSupportedException
OneStepIterator
clone
OneStepIterator
super
clone
if
m_iterator
clone
m_iterator
m_iterator
cloneIterator
return
clone
public
DTMIterator
cloneWithReset
throws
CloneNotSupportedException
OneStepIterator
clone
OneStepIterator
super
cloneWithReset
clone
m_iterator
m_iterator
return
clone
public
boolean
isReverseAxes
return
m_iterator
isReverse
protected
int
getProximityPosition
int
predicateIndex
if
isReverseAxes
return
super
getProximityPosition
predicateIndex
if
predicateIndex
return
if
m_proximityPositions
predicateIndex
XPathContext
xctxt
getXPathContext
try
OneStepIterator
clone
OneStepIterator
this
clone
int
root
getRoot
xctxt
pushCurrentNode
root
clone
setRoot
root
xctxt
clone
m_predCount
predicateIndex
int
count
int
next
while
DTM
NULL
next
clone
nextNode
count
m_proximityPositions
predicateIndex
count
catch
CloneNotSupportedException
cnse
finally
xctxt
popCurrentNode
return
m_proximityPositions
predicateIndex
public
int
getLength
if
isReverseAxes
return
super
getLength
boolean
isPredicateTest
this
m_execContext
getSubContextList
int
predCount
getPredicateCount
if
m_length
isPredicateTest
m_predicateIndex
return
m_length
int
count
XPathContext
xctxt
getXPathContext
try
OneStepIterator
clone
OneStepIterator
this
cloneWithReset
int
root
getRoot
xctxt
pushCurrentNode
root
clone
setRoot
root
xctxt
clone
m_predCount
m_predicateIndex
int
next
while
DTM
NULL
next
clone
nextNode
count
catch
CloneNotSupportedException
cnse
finally
xctxt
popCurrentNode
if
isPredicateTest
m_predicateIndex
m_length
count
return
count
protected
void
countProximityPosition
int
i
if
isReverseAxes
super
countProximityPosition
i
else
if
i
m_proximityPositions
length
m_proximityPositions
i
public
void
reset
super
reset
if
m_iterator
m_iterator
reset
public
int
getAxis
return
m_axis
public
boolean
deepEquals
Expression
expr
if
super
deepEquals
expr
return
if
m_axis
OneStepIterator
expr
m_axis
return
return
