package
org
apache
xalan
xsltc
compiler
import
java
io
File
import
java
io
FileNotFoundException
import
java
net
MalformedURLException
import
java
net
URL
import
java
util
Enumeration
import
org
apache
xalan
xsltc
compiler
util
ClassGenerator
import
org
apache
xalan
xsltc
compiler
util
ErrorMsg
import
org
apache
xalan
xsltc
compiler
util
MethodGenerator
import
org
apache
xalan
xsltc
compiler
util
Type
import
org
apache
xalan
xsltc
compiler
util
TypeCheckError
import
org
xml
sax
InputSource
import
org
xml
sax
XMLReader
final
class
Include
extends
TopLevelElement
private
Stylesheet
_included
public
Stylesheet
getIncludedStylesheet
return
_included
public
void
parseContents
final
Parser
parser
final
Stylesheet
context
parser
getCurrentStylesheet
String
docToLoad
getAttribute
try
if
context
checkForLoop
docToLoad
final
ErrorMsg
msg
new
ErrorMsg
ErrorMsg
CIRCULAR_INCLUDE_ERR
docToLoad
this
parser
reportError
Constants
FATAL
msg
return
String
currLoadedDoc
context
getSystemId
SourceLoader
loader
context
getSourceLoader
InputSource
input
XMLReader
reader
if
loader
final
XSLTC
xsltc
parser
getXSLTC
input
loader
loadSource
docToLoad
currLoadedDoc
xsltc
reader
xsltc
getXMLReader
else
if
currLoadedDoc
currLoadedDoc
length
File
file
new
File
currLoadedDoc
if
file
exists
currLoadedDoc
file
getCanonicalPath
final
URL
url
new
URL
new
URL
currLoadedDoc
docToLoad
docToLoad
url
toString
input
new
InputSource
docToLoad
else
File
file
new
File
System
getProperty
docToLoad
if
file
exists
docToLoad
file
getCanonicalPath
else
final
ErrorMsg
msg
new
ErrorMsg
ErrorMsg
FILE_ACCESS_ERR
docToLoad
parser
reportError
Constants
FATAL
msg
return
input
new
InputSource
docToLoad
if
input
final
ErrorMsg
msg
new
ErrorMsg
ErrorMsg
FILE_NOT_FOUND_ERR
docToLoad
this
parser
reportError
Constants
FATAL
msg
return
final
SyntaxTreeNode
root
if
reader
root
parser
parse
reader
input
else
root
parser
parse
input
if
root
return
_included
parser
makeStylesheet
root
if
_included
return
_included
setSourceLoader
loader
_included
setSystemId
docToLoad
_included
setParentStylesheet
context
_included
setIncludingStylesheet
context
_included
setTemplateInlining
context
getTemplateInlining
final
int
precedence
context
getImportPrecedence
_included
setImportPrecedence
precedence
parser
setCurrentStylesheet
_included
_included
parseContents
parser
final
Enumeration
elements
_included
elements
final
Stylesheet
topStylesheet
parser
getTopLevelStylesheet
while
elements
hasMoreElements
final
Object
element
elements
nextElement
if
element
instanceof
TopLevelElement
if
element
instanceof
Variable
topStylesheet
addVariable
Variable
element
else
if
element
instanceof
Param
topStylesheet
addParam
Param
element
else
topStylesheet
addElement
TopLevelElement
element
catch
FileNotFoundException
e
context
setSystemId
getAttribute
final
ErrorMsg
msg
new
ErrorMsg
ErrorMsg
FILE_NOT_FOUND_ERR
docToLoad
this
parser
reportError
Constants
FATAL
msg
catch
MalformedURLException
e
context
setSystemId
getAttribute
final
ErrorMsg
msg
new
ErrorMsg
ErrorMsg
FILE_NOT_FOUND_ERR
docToLoad
this
parser
reportError
Constants
FATAL
msg
catch
Exception
e
e
printStackTrace
finally
parser
setCurrentStylesheet
context
public
Type
typeCheck
SymbolTable
stable
throws
TypeCheckError
return
Type
Void
public
void
translate
ClassGenerator
classGen
MethodGenerator
methodGen
