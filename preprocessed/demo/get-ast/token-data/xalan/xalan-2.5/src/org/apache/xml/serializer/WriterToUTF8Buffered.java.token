package
org
apache
xml
serializer
import
java
io
IOException
import
java
io
OutputStream
import
java
io
UnsupportedEncodingException
import
java
io
Writer
public
final
class
WriterToUTF8Buffered
extends
Writer
private
static
final
int
buf_length
private
final
OutputStream
m_os
private
final
byte
buf
private
int
count
public
WriterToUTF8Buffered
OutputStream
out
throws
UnsupportedEncodingException
m_os
out
buf
new
byte
buf_length
count
public
void
write
final
int
c
throws
IOException
if
count
buf_length
flushBuffer
if
c
buf
count
byte
c
else
if
c
buf
count
byte
c
buf
count
byte
c
else
buf
count
byte
c
buf
count
byte
c
buf
count
byte
c
private
final
void
writeDirect
final
char
chars
final
int
start
final
int
length
throws
java
io
IOException
final
OutputStream
os
m_os
final
int
n
length
start
for
int
i
start
i
n
i
final
char
c
chars
i
if
c
os
write
c
else
if
c
os
write
c
os
write
c
else
os
write
c
os
write
c
os
write
c
private
final
void
writeDirect
final
String
s
throws
IOException
final
int
n
s
length
final
OutputStream
os
m_os
for
int
i
i
n
i
final
char
c
s
charAt
i
if
c
os
write
c
else
if
c
os
write
c
os
write
c
else
os
write
c
os
write
c
os
write
c
public
void
write
final
char
chars
final
int
start
final
int
length
throws
java
io
IOException
int
lengthx3
length
length
if
lengthx3
buf_length
flushBuffer
writeDirect
chars
start
length
return
if
lengthx3
buf_length
count
flushBuffer
final
OutputStream
os
m_os
final
int
n
length
start
for
int
i
start
i
n
i
final
char
c
chars
i
if
c
buf
count
byte
c
else
if
c
buf
count
byte
c
buf
count
byte
c
else
buf
count
byte
c
buf
count
byte
c
buf
count
byte
c
public
void
write
final
String
s
throws
IOException
final
int
length
s
length
int
lengthx3
length
length
if
lengthx3
buf_length
flushBuffer
writeDirect
s
return
if
lengthx3
buf_length
count
flushBuffer
final
OutputStream
os
m_os
for
int
i
i
length
i
final
char
c
s
charAt
i
if
c
buf
count
byte
c
else
if
c
buf
count
byte
c
buf
count
byte
c
else
buf
count
byte
c
buf
count
byte
c
buf
count
byte
c
public
void
flushBuffer
throws
IOException
if
count
m_os
write
buf
count
count
public
void
flush
throws
java
io
IOException
flushBuffer
m_os
flush
public
void
close
throws
java
io
IOException
flushBuffer
m_os
close
public
OutputStream
getOutputStream
return
m_os
