package
org
apache
xpath
functions
import
org
apache
xpath
res
XPATHErrorResources
import
org
apache
xml
dtm
DTM
import
org
apache
xml
dtm
DTMIterator
import
java
util
Vector
import
org
apache
xpath
XPathContext
import
org
apache
xpath
XPath
import
org
apache
xpath
objects
XObject
import
org
apache
xpath
objects
XNodeSet
import
org
apache
xpath
axes
PredicatedNodeTest
import
org
apache
xpath
axes
LocPathIterator
import
org
apache
xpath
axes
ContextNodeList
import
org
apache
xpath
axes
SubContextList
public
class
FuncCurrent
extends
Function
public
XObject
execute
XPathContext
xctxt
throws
javax
xml
transform
TransformerException
Object
subContextList
xctxt
getSubContextList
int
currentNode
if
subContextList
subContextList
instanceof
PredicatedNodeTest
LocPathIterator
lpi
xctxt
getCurrentNodeList
currentNode
lpi
getCurrentContextNode
else
if
xctxt
getIteratorRoot
DTM
NULL
currentNode
xctxt
getIteratorRoot
else
DTMIterator
cnl
xctxt
getContextNodeList
if
cnl
currentNode
cnl
getCurrentNode
else
currentNode
DTM
NULL
return
new
XNodeSet
currentNode
xctxt
getDTMManager
public
void
fixupVariables
java
util
Vector
vars
int
globalsSize
