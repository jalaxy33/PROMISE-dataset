package
org
apache
xalan
serialize
import
java
io
Writer
import
java
io
OutputStream
import
java
io
OutputStreamWriter
import
java
io
UnsupportedEncodingException
import
java
io
IOException
import
java
util
Enumeration
import
java
util
Stack
import
java
util
Vector
import
java
util
Hashtable
import
java
util
Properties
import
java
util
BitSet
import
org
xml
sax
import
org
xml
sax
ext
LexicalHandler
import
org
xml
sax
ext
DeclHandler
import
org
w3c
dom
Node
import
org
apache
xalan
serialize
Serializer
import
org
apache
xalan
serialize
DOMSerializer
import
org
apache
xml
utils
QName
import
org
apache
xalan
templates
OutputProperties
import
org
apache
xml
utils
BoolStack
import
org
apache
xml
utils
TreeWalker
import
org
apache
xml
utils
WrappedRuntimeException
import
org
apache
xml
utils
SystemIDResolver
import
org
apache
xalan
res
XSLTErrorResources
import
org
apache
xalan
res
XSLMessages
import
org
apache
xpath
res
XPATHErrorResources
import
javax
xml
transform
Result
import
javax
xml
transform
OutputKeys
public
class
SerializerToXML
implements
ContentHandler
LexicalHandler
DeclHandler
Serializer
DOMSerializer
protected
Writer
m_writer
boolean
m_shouldFlush
protected
String
m_encoding
static
boolean
javaEncodingIsISO
public
boolean
m_shouldNotWriteXMLHeader
public
String
m_version
protected
BoolStack
m_elemStack
new
BoolStack
protected
BoolStack
m_disableOutputEscapingStates
new
BoolStack
protected
BoolStack
m_cdataSectionStates
new
BoolStack
protected
Vector
m_cdataSectionNames
protected
boolean
m_inCData
protected
boolean
isEscapingDisabled
return
m_disableOutputEscapingStates
peekOrFalse
protected
boolean
isCDataSection
return
m_inCData
m_cdataSectionStates
peekOrFalse
protected
final
char
m_lineSep
System
getProperty
toCharArray
protected
final
int
m_lineSepLen
m_lineSep
length
protected
final
void
outputLineSep
throws
org
xml
sax
SAXException
try
m_writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
protected
boolean
m_ispreserve
protected
BoolStack
m_preserves
new
BoolStack
protected
boolean
m_isprevtext
protected
boolean
m_doIndent
protected
int
m_currentIndent
public
int
m_indentAmount
protected
int
level
boolean
m_startNewLine
boolean
m_needToOutputDocTypeDecl
String
m_doctypeSystem
String
m_doctypePublic
boolean
m_standalone
boolean
m_standaloneWasSpecified
String
m_mediatype
protected
boolean
m_inEntityRef
private
boolean
m_inDoctype
protected
static
CharInfo
m_xmlcharInfo
new
CharInfo
CharInfo
XML_ENTITIES_RESOURCE
protected
CharInfo
m_charInfo
private
static
Hashtable
m_charInfos
boolean
m_isUTF8
protected
int
m_maxCharacter
Encodings
getLastPrintable
public
boolean
m_spaceBeforeClose
protected
Properties
m_format
private
static
final
boolean
DEBUG
private
boolean
m_inExternalDTD
public
SerializerToXML
m_charInfo
m_xmlcharInfo
public
void
CopyFrom
SerializerToXML
xmlListener
m_writer
xmlListener
m_writer
m_encoding
xmlListener
m_encoding
javaEncodingIsISO
xmlListener
javaEncodingIsISO
m_shouldNotWriteXMLHeader
xmlListener
m_shouldNotWriteXMLHeader
m_elemStack
xmlListener
m_elemStack
m_ispreserve
xmlListener
m_ispreserve
m_preserves
xmlListener
m_preserves
m_isprevtext
xmlListener
m_isprevtext
m_doIndent
xmlListener
m_doIndent
m_currentIndent
xmlListener
m_currentIndent
m_indentAmount
xmlListener
m_indentAmount
level
xmlListener
level
m_startNewLine
xmlListener
m_startNewLine
m_needToOutputDocTypeDecl
xmlListener
m_needToOutputDocTypeDecl
m_doctypeSystem
xmlListener
m_doctypeSystem
m_doctypePublic
xmlListener
m_doctypePublic
m_standalone
xmlListener
m_standalone
m_mediatype
xmlListener
m_mediatype
m_maxCharacter
xmlListener
m_maxCharacter
m_spaceBeforeClose
xmlListener
m_spaceBeforeClose
m_inCData
xmlListener
m_inCData
m_pos
public
synchronized
void
init
Writer
writer
Properties
format
init
writer
format
private
synchronized
void
init
Writer
writer
Properties
format
boolean
shouldFlush
m_shouldFlush
shouldFlush
m_writer
writer
m_format
format
m_cdataSectionNames
OutputProperties
getQNameProperties
OutputKeys
CDATA_SECTION_ELEMENTS
format
m_indentAmount
OutputProperties
getIntProperty
OutputProperties
S_KEY_INDENT_AMOUNT
format
m_doIndent
OutputProperties
getBooleanProperty
OutputKeys
INDENT
format
m_shouldNotWriteXMLHeader
OutputProperties
getBooleanProperty
OutputKeys
OMIT_XML_DECLARATION
format
m_doctypeSystem
format
getProperty
OutputKeys
DOCTYPE_SYSTEM
m_doctypePublic
format
getProperty
OutputKeys
DOCTYPE_PUBLIC
m_standaloneWasSpecified
format
get
OutputKeys
STANDALONE
m_standalone
OutputProperties
getBooleanProperty
OutputKeys
STANDALONE
format
m_mediatype
format
getProperty
OutputKeys
MEDIA_TYPE
if
m_doctypePublic
if
m_doctypePublic
startsWith
m_spaceBeforeClose
if
m_encoding
m_encoding
Encodings
getMimeEncoding
format
getProperty
OutputKeys
ENCODING
m_isUTF8
m_encoding
equals
Encodings
DEFAULT_MIME_ENCODING
m_maxCharacter
Encodings
getLastPrintable
m_encoding
String
entitiesFileName
String
format
get
OutputProperties
S_KEY_ENTITIES
if
entitiesFileName
try
m_charInfo
if
m_charInfos
synchronized
m_xmlcharInfo
if
m_charInfos
m_charInfos
new
Hashtable
else
m_charInfo
CharInfo
m_charInfos
get
entitiesFileName
if
m_charInfo
try
m_charInfo
new
CharInfo
entitiesFileName
catch
Exception
e
m_charInfo
if
m_charInfo
String
absoluteEntitiesFileName
if
entitiesFileName
indexOf
absoluteEntitiesFileName
SystemIDResolver
getAbsoluteURIFromRelative
entitiesFileName
else
absoluteEntitiesFileName
SystemIDResolver
getAbsoluteURI
entitiesFileName
m_charInfo
new
CharInfo
absoluteEntitiesFileName
m_charInfos
put
entitiesFileName
m_charInfo
catch
javax
xml
transform
TransformerException
te
throw
new
org
apache
xml
utils
WrappedRuntimeException
te
public
synchronized
void
init
OutputStream
output
Properties
format
throws
UnsupportedEncodingException
if
format
OutputProperties
op
new
OutputProperties
Method
XML
format
op
getProperties
m_encoding
Encodings
getMimeEncoding
format
getProperty
OutputKeys
ENCODING
if
m_encoding
equalsIgnoreCase
m_isUTF8
if
output
instanceof
java
io
BufferedOutputStream
init
new
WriterToUTF8
output
format
else
if
output
instanceof
java
io
FileOutputStream
init
new
WriterToUTF8Buffered
output
format
else
init
new
WriterToUTF8
output
format
else
if
m_encoding
equals
m_encoding
equals
m_encoding
equals
init
new
WriterToASCI
output
format
else
Writer
osw
try
osw
Encodings
getWriter
output
m_encoding
catch
UnsupportedEncodingException
uee
System
out
println
m_encoding
Encodings
DEFAULT_MIME_ENCODING
m_encoding
Encodings
DEFAULT_MIME_ENCODING
osw
Encodings
getWriter
output
m_encoding
m_maxCharacter
Encodings
getLastPrintable
m_encoding
init
osw
format
public
void
setDocumentLocator
Locator
locator
void
outputDocTypeDecl
String
name
boolean
closeDecl
throws
org
xml
sax
SAXException
try
final
Writer
writer
m_writer
writer
write
writer
write
name
if
m_doctypePublic
writer
write
writer
write
m_doctypePublic
writer
write
if
m_doctypeSystem
if
m_doctypePublic
writer
write
else
writer
write
writer
write
m_doctypeSystem
if
closeDecl
writer
write
writer
write
m_lineSep
m_lineSepLen
else
writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
void
outputEntityDecl
String
name
String
value
throws
org
xml
sax
SAXException
try
final
Writer
writer
m_writer
writer
write
writer
write
name
writer
write
writer
write
value
writer
write
writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
startDocument
throws
org
xml
sax
SAXException
if
m_inEntityRef
return
m_needToOutputDocTypeDecl
m_startNewLine
if
m_shouldNotWriteXMLHeader
String
encoding
Encodings
getMimeEncoding
m_encoding
String
version
m_version
m_version
String
standalone
if
m_standaloneWasSpecified
standalone
m_standalone
else
standalone
try
final
Writer
writer
m_writer
writer
write
writer
write
version
writer
write
writer
write
encoding
writer
write
writer
write
standalone
writer
write
writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
endDocument
throws
org
xml
sax
SAXException
if
m_doIndent
m_isprevtext
outputLineSep
flushWriter
public
void
startDTD
String
name
String
publicId
String
systemId
throws
org
xml
sax
SAXException
m_doctypeSystem
systemId
m_doctypePublic
publicId
if
m_needToOutputDocTypeDecl
outputDocTypeDecl
name
m_needToOutputDocTypeDecl
m_inDoctype
public
void
endDTD
throws
org
xml
sax
SAXException
try
if
m_inDoctype
m_writer
write
else
m_writer
write
m_writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
startPrefixMapping
String
prefix
String
uri
throws
org
xml
sax
SAXException
public
void
endPrefixMapping
String
prefix
throws
org
xml
sax
SAXException
protected
static
final
boolean
subPartMatch
String
p
String
t
return
p
t
p
p
equals
t
protected
void
pushState
String
namespaceURI
String
localName
Vector
qnames
BoolStack
state
boolean
b
if
qnames
b
if
namespaceURI
namespaceURI
length
namespaceURI
int
nElems
qnames
size
for
int
i
i
nElems
i
QName
q
QName
qnames
elementAt
i
if
q
getLocalName
equals
localName
subPartMatch
namespaceURI
q
getNamespaceURI
b
break
else
b
state
peekOrFalse
state
push
b
public
void
startElement
String
namespaceURI
String
localName
String
name
Attributes
atts
throws
org
xml
sax
SAXException
if
DEBUG
System
out
println
namespaceURI
localName
int
n
atts
getLength
for
int
i
i
n
i
System
out
println
i
atts
getQName
i
atts
getValue
i
if
namespaceURI
new
RuntimeException
localName
printStackTrace
if
m_inEntityRef
return
if
m_needToOutputDocTypeDecl
m_doctypeSystem
outputDocTypeDecl
name
m_needToOutputDocTypeDecl
writeParentTagEnd
pushState
namespaceURI
localName
m_cdataSectionNames
m_cdataSectionStates
m_ispreserve
if
shouldIndent
m_startNewLine
indent
m_currentIndent
m_startNewLine
try
m_writer
write
m_writer
write
name
catch
IOException
ioe
throw
new
SAXException
ioe
int
nAttrs
atts
getLength
for
int
i
i
nAttrs
i
processAttribute
atts
getQName
i
atts
getValue
i
openElementForChildren
m_currentIndent
m_indentAmount
m_isprevtext
protected
void
writeParentTagEnd
throws
org
xml
sax
SAXException
if
m_elemStack
peekOrTrue
try
m_writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
m_isprevtext
m_elemStack
setTop
m_preserves
push
m_ispreserve
protected
void
openElementForChildren
m_elemStack
push
protected
boolean
childNodesWereAdded
return
m_elemStack
isEmpty
m_elemStack
pop
public
void
endElement
String
namespaceURI
String
localName
String
name
throws
org
xml
sax
SAXException
if
m_inEntityRef
return
m_currentIndent
m_indentAmount
boolean
hasChildNodes
childNodesWereAdded
try
final
Writer
writer
m_writer
if
hasChildNodes
if
shouldIndent
indent
m_currentIndent
writer
write
writer
write
writer
write
name
writer
write
else
if
m_spaceBeforeClose
writer
write
else
writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
if
hasChildNodes
m_ispreserve
m_preserves
isEmpty
m_preserves
pop
m_isprevtext
m_cdataSectionStates
pop
protected
void
processAttribute
String
name
String
value
throws
org
xml
sax
SAXException
try
final
Writer
writer
m_writer
writer
write
writer
write
name
writer
write
writeAttrString
value
m_encoding
writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
startNonEscaping
throws
org
xml
sax
SAXException
m_disableOutputEscapingStates
push
public
void
endNonEscaping
throws
org
xml
sax
SAXException
m_disableOutputEscapingStates
pop
public
void
startPreserving
throws
org
xml
sax
SAXException
m_preserves
push
m_ispreserve
public
void
endPreserving
throws
org
xml
sax
SAXException
m_ispreserve
m_preserves
isEmpty
m_preserves
pop
public
void
processingInstruction
String
target
String
data
throws
org
xml
sax
SAXException
if
m_inEntityRef
return
if
target
equals
Result
PI_DISABLE_OUTPUT_ESCAPING
startNonEscaping
else
if
target
equals
Result
PI_ENABLE_OUTPUT_ESCAPING
endNonEscaping
else
try
final
Writer
writer
m_writer
writeParentTagEnd
if
shouldIndent
indent
m_currentIndent
writer
write
writer
write
writer
write
target
if
data
length
Character
isSpaceChar
data
charAt
writer
write
int
indexOfQLT
data
indexOf
if
indexOfQLT
if
indexOfQLT
writer
write
data
substring
indexOfQLT
writer
write
if
indexOfQLT
data
length
writer
write
data
substring
indexOfQLT
else
writer
write
data
writer
write
writer
write
if
m_elemStack
isEmpty
writer
write
m_lineSep
m_lineSepLen
m_startNewLine
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
comment
char
ch
int
start
int
length
throws
org
xml
sax
SAXException
if
m_inEntityRef
return
writeParentTagEnd
if
shouldIndent
indent
m_currentIndent
try
final
Writer
writer
m_writer
writer
write
writer
write
ch
start
length
writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
m_startNewLine
public
void
startCDATA
throws
org
xml
sax
SAXException
m_inCData
public
void
endCDATA
throws
org
xml
sax
SAXException
m_inCData
public
void
cdata
char
ch
int
start
int
length
throws
org
xml
sax
SAXException
try
writeParentTagEnd
m_ispreserve
if
shouldIndent
indent
m_currentIndent
boolean
writeCDataBrackets
length
canConvert
ch
start
if
writeCDataBrackets
m_writer
write
if
isEscapingDisabled
charactersRaw
ch
start
length
else
writeNormalizedChars
ch
start
length
if
writeCDataBrackets
m_writer
write
catch
IOException
ioe
throw
new
org
xml
sax
SAXException
XSLMessages
createXPATHMessage
XPATHErrorResources
ER_OIERROR
ioe
protected
int
m_pos
protected
final
void
accum
char
b
throws
org
xml
sax
SAXException
try
m_writer
write
b
catch
IOException
ioe
throw
new
SAXException
ioe
protected
final
void
accum
char
chars
int
start
int
length
throws
org
xml
sax
SAXException
try
m_writer
write
chars
start
length
catch
IOException
ioe
throw
new
SAXException
ioe
protected
final
void
accum
String
s
throws
org
xml
sax
SAXException
try
m_writer
write
s
catch
IOException
ioe
throw
new
SAXException
ioe
public
final
void
flushWriter
throws
org
xml
sax
SAXException
if
m_writer
try
if
m_writer
instanceof
WriterToUTF8Buffered
if
m_shouldFlush
WriterToUTF8Buffered
m_writer
flush
else
WriterToUTF8Buffered
m_writer
flushBuffer
if
m_writer
instanceof
WriterToUTF8
if
m_shouldFlush
m_writer
flush
else
if
m_writer
instanceof
WriterToASCI
if
m_shouldFlush
m_writer
flush
else
m_writer
flush
catch
IOException
ioe
throw
new
org
xml
sax
SAXException
ioe
public
void
characters
char
chars
int
start
int
length
throws
org
xml
sax
SAXException
if
length
return
if
m_inCData
m_cdataSectionStates
peekOrFalse
cdata
chars
start
length
return
try
if
m_disableOutputEscapingStates
peekOrFalse
charactersRaw
chars
start
length
return
final
Writer
writer
m_writer
if
m_elemStack
peekOrTrue
writer
write
m_isprevtext
m_elemStack
setTop
m_preserves
push
m_ispreserve
int
startClean
start
int
lengthClean
int
end
start
length
boolean
checkWhite
final
int
maxCharacter
m_maxCharacter
final
BitSet
specialsMap
m_charInfo
m_specialsMap
for
int
i
start
i
end
i
char
ch
chars
i
if
checkWhite
ch
ch
ch
ch
ch
m_ispreserve
checkWhite
if
canConvert
ch
specialsMap
get
ch
ch
lengthClean
else
if
lengthClean
writer
write
chars
startClean
lengthClean
lengthClean
if
CharInfo
S_LINEFEED
ch
writer
write
m_lineSep
m_lineSepLen
startClean
i
else
startClean
accumDefaultEscape
ch
i
chars
end
i
startClean
if
lengthClean
writer
write
chars
startClean
lengthClean
catch
IOException
ioe
throw
new
SAXException
ioe
m_isprevtext
public
void
charactersRaw
char
ch
int
start
int
length
throws
org
xml
sax
SAXException
try
if
m_inEntityRef
return
writeParentTagEnd
m_ispreserve
m_writer
write
ch
start
length
catch
IOException
ioe
throw
new
SAXException
ioe
static
final
boolean
isUTF16Surrogate
char
c
return
c
int
getURF16SurrogateValue
char
c
char
ch
int
i
int
end
throws
org
xml
sax
SAXException
int
next
if
i
end
throw
new
org
xml
sax
SAXException
XSLMessages
createXPATHMessage
XPATHErrorResources
ER_INVALID_UTF16_SURROGATE
new
Object
Integer
toHexString
int
c
else
next
ch
i
if
next
next
throw
new
org
xml
sax
SAXException
XSLMessages
createXPATHMessage
XPATHErrorResources
ER_INVALID_UTF16_SURROGATE
new
Object
Integer
toHexString
int
c
Integer
toHexString
next
next
c
next
return
next
protected
int
writeUTF16Surrogate
char
c
char
ch
int
i
int
end
throws
IOException
org
xml
sax
SAXException
int
surrogateValue
getURF16SurrogateValue
c
ch
i
end
i
m_writer
write
m_writer
write
m_writer
write
Integer
toString
surrogateValue
m_writer
write
return
i
void
writeNormalizedChars
char
ch
int
start
int
length
boolean
isCData
throws
IOException
org
xml
sax
SAXException
int
end
start
length
for
int
i
start
i
end
i
char
c
ch
i
if
CharInfo
S_LINEFEED
c
m_writer
write
m_lineSep
m_lineSepLen
else
if
isCData
canConvert
c
if
i
m_writer
write
if
isUTF16Surrogate
c
i
writeUTF16Surrogate
c
ch
i
end
else
m_writer
write
String
intStr
Integer
toString
int
c
m_writer
write
intStr
m_writer
write
if
i
i
end
m_writer
write
else
if
isCData
i
end
c
ch
i
ch
i
m_writer
write
i
else
if
canConvert
c
m_writer
write
c
else
if
isUTF16Surrogate
c
i
writeUTF16Surrogate
c
ch
i
end
else
m_writer
write
String
intStr
Integer
toString
int
c
m_writer
write
intStr
m_writer
write
public
void
ignorableWhitespace
char
ch
int
start
int
length
throws
org
xml
sax
SAXException
if
length
return
characters
ch
start
length
public
void
skippedEntity
String
name
throws
org
xml
sax
SAXException
public
void
startEntity
String
name
throws
org
xml
sax
SAXException
if
name
equals
m_inExternalDTD
m_inEntityRef
public
void
endEntity
String
name
throws
org
xml
sax
SAXException
if
name
equals
m_inExternalDTD
m_inEntityRef
public
void
entityReference
String
name
throws
org
xml
sax
SAXException
writeParentTagEnd
if
shouldIndent
indent
m_currentIndent
try
final
Writer
writer
m_writer
writer
write
writer
write
name
writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
elementDecl
String
name
String
model
throws
SAXException
if
m_inExternalDTD
return
try
final
Writer
writer
m_writer
if
m_inDoctype
writer
write
writer
write
m_lineSep
m_lineSepLen
m_inDoctype
writer
write
writer
write
name
writer
write
writer
write
model
writer
write
writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
private
String
m_elemName
public
void
attributeDecl
String
eName
String
aName
String
type
String
valueDefault
String
value
throws
SAXException
if
m_inExternalDTD
return
try
final
Writer
writer
m_writer
if
m_inDoctype
writer
write
writer
write
m_lineSep
m_lineSepLen
m_inDoctype
writer
write
writer
write
eName
writer
write
writer
write
aName
writer
write
writer
write
type
if
valueDefault
writer
write
writer
write
valueDefault
writer
write
writer
write
m_lineSep
m_lineSepLen
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
internalEntityDecl
String
name
String
value
throws
SAXException
if
m_inExternalDTD
return
try
if
m_inDoctype
m_writer
write
m_writer
write
m_lineSep
m_lineSepLen
m_inDoctype
outputEntityDecl
name
value
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
externalEntityDecl
String
name
String
publicId
String
systemId
throws
SAXException
protected
int
accumDefaultEntity
char
ch
int
i
char
chars
int
len
boolean
escLF
throws
org
xml
sax
SAXException
try
if
escLF
CharInfo
S_LINEFEED
ch
m_writer
write
m_lineSep
m_lineSepLen
else
if
m_charInfo
isSpecial
ch
String
entityRef
m_charInfo
getEntityNameForChar
ch
if
entityRef
final
Writer
writer
m_writer
writer
write
writer
write
entityRef
writer
write
else
return
i
else
return
i
return
i
catch
IOException
ioe
throw
new
SAXException
ioe
protected
int
accumDefaultEscape
char
ch
int
i
char
chars
int
len
boolean
escLF
throws
org
xml
sax
SAXException
int
pos
accumDefaultEntity
ch
i
chars
len
escLF
if
i
pos
pos
try
if
ch
ch
int
next
if
i
len
throw
new
org
xml
sax
SAXException
XSLMessages
createXPATHMessage
XPATHErrorResources
ER_INVALID_UTF16_SURROGATE
new
Object
Integer
toHexString
ch
else
next
chars
i
if
next
next
throw
new
org
xml
sax
SAXException
XSLMessages
createXPATHMessage
XPATHErrorResources
ER_INVALID_UTF16_SURROGATE
new
Object
Integer
toHexString
ch
Integer
toHexString
next
next
ch
next
m_writer
write
m_writer
write
Integer
toString
next
m_writer
write
else
if
canConvert
ch
m_charInfo
isSpecial
ch
m_writer
write
m_writer
write
Integer
toString
ch
m_writer
write
else
m_writer
write
ch
catch
IOException
ioe
throw
new
SAXException
ioe
return
pos
Object
m_charToByteConverter
java
lang
reflect
Method
m_canConvertMeth
boolean
m_triedToGetConverter
public
boolean
canConvert
char
ch
if
ch
if
ch
ch
ch
ch
return
else
return
if
m_charToByteConverter
m_triedToGetConverter
m_triedToGetConverter
try
m_charToByteConverter
Encodings
getCharToByteConverter
m_encoding
if
m_charToByteConverter
Class
argsTypes
new
Class
argsTypes
Character
TYPE
Class
convClass
m_charToByteConverter
getClass
m_canConvertMeth
convClass
getMethod
argsTypes
catch
Exception
e
System
err
println
e
getMessage
if
m_charToByteConverter
try
Object
args
new
Object
args
new
Character
ch
Boolean
bool
Boolean
m_canConvertMeth
invoke
m_charToByteConverter
args
return
bool
booleanValue
Character
isISOControl
ch
catch
java
lang
reflect
InvocationTargetException
ite
System
err
println
catch
java
lang
IllegalAccessException
iae
System
err
println
return
ch
m_maxCharacter
public
void
writeAttrString
String
string
String
encoding
throws
org
xml
sax
SAXException
try
final
char
stringChars
string
toCharArray
final
int
len
stringChars
length
final
Writer
writer
m_writer
for
int
i
i
len
i
char
ch
stringChars
i
if
canConvert
ch
m_charInfo
isSpecial
ch
writer
write
ch
else
if
CharInfo
S_CARRIAGERETURN
ch
i
len
CharInfo
S_LINEFEED
stringChars
i
i
ch
CharInfo
S_LINEFEED
accumDefaultEscape
ch
i
stringChars
len
catch
IOException
ioe
throw
new
SAXException
ioe
protected
boolean
shouldIndent
return
m_doIndent
m_ispreserve
m_isprevtext
public
void
printSpace
int
n
throws
org
xml
sax
SAXException
try
for
int
i
i
n
i
m_writer
write
catch
IOException
ioe
throw
new
SAXException
ioe
public
void
indent
int
n
throws
org
xml
sax
SAXException
if
m_startNewLine
outputLineSep
if
m_doIndent
printSpace
n
public
void
setOutputStream
OutputStream
output
try
init
output
m_format
catch
UnsupportedEncodingException
uee
public
OutputStream
getOutputStream
if
m_writer
instanceof
WriterToUTF8Buffered
return
WriterToUTF8Buffered
m_writer
getOutputStream
if
m_writer
instanceof
WriterToUTF8
return
WriterToUTF8
m_writer
getOutputStream
else
if
m_writer
instanceof
WriterToASCI
return
WriterToASCI
m_writer
getOutputStream
else
return
public
void
setWriter
Writer
writer
m_writer
writer
public
Writer
getWriter
return
m_writer
public
void
setOutputFormat
Properties
format
boolean
shouldFlush
m_shouldFlush
init
m_writer
format
m_shouldFlush
shouldFlush
public
Properties
getOutputFormat
return
m_format
public
ContentHandler
asContentHandler
throws
IOException
return
this
public
DOMSerializer
asDOMSerializer
throws
IOException
return
this
public
boolean
reset
return
public
void
serialize
Node
node
throws
IOException
try
TreeWalker
walker
new
TreeWalker
this
new
org
apache
xpath
DOM2Helper
walker
traverse
node
catch
org
xml
sax
SAXException
se
throw
new
WrappedRuntimeException
se
