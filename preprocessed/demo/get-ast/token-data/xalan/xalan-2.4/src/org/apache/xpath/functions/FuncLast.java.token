package
org
apache
xpath
functions
import
org
apache
xml
dtm
DTM
import
org
apache
xml
dtm
DTMIterator
import
java
util
Vector
import
org
apache
xpath
XPathContext
import
org
apache
xpath
XPath
import
org
apache
xpath
objects
XObject
import
org
apache
xpath
objects
XNumber
import
org
apache
xpath
NodeSetDTM
import
org
apache
xpath
axes
LocPathIterator
import
org
apache
xpath
axes
ContextNodeList
import
org
apache
xpath
axes
SubContextList
import
org
apache
xpath
compiler
Compiler
public
class
FuncLast
extends
Function
private
boolean
m_isTopLevel
public
void
postCompileStep
Compiler
compiler
m_isTopLevel
compiler
getLocationPathDepth
public
int
getCountOfContextNodeList
XPathContext
xctxt
throws
javax
xml
transform
TransformerException
SubContextList
iter
m_isTopLevel
xctxt
getSubContextList
if
iter
return
iter
getLastPos
xctxt
DTMIterator
cnl
xctxt
getContextNodeList
int
count
if
cnl
count
cnl
getLength
else
count
return
count
public
XObject
execute
XPathContext
xctxt
throws
javax
xml
transform
TransformerException
XNumber
xnum
new
XNumber
double
getCountOfContextNodeList
xctxt
return
xnum
public
void
fixupVariables
java
util
Vector
vars
int
globalsSize
