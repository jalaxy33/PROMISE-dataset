package
org
apache
xalan
xsltc
compiler
import
java
util
Vector
import
java
util
Enumeration
import
javax
xml
parsers
import
org
xml
sax
import
org
apache
xalan
xsltc
compiler
util
Type
import
org
apache
xalan
xsltc
compiler
util
ReferenceType
import
org
apache
bcel
generic
import
org
apache
xalan
xsltc
compiler
util
final
class
ApplyTemplates
extends
Instruction
private
Expression
_select
private
Type
_type
private
QName
_modeName
private
String
_functionName
public
void
display
int
indent
indent
indent
Util
println
indent
indent
IndentIncrement
Util
println
_select
toString
if
_modeName
indent
indent
IndentIncrement
Util
println
_modeName
public
boolean
hasWithParams
return
hasContents
public
void
parseContents
Parser
parser
final
String
select
getAttribute
final
String
mode
getAttribute
if
select
length
_select
parser
parseExpression
this
if
mode
length
_modeName
parser
getQNameIgnoreDefaultNs
mode
_functionName
parser
getTopLevelStylesheet
getMode
_modeName
functionName
parseChildren
parser
public
Type
typeCheck
SymbolTable
stable
throws
TypeCheckError
if
_select
_type
_select
typeCheck
stable
if
_type
instanceof
NodeType
_type
instanceof
ReferenceType
_select
new
CastExpr
_select
Type
NodeSet
_type
Type
NodeSet
if
_type
instanceof
NodeSetType
_type
instanceof
ResultTreeType
typeCheckContents
stable
return
Type
Void
throw
new
TypeCheckError
this
else
typeCheckContents
stable
return
Type
Void
public
void
translate
ClassGenerator
classGen
MethodGenerator
methodGen
boolean
setStartNodeCalled
final
Stylesheet
stylesheet
classGen
getStylesheet
final
ConstantPoolGen
cpg
classGen
getConstantPool
final
InstructionList
il
methodGen
getInstructionList
final
int
current
methodGen
getLocalIndex
final
Vector
sortObjects
new
Vector
final
Enumeration
children
elements
while
children
hasMoreElements
final
Object
child
children
nextElement
if
child
instanceof
Sort
sortObjects
addElement
child
if
stylesheet
hasLocalParams
hasContents
il
append
classGen
loadTranslet
final
int
pushFrame
cpg
addMethodref
TRANSLET_CLASS
PUSH_PARAM_FRAME
PUSH_PARAM_FRAME_SIG
il
append
new
INVOKEVIRTUAL
pushFrame
translateContents
classGen
methodGen
il
append
classGen
loadTranslet
if
_type
_type
instanceof
ResultTreeType
if
sortObjects
size
ErrorMsg
err
new
ErrorMsg
ErrorMsg
RESULT_TREE_SORT_ERR
this
getParser
reportError
WARNING
err
_select
translate
classGen
methodGen
_type
translateTo
classGen
methodGen
Type
NodeSet
else
il
append
methodGen
loadDOM
if
sortObjects
size
Sort
translateSortIterator
classGen
methodGen
_select
sortObjects
int
setStartNode
cpg
addInterfaceMethodref
NODE_ITERATOR
SET_START_NODE
NODE_ITERATOR_SIG
il
append
methodGen
loadCurrentNode
il
append
new
INVOKEINTERFACE
setStartNode
setStartNodeCalled
else
if
_select
Mode
compileGetChildren
classGen
methodGen
current
else
_select
translate
classGen
methodGen
if
_select
setStartNodeCalled
_select
startResetIterator
classGen
methodGen
final
String
className
classGen
getStylesheet
getClassName
il
append
methodGen
loadHandler
final
String
applyTemplatesSig
classGen
getApplyTemplatesSig
final
int
applyTemplates
cpg
addMethodref
className
_functionName
applyTemplatesSig
il
append
new
INVOKEVIRTUAL
applyTemplates
if
stylesheet
hasLocalParams
hasContents
il
append
classGen
loadTranslet
final
int
popFrame
cpg
addMethodref
TRANSLET_CLASS
POP_PARAM_FRAME
POP_PARAM_FRAME_SIG
il
append
new
INVOKEVIRTUAL
popFrame
