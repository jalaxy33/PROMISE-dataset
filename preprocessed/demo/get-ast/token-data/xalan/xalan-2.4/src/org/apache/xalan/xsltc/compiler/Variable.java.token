package
org
apache
xalan
xsltc
compiler
import
java
util
Vector
import
org
apache
xalan
xsltc
compiler
util
Type
import
org
apache
bcel
generic
Instruction
import
org
apache
bcel
generic
import
org
apache
bcel
classfile
Field
import
org
apache
xalan
xsltc
compiler
util
import
org
apache
xalan
xsltc
dom
Axis
final
class
Variable
extends
VariableBase
public
int
getIndex
return
_local
_local
getIndex
public
void
parseContents
Parser
parser
super
parseContents
parser
SyntaxTreeNode
parent
getParent
if
parent
instanceof
Stylesheet
_isLocal
Variable
var
parser
getSymbolTable
lookupVariable
_name
if
var
final
int
us
this
getImportPrecedence
final
int
them
var
getImportPrecedence
if
us
them
final
String
name
_name
toString
reportError
this
parser
ErrorMsg
VARIABLE_REDEF_ERR
name
else
if
them
us
_ignore
return
else
var
disable
Stylesheet
parent
addVariable
this
parser
getSymbolTable
addVariable
this
else
_isLocal
public
Type
typeCheck
SymbolTable
stable
throws
TypeCheckError
if
_select
_type
_select
typeCheck
stable
else
if
hasContents
typeCheckContents
stable
_type
Type
ResultTree
else
_type
Type
Reference
return
Type
Void
public
void
initialize
ClassGenerator
classGen
MethodGenerator
methodGen
final
ConstantPoolGen
cpg
classGen
getConstantPool
final
InstructionList
il
methodGen
getInstructionList
if
isLocal
_refs
isEmpty
if
_local
_local
methodGen
addLocalVariable2
_name
getLocalPart
_type
toJCType
il
getEnd
if
_type
instanceof
IntType
_type
instanceof
NodeType
_type
instanceof
BooleanType
il
append
new
ICONST
else
if
_type
instanceof
RealType
il
append
new
DCONST
else
il
append
new
ACONST_NULL
il
append
_type
STORE
_local
getIndex
public
void
translate
ClassGenerator
classGen
MethodGenerator
methodGen
final
ConstantPoolGen
cpg
classGen
getConstantPool
final
InstructionList
il
methodGen
getInstructionList
final
String
name
getVariable
if
_ignore
return
_ignore
if
isLocal
translateValue
classGen
methodGen
if
_refs
isEmpty
il
append
_type
POP
_local
else
if
_local
mapRegister
methodGen
il
append
_type
STORE
_local
getIndex
else
String
signature
_type
toSignature
if
classGen
containsField
name
classGen
addField
new
Field
ACC_PUBLIC
cpg
addUtf8
name
cpg
addUtf8
signature
cpg
getConstantPool
il
append
classGen
loadTranslet
translateValue
classGen
methodGen
il
append
new
PUTFIELD
cpg
addFieldref
classGen
getClassName
name
signature
