package
org
apache
xalan
xsltc
compiler
import
org
apache
xalan
xsltc
compiler
util
Type
import
org
apache
bcel
generic
import
org
apache
xalan
xsltc
compiler
util
import
org
apache
xalan
xsltc
DOM
import
org
apache
xalan
xsltc
dom
Axis
final
class
LastCall
extends
FunctionCall
private
int
_type
public
LastCall
QName
fname
super
fname
public
LastCall
QName
fname
int
type
this
fname
_type
type
public
boolean
hasPositionCall
return
public
boolean
hasLastCall
return
public
void
translate
ClassGenerator
classGen
MethodGenerator
methodGen
final
InstructionList
il
methodGen
getInstructionList
final
ConstantPoolGen
cpg
classGen
getConstantPool
boolean
lastChild
if
getParent
instanceof
Expression
if
getParent
getParent
instanceof
Predicate
Predicate
pred
Predicate
getParent
getParent
_type
pred
getPosType
if
_type
DOM
ELEMENT
_type
DOM
ATTRIBUTE
_type
if
getParent
instanceof
Predicate
_type
Predicate
getParent
getPosType
if
_type
DOM
ELEMENT
_type
DOM
ATTRIBUTE
_type
if
getParent
getParent
instanceof
Step
lastChild
if
methodGen
instanceof
CompareGenerator
il
append
CompareGenerator
methodGen
loadLastNode
else
if
classGen
isExternal
il
append
new
ILOAD
LAST_INDEX
else
if
_type
final
int
last
cpg
addInterfaceMethodref
NODE_ITERATOR
final
int
git
cpg
addInterfaceMethodref
DOM_INTF
NODE_ITERATOR_SIG
final
int
start
cpg
addInterfaceMethodref
NODE_ITERATOR
NODE_ITERATOR_SIG
if
lastChild
il
append
methodGen
loadDOM
il
append
new
PUSH
cpg
Axis
CHILD
il
append
new
PUSH
cpg
DOM
ELEMENT
il
append
new
INVOKEINTERFACE
git
il
append
methodGen
loadCurrentNode
il
append
new
INVOKEINTERFACE
start
else
il
append
methodGen
loadIterator
il
append
new
INVOKEINTERFACE
last
else
final
int
last
cpg
addInterfaceMethodref
DOM_INTF
il
append
methodGen
loadDOM
il
append
new
PUSH
cpg
_type
il
append
methodGen
loadContextNode
il
append
new
INVOKEINTERFACE
last
