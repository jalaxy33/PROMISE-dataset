package
org
apache
xalan
xsltc
trax
import
java
io
File
import
java
io
Reader
import
java
io
InputStream
import
java
io
ByteArrayInputStream
import
java
net
URL
import
java
net
MalformedURLException
import
java
util
Vector
import
java
util
Hashtable
import
java
util
Properties
import
javax
xml
transform
import
javax
xml
transform
sax
import
javax
xml
transform
dom
import
javax
xml
transform
stream
import
javax
xml
parsers
SAXParserFactory
import
org
xml
sax
import
org
w3c
dom
Document
import
org
apache
xalan
xsltc
Translet
import
org
apache
xalan
xsltc
runtime
AbstractTranslet
import
org
apache
xalan
xsltc
compiler
XSLTC
import
org
apache
xalan
xsltc
compiler
SourceLoader
import
org
apache
xalan
xsltc
compiler
CompilerException
import
org
apache
xalan
xsltc
compiler
util
ErrorMsg
public
class
TransformerFactoryImpl
extends
SAXTransformerFactory
implements
SourceLoader
ErrorListener
private
ErrorListener
_errorListener
this
private
URIResolver
_uriResolver
protected
static
String
_defaultTransletName
private
Hashtable
_piParams
private
class
PIParamWrapper
public
String
_media
public
String
_title
public
String
_charset
public
PIParamWrapper
String
media
String
title
String
charset
_media
media
_title
title
_charset
charset
private
boolean
_debug
private
boolean
_disableInlining
private
int
_indentNumber
private
XMLReader
_xmlReader
public
TransformerFactoryImpl
public
void
setErrorListener
ErrorListener
listener
throws
IllegalArgumentException
if
listener
ErrorMsg
err
new
ErrorMsg
ErrorMsg
ERROR_LISTENER_NULL_ERR
throw
new
IllegalArgumentException
err
toString
_errorListener
listener
public
ErrorListener
getErrorListener
return
_errorListener
public
Object
getAttribute
String
name
throws
IllegalArgumentException
if
name
equals
return
_defaultTransletName
ErrorMsg
err
new
ErrorMsg
ErrorMsg
JAXP_INVALID_ATTR_ERR
name
throw
new
IllegalArgumentException
err
toString
public
void
setAttribute
String
name
Object
value
throws
IllegalArgumentException
if
name
equals
value
instanceof
String
_defaultTransletName
String
value
return
else
if
name
equals
if
value
instanceof
Boolean
_debug
Boolean
value
booleanValue
return
else
if
value
instanceof
String
_debug
String
value
equalsIgnoreCase
return
else
if
name
equals
if
value
instanceof
Boolean
_disableInlining
Boolean
value
booleanValue
return
else
if
value
instanceof
String
_disableInlining
String
value
equalsIgnoreCase
return
else
if
name
equals
if
value
instanceof
String
try
_indentNumber
Integer
parseInt
String
value
return
catch
NumberFormatException
e
else
if
value
instanceof
Integer
_indentNumber
Integer
value
intValue
return
final
ErrorMsg
err
new
ErrorMsg
ErrorMsg
JAXP_INVALID_ATTR_ERR
name
throw
new
IllegalArgumentException
err
toString
public
boolean
getFeature
String
name
String
features
DOMSource
FEATURE
DOMResult
FEATURE
SAXSource
FEATURE
SAXResult
FEATURE
StreamSource
FEATURE
StreamResult
FEATURE
for
int
i
i
features
length
i
if
name
equals
features
i
return
return
public
URIResolver
getURIResolver
return
_uriResolver
public
void
setURIResolver
URIResolver
resolver
_uriResolver
resolver
public
Source
getAssociatedStylesheet
Source
source
String
media
String
title
String
charset
throws
TransformerConfigurationException
if
_piParams
_piParams
new
Hashtable
_piParams
put
source
new
PIParamWrapper
media
title
charset
return
source
public
Transformer
newTransformer
throws
TransformerConfigurationException
TransformerImpl
result
new
TransformerImpl
new
Properties
_indentNumber
this
if
_uriResolver
result
setURIResolver
_uriResolver
return
result
public
Transformer
newTransformer
Source
source
throws
TransformerConfigurationException
final
Templates
templates
newTemplates
source
final
Transformer
transformer
templates
newTransformer
if
_uriResolver
transformer
setURIResolver
_uriResolver
return
transformer
private
void
passWarningsToListener
Vector
messages
throws
TransformerException
if
_errorListener
messages
return
final
int
count
messages
size
for
int
pos
pos
count
pos
String
message
messages
elementAt
pos
toString
_errorListener
error
new
TransformerConfigurationException
message
private
void
passErrorsToListener
Vector
messages
try
if
_errorListener
messages
return
final
int
count
messages
size
for
int
pos
pos
count
pos
String
message
messages
elementAt
pos
toString
_errorListener
error
new
TransformerException
message
catch
TransformerException
e
public
Templates
newTemplates
Source
source
throws
TransformerConfigurationException
final
XSLTC
xsltc
new
XSLTC
if
_debug
xsltc
setDebug
if
_disableInlining
xsltc
setTemplateInlining
xsltc
init
if
_uriResolver
xsltc
setSourceLoader
this
if
_piParams
_piParams
get
source
PIParamWrapper
p
PIParamWrapper
_piParams
get
source
if
p
xsltc
setPIParameters
p
_media
p
_title
p
_charset
final
InputSource
input
Util
getInputSource
xsltc
source
byte
bytecodes
xsltc
compile
input
final
String
transletName
xsltc
getClassName
if
_errorListener
this
try
passWarningsToListener
xsltc
getWarnings
catch
TransformerException
e
throw
new
TransformerConfigurationException
e
else
xsltc
printWarnings
if
bytecodes
if
_errorListener
passErrorsToListener
xsltc
getErrors
else
xsltc
printErrors
ErrorMsg
err
new
ErrorMsg
ErrorMsg
JAXP_COMPILE_ERR
throw
new
TransformerConfigurationException
err
toString
return
new
TemplatesImpl
bytecodes
transletName
xsltc
getOutputProperties
_indentNumber
this
public
TemplatesHandler
newTemplatesHandler
throws
TransformerConfigurationException
final
TemplatesHandlerImpl
handler
new
TemplatesHandlerImpl
_indentNumber
this
handler
init
if
_uriResolver
handler
setURIResolver
_uriResolver
return
handler
public
TransformerHandler
newTransformerHandler
throws
TransformerConfigurationException
final
Transformer
transformer
newTransformer
if
_uriResolver
transformer
setURIResolver
_uriResolver
return
new
TransformerHandlerImpl
TransformerImpl
transformer
public
TransformerHandler
newTransformerHandler
Source
src
throws
TransformerConfigurationException
final
Transformer
transformer
newTransformer
src
if
_uriResolver
transformer
setURIResolver
_uriResolver
return
new
TransformerHandlerImpl
TransformerImpl
transformer
public
TransformerHandler
newTransformerHandler
Templates
templates
throws
TransformerConfigurationException
final
Transformer
transformer
templates
newTransformer
final
TransformerImpl
internal
TransformerImpl
transformer
return
new
TransformerHandlerImpl
internal
public
XMLFilter
newXMLFilter
Source
src
throws
TransformerConfigurationException
Templates
templates
newTemplates
src
if
templates
return
return
newXMLFilter
templates
public
XMLFilter
newXMLFilter
Templates
templates
throws
TransformerConfigurationException
try
return
new
org
apache
xalan
xsltc
trax
TrAXFilter
templates
catch
TransformerConfigurationException
e1
if
_errorListener
try
_errorListener
fatalError
e1
return
catch
TransformerException
e2
new
TransformerConfigurationException
e2
throw
e1
public
void
error
TransformerException
e
throws
TransformerException
System
err
println
e
getMessageAndLocation
Throwable
wrapped
e
getException
if
wrapped
System
err
println
wrapped
getMessage
throw
e
public
void
fatalError
TransformerException
e
throws
TransformerException
System
err
println
e
getMessageAndLocation
Throwable
wrapped
e
getException
if
wrapped
System
err
println
wrapped
getMessage
throw
e
public
void
warning
TransformerException
e
throws
TransformerException
System
err
println
e
getMessageAndLocation
Throwable
wrapped
e
getException
if
wrapped
System
err
println
wrapped
getMessage
public
InputSource
loadSource
String
href
String
context
XSLTC
xsltc
try
if
_uriResolver
final
Source
source
_uriResolver
resolve
href
context
if
source
return
Util
getInputSource
xsltc
source
catch
TransformerException
e
return
public
XMLReader
getXMLReader
throws
Exception
if
_xmlReader
final
SAXParserFactory
pfactory
SAXParserFactory
newInstance
pfactory
setNamespaceAware
_xmlReader
pfactory
newSAXParser
getXMLReader
return
_xmlReader
