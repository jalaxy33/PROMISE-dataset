package
org
apache
xalan
serialize
import
java
io
InputStream
import
java
io
Writer
import
java
io
OutputStream
import
java
io
OutputStreamWriter
import
java
io
UnsupportedEncodingException
import
java
net
URL
import
java
util
Enumeration
import
java
util
Properties
public
class
Encodings
extends
Object
static
final
int
m_defaultLastPrintable
static
final
String
ENCODINGS_FILE
private
static
final
Class
NO_CLASSES
new
Class
private
static
final
Object
NO_OBJS
new
Object
public
static
Writer
getWriter
OutputStream
output
String
encoding
throws
UnsupportedEncodingException
for
int
i
i
_encodings
length
i
if
_encodings
i
name
equalsIgnoreCase
encoding
try
return
new
OutputStreamWriter
output
_encodings
i
javaName
catch
java
lang
IllegalArgumentException
iae
catch
UnsupportedEncodingException
usee
try
return
new
OutputStreamWriter
output
encoding
catch
java
lang
IllegalArgumentException
iae
throw
new
UnsupportedEncodingException
encoding
public
static
Object
getCharToByteConverter
String
encoding
Class
charToByteConverterClass
java
lang
reflect
Method
getConverterMethod
try
charToByteConverterClass
Class
forName
Class
argTypes
new
Class
argTypes
String
class
getConverterMethod
charToByteConverterClass
getMethod
argTypes
catch
Exception
e
System
err
println
return
Object
args
new
Object
for
int
i
i
_encodings
length
i
if
_encodings
i
name
equalsIgnoreCase
encoding
try
args
_encodings
i
javaName
Object
converter
getConverterMethod
invoke
args
if
converter
return
converter
catch
Exception
iae
return
public
static
int
getLastPrintable
String
encoding
for
int
i
i
_encodings
length
i
if
_encodings
i
name
equalsIgnoreCase
encoding
_encodings
i
javaName
equalsIgnoreCase
encoding
return
_encodings
i
lastPrintable
return
m_defaultLastPrintable
public
static
int
getLastPrintable
return
m_defaultLastPrintable
public
static
final
String
DEFAULT_MIME_ENCODING
public
static
String
getMimeEncoding
String
encoding
if
encoding
try
encoding
System
getProperty
if
encoding
String
jencoding
encoding
equalsIgnoreCase
encoding
equalsIgnoreCase
encoding
equalsIgnoreCase
encoding
equalsIgnoreCase
DEFAULT_MIME_ENCODING
convertJava2MimeEncoding
encoding
encoding
jencoding
jencoding
DEFAULT_MIME_ENCODING
else
encoding
DEFAULT_MIME_ENCODING
catch
SecurityException
se
encoding
DEFAULT_MIME_ENCODING
else
encoding
convertJava2MimeEncoding
encoding
return
encoding
public
static
String
convertJava2MimeEncoding
String
encoding
for
int
i
i
_encodings
length
i
if
_encodings
i
javaName
equalsIgnoreCase
encoding
return
_encodings
i
name
return
encoding
public
static
String
convertMime2JavaEncoding
String
encoding
for
int
i
i
_encodings
length
i
if
_encodings
i
name
equalsIgnoreCase
encoding
return
_encodings
i
javaName
return
encoding
private
static
EncodingInfo
loadEncodingInfo
URL
url
try
String
urlString
try
urlString
System
getProperty
catch
SecurityException
e
if
urlString
urlString
length
url
new
URL
urlString
if
url
ClassLoader
cl
try
java
lang
reflect
Method
getCCL
Thread
class
getMethod
NO_CLASSES
if
getCCL
cl
ClassLoader
getCCL
invoke
Thread
currentThread
NO_OBJS
catch
Exception
e
if
cl
url
cl
getResource
ENCODINGS_FILE
if
url
url
ClassLoader
getSystemResource
ENCODINGS_FILE
Properties
props
new
Properties
if
url
InputStream
is
url
openStream
props
load
is
is
close
else
int
totalEntries
props
size
EncodingInfo
ret
new
EncodingInfo
totalEntries
Enumeration
keys
props
keys
for
int
i
i
totalEntries
i
String
mimeName
String
keys
nextElement
String
val
props
getProperty
mimeName
int
pos
val
indexOf
String
javaName
int
lastPrintable
if
pos
javaName
val
lastPrintable
else
javaName
val
substring
pos
lastPrintable
Integer
decode
val
substring
pos
trim
intValue
ret
i
new
EncodingInfo
mimeName
javaName
lastPrintable
return
ret
catch
java
net
MalformedURLException
mue
throw
new
org
apache
xml
utils
WrappedRuntimeException
mue
catch
java
io
IOException
ioe
throw
new
org
apache
xml
utils
WrappedRuntimeException
ioe
private
static
final
EncodingInfo
_encodings
loadEncodingInfo
