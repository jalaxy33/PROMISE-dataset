package
org
apache
xalan
templates
import
java
io
Serializable
import
java
util
Enumeration
import
java
util
Vector
import
javax
xml
transform
SourceLocator
import
javax
xml
transform
TransformerException
import
org
apache
xalan
res
XSLMessages
import
org
apache
xalan
res
XSLTErrorResources
import
org
apache
xalan
transformer
TransformerImpl
import
org
apache
xml
serializer
SerializationHandler
import
org
apache
xml
utils
PrefixResolver
import
org
apache
xml
utils
UnImplNode
import
org
apache
xpath
ExpressionNode
import
org
apache
xpath
WhitespaceStrippingElementMatcher
import
org
w3c
dom
DOMException
import
org
w3c
dom
Document
import
org
w3c
dom
Node
import
org
w3c
dom
NodeList
import
org
xml
sax
helpers
NamespaceSupport
public
class
ElemTemplateElement
extends
UnImplNode
implements
PrefixResolver
Serializable
ExpressionNode
WhitespaceStrippingElementMatcher
XSLTVisitable
public
ElemTemplateElement
public
boolean
isCompiledTemplate
return
public
int
getXSLToken
return
Constants
ELEMNAME_UNDEFINED
public
String
getNodeName
return
public
String
getLocalName
return
getNodeName
public
void
runtimeInit
TransformerImpl
transformer
throws
TransformerException
public
void
execute
TransformerImpl
transformer
throws
TransformerException
public
StylesheetComposed
getStylesheetComposed
return
m_parentNode
getStylesheetComposed
public
Stylesheet
getStylesheet
return
m_parentNode
m_parentNode
getStylesheet
public
StylesheetRoot
getStylesheetRoot
return
m_parentNode
getStylesheetRoot
public
void
recompose
StylesheetRoot
root
throws
TransformerException
public
void
compose
StylesheetRoot
sroot
throws
TransformerException
resolvePrefixTables
ElemTemplateElement
t
getFirstChildElem
m_hasTextLitOnly
t
t
getXSLToken
Constants
ELEMNAME_TEXTLITERALRESULT
t
getNextSiblingElem
StylesheetRoot
ComposeState
cstate
sroot
getComposeState
cstate
pushStackMark
public
void
endCompose
StylesheetRoot
sroot
throws
TransformerException
StylesheetRoot
ComposeState
cstate
sroot
getComposeState
cstate
popStackMark
public
void
error
String
msg
Object
args
String
themsg
XSLMessages
createMessage
msg
args
throw
new
RuntimeException
XSLMessages
createMessage
XSLTErrorResources
ER_ELEMTEMPLATEELEM_ERR
new
Object
themsg
public
void
error
String
msg
error
msg
public
Node
appendChild
Node
newChild
throws
DOMException
if
newChild
error
XSLTErrorResources
ER_NULL_CHILD
ElemTemplateElement
elem
ElemTemplateElement
newChild
if
m_firstChild
m_firstChild
elem
else
ElemTemplateElement
last
ElemTemplateElement
getLastChild
last
m_nextSibling
elem
elem
m_parentNode
this
return
newChild
public
ElemTemplateElement
appendChild
ElemTemplateElement
elem
if
elem
error
XSLTErrorResources
ER_NULL_CHILD
if
m_firstChild
m_firstChild
elem
else
ElemTemplateElement
last
getLastChildElem
last
m_nextSibling
elem
elem
setParentElem
this
return
elem
public
boolean
hasChildNodes
return
m_firstChild
public
short
getNodeType
return
org
w3c
dom
Node
ELEMENT_NODE
public
NodeList
getChildNodes
return
this
public
ElemTemplateElement
removeChild
ElemTemplateElement
childETE
if
childETE
childETE
m_parentNode
this
return
if
childETE
m_firstChild
m_firstChild
childETE
m_nextSibling
else
ElemTemplateElement
prev
childETE
getPreviousSiblingElem
prev
m_nextSibling
childETE
m_nextSibling
childETE
m_parentNode
childETE
m_nextSibling
return
childETE
public
Node
replaceChild
Node
newChild
Node
oldChild
throws
DOMException
if
oldChild
oldChild
getParentNode
this
return
ElemTemplateElement
newChildElem
ElemTemplateElement
newChild
ElemTemplateElement
oldChildElem
ElemTemplateElement
oldChild
ElemTemplateElement
prev
ElemTemplateElement
oldChildElem
getPreviousSibling
if
prev
prev
m_nextSibling
newChildElem
if
m_firstChild
oldChildElem
m_firstChild
newChildElem
newChildElem
m_parentNode
this
oldChildElem
m_parentNode
newChildElem
m_nextSibling
oldChildElem
m_nextSibling
oldChildElem
m_nextSibling
return
newChildElem
public
Node
insertBefore
Node
newChild
Node
refChild
throws
DOMException
if
refChild
appendChild
newChild
return
newChild
if
newChild
refChild
return
newChild
Node
node
m_firstChild
Node
prev
boolean
foundit
while
node
if
newChild
node
if
prev
ElemTemplateElement
prev
m_nextSibling
ElemTemplateElement
node
getNextSibling
else
m_firstChild
ElemTemplateElement
node
getNextSibling
node
node
getNextSibling
continue
if
refChild
node
if
prev
ElemTemplateElement
prev
m_nextSibling
ElemTemplateElement
newChild
else
m_firstChild
ElemTemplateElement
newChild
ElemTemplateElement
newChild
m_nextSibling
ElemTemplateElement
refChild
ElemTemplateElement
newChild
setParentElem
this
prev
newChild
node
node
getNextSibling
foundit
continue
prev
node
node
node
getNextSibling
if
foundit
throw
new
DOMException
DOMException
NOT_FOUND_ERR
else
return
newChild
public
ElemTemplateElement
replaceChild
ElemTemplateElement
newChildElem
ElemTemplateElement
oldChildElem
if
oldChildElem
oldChildElem
getParentElem
this
return
ElemTemplateElement
prev
oldChildElem
getPreviousSiblingElem
if
prev
prev
m_nextSibling
newChildElem
if
m_firstChild
oldChildElem
m_firstChild
newChildElem
newChildElem
m_parentNode
this
oldChildElem
m_parentNode
newChildElem
m_nextSibling
oldChildElem
m_nextSibling
oldChildElem
m_nextSibling
return
newChildElem
public
int
getLength
int
count
for
ElemTemplateElement
node
m_firstChild
node
node
node
m_nextSibling
count
return
count
public
Node
item
int
index
ElemTemplateElement
node
m_firstChild
for
int
i
i
index
node
i
node
node
m_nextSibling
return
node
public
Document
getOwnerDocument
return
getStylesheet
public
ElemTemplate
getOwnerXSLTemplate
ElemTemplateElement
el
this
int
type
el
getXSLToken
while
el
type
Constants
ELEMNAME_TEMPLATE
el
el
getParentElem
if
el
type
el
getXSLToken
return
ElemTemplate
el
public
String
getTagName
return
getNodeName
public
boolean
hasTextLitOnly
return
m_hasTextLitOnly
public
String
getBaseIdentifier
return
this
getSystemId
private
int
m_lineNumber
private
int
m_endLineNumber
public
int
getEndLineNumber
return
m_endLineNumber
public
int
getLineNumber
return
m_lineNumber
private
int
m_columnNumber
private
int
m_endColumnNumber
public
int
getEndColumnNumber
return
m_endColumnNumber
public
int
getColumnNumber
return
m_columnNumber
public
String
getPublicId
return
m_parentNode
m_parentNode
getPublicId
public
String
getSystemId
Stylesheet
sheet
getStylesheet
return
sheet
sheet
getHref
public
void
setLocaterInfo
SourceLocator
locator
m_lineNumber
locator
getLineNumber
m_columnNumber
locator
getColumnNumber
public
void
setEndLocaterInfo
SourceLocator
locator
m_endLineNumber
locator
getLineNumber
m_endColumnNumber
locator
getColumnNumber
private
boolean
m_defaultSpace
private
boolean
m_hasTextLitOnly
protected
boolean
m_hasVariableDecl
public
boolean
hasVariableDecl
return
m_hasVariableDecl
public
void
setXmlSpace
int
v
m_defaultSpace
Constants
ATTRVAL_STRIP
v
public
boolean
getXmlSpace
return
m_defaultSpace
private
Vector
m_declaredPrefixes
public
Vector
getDeclaredPrefixes
return
m_declaredPrefixes
public
void
setPrefixes
NamespaceSupport
nsSupport
throws
TransformerException
setPrefixes
nsSupport
public
void
setPrefixes
NamespaceSupport
nsSupport
boolean
excludeXSLDecl
throws
TransformerException
Enumeration
decls
nsSupport
getDeclaredPrefixes
while
decls
hasMoreElements
String
prefix
String
decls
nextElement
if
m_declaredPrefixes
m_declaredPrefixes
new
Vector
String
uri
nsSupport
getURI
prefix
if
excludeXSLDecl
uri
equals
Constants
S_XSLNAMESPACEURL
continue
XMLNSDecl
decl
new
XMLNSDecl
prefix
uri
m_declaredPrefixes
addElement
decl
public
String
getNamespaceForPrefix
String
prefix
org
w3c
dom
Node
context
this
error
XSLTErrorResources
ER_CANT_RESOLVE_NSPREFIX
return
public
String
getNamespaceForPrefix
String
prefix
Vector
nsDecls
m_declaredPrefixes
if
nsDecls
int
n
nsDecls
size
if
prefix
equals
Constants
ATTRVAL_DEFAULT_PREFIX
prefix
for
int
i
i
n
i
XMLNSDecl
decl
XMLNSDecl
nsDecls
elementAt
i
if
prefix
equals
decl
getPrefix
return
decl
getURI
if
m_parentNode
return
m_parentNode
getNamespaceForPrefix
prefix
if
equals
prefix
return
return
Vector
m_prefixTable
public
Vector
getPrefixes
return
m_prefixTable
public
boolean
containsExcludeResultPrefix
String
prefix
String
uri
ElemTemplateElement
parent
this
getParentElem
if
parent
return
parent
containsExcludeResultPrefix
prefix
uri
return
private
boolean
excludeResultNSDecl
String
prefix
String
uri
throws
TransformerException
if
uri
if
uri
equals
Constants
S_XSLNAMESPACEURL
getStylesheet
containsExtensionElementURI
uri
return
if
containsExcludeResultPrefix
prefix
uri
return
return
public
void
resolvePrefixTables
throws
TransformerException
m_prefixTable
if
this
m_declaredPrefixes
StylesheetRoot
stylesheet
this
getStylesheetRoot
int
n
m_declaredPrefixes
size
for
int
i
i
n
i
XMLNSDecl
decl
XMLNSDecl
m_declaredPrefixes
elementAt
i
String
prefix
decl
getPrefix
String
uri
decl
getURI
if
uri
uri
boolean
shouldExclude
excludeResultNSDecl
prefix
uri
if
m_prefixTable
m_prefixTable
new
Vector
NamespaceAlias
nsAlias
stylesheet
getNamespaceAliasComposed
uri
if
nsAlias
decl
new
XMLNSDecl
nsAlias
getStylesheetPrefix
nsAlias
getResultNamespace
shouldExclude
else
decl
new
XMLNSDecl
prefix
uri
shouldExclude
m_prefixTable
addElement
decl
ElemTemplateElement
parent
this
getParentNodeElem
if
parent
Vector
prefixes
parent
m_prefixTable
if
m_prefixTable
needToCheckExclude
this
m_prefixTable
parent
m_prefixTable
else
int
n
prefixes
size
for
int
i
i
n
i
XMLNSDecl
decl
XMLNSDecl
prefixes
elementAt
i
boolean
shouldExclude
excludeResultNSDecl
decl
getPrefix
decl
getURI
if
shouldExclude
decl
getIsExcluded
decl
new
XMLNSDecl
decl
getPrefix
decl
getURI
shouldExclude
addOrReplaceDecls
decl
else
if
m_prefixTable
m_prefixTable
new
Vector
void
addOrReplaceDecls
XMLNSDecl
newDecl
int
n
m_prefixTable
size
for
int
i
n
i
i
XMLNSDecl
decl
XMLNSDecl
m_prefixTable
elementAt
i
if
decl
getPrefix
equals
newDecl
getPrefix
return
m_prefixTable
addElement
newDecl
boolean
needToCheckExclude
return
void
executeNSDecls
TransformerImpl
transformer
throws
TransformerException
executeNSDecls
transformer
void
executeNSDecls
TransformerImpl
transformer
String
ignorePrefix
throws
TransformerException
try
if
m_prefixTable
SerializationHandler
rhandler
transformer
getResultTreeHandler
int
n
m_prefixTable
size
for
int
i
n
i
i
XMLNSDecl
decl
XMLNSDecl
m_prefixTable
elementAt
i
if
decl
getIsExcluded
ignorePrefix
decl
getPrefix
equals
ignorePrefix
rhandler
startPrefixMapping
decl
getPrefix
decl
getURI
catch
org
xml
sax
SAXException
se
throw
new
TransformerException
se
void
unexecuteNSDecls
TransformerImpl
transformer
throws
TransformerException
unexecuteNSDecls
transformer
void
unexecuteNSDecls
TransformerImpl
transformer
String
ignorePrefix
throws
TransformerException
try
if
m_prefixTable
SerializationHandler
rhandler
transformer
getResultTreeHandler
int
n
m_prefixTable
size
for
int
i
i
n
i
XMLNSDecl
decl
XMLNSDecl
m_prefixTable
elementAt
i
if
decl
getIsExcluded
ignorePrefix
decl
getPrefix
equals
ignorePrefix
rhandler
endPrefixMapping
decl
getPrefix
catch
org
xml
sax
SAXException
se
throw
new
TransformerException
se
protected
int
m_docOrderNumber
public
void
setUid
int
i
m_docOrderNumber
i
public
int
getUid
return
m_docOrderNumber
protected
ElemTemplateElement
m_parentNode
public
Node
getParentNode
return
m_parentNode
public
ElemTemplateElement
getParentElem
return
m_parentNode
public
void
setParentElem
ElemTemplateElement
p
m_parentNode
p
ElemTemplateElement
m_nextSibling
public
Node
getNextSibling
return
m_nextSibling
public
Node
getPreviousSibling
Node
walker
getParentNode
prev
if
walker
for
walker
walker
getFirstChild
walker
prev
walker
walker
walker
getNextSibling
if
walker
this
return
prev
return
public
ElemTemplateElement
getPreviousSiblingElem
ElemTemplateElement
walker
getParentNodeElem
ElemTemplateElement
prev
if
walker
for
walker
walker
getFirstChildElem
walker
prev
walker
walker
walker
getNextSiblingElem
if
walker
this
return
prev
return
public
ElemTemplateElement
getNextSiblingElem
return
m_nextSibling
public
ElemTemplateElement
getParentNodeElem
return
m_parentNode
ElemTemplateElement
m_firstChild
public
Node
getFirstChild
return
m_firstChild
public
ElemTemplateElement
getFirstChildElem
return
m_firstChild
public
Node
getLastChild
ElemTemplateElement
lastChild
for
ElemTemplateElement
node
m_firstChild
node
node
node
m_nextSibling
lastChild
node
return
lastChild
public
ElemTemplateElement
getLastChildElem
ElemTemplateElement
lastChild
for
ElemTemplateElement
node
m_firstChild
node
node
node
m_nextSibling
lastChild
node
return
lastChild
transient
private
org
w3c
dom
Node
m_DOMBackPointer
public
org
w3c
dom
Node
getDOMBackPointer
return
m_DOMBackPointer
public
void
setDOMBackPointer
org
w3c
dom
Node
n
m_DOMBackPointer
n
public
int
compareTo
Object
o
throws
ClassCastException
ElemTemplateElement
ro
ElemTemplateElement
o
int
roPrecedence
ro
getStylesheetComposed
getImportCountComposed
int
myPrecedence
this
getStylesheetComposed
getImportCountComposed
if
myPrecedence
roPrecedence
return
else
if
myPrecedence
roPrecedence
return
else
return
this
getUid
ro
getUid
public
boolean
shouldStripWhiteSpace
org
apache
xpath
XPathContext
support
org
w3c
dom
Element
targetElement
throws
TransformerException
StylesheetRoot
sroot
this
getStylesheetRoot
return
sroot
sroot
shouldStripWhiteSpace
support
targetElement
public
boolean
canStripWhiteSpace
StylesheetRoot
sroot
this
getStylesheetRoot
return
sroot
sroot
canStripWhiteSpace
public
boolean
canAcceptVariables
return
public
void
exprSetParent
ExpressionNode
n
setParentElem
ElemTemplateElement
n
public
ExpressionNode
exprGetParent
return
getParentElem
public
void
exprAddChild
ExpressionNode
n
int
i
appendChild
ElemTemplateElement
n
public
ExpressionNode
exprGetChild
int
i
return
ExpressionNode
item
i
public
int
exprGetNumChildren
return
getLength
protected
boolean
accept
XSLTVisitor
visitor
return
visitor
visitInstruction
this
public
void
callVisitors
XSLTVisitor
visitor
if
accept
visitor
callChildVisitors
visitor
protected
void
callChildVisitors
XSLTVisitor
visitor
boolean
callAttributes
for
ElemTemplateElement
node
m_firstChild
node
node
node
m_nextSibling
node
callVisitors
visitor
protected
void
callChildVisitors
XSLTVisitor
visitor
callChildVisitors
visitor
public
boolean
handlesNullPrefixes
return
