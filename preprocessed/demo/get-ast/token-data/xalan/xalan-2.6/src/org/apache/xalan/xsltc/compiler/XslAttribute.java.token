package
org
apache
xalan
xsltc
compiler
import
java
util
Vector
import
org
apache
bcel
generic
ALOAD
import
org
apache
bcel
generic
ASTORE
import
org
apache
bcel
generic
ConstantPoolGen
import
org
apache
bcel
generic
GETFIELD
import
org
apache
bcel
generic
INVOKESTATIC
import
org
apache
bcel
generic
INVOKEVIRTUAL
import
org
apache
bcel
generic
InstructionList
import
org
apache
bcel
generic
LocalVariableGen
import
org
apache
bcel
generic
PUSH
import
org
apache
xalan
xsltc
compiler
util
ClassGenerator
import
org
apache
xalan
xsltc
compiler
util
ErrorMsg
import
org
apache
xalan
xsltc
compiler
util
MethodGenerator
import
org
apache
xalan
xsltc
compiler
util
Type
import
org
apache
xalan
xsltc
compiler
util
TypeCheckError
import
org
apache
xalan
xsltc
compiler
util
Util
import
org
apache
xml
utils
XMLChar
import
org
apache
xml
serializer
ElemDesc
import
org
apache
xml
serializer
SerializationHandler
final
class
XslAttribute
extends
Instruction
private
String
_prefix
private
AttributeValue
_name
private
AttributeValueTemplate
_namespace
private
boolean
_ignore
private
boolean
_isLiteral
public
AttributeValue
getName
return
_name
public
void
display
int
indent
indent
indent
Util
println
_name
displayContents
indent
IndentIncrement
public
void
parseContents
Parser
parser
boolean
generated
final
SymbolTable
stable
parser
getSymbolTable
String
name
getAttribute
String
namespace
getAttribute
QName
qname
parser
getQName
name
final
String
prefix
qname
getPrefix
if
prefix
prefix
equals
XMLNS_PREFIX
name
equals
XMLNS_PREFIX
reportError
this
parser
ErrorMsg
ILLEGAL_ATTR_NAME_ERR
name
return
_isLiteral
Util
isLiteral
name
if
_isLiteral
if
XMLChar
isValidQName
name
reportError
this
parser
ErrorMsg
ILLEGAL_ATTR_NAME_ERR
name
return
final
SyntaxTreeNode
parent
getParent
final
Vector
siblings
parent
getContents
for
int
i
i
parent
elementCount
i
SyntaxTreeNode
item
SyntaxTreeNode
siblings
elementAt
i
if
item
this
break
if
item
instanceof
XslAttribute
continue
if
item
instanceof
UseAttributeSets
continue
if
item
instanceof
LiteralAttribute
continue
if
item
instanceof
Text
continue
if
item
instanceof
If
continue
if
item
instanceof
Choose
continue
if
item
instanceof
CopyOf
continue
if
item
instanceof
VariableBase
continue
reportWarning
this
parser
ErrorMsg
STRAY_ATTRIBUTE_ERR
name
if
namespace
namespace
Constants
EMPTYSTRING
_prefix
lookupPrefix
namespace
_namespace
new
AttributeValueTemplate
namespace
parser
this
else
if
prefix
prefix
Constants
EMPTYSTRING
_prefix
prefix
namespace
lookupNamespace
prefix
if
namespace
_namespace
new
AttributeValueTemplate
namespace
parser
this
if
_namespace
if
_prefix
_prefix
Constants
EMPTYSTRING
if
prefix
_prefix
prefix
else
_prefix
stable
generateNamespacePrefix
generated
else
if
prefix
prefix
equals
_prefix
_prefix
prefix
name
_prefix
qname
getLocalPart
if
parent
instanceof
LiteralElement
generated
LiteralElement
parent
registerNamespace
_prefix
namespace
stable
if
parent
instanceof
LiteralElement
LiteralElement
parent
addAttribute
this
_name
AttributeValue
create
this
name
parser
parseChildren
parser
public
Type
typeCheck
SymbolTable
stable
throws
TypeCheckError
if
_ignore
_name
typeCheck
stable
if
_namespace
_namespace
typeCheck
stable
typeCheckContents
stable
return
Type
Void
public
void
translate
ClassGenerator
classGen
MethodGenerator
methodGen
final
ConstantPoolGen
cpg
classGen
getConstantPool
final
InstructionList
il
methodGen
getInstructionList
if
_ignore
return
_ignore
if
_namespace
il
append
methodGen
loadHandler
il
append
new
PUSH
cpg
_prefix
_namespace
translate
classGen
methodGen
il
append
methodGen
namespace
if
_isLiteral
LocalVariableGen
nameValue
methodGen
addLocalVariable2
Util
getJCRefType
STRING_SIG
il
getEnd
_name
translate
classGen
methodGen
il
append
new
ASTORE
nameValue
getIndex
il
append
new
ALOAD
nameValue
getIndex
final
int
check
cpg
addMethodref
BASIS_LIBRARY_CLASS
STRING_SIG
il
append
new
INVOKESTATIC
check
il
append
methodGen
loadHandler
il
append
DUP
il
append
new
ALOAD
nameValue
getIndex
else
il
append
methodGen
loadHandler
il
append
DUP
_name
translate
classGen
methodGen
if
elementCount
elementAt
instanceof
Text
il
append
new
PUSH
cpg
Text
elementAt
getText
else
il
append
classGen
loadTranslet
il
append
new
GETFIELD
cpg
addFieldref
TRANSLET_CLASS
STRING_VALUE_HANDLER_SIG
il
append
DUP
il
append
methodGen
storeHandler
translateContents
classGen
methodGen
il
append
new
INVOKEVIRTUAL
cpg
addMethodref
STRING_VALUE_HANDLER
STRING_SIG
SyntaxTreeNode
parent
getParent
if
parent
instanceof
LiteralElement
LiteralElement
parent
allAttributesUnique
int
flags
ElemDesc
elemDesc
LiteralElement
parent
getElemDesc
if
elemDesc
_name
instanceof
SimpleAttributeValue
String
attrName
SimpleAttributeValue
_name
toString
if
elemDesc
isAttrFlagSet
attrName
ElemDesc
ATTREMPTY
flags
flags
SerializationHandler
HTML_ATTREMPTY
else
if
elemDesc
isAttrFlagSet
attrName
ElemDesc
ATTRURL
flags
flags
SerializationHandler
HTML_ATTRURL
il
append
new
PUSH
cpg
flags
il
append
methodGen
uniqueAttribute
else
il
append
methodGen
attribute
il
append
methodGen
storeHandler
