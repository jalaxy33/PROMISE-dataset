package
org
apache
xml
utils
import
java
util
Vector
import
java
text
Collator
import
java
text
RuleBasedCollator
import
java
text
CollationElementIterator
import
java
util
Locale
import
java
text
CollationKey
public
class
StringComparable
implements
Comparable
public
final
static
int
UNKNOWN_CASE
public
final
static
int
UPPER_CASE
public
final
static
int
LOWER_CASE
private
String
m_text
private
Locale
m_locale
private
RuleBasedCollator
m_collator
private
String
m_caseOrder
private
int
m_mask
public
StringComparable
final
String
text
final
Locale
locale
final
Collator
collator
final
String
caseOrder
m_text
text
m_locale
locale
m_collator
RuleBasedCollator
collator
m_caseOrder
caseOrder
m_mask
getMask
m_collator
getStrength
public
final
static
Comparable
getComparator
final
String
text
final
Locale
locale
final
Collator
collator
final
String
caseOrder
if
caseOrder
caseOrder
length
return
RuleBasedCollator
collator
getCollationKey
text
else
return
new
StringComparable
text
locale
collator
caseOrder
public
final
String
toString
return
m_text
public
int
compareTo
Object
o
final
String
pattern
StringComparable
o
toString
if
m_text
equals
pattern
return
final
int
savedStrength
m_collator
getStrength
int
comp
if
savedStrength
Collator
PRIMARY
savedStrength
Collator
SECONDARY
comp
m_collator
compare
m_text
pattern
else
m_collator
setStrength
Collator
SECONDARY
comp
m_collator
compare
m_text
pattern
m_collator
setStrength
savedStrength
if
comp
return
comp
comp
getCaseDiff
m_text
pattern
if
comp
return
comp
else
return
m_collator
compare
m_text
pattern
private
final
int
getCaseDiff
final
String
text
final
String
pattern
final
int
savedStrength
m_collator
getStrength
final
int
savedDecomposition
m_collator
getDecomposition
m_collator
setStrength
Collator
TERTIARY
m_collator
setDecomposition
Collator
CANONICAL_DECOMPOSITION
final
int
diff
getFirstCaseDiff
text
pattern
m_locale
m_collator
setStrength
savedStrength
m_collator
setDecomposition
savedDecomposition
if
diff
if
m_caseOrder
equals
if
diff
UPPER_CASE
return
else
return
else
if
diff
LOWER_CASE
return
else
return
else
return
private
final
int
getFirstCaseDiff
final
String
text
final
String
pattern
final
Locale
locale
final
CollationElementIterator
targIter
m_collator
getCollationElementIterator
text
final
CollationElementIterator
patIter
m_collator
getCollationElementIterator
pattern
int
startTarg
int
endTarg
int
startPatt
int
endPatt
final
int
done
getElement
CollationElementIterator
NULLORDER
int
patternElement
targetElement
boolean
getPattern
getTarget
while
if
getPattern
startPatt
patIter
getOffset
patternElement
getElement
patIter
next
endPatt
patIter
getOffset
if
getTarget
startTarg
targIter
getOffset
targetElement
getElement
targIter
next
endTarg
targIter
getOffset
getTarget
getPattern
if
patternElement
done
targetElement
done
return
else
if
targetElement
getPattern
else
if
patternElement
getTarget
else
if
targetElement
patternElement
if
startPatt
endPatt
startTarg
endTarg
final
String
subText
text
substring
startTarg
endTarg
final
String
subPatt
pattern
substring
startPatt
endPatt
final
String
subTextUp
subText
toUpperCase
locale
final
String
subPattUp
subPatt
toUpperCase
locale
if
m_collator
compare
subTextUp
subPattUp
continue
int
diff
UNKNOWN_CASE
UNKNOWN_CASE
if
m_collator
compare
subText
subTextUp
diff
UPPER_CASE
else
if
m_collator
compare
subText
subText
toLowerCase
locale
diff
LOWER_CASE
if
m_collator
compare
subPatt
subPattUp
diff
UPPER_CASE
else
if
m_collator
compare
subPatt
subPatt
toLowerCase
locale
diff
LOWER_CASE
if
diff
UPPER_CASE
diff
LOWER_CASE
diff
LOWER_CASE
diff
UPPER_CASE
return
diff
else
continue
else
continue
private
static
final
int
getMask
final
int
strength
switch
strength
case
Collator
PRIMARY
return
case
Collator
SECONDARY
return
default
return
private
final
int
getElement
int
maxStrengthElement
return
maxStrengthElement
m_mask
